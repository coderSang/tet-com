/* eslint-disable */
import {L,ue,D,hb,G,Vd,Za,rb,Fb,Wb,Ub,ho,ng,M,Bj,U,Zo,Wo,Oo,No,Fi,Di,Ki,wc,td,rg,pg,V,Ro,sd,up,tp,Eg,Pd,ac,xb,X,Mo,cp,hc,nc,rf,xc,Hb,Kl,xe,Xg,Gh,oi,$n,go,Vm,To,gc,oc,hf,cf,wg,Qo,ii,li,so,Jd,Hg,Ho,va} from './geotoolkit.base.js';import {HG} from './geotoolkit.data.js';import {QH,dJ,eJ,gJ} from './geotoolkit.seismic.js';var aa,ha=ha||{};ha.scope={};ha.Nqc=function(c){var a=0;return function(){return a<c.length?{done:!1,value:c[a++]}:{done:!0}}};ha.Moe=function(c){return{next:ha.Nqc(c)}};ha.qXc=!1;ha.URd=!1;ha.VRd=!1;ha.Mfe=!1;ha.Acc=!1;ha.defineProperty=ha.qXc||"function"==typeof Object.defineProperties?Object.defineProperty:function(c,a,b){if(c==Array.prototype||c==Object.prototype)return c;c[a]=b.value;return c};
ha.cod=function(c){c=["object"==typeof globalThis&&globalThis,c,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof global&&global];for(var a=0;a<c.length;++a){var b=c[a];if(b&&b.Math==Math)return b}return function(){throw Error("Cannot find global object");}()};ha.global=ha.cod(this);ha.nEb="function"===typeof Symbol&&"symbol"===typeof Symbol("x");ha.hje=!ha.Acc||ha.nEb;ha.r3b={};ha.L3b={};ha.S1c="$jscp$";
function aaa(c,a){var b=ha.L3b[a];if(null==b)return c[a];b=c[b];return void 0!==b?b:c[a]}ha.lKc=function(c,a,b,d){a&&(ha.Acc?ha.ZDd(c,a,b,d):ha.$Dd(c,a,b,d))};ha.$Dd=function(c,a,b,d){b=ha.global;c=c.split(".");for(d=0;d<c.length-1;d++){var e=c[d];if(!(e in b))return;b=b[e]}c=c[c.length-1];d=b[c];a=a(d);a!=d&&null!=a&&ha.defineProperty(b,c,{configurable:!0,writable:!0,value:a})};
ha.ZDd=function(c,a,b,d){var e=c.split(".");c=1===e.length;d=e[0];d=!c&&d in ha.r3b?ha.r3b:ha.global;for(var f=0;f<e.length-1;f++){var g=e[f];if(!(g in d))return;d=d[g]}e=e[e.length-1];b=ha.nEb&&"es6"===b?d[e]:null;a=a(b);null!=a&&(c?ha.defineProperty(ha.r3b,e,{configurable:!0,writable:!0,value:a}):a!==b&&(ha.L3b[e]=ha.nEb?ha.global.Symbol(e):ha.S1c+e,e=ha.L3b[e],ha.defineProperty(d,e,{configurable:!0,writable:!0,value:a})))};ha.Ise=function(){};
ha.lKc("Symbol",function(c){function a(f){if(this instanceof a)throw new TypeError("Symbol is not a constructor");return new b(d+(f||"")+"_"+e++,f)}function b(f,g){this.oXc=f;ha.defineProperty(this,"description",{configurable:!0,writable:!0,value:g})}if(c)return c;b.prototype.toString=function(){return this.oXc};var d="jscomp_symbol_",e=0;return a},"es6","es3");ha.Kse=function(){};
ha.lKc("Symbol.iterator",function(c){if(c)return c;c=Symbol("Symbol.iterator");for(var a="Array Int8Array Uint8Array Uint8ClampedArray Int16Array Uint16Array Int32Array Uint32Array Float32Array Float64Array".split(" "),b=0;b<a.length;b++){var d=ha.global[a[b]];"function"===typeof d&&"function"!=typeof d.prototype[c]&&ha.defineProperty(d.prototype,c,{configurable:!0,writable:!0,value:function(){return ha.Nyd(ha.Nqc(this))}})}return c},"es6","es3");ha.Jse=function(){};
ha.Nyd=function(c){c={next:c};c[Symbol.iterator]=function(){return this};return c};import * as _$$THREE from './externs/THREE.js';var Ip=_$$THREE,Jp=Ip.ImageUtils,Kp=Ip.Object3D,Lp=Ip.Vector3,Mp=Ip.Vector4,Np=Ip.Scene,Op=Ip.ACESFilmicToneMapping,Pp=Ip.AddEquation,Qp=Ip.AddOperation,Rp=Ip.AdditiveAnimationBlendMode,Sp=Ip.AdditiveBlending,Tp=Ip.AlphaFormat,Up=Ip.AlwaysDepth,Vp=Ip.AlwaysStencilFunc,Wp=Ip.AmbientLight,Xp=Ip.AmbientLightProbe,Yp=Ip.AnimationClip,Zp=Ip.AnimationLoader,$p=Ip.AnimationMixer,aq=Ip.AnimationObjectGroup,bq=Ip.AnimationUtils,cq=Ip.ArcCurve,dq=Ip.ArrayCamera,eq=Ip.ArrowHelper,fq=Ip.Audio,gq=Ip.AudioAnalyser,
hq=Ip.AudioContext,iq=Ip.AudioListener,jq=Ip.AudioLoader,kq=Ip.AxesHelper,lq=Ip.KXc,mq=Ip.BackSide,nq=Ip.BasicDepthPacking,oq=Ip.BasicShadowMap,pq=Ip.OXc,qq=Ip.Bone,rq=Ip.BooleanKeyframeTrack,sq=Ip.SXc,tq=Ip.Box2,uq=Ip.Box3,vq=Ip.Box3Helper,wq=Ip.BoxBufferGeometry,xq=Ip.BoxGeometry,yq=Ip.BoxHelper,zq=Ip.BufferAttribute,Aq=Ip.BufferGeometry,Bq=Ip.BufferGeometryLoader,Cq=Ip.ByteType,Dq=Ip.Cache,Eq=Ip.Camera,Fq=Ip.CameraHelper,Gq=Ip.gYc,Hq=Ip.CanvasTexture,Iq=Ip.CatmullRomCurve3,Jq=Ip.CineonToneMapping,
Kq=Ip.CircleBufferGeometry,Lq=Ip.CircleGeometry,Mq=Ip.ClampToEdgeWrapping,Nq=Ip.Clock,Oq=Ip.xYc,Pq=Ip.Color,Qq=Ip.ColorKeyframeTrack,Rq=Ip.CompressedTexture,Sq=Ip.CompressedTextureLoader,Tq=Ip.ConeBufferGeometry,Uq=Ip.ConeGeometry,Vq=Ip.CubeCamera,Wq=Ip.CubeReflectionMapping,Xq=Ip.CubeRefractionMapping,Yq=Ip.CubeTexture,Zq=Ip.CubeTextureLoader,$q=Ip.CubeUVReflectionMapping,br=Ip.CubeUVRefractionMapping,cr=Ip.CubicBezierCurve,dr=Ip.CubicBezierCurve3,er=Ip.CubicInterpolant,fr=Ip.CullFaceBack,gr=Ip.CullFaceFront,
hr=Ip.CullFaceFrontBack,ir=Ip.CullFaceNone,kr=Ip.Curve,lr=Ip.CurvePath,mr=Ip.CustomBlending,nr=Ip.GYc,or=Ip.CylinderBufferGeometry,pr=Ip.CylinderGeometry,qr=Ip.Cylindrical,rr=Ip.DataTexture,sr=Ip.DataTexture2DArray,tr=Ip.DataTexture3D,ur=Ip.DataTextureLoader,vr=Ip.DecrementStencilOp,wr=Ip.DecrementWrapStencilOp,xr=Ip.DefaultLoadingManager,yr=Ip.DepthFormat,zr=Ip.DepthStencilFormat,Ar=Ip.DepthTexture,Br=Ip.DirectionalLight,Cr=Ip.DirectionalLightHelper,Dr=Ip.DiscreteInterpolant,Er=Ip.DodecahedronBufferGeometry,
Fr=Ip.DodecahedronGeometry,Gr=Ip.DoubleSide,Hr=Ip.DstAlphaFactor,Ir=Ip.DstColorFactor,Jr=Ip.mZc,Kr=Ip.DynamicCopyUsage,Lr=Ip.DynamicDrawUsage,Mr=Ip.DynamicReadUsage,Nr=Ip.EdgesGeometry,Or=Ip.IZc,Pr=Ip.EllipseCurve,Qr=Ip.EqualDepth,Sr=Ip.EqualStencilFunc,Tr=Ip.EquirectangularReflectionMapping,Ur=Ip.EquirectangularRefractionMapping,Vr=Ip.Euler,Wr=Ip.EventDispatcher,Xr=Ip.ExtrudeBufferGeometry,Yr=Ip.ExtrudeGeometry,Zr=Ip.UZc,$r=Ip.VZc,as=Ip.FaceColors,bs=Ip.FileLoader,cs=Ip.FlatShading,ds=Ip.Float32Attribute,
es=Ip.Float32BufferAttribute,fs=Ip.Float64Attribute,gs=Ip.Float64BufferAttribute,hs=Ip.FloatType,is=Ip.Fog,js=Ip.FogExp2,ks=Ip.Font,ls=Ip.FontLoader,ms=Ip.FrontSide,ns=Ip.Frustum,os=Ip.GLBufferAttribute,ps=Ip.GLSL1,qs=Ip.GLSL3,rs=Ip.GammaEncoding,ss=Ip.ecc,ts=Ip.GeometryUtils,us=Ip.GreaterDepth,vs=Ip.GreaterEqualDepth,ws=Ip.GreaterEqualStencilFunc,xs=Ip.GreaterStencilFunc,ys=Ip.GridHelper,zs=Ip.Group,As=Ip.HalfFloatType,Bs=Ip.HemisphereLight,Cs=Ip.HemisphereLightHelper,Ds=Ip.HemisphereLightProbe,
Es=Ip.IcosahedronBufferGeometry,Fs=Ip.IcosahedronGeometry,Gs=Ip.ImageBitmapLoader,Hs=Ip.ImageLoader,Is=Ip.ImmediateRenderObject,Js=Ip.IncrementStencilOp,Ks=Ip.IncrementWrapStencilOp,Ls=Ip.InstancedBufferAttribute,Ms=Ip.InstancedBufferGeometry,Ns=Ip.InstancedInterleavedBuffer,Os=Ip.InstancedMesh,Ps=Ip.Int16Attribute,Qs=Ip.Int16BufferAttribute,Rs=Ip.Int32Attribute,Ss=Ip.Int32BufferAttribute,Ts=Ip.Int8Attribute,Us=Ip.Int8BufferAttribute,Vs=Ip.IntType,Ws=Ip.InterleavedBuffer,Xs=Ip.InterleavedBufferAttribute,
Ys=Ip.Interpolant,Zs=Ip.InterpolateDiscrete,$s=Ip.InterpolateLinear,at=Ip.InterpolateSmooth,bt=Ip.InvertStencilOp,ct=Ip.n0c,dt=Ip.KeepStencilOp,et=Ip.KeyframeTrack,ft=Ip.LOD,gt=Ip.LatheBufferGeometry,ht=Ip.LatheGeometry,it=Ip.Layers,jt=Ip.K0c,kt=Ip.LessDepth,lt=Ip.LessEqualDepth,mt=Ip.LessEqualStencilFunc,nt=Ip.LessStencilFunc,ot=Ip.Light,pt=Ip.LightProbe,qt=Ip.LightShadow,rt=Ip.Line,st=Ip.Line3,tt=Ip.LineBasicMaterial,ut=Ip.LineCurve,vt=Ip.LineCurve3,wt=Ip.LineDashedMaterial,xt=Ip.LineLoop,yt=Ip.LinePieces,
zt=Ip.LineSegments,At=Ip.LineStrip,Bt=Ip.LinearEncoding,Ct=Ip.LinearFilter,Dt=Ip.LinearInterpolant,Et=Ip.LinearMipMapLinearFilter,Ft=Ip.LinearMipMapNearestFilter,Ht=Ip.LinearMipmapLinearFilter,It=Ip.LinearMipmapNearestFilter,Jt=Ip.LinearToneMapping,Kt=Ip.Loader,Lt=Ip.LoaderUtils,Mt=Ip.LoadingManager,Nt=Ip.LogLuvEncoding,Ot=Ip.LoopOnce,Pt=Ip.LoopPingPong,Qt=Ip.LoopRepeat,Rt=Ip.LuminanceAlphaFormat,St=Ip.LuminanceFormat,Tt=Ip.MOUSE,Ut=Ip.Material,Vt=Ip.MaterialLoader,Wt=Ip.MathUtils,Xt=Ip.Matrix3,Yt=
Ip.Matrix4,Zt=Ip.MaxEquation,$t=Ip.Mesh,au=Ip.MeshBasicMaterial,bu=Ip.MeshDepthMaterial,cu=Ip.MeshDistanceMaterial,du=Ip.j1c,eu=Ip.MeshLambertMaterial,fu=Ip.MeshMatcapMaterial,gu=Ip.MeshNormalMaterial,hu=Ip.MeshPhongMaterial,iu=Ip.MeshPhysicalMaterial,ju=Ip.MeshStandardMaterial,ku=Ip.MeshToonMaterial,lu=Ip.MinEquation,mu=Ip.MirroredRepeatWrapping,nu=Ip.MixOperation,ou=Ip.p1c,pu=Ip.MultiplyBlending,qu=Ip.MultiplyOperation,ru=Ip.NearestFilter,su=Ip.NearestMipMapLinearFilter,tu=Ip.NearestMipMapNearestFilter,
uu=Ip.NearestMipmapLinearFilter,vu=Ip.NearestMipmapNearestFilter,wu=Ip.NeverDepth,xu=Ip.NeverStencilFunc,yu=Ip.NoBlending,zu=Ip.NoColors,Au=Ip.NoToneMapping,Bu=Ip.NormalAnimationBlendMode,Cu=Ip.NormalBlending,Du=Ip.NotEqualDepth,Eu=Ip.NotEqualStencilFunc,Fu=Ip.NumberKeyframeTrack,Hu=Ip.ObjectLoader,Iu=Ip.ObjectSpaceNormalMap,Ju=Ip.OctahedronBufferGeometry,Ku=Ip.OctahedronGeometry,Lu=Ip.OneFactor,Mu=Ip.OneMinusDstAlphaFactor,Nu=Ip.OneMinusDstColorFactor,Ou=Ip.OneMinusSrcAlphaFactor,Pu=Ip.OneMinusSrcColorFactor,
Qu=Ip.OrthographicCamera,Ru=Ip.PCFShadowMap,Su=Ip.PCFSoftShadowMap,Tu=Ip.PMREMGenerator,Uu=Ip.ParametricBufferGeometry,Vu=Ip.ParametricGeometry,Wu=Ip.V1c,Xu=Ip.W1c,Yu=Ip.X1c,Zu=Ip.Y1c,$u=Ip.Path,av=Ip.PerspectiveCamera,bv=Ip.Plane,cv=Ip.PlaneBufferGeometry,dv=Ip.PlaneGeometry,ev=Ip.PlaneHelper,fv=Ip.rFb,gv=Ip.Bdc,hv=Ip.PointLight,iv=Ip.PointLightHelper,jv=Ip.Points,kv=Ip.PointsMaterial,lv=Ip.PolarGridHelper,mv=Ip.PolyhedronBufferGeometry,nv=Ip.PolyhedronGeometry,ov=Ip.PositionalAudio,pv=Ip.PropertyBinding,
qv=Ip.PropertyMixer,rv=Ip.QuadraticBezierCurve,sv=Ip.QuadraticBezierCurve3,tv=Ip.Quaternion,uv=Ip.QuaternionKeyframeTrack,vv=Ip.QuaternionLinearInterpolant,wv=Ip.REVISION,xv=Ip.RGBADepthPacking,yv=Ip.RGBAFormat,zv=Ip.RGBAIntegerFormat,Av=Ip.RGBA_ASTC_10x10_Format,Bv=Ip.RGBA_ASTC_10x5_Format,Cv=Ip.RGBA_ASTC_10x6_Format,Dv=Ip.RGBA_ASTC_10x8_Format,Ev=Ip.RGBA_ASTC_12x10_Format,Fv=Ip.RGBA_ASTC_12x12_Format,Gv=Ip.RGBA_ASTC_4x4_Format,Hv=Ip.RGBA_ASTC_5x4_Format,Iv=Ip.RGBA_ASTC_5x5_Format,Jv=Ip.RGBA_ASTC_6x5_Format,
Kv=Ip.RGBA_ASTC_6x6_Format,Lv=Ip.RGBA_ASTC_8x5_Format,Mv=Ip.RGBA_ASTC_8x6_Format,Nv=Ip.RGBA_ASTC_8x8_Format,Ov=Ip.RGBA_BPTC_Format,Pv=Ip.RGBA_ETC2_EAC_Format,Qv=Ip.RGBA_PVRTC_2BPPV1_Format,Rv=Ip.RGBA_PVRTC_4BPPV1_Format,Sv=Ip.RGBA_S3TC_DXT1_Format,Tv=Ip.RGBA_S3TC_DXT3_Format,Uv=Ip.RGBA_S3TC_DXT5_Format,Vv=Ip.RGBDEncoding,Wv=Ip.RGBEEncoding,Xv=Ip.RGBEFormat,Yv=Ip.RGBFormat,Zv=Ip.RGBIntegerFormat,$v=Ip.RGBM16Encoding,aw=Ip.RGBM7Encoding,bw=Ip.RGB_ETC1_Format,cw=Ip.RGB_ETC2_Format,dw=Ip.RGB_PVRTC_2BPPV1_Format,
ew=Ip.RGB_PVRTC_4BPPV1_Format,fw=Ip.RGB_S3TC_DXT1_Format,gw=Ip.RGFormat,hw=Ip.RGIntegerFormat,iw=Ip.RawShaderMaterial,jw=Ip.Ray,kw=Ip.Raycaster,lw=Ip.RectAreaLight,mw=Ip.RedFormat,nw=Ip.RedIntegerFormat,ow=Ip.ReinhardToneMapping,pw=Ip.RepeatWrapping,qw=Ip.ReplaceStencilOp,rw=Ip.ReverseSubtractEquation,sw=Ip.RingBufferGeometry,tw=Ip.RingGeometry,uw=Ip.SRGB8_ALPHA8_ASTC_10x10_Format,vw=Ip.SRGB8_ALPHA8_ASTC_10x5_Format,ww=Ip.SRGB8_ALPHA8_ASTC_10x6_Format,xw=Ip.SRGB8_ALPHA8_ASTC_10x8_Format,yw=Ip.SRGB8_ALPHA8_ASTC_12x10_Format,
zw=Ip.SRGB8_ALPHA8_ASTC_12x12_Format,Aw=Ip.SRGB8_ALPHA8_ASTC_4x4_Format,Bw=Ip.SRGB8_ALPHA8_ASTC_5x4_Format,Cw=Ip.SRGB8_ALPHA8_ASTC_5x5_Format,Dw=Ip.SRGB8_ALPHA8_ASTC_6x5_Format,Ew=Ip.SRGB8_ALPHA8_ASTC_6x6_Format,Fw=Ip.SRGB8_ALPHA8_ASTC_8x5_Format,Gw=Ip.SRGB8_ALPHA8_ASTC_8x6_Format,Hw=Ip.SRGB8_ALPHA8_ASTC_8x8_Format,Iw=Ip.U2c,Jw=Ip.ShaderChunk,Kw=Ip.ShaderLib,Lw=Ip.ShaderMaterial,Mw=Ip.ShadowMaterial,Nw=Ip.Shape,Ow=Ip.ShapeBufferGeometry,Pw=Ip.ShapeGeometry,Qw=Ip.ShapePath,Rw=Ip.ShapeUtils,Sw=Ip.ShortType,
Tw=Ip.Skeleton,Uw=Ip.SkeletonHelper,Vw=Ip.SkinnedMesh,Ww=Ip.SmoothShading,Xw=Ip.Sphere,Yw=Ip.SphereBufferGeometry,Zw=Ip.SphereGeometry,$w=Ip.Spherical,ax=Ip.SphericalHarmonics3,bx=Ip.UT,cx=Ip.SplineCurve,dx=Ip.n3c,ex=Ip.SpotLight,fx=Ip.SpotLightHelper,gx=Ip.Sprite,hx=Ip.SpriteMaterial,ix=Ip.SrcAlphaFactor,jx=Ip.SrcAlphaSaturateFactor,kx=Ip.SrcColorFactor,lx=Ip.StaticCopyUsage,mx=Ip.StaticDrawUsage,nx=Ip.StaticReadUsage,ox=Ip.StereoCamera,px=Ip.StreamCopyUsage,qx=Ip.StreamDrawUsage,rx=Ip.StreamReadUsage,
sx=Ip.StringKeyframeTrack,tx=Ip.SubtractEquation,ux=Ip.SubtractiveBlending,vx=Ip.TOUCH,wx=Ip.TangentSpaceNormalMap,xx=Ip.TetrahedronBufferGeometry,yx=Ip.TetrahedronGeometry,zx=Ip.TextBufferGeometry,Ax=Ip.TextGeometry,Bx=Ip.Texture,Cx=Ip.TextureLoader,Dx=Ip.TorusBufferGeometry,Ex=Ip.TorusGeometry,Fx=Ip.TorusKnotBufferGeometry,Gx=Ip.TorusKnotGeometry,Hx=Ip.Triangle,Ix=Ip.TriangleFanDrawMode,Jx=Ip.TriangleStripDrawMode,Kx=Ip.TrianglesDrawMode,Lx=Ip.TubeBufferGeometry,Mx=Ip.TubeGeometry,Nx=Ip.UVMapping,
Ox=Ip.Uint16Attribute,Px=Ip.Uint16BufferAttribute,Qx=Ip.Uint32Attribute,Rx=Ip.Uint32BufferAttribute,Sx=Ip.Uint8Attribute,Tx=Ip.Uint8BufferAttribute,Ux=Ip.Uint8ClampedAttribute,Vx=Ip.Uint8ClampedBufferAttribute,Wx=Ip.Uniform,Xx=Ip.UniformsLib,Yx=Ip.UniformsUtils,Zx=Ip.UnsignedByteType,$x=Ip.UnsignedInt248Type,ay=Ip.UnsignedIntType,by=Ip.UnsignedShort4444Type,cy=Ip.UnsignedShort5551Type,dy=Ip.UnsignedShort565Type,ey=Ip.UnsignedShortType,fy=Ip.VSMShadowMap,gy=Ip.Vector2,hy=Ip.VectorKeyframeTrack,iy=
Ip.g4c,jy=Ip.VertexColors,ky=Ip.VideoTexture,ly=Ip.WebGL1Renderer,my=Ip.WebGLCubeRenderTarget,ny=Ip.WebGLMultisampleRenderTarget,oy=Ip.WebGLRenderTarget,py=Ip.o4c,qy=Ip.WebGLRenderer,ry=Ip.WebGLUtils,sy=Ip.WireframeGeometry,ty=Ip.r4c,uy=Ip.WrapAroundEnding,vy=Ip.t4c,wy=Ip.ZeroCurvatureEnding,xy=Ip.ZeroFactor,yy=Ip.ZeroSlopeEnding,zy=Ip.ZeroStencilOp,Ay=Ip.sRGBEncoding,By=_$$THREE.Math;var Cy=/*#__PURE__*/va(/*#__PURE__*/{f0b:"IJ",g0b:"IJFLIPPED",vg:"XY"},2,"eyJpaiI6ImYwYiIsImlqZmxpcHBlZCI6ImcwYiIsInh5IjoidmcifSAg"),Dy=/*#__PURE__*/va(/*#__PURE__*/{UCb:0,Qec:1,jB:2},2,"eyJCbGFja0FuZFdoaXRlIjoiVUNiIiwiVGVycmFyaXVtIjoiUWVjIiwiTm9ybWFsIjoiakIifSAg"),Ey=/*#__PURE__*/va(/*#__PURE__*/{Ifb:0,Aa:10,Ca:20,Rf:30},2,"eyJJZCI6IklmYiIsIlgiOiJBYSIsIlkiOiJDYSIsIloiOiJSZiJ9"),Fy=/*#__PURE__*/{NoColors:zu,FaceColors:as,VertexColors:jy},Gy=/*#__PURE__*/{FrontSide:ms,BackSide:mq,DoubleSide:Gr},Hy=/*#__PURE__*/{start:"start",end:"end"},Iy=/*#__PURE__*/va(/*#__PURE__*/{hec:"ssaa",VDb:"fxaa",EFb:"sraa"},2,"eyJTU0FBIjoiaGVjIiwiRlhBQSI6IlZEYiIsIlNSQUEiOiJFRmIifSAg"),Jy=/*#__PURE__*/function(){function c(){}L(c,"geotoolkit3d.Constants");c.W2c=Cy;c.w_c=Dy;c.$1c=Ey;c.WG=Fy;c.Side=Gy;c.zXc=Hy;c.DXc=Iy;return c}();var Ly=/*#__PURE__*/va(/*#__PURE__*/{onContext:"onContext",onMouseDown:"onMouseDown",onMouseMove:"onMouseMove",onMouseUp:"onMouseUp",onMouseWheel:"onMouseWheel",onTouchStart:"onTouchStart",onTouchEnd:"onTouchEnd",onTouchMove:"onTouchMove",onDoubleClick:"onDoubleClick",onKeyDown:"onKeyDown",onKeyUp:"onKeyUp",onPointerStart:"onPointerStart",onPointerMove:"onPointerMove",onPointerEnd:"onPointerEnd"},2,"eyJvbkNvbnRleHQiOiJySGEiLCJvbk1vdXNlRG93biI6IlhjIiwib25Nb3VzZU1vdmUiOiJBYyIsIm9uTW91c2VVcCI6Ik9jIiwib25Nb3VzZVdoZWVsIjoienAiLCJvblRvdWNoU3RhcnQiOiJ3SGEiLCJvblRvdWNoRW5kIjoidUhhIiwib25Ub3VjaE1vdmUiOiJ2SGEiLCJvbkRvdWJsZUNsaWNrIjoiTHEiLCJvbktleURvd24iOiJVdyIsIm9uS2V5VXAiOiIkUyIsIm9uUG9pbnRlclN0YXJ0IjoiSEJkIiwib25Qb2ludGVyTW92ZSI6IkdCZCIsIm9uUG9pbnRlckVuZCI6IkZCZCJ9"),My=/*#__PURE__*/va(/*#__PURE__*/function(){function c(b){ue.call(this,b);this.lJ=this.Md=this.Qg=this.lc=null;this.setOptions(b)}D(c,ue);L(c,"geotoolkit3d.tool.devicesupport.AbstractDeviceSupport");
c.Ja=Ly;c.prototype.setup=function(b,d,e){var f=this;f.Cia=function(g){f.notify("onContext",f,g);f.lJ=g};f.wR=function(g){f.notify("onMouseWheel",f,g);f.lJ=g};f.Pja=function(g){f.notify("onKeyDown",f,g)};f.Qja=function(g){f.notify("onKeyUp",f,g)};f.qOa=function(g){f.I3(g);f.notify("onMouseUp",f,g);f.lJ=g};f.INb=function(g){f.I3(g);f.notify("onMouseOut",f,g);f.lJ=g};f.oOa=function(g){f.I3(g);f.notify("onMouseDown",f,g);f.lJ=g};f.mOa=function(g){f.I3(g);f.notify("onDoubleClick",f,g);f.lJ=g};f.pOa=function(g){if(null==
f.lJ||f.lJ.clientX!==g.clientX||f.lJ.clientY!==g.clientY)f.I3(g),f.notify("onMouseMove",f,g)}};c.Yp=function(){hb("AbstractDeviceSupport.isSupported() has to be overriden");return!1};c.prototype.setOptions=function(b){b=G(b,{domelement:this.Md,plot:this.lc,target:this.Qg});this.lc=b.plot;this.Qg=b.target;this.Md!==b.domelement&&(null!=this.Md&&this.dispose(),this.Md=b.domelement,this.setup(this.lc,this.Md,this.Qg));return this};c.prototype.ta=function(){return{plot:this.lc,target:this.Qg,domelement:this.Md}};
var a=new Vd;c.prototype.F6a=function(b,d){var e=this.Md.getBoundingClientRect(),f=this.lc.getSize(a);return b={x:(b-e.left)/(e.right-e.left)*f.ca(),y:(d-e.top)/(e.bottom-e.top)*f.da()}};c.prototype.dispose=function(){this.Md=this.Qg=this.lc=null;ue.prototype.dispose.call(this)};return c}(),2,"eyJpc1N1cHBvcnRlZCI6IllwIiwicHJvdG90eXBlIjp7InMiOjAsImMiOnsiZ2V0T3B0aW9ucyI6InRhIn19fSAg");var Oy=/*#__PURE__*/function(){function c(e){My.call(this,e)}function a(e){e.Md.addEventListener(d.contextmenu,e.Cia,!1);e.Md.addEventListener(d.mousedown,e.oOa,!1);e.Md.addEventListener(d.mousemove,e.pOa,!1);e.Md.addEventListener(d.mouseup,e.qOa,!1);e.Md.addEventListener(d.wheel,e.wR,!1);e.Md.addEventListener(d.DOMMouseScroll,e.wR,!1);e.Md.addEventListener(d.touchstart,e.wQb,!1);e.Md.addEventListener(d.touchend,e.uQb,!1);e.Md.addEventListener(d.touchmove,e.vQb,!1);e.Md.addEventListener(d.dblclick,e.mOa,!1);Za.addEventListener("keydown",
e.Pja,!1);Za.addEventListener("keyup",e.Qja,!1)}function b(e){e.Md.removeEventListener(d.contextmenu,e.Cia,!1);e.Md.removeEventListener(d.mousedown,e.oOa,!1);e.Md.removeEventListener(d.mousemove,e.pOa,!1);e.Md.removeEventListener(d.mouseup,e.qOa,!1);e.Md.removeEventListener(d.wheel,e.wR,!1);e.Md.removeEventListener(d.DOMMouseScroll,e.wR,!1);e.Md.removeEventListener(d.touchstart,e.wQb,!1);e.Md.removeEventListener(d.touchend,e.uQb,!1);e.Md.removeEventListener(d.touchmove,e.vQb,!1);e.Md.removeEventListener(d.dblclick,
e.mOa,!1);Za.removeEventListener("keydown",e.Pja,!1);Za.removeEventListener("keyup",e.Qja,!1);e.Cia=null;e.oOa=null;e.pOa=null;e.qOa=null;e.wR=null;e.wQb=null;e.uQb=null;e.vQb=null;e.mOa=null;e.Pja=null;e.Qja=null}var d={contextmenu:"contextmenu",mousedown:"mousedown",mousemove:"mousemove",mouseup:"mouseup",wheel:"wheel",DOMMouseScroll:"DOMMouseScroll",touchstart:"touchstart",touchend:"touchend",touchmove:"touchmove",dblclick:"dblclick"};D(c,My);L(c,"geotoolkit3d.tool.devicesupport.TouchDeviceSupport");
c.Yp=function(){return"ontouchstart"in Za};c.prototype.I3=function(e){var f=this.F6a(e.clientX,e.clientY);e.plotX=f.x;e.plotY=f.y;e.plotXs=[e.plotX];e.plotYs=[e.plotY]};c.prototype.setup=function(e,f,g){function h(m){m.plotXs=[];m.plotYs=[];for(var n=0;n<m.touches.length;n++){var p=k.F6a(m.touches[n].clientX,m.touches[n].clientY);m.plotXs.push(p.x);m.plotYs.push(p.y)}0===m.touches.length&&(n=k.F6a(l.touches[n].clientX,l.touches[n].clientY),m.plotXs.push(n.x),m.plotYs.push(n.y));m.plotX=m.plotXs[0];
m.plotY=m.plotYs[0]}var k=this,l=null;k.wQb=function(m){l=m;h(m);k.notify("onTouchStart",k,m)};k.uQb=function(m){h(m);k.notify("onTouchEnd",k,m);0<m.touches.length&&k.notify("onTouchStart",k,m)};k.vQb=function(m){l=m;h(m);k.notify("onTouchMove",k,m)};My.prototype.setup.call(this,e,f,g);a(this)};c.prototype.dispose=function(){b(this);My.prototype.dispose.call(this)};return c}();var Py=/*#__PURE__*/function(){function c(e){My.call(this,e);this.dd={kS:[],running:!1,visible:!1}}function a(e){e.Md.addEventListener(d.contextmenu,e.Cia,!1);e.Md.addEventListener(d.wheel,e.wR,!1);e.Md.addEventListener(d.DOMMouseScroll,e.wR,!1);e.Md.addEventListener(d.touchstart,e.Vmb,!1);e.Md.addEventListener(d.touchend,e.Umb,!1);e.Md.addEventListener(d.touchmove,e.iOb,!1);e.Md.addEventListener(d.touchout,e.jOb,!1);Za.addEventListener("keydown",e.Pja,!1);Za.addEventListener("keyup",e.Qja,!1)}function b(e){e.Md.removeEventListener(d.contextmenu,
e.Cia,!1);e.Md.removeEventListener(d.wheel,e.wR,!1);e.Md.removeEventListener(d.DOMMouseScroll,e.wR,!1);e.Md.removeEventListener(d.touchstart,e.Vmb,!1);e.Md.removeEventListener(d.touchend,e.Umb,!1);e.Md.removeEventListener(d.touchmove,e.iOb,!1);e.Md.removeEventListener(d.touchout,e.jOb,!1);Za.removeEventListener("keydown",e.Pja,!1);Za.removeEventListener("keyup",e.Qja,!1);e.Cia=null;e.wR=null;e.Vmb=null;e.Umb=null;e.iOb=null;e.jOb=null;e.Pja=null;e.Qja=null}var d={contextmenu:"contextmenu",wheel:"wheel",
DOMMouseScroll:"DOMMouseScroll",touchstart:"pointerdown",touchend:"pointerup",touchout:"pointerout",touchmove:"pointermove"};D(c,My);L(c,"geotoolkit3d.tool.devicesupport.PointerDeviceSupport");c.Yp=function(){return null!=Za.PointerEvent};c.prototype.I3=function(e,f){var g=this.F6a(e.clientX,e.clientY);e.plotX=Math.floor(g.x);e.plotY=Math.floor(g.y);e.plotXs=[];e.plotYs=[];g=!1;for(var h=0;h<f.length;h++)f[h].pointerId===e.pointerId?(e.plotXs.push(e.plotX),e.plotYs.push(e.plotY),f[h]=e,g=!0):(e.plotXs.push(f[h].plotX),
e.plotYs.push(f[h].plotY));g||(e.plotXs.push(e.plotX),e.plotYs.push(e.plotY));"touch"===e.pointerType||this.dd.visible||(this.dd.visible=!0,e.windowVisibility="visible",this.notify("onVisibilityChanged",this,e))};c.prototype.setup=function(e,f,g){var h=this;h.Vmb=function(k){h.I3(k,h.dd.kS);"touch"===k.pointerType?(h.dd.running&&(h.notify("onTouchEnd",h,k),h.dd.running=!1),h.dd.kS.push(k)):h.notify("onMouseDown",h,k);h.lJ=k};h.Umb=function(k){h.I3(k,h.dd.kS);if("touch"===k.pointerType){var l=!1,m;
for(m=0;m<h.dd.kS.length;m++)if(h.dd.kS[m].pointerId===k.pointerId){l=!0;break}if(!l)return;h.dd.kS.splice(m,1);h.notify("onTouchEnd",h,k);h.dd.running=!1;0<h.dd.kS.length&&(h.I3(h.dd.kS[h.dd.kS.length-1],h.dd.kS),h.notify("onTouchStart",h,k),h.dd.running=!0)}else h.notify("onMouseUp",h,k);h.lJ=k};h.iOb=function(k){if(null==h.lJ||h.lJ.clientX!==k.clientX||h.lJ.clientY!==k.clientY||h.lJ.movementX!==k.movementX||h.lJ.movementY!==k.movementY){h.I3(k,h.dd.kS);if("touch"===k.pointerType){h.dd.running||
(0===h.dd.kS.length&&h.Vmb(k),h.notify("onTouchStart",h,k),h.dd.running=!0);if(3===h.dd.kS.length&&h.dd.kS[0].pointerId!==k.pointerId)return;h.notify("onTouchMove",h,k)}else h.notify("onMouseMove",h,k);h.lJ=k}};h.jOb=function(k){"touch"===k.pointerType?h.Umb(k):(h.I3(k,h.dd.kS),h.notify("onMouseOut",h,k),h.dd.visible&&(h.dd.visible=!1,k.windowVisibility="hidden",h.notify("onVisibilityChanged",h,k)),h.lJ=k)};My.prototype.setup.call(this,e,f,g);a(this)};c.prototype.dispose=function(){b(this);My.prototype.dispose.call(this)};
return c}();var Qy=/*#__PURE__*/function(){function c(e){My.call(this,e);this.V8="";this.Q0a="hidden";this.Q0a in Za.document?this.V8="visibilitychange":(this.Q0a="mozHidden")in Za.document?this.V8="mozvisibilitychange":(this.Q0a="webkitHidden")in Za.document?this.V8="webkitvisibilitychange":(this.Q0a="msHidden")in Za.document?this.V8="msvisibilitychange":"onfocusin"in Za.document&&(this.V8="onfocuschange")}function a(e){e.Md.addEventListener(d.contextmenu,e.Cia,!1);e.Md.addEventListener(d.mousedown,e.oOa,!1);e.Md.addEventListener(d.mousemove,
e.pOa,!1);e.Md.addEventListener(d.mouseup,e.qOa,!1);e.Md.addEventListener(d.wheel,e.wR,!1);e.Md.addEventListener(d.DOMMouseScroll,e.wR,!1);e.Md.addEventListener(d.dblclick,e.mOa,!1);e.Md.addEventListener(d.mouseout,e.INb,!1);Za.addEventListener("keydown",e.Pja,!1);Za.addEventListener("keyup",e.Qja,!1);"onfocuschange"===e.V8?Za.document.onfocusin=Za.document.onfocusout=e.qCa:""===e.V8?Za.onpageshow=Za.onpagehide=Za.onfocus=Za.onblur=e.coe:Za.document.addEventListener(e.V8,e.qCa);Za.addEventListener("blur",
e.qCa);Za.addEventListener("focus",e.qCa)}function b(e){e.Md.removeEventListener(d.contextmenu,e.Cia,!1);e.Md.removeEventListener(d.mousedown,e.oOa,!1);e.Md.removeEventListener(d.mousemove,e.pOa,!1);e.Md.removeEventListener(d.mouseup,e.qOa,!1);e.Md.removeEventListener(d.wheel,e.wR,!1);e.Md.removeEventListener(d.DOMMouseScroll,e.wR,!1);e.Md.removeEventListener(d.dblclick,e.mOa,!1);e.Md.removeEventListener(d.mouseout,e.INb,!1);Za.removeEventListener("keydown",e.Pja,!1);Za.removeEventListener("keyup",
e.Qja,!1);"onfocuschange"===e.V8?Za.document.onfocusin=Za.document.onfocusout=null:""===e.V8?Za.onpageshow=Za.onpagehide=Za.onfocus=Za.onblur=null:Za.document.removeEventListener(e.V8,e.qCa,!1);Za.removeEventListener("blur",e.qCa,!1);Za.removeEventListener("focus",e.qCa,!1);e.Cia=null;e.oOa=null;e.pOa=null;e.qOa=null;e.INb=null;e.wR=null;e.mOa=null;e.Pja=null;e.Qja=null}var d={contextmenu:"contextmenu",mousedown:"mousedown",mousemove:"mousemove",mouseup:"mouseup",wheel:"wheel",DOMMouseScroll:"DOMMouseScroll",
dblclick:"dblclick",mouseout:"mouseout"};D(c,My);L(c,"geotoolkit3d.tool.devicesupport.MouseDeviceSupport");c.Yp=function(){return!0};c.prototype.I3=function(e){var f=this.F6a(e.clientX,e.clientY);e.plotX=f.x;e.plotY=f.y;e.plotXs=[e.plotX];e.plotYs=[e.plotY]};c.prototype.setup=function(e,f,g){function h(l){if("blur"===l.type)l.eXc="hidden";else if("focus"===l.type)l.eXc="visible";else{var m="visible",n="hidden";m={focus:m,zqe:m,Lue:m,blur:n,Aqe:n,Kue:n};l=l||Za.event;l.eXc=l.type in m?m[l.type]:this[this.Q0a]?
"hidden":"visible"}}var k=this;k.qCa=function(l){h(l);k.notify("onVisibilityChanged",k,l)};My.prototype.setup.call(this,e,f,g);a(this)};c.prototype.dispose=function(){b(this);My.prototype.dispose.call(this)};return c}();var Ry=/*#__PURE__*/va(/*#__PURE__*/function(){function c(){}var a=[],b=null;c.POc=function(d){b=d};c.gzc=function(){for(var d=null,e=0;e<a.length;e++)if(d=a[e],null==d.Yp)rb("Warning: "+d.Oa()+" is not implementing isSupported()");else if(d.Yp())break;else d=null;return null!=d?d:b};c.lWb=function(){return a};L(c,"geotoolkit3d.tool.devicesupport.DeviceSupportRegistry");c.lWb().push(Oy);c.lWb().push(Py);c.POc(Qy);return c}(),2,"eyJzZXREZWZhdWx0RGV2aWNlU3VwcG9ydCI6IlBPYyIsImdldERldmljZVN1cHBvcnQiOiJnemMiLCJnZXRBbGxEZXZpY2VTdXBwb3J0IjoibFdiIn0g");var Sy=/*#__PURE__*/va(/*#__PURE__*/{onContext:"onContext",onMouseDown:"onMouseDown",onMouseMove:"onMouseMove",onMouseUp:"onMouseUp",onMouseWheel:"onMouseWheel",onTouchStart:"onTouchStart",onTouchEnd:"onTouchEnd",onTouchMove:"onTouchMove",onDoubleClick:"onDoubleClick",onKeyDown:"onKeyDown",onKeyUp:"onKeyUp",onPointerStart:"onPointerStart",onPointerMove:"onPointerMove",onPointerEnd:"onPointerEnd",onVisibilityChanged:"onVisibilityChanged"},2,"eyJvbkNvbnRleHQiOiJySGEiLCJvbk1vdXNlRG93biI6IlhjIiwib25Nb3VzZU1vdmUiOiJBYyIsIm9uTW91c2VVcCI6Ik9jIiwib25Nb3VzZVdoZWVsIjoienAiLCJvblRvdWNoU3RhcnQiOiJ3SGEiLCJvblRvdWNoRW5kIjoidUhhIiwib25Ub3VjaE1vdmUiOiJ2SGEiLCJvbkRvdWJsZUNsaWNrIjoiTHEiLCJvbktleURvd24iOiJVdyIsIm9uS2V5VXAiOiIkUyIsIm9uUG9pbnRlclN0YXJ0IjoiSEJkIiwib25Qb2ludGVyTW92ZSI6IkdCZCIsIm9uUG9pbnRlckVuZCI6IkZCZCIsIm9uVmlzaWJpbGl0eUNoYW5nZWQiOiIkcCJ9"),Ty=/*#__PURE__*/va(/*#__PURE__*/function(){function c(d){ue.call(this,d);this.Md=d.domelement;var e=Ry.gzc();d=G(d,{target:this,
name:"abstracttool"});this.Rl={};null!=e&&(this.BAa=new e(d),this.setup(this.BAa));this.fc=d.name;this.lc=d.plot}D(c,ue);L(c,"geotoolkit3d.tool.AbstractTool");c.prototype.setOptions=function(d){var e=G(d,{name:this.fc,plot:this.lc});null!=this.BAa&&this.BAa.setOptions(d);this.fc=e.name;this.lc=e.plot;return this};c.prototype.ta=function(){var d=this.BAa.ta();d.name=this.Da();d.plot=this.lc;return d};var a=new RegExp(/touch/),b=new RegExp(/pointer/);c.prototype.Gm=function(d){null!=d.ye&&(d=d.ye());
return a.test(d.type)||b.test(d.type)&&"mouse"!==d.pointerType};c.Ja=Sy;c.prototype.setup=function(d){var e=this;e.Rl.onContext=function(f,g,h){e.rHa!==Fb&&e.rHa(h);e.notify("onContext",this,h)};d.on("onContext",e.Rl.onContext);e.Rl.onMouseDown=function(f,g,h){e.Xc!==Fb&&e.Xc(h);e.notify("onMouseDown",this,h)};d.on("onMouseDown",e.Rl.onMouseDown);e.Rl.onMouseMove=function(f,g,h){e.Ac!==Fb&&e.Ac(h);e.notify("onMouseMove",this,h)};d.on("onMouseMove",e.Rl.onMouseMove);e.Rl.onMouseUp=function(f,g,h){e.Oc!==
Fb&&e.Oc(h);e.notify("onMouseUp",this,h)};d.on("onMouseUp",e.Rl.onMouseUp);e.Rl.onMouseOut=function(f,g,h){e.Sab!==Fb&&e.Sab(h);e.notify("onMouseOut",this,h)};d.on("onMouseOut",e.Rl.onMouseOut);e.Rl.onMouseWheel=function(f,g,h){e.zp!==Fb&&e.zp(h);e.notify("onMouseWheel",this,h)};d.on("onMouseWheel",e.Rl.onMouseWheel);e.Rl.onTouchStart=function(f,g,h){e.wHa!==Fb&&e.wHa(h);e.notify("onTouchStart",this,h)};d.on("onTouchStart",e.Rl.onTouchStart);e.Rl.onTouchEnd=function(f,g,h){e.uHa!==Fb&&e.uHa(h);e.notify("onTouchEnd",
this,h)};d.on("onTouchEnd",e.Rl.onTouchEnd);e.Rl.onTouchMove=function(f,g,h){e.vHa!==Fb&&e.vHa(h);e.notify("onTouchMove",this,h)};d.on("onTouchMove",e.Rl.onTouchMove);e.Rl.onDoubleClick=function(f,g,h){e.Lq!==Fb&&e.Lq(h);e.notify("onDoubleClick",this,h)};d.on("onDoubleClick",e.Rl.onDoubleClick);e.Rl.onKeyDown=function(f,g,h){e.Uw!==Fb&&e.Uw(h);e.notify("onKeyDown",this,h)};d.on("onKeyDown",e.Rl.onKeyDown);e.Rl.onKeyUp=function(f,g,h){e.$S!==Fb&&e.$S(h);e.notify("onKeyUp",this,h)};d.on("onKeyUp",e.Rl.onKeyUp);
e.Rl.onVisibilityChanged=function(f,g,h){e.$p!==Fb&&e.$p(h);e.notify("onVisibilityChanged",this,h)};d.on("onVisibilityChanged",e.Rl.onVisibilityChanged);return this};c.prototype.Da=function(){return this.fc};c.prototype.rHa=Fb;c.prototype.Xc=Fb;c.prototype.Ac=Fb;c.prototype.Oc=Fb;c.prototype.Sab=Fb;c.prototype.zp=Fb;c.prototype.wHa=Fb;c.prototype.uHa=Fb;c.prototype.vHa=Fb;c.prototype.Lq=Fb;c.prototype.Uw=Fb;c.prototype.$S=Fb;c.prototype.$p=Fb;c.prototype.dispose=function(){null!=this.BAa&&(this.BAa.dispose(),
this.BAa=null);this.Md=null;ue.prototype.dispose.call(this)};return c}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoidGEiLCJpc1RvdWNoRXZlbnQiOiJHbSIsImdldE5hbWUiOiJEYSIsIm9uQ29udGV4dCI6InJIYSIsIm9uTW91c2VEb3duIjoiWGMiLCJvbk1vdXNlTW92ZSI6IkFjIiwib25Nb3VzZVVwIjoiT2MiLCJvbk1vdXNlT3V0IjoiU2FiIiwib25Nb3VzZVdoZWVsIjoienAiLCJvblRvdWNoU3RhcnQiOiJ3SGEiLCJvblRvdWNoRW5kIjoidUhhIiwib25Ub3VjaE1vdmUiOiJ2SGEiLCJvbkRvdWJsZUNsaWNrIjoiTHEiLCJvbktleURvd24iOiJVdyIsIm9uS2V5VXAiOiIkUyIsIm9uVmlzaWJpbGl0eUNoYW5nZWQiOiIkcCJ9fX0g");var Vy=/*#__PURE__*/va(/*#__PURE__*/function(){function c(){}function a(q){Ty.call(this,q);q=G(q,{state:b,dragbutton:0,pinchbutton:1,slidebutton:2,dragtouchcount:1,pinchtouchcount:2,slidetouchcount:3,doubletapdelay:250,name:"abstractgesturetool",radius:0,armingkey:null},!0);this.setOptions(q);this.GQa(null==this.Rba);this.wc=q.radius;this.zne=this.yAa=0;this.tQb=!1;this.ika={}}var b="none",d="mb",e="mb2",f="mb3",g="touch1",h="touch2",k="touch3",l="drag",m="slide",n="pinch";D(a,Ty);L(a,"geotoolkit3d.tool.AbstractGestureTool");
a.prototype.setOptions=function(q){var r=G(q,{state:this.D0a,dragbutton:this.bJb,pinchbutton:this.eOb,slidebutton:this.rPb,dragtouchcount:this.thc,pinchtouchcount:this.wmc,slidetouchcount:this.Vnc,doubletapdelay:this.Iib,armingkey:this.Rba,radius:this.wc},!0);this.xv(r.state);this.wc=r.radius;this.bJb=+r.dragbutton;this.eOb=+r.pinchbutton;this.rPb=+r.slidebutton;this.thc=+r.dragtouchcount;this.wmc=+r.pinchtouchcount;this.Vnc=+r.slidetouchcount;this.Iib=+r.doubletapdelay;var t=this.Rba;this.Rba=null!=
r.armingkey?+r.armingkey:null;this.Rba!==t&&(null!=t&&null!=this.Rba?this.GQa(!1):null==t?this.GQa(!1):this.GQa(!0));Ty.prototype.setOptions.call(this,q);return this};a.prototype.ta=function(){var q=Ty.prototype.ta.call(this);q.radius=this.wc;q.dragbutton=this.bJb;q.pinchbutton=this.eOb;q.slidebutton=this.rPb;q.dragtouchcount=this.thc;q.pinchtouchcount=this.wmc;q.slidetouchcount=this.Vnc;q.doubletapdelay=this.Iib;q.armingkey=this.Rba;return q};a.prototype.xv=function(q,r){this.D0a=q};a.prototype.rHa=
function(q){this.UQ&&q.preventDefault()};a.prototype.Xc=function(q){this.UQ&&q.preventDefault();switch(q.button){case this.bJb:this.xv(d,q);break;case this.eOb:this.xv(e,q);break;case this.rPb:this.xv(f,q)}q.shiftKey&&this.xv(f,q)};a.prototype.Ac=function(q){this.UQ&&q.preventDefault();switch(this.D0a){case b:this.zn.BG(q);break;case d:this.xv(l,q);this.zn.LD(q);break;case e:this.xv(n,q);q.distanceX=q.plotY;q.distanceY=q.plotY;this.zn.OD(q);break;case f:this.xv(m,q);this.zn.eF(q);break;case l:this.zn.Rz(q);
break;case n:1<q.plotXs.length?(q.distanceX=Math.abs(q.plotXs[0]-q.plotXs[1]),q.distanceY=Math.abs(q.plotYs[0]-q.plotYs[1])):(q.distanceX=q.plotY,q.distanceY=q.plotY);this.zn.ND(q);break;case m:this.zn.QD(q);break;default:this.xv(b,q)}};a.prototype.Sab=function(q){this.Oc(q);this.BG(q)};a.prototype.Oc=function(q){this.UQ&&q.preventDefault();switch(this.D0a){case d:Date.now()-this.yAa<this.Iib?this.zn.cF(q):this.zn.tI(q),this.yAa=Date.now();case e:case f:this.xv(b,q);break;case l:this.xv(b,q);this.zn.KD(q);
break;case m:this.xv(b,q);this.zn.lC(q);break;case n:this.xv(b,q);this.zn.dF(q);break;default:this.xv(b,q)}};a.prototype.Lq=function(q){this.UQ&&q.preventDefault();this.xv(b,q);this.zn.cF(q)};a.prototype.wHa=function(q){this.UQ||q.preventDefault();switch(q.plotXs.length){case 1:this.xv(g,q);break;case 2:this.xv(h,q);break;case 3:this.xv(k,q)}this.tQb=!0};a.prototype.uHa=function(q){this.UQ&&q.preventDefault();if(!this.tQb)switch(q.plotXs.length){case 1:this.xv(g,q);break;case 2:this.xv(h,q);break;
case 3:this.xv(k,q)}switch(this.D0a){case g:Date.now()-this.yAa<this.Iib?this.zn.cF(q):this.zn.tI(q),this.yAa=Date.now();case h:case k:this.xv(b,q);break;case l:this.xv(b,q);this.zn.KD(q);break;case m:this.xv(b,q);this.zn.lC(q);break;case n:this.xv(b,q);this.zn.dF(q);break;default:this.xv(b,q)}this.tQb=!1};a.prototype.vHa=function(q){this.UQ&&q.preventDefault();switch(this.D0a){case b:this.zn.BG(q);break;case g:this.xv(l,q);this.zn.LD(q);break;case h:this.xv(n,q);q.distanceX=Math.abs(q.plotXs[0]-
q.plotXs[1]);q.distanceY=Math.abs(q.plotYs[0]-q.plotYs[1]);this.zn.OD(q);break;case k:this.xv(m,q);this.zn.eF(q);break;case l:this.zn.Rz(q);break;case n:2===q.plotXs.length&&(q.distanceX=Math.abs(q.plotXs[0]-q.plotXs[1]),q.distanceY=Math.abs(q.plotYs[0]-q.plotYs[1]),this.zn.ND(q));break;case m:this.zn.QD(q);break;default:this.xv(b,q)}};a.prototype.Uw=function(q){this.UQ||this.GQa(q.keyCode===this.Rba);null!=this.ika[q.keyCode]?this.zn.eN(q):(this.ika[q.keyCode]={since:Date.now()},this.zn.zK(q))};
a.prototype.$p=function(q){"visible"===q.windowVisibility?this.zn.AK(q):this.zn.BK(q)};a.prototype.$S=function(q){this.zn.fN(q);null!=this.ika[q.keyCode]&&(this.ika[q.keyCode]=null,delete this.ika[q.keyCode]);this.UQ&&this.GQa(q.keyCode!==this.Rba)};var p={zK:c,eN:c,fN:c,BG:c,tI:c,cF:c,OD:c,ND:c,dF:c,LD:c,Rz:c,KD:c,eF:c,QD:c,lC:c,AK:c,BK:c};a.prototype.GQa=function(q){this.UQ!==q&&(this.zn=q?{zK:this.zK.bind(this),eN:this.eN.bind(this),fN:this.fN.bind(this),AK:this.AK.bind(this),BK:this.BK.bind(this),
BG:this.BG.bind(this),tI:this.tI.bind(this),cF:this.cF.bind(this),OD:this.OD.bind(this),ND:this.ND.bind(this),dF:this.dF.bind(this),LD:this.LD.bind(this),Rz:this.Rz.bind(this),KD:this.KD.bind(this),eF:this.eF.bind(this),QD:this.QD.bind(this),lC:this.lC.bind(this)}:p,this.UQ=q)};a.prototype.zK=Fb;a.prototype.eN=Fb;a.prototype.fN=Fb;a.prototype.AK=Fb;a.prototype.BK=Fb;a.prototype.BG=Fb;a.prototype.tI=Fb;a.prototype.cF=Fb;a.prototype.OD=Fb;a.prototype.ND=Fb;a.prototype.dF=Fb;a.prototype.LD=Fb;a.prototype.Rz=
Fb;a.prototype.KD=Fb;a.prototype.eF=Fb;a.prototype.QD=Fb;a.prototype.lC=Fb;a.prototype.dispose=function(){this.ika=this.zn=null;Ty.prototype.dispose.call(this)};return a}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoidGEiLCJvbkNvbnRleHQiOiJySGEiLCJvbk1vdXNlRG93biI6IlhjIiwib25Nb3VzZU1vdmUiOiJBYyIsIm9uTW91c2VPdXQiOiJTYWIiLCJvbk1vdXNlVXAiOiJPYyIsIm9uRG91YmxlQ2xpY2siOiJMcSIsIm9uVG91Y2hTdGFydCI6IndIYSIsIm9uVG91Y2hFbmQiOiJ1SGEiLCJvblRvdWNoTW92ZSI6InZIYSIsIm9uS2V5RG93biI6IlV3Iiwib25WaXNpYmlsaXR5Q2hhbmdlZCI6IiRwIiwib25LZXlVcCI6IiRTIiwib25LZXlTdGFydCI6InpLIiwib25LZXkiOiJlTiIsIm9uS2V5RW5kIjoiZk4iLCJvblZpc2liaWxpdHlHYWluZWQiOiJBSyIsIm9uVmlzaWJpbGl0eUxvc3QiOiJCSyIsIm9uQ3Vyc29yTW92ZSI6IkJHIiwib25UYXAiOiJ0SSIsIm9uRG91YmxlVGFwIjoiY0YiLCJvblBpbmNoU3RhcnQiOiJPRCIsIm9uUGluY2giOiJORCIsIm9uUGluY2hFbmQiOiJkRiIsIm9uRHJhZ1N0YXJ0IjoiTEQiLCJvbkRyYWciOiJSeiIsIm9uRHJhZ0VuZCI6IktEIiwib25TbGlkZVN0YXJ0IjoiZUYiLCJvblNsaWRlIjoiUUQiLCJvblNsaWRlRW5kIjoibEMifX19");var Wy=/*#__PURE__*/va(/*#__PURE__*/function(){function c(b){var d=G(b,{enabled:!0,nozoom:!1,nopan:!1});Vy.call(this,d);this.Rb=b.camera;this.lc=b.plot;this.Qg=b.lookat.clone();this.BDa=this.Qg.clone();this.ECa=b.position.clone();this.setOptions(d)}function a(){}D(c,Vy);L(c,"geotoolkit3d.controller.AbstractController");c.prototype.setOptions=function(b){var d=G(b,{enabled:this.If,zoomspeed:this.P5a,nozoom:this.wO,nopan:this.W7,camera:this.Rb,position:null!=this.Rb?this.Rb.position:this.ECa});this.Rb=d.camera;this.If=d.enabled;
this.P5a=d.zoomspeed;this.wO=d.nozoom;this.W7=d.nopan;Vy.prototype.setOptions.call(this,b);this.ECa=d.position;return this};c.prototype.ta=function(){var b=Vy.prototype.ta.call(this);b.enabled=this.If;b.nozoom=this.wO;b.zoomspeed=this.P5a;b.nopan=this.W7;return b};c.prototype.BG=a;c.prototype.tI=a;c.prototype.zK=a;c.prototype.eN=a;c.prototype.fN=a;c.prototype.AK=a;c.prototype.BK=a;c.prototype.cF=a;c.prototype.LD=a;c.prototype.Rz=a;c.prototype.KD=a;c.prototype.OD=a;c.prototype.ND=a;c.prototype.dF=
a;c.prototype.eF=a;c.prototype.QD=a;c.prototype.lC=a;c.prototype.vG=function(){return this.Qg};return c}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoidGEiLCJvbkN1cnNvck1vdmUiOiJCRyIsIm9uVGFwIjoidEkiLCJvbktleVN0YXJ0IjoieksiLCJvbktleSI6ImVOIiwib25LZXlFbmQiOiJmTiIsIm9uVmlzaWJpbGl0eUdhaW5lZCI6IkFLIiwib25WaXNpYmlsaXR5TG9zdCI6IkJLIiwib25Eb3VibGVUYXAiOiJjRiIsIm9uRHJhZ1N0YXJ0IjoiTEQiLCJvbkRyYWciOiJSeiIsIm9uRHJhZ0VuZCI6IktEIiwib25QaW5jaFN0YXJ0IjoiT0QiLCJvblBpbmNoIjoiTkQiLCJvblBpbmNoRW5kIjoiZEYiLCJvblNsaWRlU3RhcnQiOiJlRiIsIm9uU2xpZGUiOiJRRCIsIm9uU2xpZGVFbmQiOiJsQyJ9fX0g");var Xy=/*#__PURE__*/function(){function c(a){}L(c,"geotoolkit3d.scene.EmptyController");c.prototype.setOptions=function(a){};c.prototype.dispose=function(){};c.prototype.Da=function(){return"EmptyController"};return c}();var Yy=/*#__PURE__*/va(/*#__PURE__*/function(){function c(){}L(c,"geotoolkit3d.util.Shaders");var a=new Mp(1,255,65025,16581375),b=new Mp(1/a.x,1/a.y,1/a.z,1/a.w);c.B2b=function(){var d=new Mp,e=new Mp,f=new Mp,g=new Mp(1/255,1/255,1/255,0);return function(h){d.copy(a);d.multiplyScalar(h);e.copy(d);e=e.floor();d=d.sub(e);f.set(d.y,d.z,d.w,d.w);f.x*=g.x;f.y*=g.y;f.z*=g.z;f.w*=g.w;return d=d.sub(f)}}();c.cCd=function(d){return c.B2b(d).multiplyScalar(255).round()};c.$db=function(){var d=new Mp;return function(e){e instanceof Mp?
d.copy(e):d.set(e[0],e[1],e[2],e[3]);return c.tVc(d.divideScalar(255))}}();c.tVc=function(d){return d.dot(b)};c.ot=function(d,e,f,g,h){g||(f=h?[f,e].join("\n"):[e,f].join("\n"));return d=d.replace(e,f)};return c}(),2,"eyJwYWNrRmxvYXRUb1ZlYzQiOiJCMmIiLCJwYWNrRmxvYXRUb1JHQkEiOiJjQ2QiLCJ1bnBhY2tSR0JBVG9GbG9hdCI6IiRkYiIsInVucGFja1ZlYzRUb0Zsb2F0IjoidFZjIn0g");var Zy=/*#__PURE__*/va(/*#__PURE__*/function(){function c(p){p.defines.hasOwnProperty("addedColorMapShaders")||(p.defines.addedColorMapShaders=!0,p.uniforms[l]={type:"v4",value:new Mp},p.uniforms[k]={type:"tv",value:null},p.uniforms[m]={type:"i",value:0})}function a(p){var q=null!=p.userData.yM?1:!1;q!==p.defines[d.Iya]&&(p.defines[d.Iya]=q,p.needsUpdate=!0)}function b(p){p.defines.hasOwnProperty("addedUnlitShaders")||(p.defines.addedUnlitShaders=!0,p.uniforms[h]={value:0})}function d(){}var e=Yy;L(d,"geotoolkit3d.util.shaders.Shaders");
var f="#ifdef USE_LOGDEPTHBUF\n    #ifdef USE_LOGDEPTHBUF_EXT\n        vFragDepth = 1.0 + gl_Position.w;\n        vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n    #else\n        if (isPerspectiveMatrix ( projectionMatrix)) {\n           gl_Position.z = log2(max( EPSILON, gl_Position.w + 1.0 )) * logDepthBufFC - 1.0;\n           gl_Position.z *= gl_Position.w;\n        }\n    #endif\n#endif";Jw.logdepthbuf_vertex=["#ifndef PICKINGMATERIAL_OVERRIDE",f,"#endif"].join("\n");Jw.logdepthbuf_fragment=
"#ifndef PICKINGMATERIAL_OVERRIDE\n   #if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n       gl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n   #endif\n#endif";d.ggb=-999.25;d.PN="void main()";d.kE=d.PN+" {";d.Lgb="#include <color_vertex>";d.TFb="#include <color_fragment>";d.y3c="#include <shadowmap_vertex>";d.Iec="#include <project_vertex>";d.Hec="#include <logdepthbuf_vertex>";var g=1024;d.Iya="CG_USE_COLOR_MAP";var h="useDiffuseAsColor",
k="cgcolormapTexture",l="cgcolormapParams",m="cgcolormapLogValue";d.b6="vcgdeadCell";d.bm="cgcolormapValue";f="float Shaders_norm(float value, float srcmin, float srcmax, float dstmin, float dstmax) {\n   float norm = dstmin + (dstmax - dstmin) * (clamp(value, srcmin, srcmax) - srcmin)  / (srcmax - srcmin);\n   if (norm < 0.0 || norm >= 0.0) {\n       return norm;\n   }\n   return 0.0;\n}";var n=["\tif("+h+" == 1) {","\t\tgl_FragColor = diffuseColor;\n\t}  else {\n\t\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\t}"].join("\n");
d.dYa=["#ifdef "+d.Iya,"\tv"+d.bm+" = normValueForColorMap("+d.bm+");","#endif"].join("\n");d.eYa=["#ifdef "+d.Iya,"\tattribute float "+d.bm+";","\tvarying float v"+d.bm+";","\tuniform vec4 "+l+";","\tuniform int "+m+";",f,"\tfloat normValueForColorMap(float value) {","\t\tif( "+m+" == 1)","\t\t{\n\t\t\tvalue = log2(value)/log2(10.0);\n\t\t}","\t\treturn Shaders_norm(value - "+l+".x, 0.0, "+l+".y, 0.0, 1.0);","\t}\n#endif"].join("\n");d.bYa=["#ifdef "+d.Iya,"\tdiffuseColor *= getColorFromColorMap(v"+
d.bm+");","#endif"].join("\n");d.cYa=["#ifdef "+d.Iya,"\tvarying float v"+d.bm+";","\tuniform sampler2D "+k+";","\tvec4 getColorFromColorMap(float normValue) {","\t\treturn texture2D("+k+", vec2(normValue, 0.5));","\t}\n#endif"].join("\n");d.Rpa=Jw.meshlambert_vert;d.qba=Jw.meshlambert_frag;d.Rpa=e.ot(d.Rpa,d.PN,d.eYa,!1,!0);d.Rpa=e.ot(d.Rpa,d.Lgb,d.dYa,!1,!1);d.qba=e.ot(d.qba,d.PN,["uniform int "+h+";",d.cYa].join("\n"),!1,!0);d.qba=e.ot(d.qba,d.TFb,d.bYa,!1,!1);d.qba=e.ot(d.qba,"gl_FragColor = vec4( outgoingLight, diffuseColor.a )",
n,!0);f="#ifdef USE_COLOR\n\tvarying vec3 vColor;\n#endif";d.ZYa=Jw.meshbasic_vert;d.YYa=Jw.meshbasic_frag;d.ZYa=e.ot(d.ZYa,d.PN,[f,d.eYa].join("\n"),!1,!0);d.ZYa=e.ot(d.ZYa,d.Lgb,d.dYa,!1,!1);d.YYa=e.ot(d.YYa,d.PN,d.cYa,!1,!0);d.YYa=e.ot(d.YYa,d.TFb,d.bYa,!1,!1);d.qRc=function(p,q){q&&(b(p),q.hasOwnProperty("unlit")&&(p.uniforms[h].value=q.unlit,p.needsUpdate=!0))};d.drd=function(p){b(p);return{unlit:p.uniforms[h].value}};d.h4b=function(p){var q=p.uniforms;p=p.userData.yM;null!==q[k].value&&q[k].value.dispose();
if(null!=p){var r=1,t=new ho(0,0,g,r);t.qa(new ng({colorProvider:p,startPoint:new M(0,r/2),endPoint:new M(1,r/2),startColor:"white",endColor:"black"}));var u=Wb();Ub(!1);r=Bj.uVb(t,g,r,!1,!1,new U(0,0,g,r));Ub(u);u=new Bx(r.wk());u.minFilter=Ct;q[k].value=u;q[k].value.needsUpdate=!0;u=p.uc();r=p.Dc();if(p instanceof Zo||p instanceof Wo)u=p.$y(u),r=p.$y(r);q[l].value.set(u,r-u,0,0);q[m].value=p instanceof Zo||p instanceof Wo?1:0}};d.lRc=function(p,q){q&&(c(p),q.hasOwnProperty("color")&&(p.color=q.color),
q.hasOwnProperty("colorprovider")&&q.colorprovider!==p.userData.yM&&(p.userData.yM instanceof Oo&&"function"===typeof p.q$a&&p.userData.yM.za(No.gb,p.q$a()),p.userData.yM=q.colorprovider,p.userData.yM instanceof Oo&&"function"===typeof p.q$a?(p.userData.yM.on(No.gb,p.q$a()),p.color=new Pq(16777215)):("string"===typeof q.colorprovider?p.color=new Pq(q.colorprovider):q.colorprovider instanceof Pq&&(p.color=q.colorprovider),p.userData.yM=null),p.needsUpdate=!0,d.h4b(p)),a(p))};d.hCc=function(p){c(p);
return{color:p.color,colorprovider:p.userData.yM}};return d}(),1,"eyJDT0xPUk1BUF9TSEFERVJfVkVSVEVYIjoiZFlhIiwiQ09MT1JNQVBfU0hBREVSX1ZFUlRFWF9QUkVGSVgiOiJlWWEiLCJDT0xPUk1BUF9TSEFERVJfRlJBRyI6ImJZYSIsIkNPTE9STUFQX1NIQURFUl9GUkFHX1BSRUZJWCI6ImNZYSIsInJlZnJlc2hVbmlmb3Jtc0NvbG9yTWFwIjoiaDRiIn0g");var $y=/*#__PURE__*/function(){function c(E){E.defines&&!E.defines.hasOwnProperty("addedAbstractPickingShaders")&&(E.defines.addedAbstractPickingShaders=!0,E.uniforms.cgpickingrgba={type:"v4",value:null},E.uniforms.cgpickingmode={type:"f",value:0},E.uniforms.cgpickingViewProjNormInv={type:"m4",value:new Yt})}function a(){}var b=Yy;L(a,"geotoolkit3d.util.shaders.Picking");var d=100,e=100;a.Icc=d;a.V_c=e;var f="#ifndef SHADER_ROUND_FLOAT\n\t#define SHADER_ROUND_FLOAT\n\tfloat Shaders_round(float v) {\n\t\treturn floor(v + 0.5);\n\t}\n#endif",g=
"#ifndef SHADER_FLOAT_TO_VEC4\n\t#define SHADER_FLOAT_TO_VEC4\n\tvec4 Shaders_FloatToVec4( float v ) {\n\t\tvec4 enc = vec4(1.0, 255.0, 255.0 * 255.0, 255.0 * 255.0 * 255.0) * clamp(v, 0., 0.9999999);\n\t\tenc = fract(enc);\n\t\tenc -= enc.yzww * vec4(1.0/255.0,1.0/255.0,1.0/255.0,0.0);\n\t\treturn enc;\n\t}\n#endif",h=["#define PICKINGMATERIAL_OVERRIDE","#define cgPickingModeID "+Ey.Ifb+".0","#define cgPickingModeX "+Ey.Aa+".0","#define cgPickingModeY "+Ey.Ca+".0","#define cgPickingModeZ "+Ey.Rf+
".0"].join("\n"),k="uniform mat4 cgpickingViewProjNormInv;\nuniform float cgpickingmode;\nuniform vec4 cgpickingrgba;\nvarying vec4 cgvcolor;\nvarying float cgvpickingmode;",l="if(Shaders_round(cgpickingmode) == Shaders_round(cgPickingModeID)){\n\tcgvcolor = cgpickingrgba;\n} else {\n\tcgvcolor = cgpickingViewProjNormInv * gl_Position;\n}\ncgvpickingmode = cgpickingmode;",m="varying vec4 cgvcolor;\nvarying float cgvpickingmode;",n="\tif(Shaders_round(cgvpickingmode) == Shaders_round(cgPickingModeX)) {\n\t\tgl_FragColor = Shaders_FloatToVec4(cgvcolor.x);\n\t} else if(Shaders_round(cgvpickingmode) == Shaders_round(cgPickingModeY)) {\n\t\tgl_FragColor = Shaders_FloatToVec4(cgvcolor.y);\n\t} else if(Shaders_round(cgvpickingmode) == Shaders_round(cgPickingModeZ)) {\n\t\tgl_FragColor = Shaders_FloatToVec4(cgvcolor.z);\n\t} else if(Shaders_round(cgvpickingmode) == Shaders_round(cgPickingModeID)){\n\t\tgl_FragColor = cgvcolor;\n\t} else {\n\t\tgl_FragColor = vec4(cgvpickingmode / 255.0, 1.0, 1.0, 1.0);\n\t}",
p="#include <envmap_vertex>",q=[f,g,h,"#define cgPickingModeIndex "+d+".0",k,"attribute float cgpointindex;"].join("\n"),r=[Zy.kE,"\tcgpickingmain();",l,"\tif(Shaders_round(cgpickingmode) == Shaders_round(cgPickingModeIndex)){\n\t\tcgvcolor.x = cgpointindex;\n\t}\n}"].join("\n"),t=[f,g,h,"#define cgPickingModeIndex "+d+".0",m].join("\n"),u=[Zy.kE,"\tcgpickingmain();",n,"\tif(Shaders_round(cgvpickingmode) == Shaders_round(cgPickingModeIndex)) {\n\t\tgl_FragColor = Shaders_FloatToVec4(cgvcolor.x);\n\t}\n}"].join("\n"),
w=[f,g,h,"#define cgPickingModeIndex "+e+".0",k,"attribute float cgcellindex;"].join("\n"),y=[Zy.kE,"\tcgpickingmain();",l,"\tif(Shaders_round(cgpickingmode) == Shaders_round(cgPickingModeIndex)){\n\t\tcgvcolor.x = cgcellindex;\n\t}\n}"].join("\n"),A=[f,g,h,"#define cgPickingModeIndex "+e+".0",m].join("\n"),x=[Zy.kE,"\tcgpickingmain();",n,"\tif(Shaders_round(cgvpickingmode) == Shaders_round(cgPickingModeIndex)) {\n\t\tgl_FragColor = Shaders_FloatToVec4(cgvcolor.x);\n\t}\n}"].join("\n"),C=[f,g,h,k].join("\n"),
z=[Zy.PN+" {","\tcgpickingmain();",l,"}"].join("\n"),v=[f,g,h,m].join("\n"),B=[Zy.PN+" {","\tcgpickingmain();\n#include <logdepthbuf_fragment>",n,"}"].join("\n");a.RJa=Jw.meshlambert_vert;a.pha=Jw.meshlambert_frag;a.RJa=b.ot(a.RJa,Zy.kE,[f,g,h,k].join("\n"),!1,!0);a.RJa=b.ot(a.RJa,p,l,!1,!1);a.pha=b.ot(a.pha,Zy.kE,[f,g,h,m].join("\n"),!1,!0);a.pha=a.pha.slice(0,a.pha.search(Zy.PN));a.pha=[a.pha,Zy.kE,"\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef DOUBLE_SIDED\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;;\n\t#else\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif",
n,"}"].join("\n");a.orc=function(E){E=E.vertexShader.replace(Zy.PN,"void cgpickingmain()");return[q,E,r].join("\n")};a.nrc=function(E){E=E.fragmentShader.replace(Zy.PN,"void cgpickingmain()");return[t,E,u].join("\n")};a.mcd=function(E){E=E.vertexShader.replace(Zy.PN,"void cgpickingmain()");return[w,E,y].join("\n")};a.lcd=function(E){E=E.fragmentShader.replace(Zy.PN,"void cgpickingmain()");return[A,E,x].join("\n")};a.hcd=function(E){E=E.vertexShader.replace(Zy.PN,"void cgpickingmain()");return[C,E,
z].join("\n")};a.gcd=function(E){E=E.fragmentShader.replace(Zy.PN,"void cgpickingmain()");return[v,E,B].join("\n")};a.RLd=function(E,H){if(H&&(c(E),H.hasOwnProperty("pickingmode")&&(E.uniforms.cgpickingmode.value=+H.pickingmode),H.hasOwnProperty("pickingrgba")&&(E.uniforms.cgpickingrgba.value=H.pickingrgba),H.hasOwnProperty("candidates"))){var F=!1,I=E.userData;H.hasOwnProperty("normalizationmatrix")&&(I.a2b=H.normalizationmatrix,F=!0);H.hasOwnProperty("viewinversematrix")&&(I.J$b=H.viewinversematrix,
F=!0);H.hasOwnProperty("projectioninversematrix")&&(I.J3b=H.projectioninversematrix,F=!0);F&&I.J3b&&I.J$b&&I.a2b&&(I.xeb||(I.xeb=new Yt),I.xeb.copy(I.J3b),I.xeb.premultiply(I.J$b),I.xeb.premultiply(I.a2b),E.uniforms.cgpickingViewProjNormInv.value=I.xeb)}};a.Rqd=function(E){c(E);var H=E.userData;return{pickingmode:E.uniforms.cgpickingmode.value,pickingrgba:E.uniforms.cgpickingrgba.value,normalizationmatrix:H.a2b,viewinversematrix:H.J$b,projectioninversematrix:H.J3b}};return a}();var az=Math,bz=/*#__PURE__*/va(/*#__PURE__*/function(){function c(){}c.ned=function(h,k,l){h=[h.distanceTo(k),h.distanceTo(l),k.distanceTo(l)].sort();return.25*az.sqrt((h[0]+(h[1]+h[2]))*(h[2]-(h[0]-h[1]))*(h[2]+(h[0]-h[1]))*(h[0]+(h[1]-h[2])))};c.nUb=function(h,k,l){l||(l=[]);l[0]=h[1]*k[2]-h[2]*k[1];l[1]=h[2]*k[0]-h[0]*k[2];l[2]=h[0]*k[1]-h[1]*k[0];return l};c.WUb=function(h,k){var l=h[0],m=h[1];h=h[2];var n=k[0],p=k[1];k=k[2];return l*n+m*p+h*k};c.normal=function(h,k,l,m,n,p){null==n&&(n=[]);k*=3;l*=3;m*=3;var q=h[k+0],r=
h[k+1],t=h[k+2];k=h[l+0];var u=h[l+1],w=h[l+2];l=h[m+0];var y=h[m+1];h=h[m+2];if(null!=p&&(t===p||w===p||h===p))return n[0]=0,n[1]=0,n[2]=0,n;p=y-u;t-=w;w=h-w;r-=u;q-=k;k=l-k;n[0]=p*t-w*r;n[1]=w*q-k*t;n[2]=k*r-p*q;q=az.sqrt(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);0===q?(n[0]=0,n[1]=0,n[2]=0):(n[0]/=q,n[1]/=q,n[2]/=q);return n};c.Xwa=function(h,k,l,m,n,p){null==n&&(n=[]);k=[h.getX(k),h.getY(k),h.getZ(k)];l=[h.getX(l),h.getY(l),h.getZ(l)];h=[h.getX(m),h.getY(m),h.getZ(m)];if(null!=p&&(k[2]===p||l[2]===p||h[2]===
p))return n[0]=0,n[1]=0,n[2]=0,n;p=h[1]-l[1];m=k[2]-l[2];var q=h[2]-l[2],r=k[1]-l[1];k=k[0]-l[0];l=h[0]-l[0];n[0]=p*m-q*r;n[1]=q*k-l*m;n[2]=l*r-p*k;k=az.sqrt(n[0]*n[0]+n[1]*n[1]+n[2]*n[2]);0===k?(n[0]=0,n[1]=0,n[2]=0):(n[0]/=k,n[1]/=k,n[2]/=k);return n};c.intersect=function(h,k,l,m){var n=k.x-h.x;k=k.y-h.y;var p=m.x-l.x,q=m.y-l.y;m=(-k*(h.x-l.x)+n*(h.y-l.y))/(-p*k+n*q);l=(p*(h.y-l.y)-q*(h.x-l.x))/(-p*k+n*q);return 0<=m&&1>=m&&0<=l&&1>=l?new gy(h.x+l*n,h.y+l*k):null};c.HUb=function(h){return h*az.PI/
180};c.U3b=function(h){return 180*h/az.PI};c.L$=function(h,k,l,m,n,p,q){null==k&&(k=0);null==l&&(l=1);null==q&&(q=NaN);h=h.slice();var r=Number.MAX_VALUE,t=-Number.MAX_VALUE,u;for(u=0;u<h.length;u++)null==h[u]||isNaN(h[u])||h[u]===p||(null!=m&&h[u]<m?h[u]=m:null!=n&&h[u]>n?h[u]=n:(r=az.min(r,h[u]),t=az.max(t,h[u])));isNaN(k)&&(k=r);isNaN(l)&&(l=t);m=null!=m?m:r;n=null!=n?n:t;if(n===m)for(u=0;u<h.length;u++)h[u]=null==h[u]||isNaN(h[u])||h[u]===p?q:k+(l-k)/2;else for(u=0;u<h.length;u++)h[u]=null==h[u]||
isNaN(h[u])||h[u]===p?q:k+(h[u]-m)/(n-m)*(l-k);return h};c.$Pd=function(h,k,l,m,n,p,q,r,t,u,w,y){var A=az.sqrt((h-k)*(h-k)+(n-p)*(n-p)),x=az.sqrt((k-l)*(k-l)+(p-q)*(p-q)),C=12===arguments.length?az.sqrt((u-w)*(u-w)+(u-w)*(u-w)):0,z=(h+k+l+m)/4,v=(n+p+q+r)/4,B=12===arguments.length?(t+u+w+y)/4:0;return new uq(new Lp(z-A/2,v-x/2,12===arguments.length?B-C/2:Number.NaN),new Lp(z+A/2,v+x/2,12===arguments.length?B+C/2:Number.NaN))};var a=[0,0,0],b=[0,0,0],d=[0,0,0],e=[0,0,0];c.jRa=function(h,k,l,m){a[0]=
k[0]-h[0];a[1]=k[1]-h[1];a[2]=k[2]-h[2];b[0]=l[0]-h[0];b[1]=l[1]-h[1];b[2]=l[2]-h[2];d[0]=m[0]-h[0];d[1]=m[1]-h[1];d[2]=m[2]-h[2];bz.nUb(a,b,e);return az.abs(bz.WUb(e,d))/6};c.Zsc=function(h){return bz.jRa(h[0],h[1],h[2],h[4])+bz.jRa(h[1],h[2],h[3],h[7])+bz.jRa(h[2],h[4],h[6],h[7])+bz.jRa(h[1],h[4],h[5],h[7])+bz.jRa(h[1],h[2],h[4],h[7])};c.hed=function(h,k,l){var m=az.pow(k.x-h.x,2)+az.pow(k.y-h.y,2),n=az.pow(l.x-k.x,2)+az.pow(l.y-k.y,2),p=az.pow(h.x-l.x,2)+az.pow(h.y-l.y,2);return p>m&&p>n?new gy(h.x+
(l.x-k.x),h.y+(l.y-k.y)):n>m&&n>p?new gy(k.x+(l.x-h.x),k.y+(l.y-h.y)):new gy(h.x+(k.x-l.x),h.y+(k.y-l.y))};c.E6a=function(h,k,l,m,n,p){var q=az.pow(l-h,2)+az.pow(m-k,2),r=az.pow(n-l,2)+az.pow(p-m,2),t=az.pow(h-n,2)+az.pow(k-p,2);return t>q&&t>r?{x:h+(n-l),y:k+(p-m)}:r>q&&r>t?{x:l+(n-h),y:m+(p-k)}:{x:h+(l-n),y:k+(m-p)}};c.Yzd=function(h,k){var l=new Lp;l.x=h.x>k.x?h.x:k.x;l.y=h.y>k.y?h.y:k.y;l.z=h.z>k.z?h.z:k.z;return l};c.oAd=function(h,k){var l=new Lp;l.x=h.x>k.x?k.x:h.x;l.y=h.y>k.y?k.y:h.y;l.z=
h.z>k.z?k.z:h.z;return l};c.intersectBox=function(h,k){return!(h.max.x<=k.min.x||h.min.x>=k.max.x||h.max.y<=k.min.y||h.min.y>=k.max.y)};c.containsBox=function(h,k){return!(h.min.x>k.min.x||h.max.x<k.max.x||h.min.y>k.min.y||h.max.y<k.max.y)};c.Jtc=function(h,k){var l=new tq;l.min.x=k.min.x>h.min.x?k.min.x:h.min.x;l.max.x=k.max.x<h.max.x?k.max.x:h.max.x;l.min.y=k.min.y>h.min.y?k.min.y:h.min.y;l.max.y=k.max.y<h.max.y?k.max.y:h.max.y;return l};c.dtc=function(h){var k=[0,0,0,0,0],l;for(l=0;l<h.length;l++){var m=
h[l];k[0]+=m[0];k[1]+=m[1];k[2]+=m[0]*m[0];k[3]+=m[0]*m[1];k[4]+=m[1]*m[1]}h=(l*k[3]-k[0]*k[1])/(l*k[2]-k[0]*k[0]);k=k[1]/l-h*k[0]/l;return k={a:h,b:k}};c.LHd=function(h,k){var l=(new Xt).set(h[0].x,h[0].y,1,h[1].x,h[1].y,1,h[2].x,h[2].y,1);l=l.invert();h=(new Lp(k[0].x,k[1].x,k[2].x)).applyMatrix3(l);k=(new Lp(k[0].y,k[1].y,k[2].y)).applyMatrix3(l);return(new Xt).set(h.x,h.y,h.z,k.x,k.y,k.z,0,0,1)};c.T4b=function(h,k){var l=(new Yt).set(h[0].x,h[0].y,h[0].z,1,h[1].x,h[1].y,h[1].z,1,h[2].x,h[2].y,
h[2].z,1,h[3].x,h[3].y,h[3].z,1);l=l.invert();h=(new Mp(k[0].x,k[1].x,k[2].x,k[3].x)).applyMatrix4(l);var m=(new Mp(k[0].y,k[1].y,k[2].y,k[3].y)).applyMatrix4(l);k=(new Mp(k[0].z,k[1].z,k[2].z,k[3].z)).applyMatrix4(l);return(new Yt).set(h.x,h.y,h.z,h.w,m.x,m.y,m.z,m.w,k.x,k.y,k.z,k.w,0,0,0,1)};c.Hab=function(h,k,l,m){function n(J,K){J=p(J,K);return 0===J?1:2/J*az.tan(J/2)}function p(J,K){J=t(K)*y(J)+r(K)*w(J)+q(K)*u(J);return az.acos(J)}function q(J){return az.cos(k[J])}function r(J){return az.sin(k[J])*
az.sin(l[J])}function t(J){return az.sin(k[J])*az.cos(l[J])}function u(J){return az.cos(k[J])}function w(J){return az.sin(k[J])*az.sin(l[J])}function y(J){return az.sin(k[J])*az.cos(l[J])}for(var A=[0],x=[0],C=[0],z=0,v=0,B=0,E=0,H=1;H<h.length;H++){var F=h[H]-h[E],I=n(E,H);z+=F*I*(t(H)+y(E))/2;v+=F*I*(r(H)+w(E))/2;B=m?B-F*I*(q(H)+u(E))/2:B+F*I*(q(H)+u(E))/2;A.push(z);x.push(v);C.push(B);E=H}return{x:A,y:x,z:C}};c.Dqc=function(h,k,l){l=l||new Vr;var m=h.x,n=h.y;h=h.z;var p=az.sin(k),q=az.cos(k);q=
1-q;return.998<m*n*q+h*p?l.set(0,2*az.atan2(m*az.sin(k/2),az.cos(k/2)),az.PI/2):-.998>m*n*q+h*p?l.set(0,-2*az.atan2(m*az.sin(k/2),az.cos(k/2)),-az.PI/2):l.set(az.atan2(m*p-n*h*q,1-(m*m+h*h)*q),az.atan2(n*p-m*h*q,1-(n*n+h*h)*q),az.asin(m*n*n+h*p))};var f=new Lp,g=new Lp;c.p7a=function(h,k,l){l=l||new Vr;l.z=az.atan2(h.y,h.x);l.x=az.asin(h.z);f.set(-h.y,h.x,0);g.crossVectors(f,h);l.y=az.atan2(f.dot(k)/f.length(),g.dot(k)/g.length());return l};c.v9=function(h,k){var l=new Yt,m=az.abs(k.max.x-k.min.x)/
az.abs(h.max.x-h.min.x),n=az.abs(k.max.y-k.min.y)/az.abs(h.max.y-h.min.y),p=az.abs(k.max.z-k.min.z)/az.abs(h.max.z-h.min.z);l.multiply((new Yt).makeTranslation(k.min.x,k.min.y,k.min.z));l.multiply((new Yt).makeScale(m,n,p));l.multiply((new Yt).makeTranslation(-h.min.x,-h.min.y,-h.min.z));return l};return c}(),2,"eyJjb21wdXRlSGVyb25BcmVhIjoibmVkIiwiY3Jvc3NQcm9kdWN0IjoiblViIiwiZG90UHJvZHVjdCI6IldVYiIsIm5vcm1hbEJ1ZmZlckF0dHJpYnV0ZSI6Ilh3YSIsImRlZ3JlZVRvUmFkaWFucyI6IkhVYiIsInJhZGlhbnNUb0RlZ3JlZSI6IlUzYiIsIm5vcm1hbGl6ZUFycmF5IjoiTCQiLCJ1bnJvdGF0ZSI6IiRQZCIsImNvbXB1dGVUZXRyYWhlZHJvblZvbHVtZSI6ImpSYSIsImNvbXB1dGVDZWxsVm9sdW1lIjoiWnNjIiwiY29tcHV0ZTR0aENvcm5lciI6ImhlZCIsImNvbXB1dGU0dGhDb3JuZXJYWSI6IkU2YSIsIm1heFZlY3RvcjMiOiJZemQiLCJtaW5WZWN0b3IzIjoib0FkIiwiY3JlYXRlRml0Qm94IjoiSnRjIiwiY29tcHV0ZUxpbmVhclJlZ3Jlc3Npb24yRCI6ImR0YyIsInJlc29sdmVUcmFuc2Zvcm1NYXRyaXgzIjoiTEhkIiwicmVzb2x2ZVRyYW5zZm9ybU1hdHJpeDQiOiJUNGIiLCJtaW5pbXVtQ3VydmF0dXJlIjoiSGFiIiwiYW5nbGVUb0V1bGVyIjoiRHFjIiwiZGlyZWN0aW9uVG9FdWxlciI6InA3YSIsImdldEJveFRvQm94TWF0cml4IjoidjkifSAg");var cz=/*#__PURE__*/va(/*#__PURE__*/function(){function c(b){b=G(b,{},!0);Lw.call(this,{uniforms:b.uniforms,vertexShader:b.vertexshader,fragmentShader:b.fragmentshader,defines:null!=b.defines?b.defines:[]});this.type="AbstractShaderPickingMaterial"}var a=new uq(new Lp,new Lp(1,1,1));D(c,Lw);L(c,"geotoolkit3d.picking.pickingrenderer.AbstractShaderPickingMaterial");c.prototype.setOptions=function(b){$y.RLd(this,b);return this};c.prototype.ta=function(){return $y.Rqd(this)};c.etc=function(b){return bz.v9(a,b)};c.ftc=function(b){return bz.v9(b,
a)};c.htc=function(b){b=b.pa(!0).clone();return bz.v9(b,a)};c.ped=function(b){b=b.pa(!0).clone();return bz.v9(a,b)};return c}(),2,"eyJjb21wdXRlTm9ybUludk1hdHJpeCI6ImV0YyIsImNvbXB1dGVOb3JtTWF0cml4IjoiZnRjIiwiY29tcHV0ZVBsb3ROb3JtTWF0cml4IjoiaHRjIiwiY29tcHV0ZVBsb3ROb3JtSW52TWF0cml4IjoicGVkIiwicHJvdG90eXBlIjp7InMiOjAsImMiOnsiZ2V0T3B0aW9ucyI6InRhIn19fSAg");var dz=/*#__PURE__*/va(/*#__PURE__*/function(){function c(){}L(c,"geotoolkit3d.picking.AbstractPicking");c.Ym=function(a,b,d){hb("AbstractPicking.pick() has to be overriden");return[]};return c}(),2,"eyJwaWNrIjoiWW0ifSAg");var ez=/*#__PURE__*/function(){function c(){}L(c,"geotoolkit3d.util.ResourceHelper");c.pea=function(a,b){a.userData.resources=a.userData.resources||[];a.userData.resources.push(b);return a};c.pve=function(a,b){a.userData.hasOwnProperty("resources")&&(b=a.userData.resources.indexOf(b),-1!==b&&a.userData.resources.splice(b,1));return a};c.pvc=function(a){a.userData.hasOwnProperty("resources")&&(a.userData.resources.forEach(function(b){b.dispose()}),delete a.userData.resources);return a};return c}();var fz=/*#__PURE__*/va(/*#__PURE__*/{lac:"beforerender",NXa:"afterrender",lZc:"duringrender",D2c:"rendererror",gb:"invalidate",CN:"add",uF:"remove",Camera:"camera",Vpa:"resize",Animation:"animation",bZa:"modellimits"},2,"eyJCZWZvcmVSZW5kZXIiOiJsYWMiLCJBZnRlclJlbmRlciI6Ik5YYSIsIkR1cmluZ1JlbmRlciI6ImxaYyIsIlJlbmRlckVycm9yIjoiRDJjIiwiSW52YWxpZGF0ZSI6ImdiIiwiQWRkIjoiQ04iLCJSZW1vdmUiOiJ1RiIsIlJlc2l6ZSI6IlZwYSIsIk1vZGVsTGltaXRzIjoiYlphIn0g"),gz=/*#__PURE__*/va(/*#__PURE__*/function(){function c(a){if(null==a.type)throw Error("Type should not be null");if(null==a.source)throw Error("Type should not be null");this.oj=a.type;this.xc=a.source;this.w6=a.args}L(c,"geotoolkit3d.Event");c.prototype.Gq=function(){return this.oj};c.prototype.nt=function(){return this.xc};c.prototype.Cxc=
function(){return this.w6};c.prototype.dispose=function(){return this.w6=this.xc=this.oj=null};c.bLa=fz;return c}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRUeXBlIjoiR3EiLCJnZXRTb3VyY2UiOiJudCIsImdldEFyZ3MiOiJDeGMifX19");var iz=/*#__PURE__*/function(){function c(d){d=d||{};Ms.call(this);var e=[-1,2,0,1,2,0,-1,1,0,1,1,0,-1,0,0,1,0,0,-1,-1,0,1,-1,0],f=[-1,2,1,2,-1,1,1,1,-1,-1,1,-1,-1,-2,1,-2],g=[0,2,1,2,3,1,2,4,3,4,5,3,4,6,5,6,7,5];this.setIndex(g);this.setAttribute("position",new es(e,3));this.setAttribute("uv",new es(f,2));this.type="LineSegmentsGeometry";this.setData(d)}var a=new uq,b=new Lp;D(c,Ms);L(c,"geotoolkit3d.scene.LineSegmentsGeometry");c.prototype.setData=function(d){if(null==d)return this;if(d.hasOwnProperty("positions")){var e=
d.positions;var f;e instanceof Float32Array?f=e:Array.isArray(e)&&(f=new Float32Array(e));e=new Ns(f,6,1);this.setAttribute("instanceStart",new Xs(e,3,0));this.setAttribute("instanceEnd",new Xs(e,3,3));this.computeBoundingBox();this.computeBoundingSphere()}if(d.hasOwnProperty("colors")){e=d.colors;var g;e instanceof Float32Array?g=e:Array.isArray(e)&&(g=new Float32Array(e));d=new Ns(g,6,1);this.setAttribute("instanceColorStart",new Xs(d,3,0));this.setAttribute("instanceColorEnd",new Xs(d,3,3))}return this};
c.prototype.computeBoundingBox=function(){this.boundingBox=this.boundingBox||new uq;var d=this.getAttribute("instanceStart"),e=this.getAttribute("instanceEnd");null!=d&&null!=e&&(this.boundingBox.setFromBufferAttribute(d),a.setFromBufferAttribute(e),this.boundingBox.union(a))};c.prototype.computeBoundingSphere=function(){this.boundingSphere=this.boundingSphere||new Xw;null==this.boundingBox&&this.computeBoundingBox();var d=this.getAttribute("instanceStart"),e=this.getAttribute("instanceEnd");if(null!=
d&&null!=e){var f=this.boundingSphere.center;this.boundingBox.getCenter(f);for(var g=0,h=0;h<d.count;h++)b.fromBufferAttribute(d,h),g=Math.max(g,f.distanceToSquared(b)),b.fromBufferAttribute(e,h),g=Math.max(g,f.distanceToSquared(b));this.boundingSphere.radius=Math.sqrt(g)}};return c}();var jz=/*#__PURE__*/function(){function c(d){d.defines.hasOwnProperty("addedLineShaders")||(d.defines.addedLineShaders=!0,d.uniforms=Yx.merge([Xx.common,Xx.fog,{linewidth:{type:"1f",value:1},polygonoffset:{type:"1f",value:0},polygonoffsetfactor:{type:"1f",value:1},resolution:{type:"2f",value:new gy(1,1)},dashScale:{type:"1f",value:1},dashSize:{type:"1f",value:1},dashOffset:{type:"1f",value:0},gapSize:{type:"1f",value:1},opacity:{type:"1f",value:1},mask:new Wx(new Bx),useMask:new Wx(!1)}]))}function a(){}var b=
"linewidth dashScale dashSize dashOffset gapSize opacity".split(" ");L(a,"geotoolkit3d.util.shaders.Line");a.J2c="#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nuniform float polygonoffset;\nuniform float polygonoffsetfactor;\nuniform float linewidth;\nuniform vec2 resolution;\nattribute vec3 instanceStart;\nattribute vec3 instanceEnd;\nattribute vec3 instanceColorStart;\nattribute vec3 instanceColorEnd;\nvarying float vAdjustedLineWidth;\nvarying vec2 vOffset;\nvarying vec2 vUv;\n#ifdef USE_DASH\n    uniform float dashScale;\n    attribute float instanceDistanceStart;\n    attribute float instanceDistanceEnd;\n    varying float vLineDistance;\n#endif\nvoid trimSegment( const in vec4 start, inout vec4 end ) {\n    float a = projectionMatrix[ 2 ][ 2 ];\n    float b = projectionMatrix[ 3 ][ 2 ];\n    float nearEstimate = - 0.5 * b / a;\n    float alpha = ( nearEstimate - start.z ) / ( end.z - start.z );\n    end.xyz = mix( start.xyz, end.xyz, alpha );\n}\nvoid main() {\n    #ifdef USE_COLOR\n        vColor.xyz = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;\n    #endif\n    #ifdef USE_DASH\n        vLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;\n    #endif\n    float aspect = resolution.x / resolution.y;\n    vUv = uv;\n    vec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );\n    vec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );\n    if (polygonoffset > 0.) {\n        float frNear = projectionMatrix[3][2] / (projectionMatrix[2][2] - 1.);\n        float frFar = projectionMatrix[3][2] / (projectionMatrix[2][2] + 1.);\n        float frRange = frFar - frNear;\n        float baseOffset = polygonoffsetfactor * frRange / 1000.;\n        start.z += baseOffset * abs(start.z) / frRange;\n        end.z += baseOffset * abs(end.z) / frRange;\n    }\n    bool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 );\n    if ( perspective ) {\n        if ( start.z < 0.0 && end.z >= 0.0 ) {\n            trimSegment( start, end );\n        } else if ( end.z < 0.0 && start.z >= 0.0 ) {\n            trimSegment( end, start );\n        }\n    }\n    vec4 clipStart = projectionMatrix * start;\n    vec4 clipEnd = projectionMatrix * end;\n    vec2 ndcStart = clipStart.xy / clipStart.w;\n    vec2 ndcEnd = clipEnd.xy / clipEnd.w;\n    vec2 dir = ndcEnd - ndcStart;\n    dir.x *= aspect;\n    dir = normalize( dir );\n    vec2 offset = vec2( dir.y, - dir.x );\n    dir.x /= aspect;\n    offset.x /= aspect;\n    if ( position.x < 0.0 ) offset *= - 1.0;\n    if ( 1. - abs(viewMatrix[2][2]) > 1e-7 ) {\n        if ( position.y < 0.0 ) {\n            offset += - dir;\n        } else if ( position.y > 1.0 ) {\n            offset += dir;\n        }\n    }\n    vAdjustedLineWidth = linewidth + 2.;\n    offset *= vAdjustedLineWidth;\n    offset /= resolution.y;\n    vec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;\n    offset *= clip.w;\n    vOffset = offset;\n    clip.xy += offset;\n    gl_Position = clip;\n    vec4 mvPosition = ( position.y < 0.5 ) ? start : end;\n    #include <logdepthbuf_vertex>\n    #include <clipping_planes_vertex>\n    #include <fog_vertex>\n}";
a.I2c="uniform vec3 diffuse;\nuniform float linewidth;\nuniform float opacity;\nuniform vec2 resolution;\nuniform sampler2D mask;\nuniform bool useMask;\n#ifdef USE_DASH\n    uniform float dashSize;\n    uniform float dashOffset;\n    uniform float gapSize;\n#endif\nvarying float vLineDistance;\nvarying vec2 vOffset;\nvarying float vAdjustedLineWidth;\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vUv;\nvoid main() {\n    #include <clipping_planes_fragment>\n    if (useMask) {\n        vec2 actualResolution = resolution;\n        #ifdef VARIABLE_RENDER_RESOLUTION\n            actualResolution = renderResolution;\n        #endif\n        vec2 screenCoord = gl_FragCoord.xy / actualResolution;\n        if (texture2D(mask, screenCoord).r != 0.) discard;\n    }\n    #ifdef USE_DASH\n        if ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard;\n        if ( mod( vLineDistance + dashOffset, dashSize + gapSize ) > dashSize ) discard;\n    #endif\n    float endcapOpacity = 1.;\n    float a = abs(vUv.x);\n    float b = abs(vUv.y);\n    if ( b > 1. ) {\n        b -= 1.;\n        float len2 = sqrt(1.5 * a*a + 1.2 * b*b);\n        endcapOpacity = clamp(1. - len2, 0., 1.);\n        if ( endcapOpacity < 0.26 ) discard;\n    }\n    float uvOpacity = 1. - a;\n    float offsetLength = length(vOffset);\n    float offsetRate = 0.4 * fwidth(offsetLength);\n    #ifdef VARIABLE_RENDER_RESOLUTION\n        offsetRate *=  renderResolution.y / resolution.y;\n    #endif\n    offsetLength = offsetLength / offsetRate / vAdjustedLineWidth;\n    float offsetOpacity = 1. - offsetLength;\n    float lineWidthOpacity = max(uvOpacity, offsetOpacity);\n    float lineOpacity = min(lineWidthOpacity, endcapOpacity);\n    lineOpacity *= lineOpacity;\n    float minSmoothness = 0.1;\n    float smoothFactor = 1. - min(linewidth, 5.) / 5.;\n    float smoothness = minSmoothness + smoothFactor * (1. - minSmoothness);\n    float lineSmoothingAlpha = smoothstep( 0., smoothness, lineOpacity );\n    float alpha = opacity * lineSmoothingAlpha;\n    if (alpha < 0.03) discard;\n    vec4 diffuseColor = vec4( diffuse, alpha );\n    #include <logdepthbuf_fragment>\n    #include <color_fragment>\n    gl_FragColor = vec4( diffuseColor.rgb, alpha );\n    #include <tonemapping_fragment>\n    #include <encodings_fragment>\n    #include <fog_fragment>\n    #include <premultiplied_alpha_fragment>\n}";
a.oRc=function(d,e){null!=e&&(c(d),b.forEach(function(f){e.hasOwnProperty(f.toLowerCase())&&(d.uniforms[f].value=e[f.toLowerCase()])}),e.hasOwnProperty("polygonoffset")&&(d.uniforms.polygonoffset.value=e.polygonoffset?1:0),e.hasOwnProperty("polygonoffsetfactor")&&(d.uniforms.polygonoffsetfactor.value=e.polygonoffsetfactor),e.hasOwnProperty("resolution")&&d.uniforms.resolution.value.set(e.resolution.width,e.resolution.height),e.hasOwnProperty("color")&&d.uniforms.diffuse.value.set(e.color),e.hasOwnProperty("dashed")&&
(e.dashed?d.defines.USE_DASH=!0:delete d.defines.USE_DASH),e.hasOwnProperty("colorfromattribute")&&(e.colorfromattribute?d.defines.USE_COLOR=!0:delete d.defines.USE_COLOR),e.hasOwnProperty("mask")&&(d.uniforms.mask.value=e.mask,d.uniforms.useMask.value=!0))};a.Vqd=function(d){c(d);var e={};b.forEach(function(f){e[f]=d.uniforms[f].value});e.color=d.uniforms.diffuse.value;e.dashed=d.defines.hasOwnProperty("USE_DASH");return e};return a}();var kz=/*#__PURE__*/va(/*#__PURE__*/function(){function c(a){Lw.call(this,{vertexShader:jz.J2c,fragmentShader:jz.I2c});jz.oRc(this,a);this.type="LineMaterial";this.gsb=this.transparent=!0;this.side=Gr}D(c,Lw);L(c,"geotoolkit3d.scene.LineMaterial");c.prototype.setOptions=function(a){jz.oRc(this,a);return this};c.prototype.ta=function(){return jz.Vqd(this)};return c}(),1,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoidGEifX19");var lz=/*#__PURE__*/va(/*#__PURE__*/function(){function c(e){e=e||{};null!=e.data&&null!=e.data.colors&&(e.colorfromattribute=!0);$t.call(this,new iz(e.data),new kz(e));this.type="LineSegments";this.Bpc=new gy(0,0);this.frustumCulled=!1}var a=new Lp,b=new Lp,d=new gy;D(c,$t);L(c,"geotoolkit3d.scene.LineSegments");c.prototype.setOptions=function(e){if(null==e)return this;e.colorfromattribute=null!=this.geometry.getAttribute("colors");this.material.setOptions(e);return this};c.prototype.onBeforeRender=function(e,f,g,h,k,l){$t.prototype.onBeforeRender.call(this,
e,f,g,h,k,l);e.getSize(d);this.Bpc.equals(d)||(this.Bpc.set(d.x,d.y),this.material.setOptions({resolution:{width:d.x,height:d.y}}))};c.prototype.ta=function(){var e=this.material.ta();delete e.colorfromattribute;return e};c.prototype.Qr=function(){return!1};c.prototype.computeLineDistances=function(){for(var e=this.geometry,f=e.getAttribute("instanceStart"),g=e.getAttribute("instanceEnd"),h=new Float32Array(2*f.count),k=0,l=0;k<f.count;k++,l+=2)a.fromBufferAttribute(f,k),b.fromBufferAttribute(g,k),
h[l]=0===l?0:h[l-1],h[l+1]=h[l]+a.distanceTo(b);f=new Ns(h,2,1);e.setAttribute("instanceDistanceStart",new Xs(f,1,0));e.setAttribute("instanceDistanceEnd",new Xs(f,1,1));return this};return c}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoidGEiLCJpc1NlbGVjdGFibGUiOiJRciJ9fX0g");var mz=/*#__PURE__*/va(/*#__PURE__*/function(){function c(){Kp.call(this);this.hp=this.visible;this.BU=!1;this.hsa=!0;var a=this;Object.defineProperty(this,"visible",{get:function(){return a.hp},set:function(b){if(b===a.hp)return this;a.hp=b;a.Xf();return this}});this.frustumCulled=!1;this.AL=null}D(c,Kp);c.prototype.F0a=function(){return""};L(c,"geotoolkit3d.scene.Object3D");c.prototype.Oa=function(){return this.F0a()};c.prototype.Xf=function(a){a=a||new gz({type:fz.gb,source:this,args:[]});for(var b=this;null!=b.parent;)if(b=
b.parent,null!=b.Xf)return b.Xf(a),this;null!=b.userData.plot&&b.userData.plot.Xf(a);return this};c.prototype.rya=function(a,b){return this};c.prototype.ai=function(a,b,d,e){return this};c.prototype.K3=function(a,b,d,e){return this};c.prototype.add=function(a){if(Array.isArray(a)){var b=this;a.forEach(function(d){Kp.prototype.add.apply(b,[d]);null!=d.updateMatrixWorld&&d.updateMatrixWorld(!0)})}else Kp.prototype.add.apply(this,arguments),null!=a.updateMatrixWorld&&a.updateMatrixWorld(!0);this.Xf(new gz({type:fz.CN,
source:this,args:arguments}));return this};c.prototype.remove=function(a){Kp.prototype.remove.apply(this,arguments);this.Xf(new gz({type:fz.uF,source:this,args:arguments}));return this};c.prototype.A$b=function(){return!1};c.prototype.xea=function(){return!1};c.prototype.Lma=function(){return[]};c.prototype.AKd=function(a){if(null==this.AL)if(a)this.Vjd();else return this;this.AL.forEach(function(b){b.visible=a});return this};c.prototype.Vjd=function(){var a=this;this.AL=[];var b=this.Lma();b.forEach(function(d){var e=
d.geometry instanceof Aq?d.geometry:(new Aq).Hqe(d.geometry);var f=e.index;e=e.getAttribute("position");var g={},h=null!=f?f.count:e.count,k;for(k=0;k<h;k+=3){var l,m=!0;var n=k+2;for(l=k;l<k+3;n=l,l++){if(null!=f){var p=f.getX(n);n=f.getX(l)}else p=n,n=l;var q=e.getX(p),r=e.getX(n),t=e.getY(p),u=e.getY(n);p=e.getZ(p);n=e.getZ(n);if(!(Number.isFinite(q)&&Number.isFinite(r)&&Number.isFinite(t)&&Number.isFinite(u)&&Number.isFinite(p)&&Number.isFinite(n))){m=!1;break}}if(m)for(n=k+2,l=k;l<k+3;n=l,l++)null!=
f?(p=f.getX(n),n=f.getX(l)):(p=n,n=l),p>n&&(m=p,p=n,n=m),m=p+"x"+n,g.hasOwnProperty(m)?g[m]++:g[m]=1}f=[];for(var w in g)1===g[w]&&(h=w.split("x").map(function(y){return+y}),f.push(e.getX(h[0]),e.getY(h[0]),e.getZ(h[0]),e.getX(h[1]),e.getY(h[1]),e.getZ(h[1])));w=new lz({data:{positions:f},color:new Pq("red"),linewidth:5,dashed:!0,alphatocoverage:!0,opacity:.75});d.add(w);a.AL.push(w)})};c.register=function(){};c.prototype.dispose=function(){if(!this.ge()&&(this.BU=!0,null!=this.AL&&Array.isArray(this.AL))){for(var a=
this.AL.length-1;0<=a;a--){var b=this.AL[a];null!=b.geometry&&b.geometry.dispose();null!=b.material&&b.material.dispose();null!=b.parent&&b.parent.remove(b)}this.AL=null}};c.prototype.ge=function(){return this.BU};c.prototype.setOptions=function(a){if(null==a)return this;a.hasOwnProperty("visible")&&(this.visible=a.visible);return this};c.prototype.ta=function(){return{visible:this.visible}};c.prototype.va=function(a){this.visible=a;return this};c.prototype.Ia=function(){return this.visible};c.prototype.Qr=
function(){return this.hsa};c.prototype.ug=function(a){this.hsa=a};return c}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRDbGFzc05hbWUiOiJPYSIsImludmFsaWRhdGVPYmplY3QiOiJYZiIsInVwZGF0ZU9iamVjdCI6InJ5YSIsImJlZm9yZVJlbmRlciI6ImFpIiwiYWZ0ZXJSZW5kZXIiOiJLMyIsImlzRGlzcG9zZWQiOiJnZSIsImdldE9wdGlvbnMiOiJ0YSIsInNldFZpc2libGUiOiJ2YSIsImdldFZpc2libGUiOiJJYSIsImlzU2VsZWN0YWJsZSI6IlFyIiwic2V0U2VsZWN0YWJsZSI6InVnIn19fSAg");var nz=/*#__PURE__*/va(/*#__PURE__*/function(){function c(q,r){var t=wc(0,0,!0);gx.call(this,a(t));r=r||{};this.Qi=t;this.Gg=this.Qi.getContext("2d");this.Pb=q;this.lf=r.style||new Ki({font:r.font||b,color:r.color||d,alignment:e,baseline:f});null!=r.outline&&this.k0(r.outline);this.I0();this.hZ=!1;this.$ia=!1!==r.issizeindevice;this.Z5c=!0===r.dontmanuallyupdate;this.MR=this.material.map.image.width;this.LR=this.material.map.image.height;this.scale.set(this.MR,this.LR,1);this.SGb=new Lp(0,0,0);this.jia=new gy(0,0);this.visible=
!0;this.nib=new Lp(0,0,0);this.KY=new Lp(0,0,0);this.renderOrder=1}function a(q){q=new Bx(q);q.needsUpdate=!0;q.minFilter=Ct;q.generateMipmaps=!1;return new hx({map:q})}var b="24px Arial",d="rgba(255, 255, 255, 1.0)",e=Fi.kc,f=Di.xd,g=new Lp,h=new Lp,k=new Lp,l=new Vd,m=new Lp,n=new Lp,p=new tv;D(c,gx);L(c,"geotoolkit3d.scene.Text2d");c.prototype.k0=function(q){null!=q&&(!1===q.enable?this.Cn=null:(this.Cn=q,this.Cn=G(this.Cn,{enable:!0,innercolor:"white",outlinecolor:"black",thickness:4}),this.Cn.innercolor instanceof
td&&(this.Cn.innercolor=this.Cn.innercolor.Nl()),this.Cn.outlinecolor instanceof td&&(this.Cn.outlinecolor=this.Cn.outlinecolor.Nl())),this.I0())};c.prototype.ee=function(){return this.Pb};c.prototype.Eb=function(q){if(q===this.Pb)return this;this.Pb=q;this.I0();return this};c.prototype.jb=function(){return this.lf};c.prototype.ib=function(q){if(this.lf===q)return this;this.lf=q;this.I0();return this};c.prototype.I0=function(){var q=rg.measureText(this.Pb,this.lf),r=q.ca(),t=q.da();q=(this.Pb+"").split(pg.t0);
var u=0;null!=this.Cn&&(u=this.Cn.thickness,r+=2*u,t+=2*u*q.length);var w=t/q.length;this.Gg.clearRect(0,0,this.Qi.width,this.Qi.height);this.Qi.width=r;this.Qi.height=t;this.Gg.font=this.lf.lt();null!=this.Cn?(this.Gg.strokeStyle=this.Cn.outlinecolor,this.Gg.lineWidth=u,this.Gg.lineJoin="miter",this.Gg.miterLimit=3):this.Gg.fillStyle=this.lf.rb();this.Gg.textBaseline=f;this.Gg.textAlign=e;r=w;for(t=0;t<q.length;t++)null!=this.Cn?(this.Gg.strokeText(q[t],u,r-u),this.Gg.fillStyle=this.Cn.innercolor,
this.Gg.fillText(q[t],u,r-u)):this.Gg.fillText(q[t],0,r),r+=w;this.hZ=!1;this.material&&(this.material.needsUpdate=!0)};c.prototype.mIa=function(q){this.SGb.copy(q);return this};c.prototype.ccb=function(q){this.jia.copy(q);return this};c.prototype.ebd=function(q,r,t){if(this.$ia){var u=this.scale.y/this.scale.x;var w=q.distanceTo(r.position);r instanceof av?(r=r.fov*Math.PI/180,w*=2*Math.tan(r/2)):w=r.top-r.bottom;w=this.scale.y/w;t=w*t.userData.plot.getSize(l).da();t=this.scale.y/t;this.scale.y*=
t;this.scale.x=this.scale.y/u;u=0!==this.jia.x?this.jia.y/this.jia.x:1;t*=this.jia.y;g.set(t/u,t/u,t)}else g.set(this.jia.x,this.jia.x,this.jia.y);h.set(this.scale.x,this.scale.x,this.scale.y).add(g);u=h.multiplyScalar(.75).multiply(this.SGb);t=this.parent.matrixWorld.elements;k.set(V.sign(t[0]),V.sign(t[5]),V.sign(t[10]));u.multiply(k);q=q.add(u);return q=this.parent.worldToLocal(q)};c.prototype.ai=function(q,r,t,u,w){!this.visible||this.Z5c&&!w||(mz.prototype.ai.call(this,q,r,t,u),this.hZ?this.position.equals(this.nib)?
this.position.copy(this.KY):this.KY.copy(this.position):(mz.prototype.Xf.call(this),this.KY.copy(this.position),this.nib.copy(this.position),this.MR=this.material.map.image.width,this.LR=this.material.map.image.height,this.hZ=!0),this.scale.set(this.MR,this.LR,1),t=this.parent.localToWorld(n.copy(this.KY)),q=this.ebd(t,r,q),this.position.copy(q),this.nib.copy(q),this.parent.matrixWorld.decompose(n,p,m),this.scale.multiply(n.set(1,1,1).divide(m)))};c.prototype.M9=function(){return this.KY};c.prototype.ksd=
function(){return this.hZ};c.prototype.dispose=function(){this.material.dispose();this.nib=this.KY=this.jia=this.SGb=this.lf=this.Gg=this.Qi=this.material=null};return c}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJzZXRPdXRsaW5lIjoiazAiLCJnZXRUZXh0IjoiZWUiLCJzZXRUZXh0IjoiRWIiLCJnZXRUZXh0U3R5bGUiOiJqYiIsInNldFRleHRTdHlsZSI6ImliIiwic2V0QW5jaG9yT2Zmc2V0UmF0aW8iOiJtSWEiLCJzZXRBbmNob3JPZmZzZXQiOiJjY2IifX19");var oz=/*#__PURE__*/va(/*#__PURE__*/function(){function c(){}L(c,"geotoolkit3d.util.Helper");var a=new Lp;c.MXc=1E-6;c.HVc=function(){var f=new Lp,g=new Lp,h=new Lp,k=new Lp,l=new tv,m=new Lp,n=new Lp,p=new Vd;return function(q,r,t){q.updateMatrixWorld();q.matrixWorld.decompose(k,l,f);g.set(1,1,1).divide(f);r.matrixWorldInverse.decompose(k,l,m);h.set(1,1,1).divide(m);for(var u=0;u<q.children.length;u++){var w=q.children[u];n.copy(w.position).applyMatrix4(q.matrixWorld);var y=c.btc(n,r);y=w.scale.y/y;y*=t.userData.plot.getSize(p).da();
y=w.scale.y/y;w.scale.multiplyScalar(y);w.scale.multiply(g);w.scale.multiply(h)}}}();c.btc=function(f,g){f=f.distanceTo(g.position);g instanceof av?(g=g.fov*Math.PI/180,g=2*Math.tan(g/2)*f):g=g.top-g.bottom;return g};c.I6a=function(f,g,h){function k(t){if("function"!==typeof g||!1!==g(t))t instanceof nz?t.ksd()&&(m.set(n.copy(q),p.copy(r)),m.applyMatrix4(t.matrixWorld)):t instanceof gx?(m.set(n.copy(q),p.copy(r)),m.applyMatrix4(t.matrixWorld)):"function"===typeof t.Jfa?m.copy(t.Jfa(m)):null!=t.geometry?
(null==t.geometry.boundingBox&&"function"===typeof t.geometry.computeBoundingBox&&t.geometry.computeBoundingBox(),m.copy(t.geometry.boundingBox),m.applyMatrix4(t.matrixWorld)):h||t.children.forEach(k),h&&t.children.forEach(k),isFinite(m.min.length())&&isFinite(m.max.length())&&(null==l?l=(new uq).copy(m):l.union(m))}h="boolean"===typeof h?h:!1;var l=null,m=new uq,n=new Lp,p=new Lp,q=new Lp(-.5,-.5,0),r=new Lp(.5,.5,0);k(f);return l};c.GWb=function(f){if(!f||f.isEmpty())return 0;a.copy(f.max).sub(f.min);
f=a.length();return isNaN(f)?0:f};c.urd=function(){var f=new Vd,g=new Lp,h=new Lp,k=new Lp,l=new Lp,m=new Lp,n=new Lp,p=new jw,q=new jw,r=new uq;return function(t,u,w,y){g.copy(w.position);r.copy(t);u.getSize(f);h.x=2*y.x/f.ca()-1;h.y=2*-y.y/f.da()+1;h.z=1;h.unproject(w);m.copy(h).sub(g).normalize();n.copy(g).sub(h).normalize();t=c.GWb(r);m.multiplyScalar(t);g.sub(m);h.add(m);m.normalize();p.set(g,m);q.set(h,n);p.intersectBox(r,k);q.intersectBox(r,l);t=new uq;y.hxa=g;y.aVa=h;if(k&&l&&(t.makeEmpty().setFromPoints([k,
l]),t.intersectsBox(r)))return t;t.copy(r);return t}}();c.r7a=function(f){f&&(1<f.length?f.forEach(function(g){g instanceof Ut&&(g.map&&(g.map.dispose(),g.map.image&&(g.map.image=null)),g.map=null,g.dispose())}):f instanceof Ut&&(null!=f.map&&(f.map.dispose(),null!=f.map.image&&(f.map.image=null)),f.map=null,f.dispose()))};c.dispose=function(f){if(Array.isArray(f)&&0<f.length)for(var g=f.length-1;0<=g;g--)c.dispose(f[g]);else if(null!=f){if(f instanceof Kp||f instanceof zs)ez.pvc(f),c.dispose(f.children);
null!=f.dispose&&f.dispose();null!=f.parent&&f.parent.remove(f);null!=f.geometry&&(f.geometry.dispose(),f.geometry=null);c.r7a(f.material);f.material=null}};var b=new Lp(0,1,0);c.Wud=function(f,g,h){f=f.clone().sub(g).normalize();return.99>Math.abs(f.dot(h.Rb.up))?h.Rb.up.clone():b.clone()};c.v9=function(f,g){hb("geotoolkit3d.util.Helper.getBoxToBoxMatrix is deprecated since 3.3, use geotoolkit3d.util.Math.getBoxToBoxMatrix instead");return bz.v9(f,g)};c.LXa=function(){var f=new Lp;return function(g,
h,k,l,m){null==l&&(l=new Lp);null==m&&(m=new Yt);f.copy(g);f.applyMatrix4(m);f.project(h);f.x=(f.x+1)/2;f.y=(-f.y+1)/2;return l.set(f.x*k.ca(),f.y*k.da(),f.z)}}();c.nhd=function(){var f=new Lp;return function(g,h,k,l){null==l&&(l=new Lp);f.copy(g);f.x/=k.ca();f.y/=k.da();f.x=2*f.x-1;f.y=-(2*f.y-1);f.unproject(h);return l.set(f.x,f.y,f.z)}}();c.Bpa=function(){var f=new Lp;return function(g,h,k,l){null==l&&(l=new gy);f.copy(g);f.project(h);f.x=(f.x+1)/2;f.y=(-f.y+1)/2;return l.set(f.x*k.ca(),f.y*k.da())}}();
c.MUb=function(){function f(n,p,q,r){var t=n.material[0]||n.material,u=t.map.image.width;t=t.map.image.height;n.parent.localToWorld(h.copy(n.position));c.LXa(h,q,r.userData.plot.getSize(m),g);if(!isFinite(g.x)||!isFinite(g.y))return null;g.x-=u/2;g.y-=t/2;k.set(g.x+u,g.y+t);return new tq(new gy(g.x-p.x,g.y-p.z),new gy(k.x+p.y,k.y+p.w))}var g=new Lp,h=new Lp,k=new gy,l=new tq,m=new Vd;return function(n,p,q,r,t,u){var w=[],y;if(null!=u)for(y=0;y<u.length;y++){var A=u[y];A.visible&&null!=A.parent&&null!=
n.userData.plot&&(A=f(A,t,p,n),null!==A&&w.push(A))}for(y=0;y<q.length;y++)if(A=q[y],A.visible&&null!=A.parent&&null!=n.userData.plot&&(u=f(A,t,p,n),null!=u)){u.d3=A;for(var x=!1,C=0,z=0;z<w.length;z++)if(u.intersectsBox(w[z])){var v=new Lp;l.copy(u).intersect(w[z]).getSize(v);C+=v.x*v.y;if(C>r){x=!0;break}}x?A.visible=!1:A.visible&&w.push(u)}}}();var d=new gy;c.$Gd=function(f,g,h,k){var l;null==k?k=new qy:l=k.getSize(d);null!=g&&null!=h&&k.setSize(g,h);g=f.parent;h=new Np;h.add(f);var m=(new uq).setFromObject(f),
n=new Qu(-16E3,16E3,-16E3,16E3),p=new Lp;m.getSize(p);0===p.z&&(m.expandByVector(new Lp(0,0,.5)),p=new Lp,m.getSize(p));var q=new Lp;m.getCenter(q);n.translateX(q.x);n.translateY(q.y);n.translateZ(q.z+.6*p.z);n.near=.05*p.z;n.far=1.15*p.z;n.updateMatrixWorld();n.updateProjectionMatrix();p=m.min.clone();p.project(n);q=m.max.clone();q.project(n);m=Math.max(p.x,q.x);p=Math.max(p.y,q.y);n.left*=m;n.right*=m;n.top*=p;n.bottom*=p;n.updateProjectionMatrix();k.render(h,n);h=k.domElement.toDataURL();null!=
l?k.setSize(l.width,l.height):k.dispose();f.parent=g;return h};c.brb=function(f){null!=f.color&&null!=f.colorprovider?f.color=null:null!=f.color&&null==f.colorprovider&&(f.colorprovider=f.color);if(!(f.colorprovider instanceof Oo))if("string"===typeof f.colorprovider)f.colorprovider=new Ro({values:[0,1],colors:[f.colorprovider,"beige"]});else if(f.colorprovider instanceof Pq){var g=f.colorprovider.getStyle();f.colorprovider=new Ro({values:[0,1],colors:[g,"beige"]})}else f.colorprovider=new Ro({values:[0,
1],colors:["beige","beige"]})};var e=new tq(new gy(-2.00375083428E7,-2.00375083428E7),new gy(2.00375083428E7,2.00375083428E7));c.BTa=function(){return e.clone()};c.Ysc=function(f,g){var h=(new uq).copy(f);g=g||0;var k=h.max.sub(h.min).multiplyScalar(g),l=k.x;f=k.y;var m=k.z;k=(1-g)/g/2;var n=h.min.x+l*k;g=h.min.y+f*k;var p=h.min.z+m*k;h=n;k=g;var q=p+m,r=n+l,t=g,u=p+m,w=n,y=g+f,A=p+m,x=n+l,C=g+f;m=p+m;var z=n,v=g,B=p,E=n+l,H=g,F=p,I=n,J=g+f,K=p;l=n+l;f=g+f;g=p;return f=[h,k,q,r,t,u,w,y,A,w,y,A,r,
t,u,x,C,m,r,t,u,E,H,F,x,C,m,x,C,m,E,H,F,l,f,g,r,H,F,z,v,B,l,f,g,l,f,g,z,v,B,I,J,K,z,v,B,h,k,q,I,J,K,I,J,K,h,k,q,w,y,A,w,y,A,x,C,m,I,J,K,I,J,K,x,C,m,l,f,g,z,v,B,E,H,F,h,k,q,h,k,q,E,H,F,r,t,u]};c.FGc=function(f){function g(){for(var q=f.length/24,r=0;r<q;r++){var t=h(r,0),u=h(r,4);if(k([t[0],t[1],t[2],u[0],u[1],u[2]])&&t[2]!==u[2])return r}return-1}function h(q,r){q=24*q+3*r;return[f[q],f[q+1],f[q+2]]}function k(q){if(!q||!Array.isArray(q))return!1;for(var r=0;r<q.length;r++)if(!Number.isFinite(q[r]))return!1;
return!0}var l=g();if(-1===l)return!0;var m=h(l,0),n=h(l,1),p=h(l,2);l=h(l,4);n=new Lp(n[0]-m[0],n[1]-m[1],n[2]-m[2]);p=new Lp(p[0]-m[0],p[1]-m[1],p[2]-m[2]);m=new Lp(l[0]-m[0],l[1]-m[1],l[2]-m[2]);m.normalize();p=n.cross(p);p.normalize();m=p.dot(m);return 0<m};return c}(),2,"eyJ1cGRhdGVDaGlsZHJlblNjYWxlRm9yRGV2aWNlIjoiSFZjIiwiY29tcHV0ZUZydXN0dW1IZWlnaHRGb3IiOiJidGMiLCJjb21wdXRlV29ybGRCb3VuZGluZ0JveCI6Ikk2YSIsImdldEJveFNpemUiOiJHV2IiLCJkaXNwb3NlTWF0ZXJpYWwiOiJyN2EiLCJnZXRCb3hUb0JveE1hdHJpeCI6InY5Iiwid29ybGRUb0RldmljZSI6IkxYYSIsImRldmljZVRvV29ybGQiOiJuaGQiLCJ3b3JsZFRvRGV2aWNlMkQiOiJCcGEiLCJyZW5kZXJTdXJmYWNlVG9IZWlnaHRtYXAiOiIkR2QiLCJjb252ZXJ0VG9Db2xvclByb3ZpZGVyIjoiYnJiIiwiZ2V0V0dTODREZWZhdWx0RXh0ZW50IjoiQlRhIiwiY29tcHV0ZUJveFBvc2l0aW9ucyI6IllzYyIsImlzVHJpYW5nbGVGYWNpbmdJbndhcmQiOiJGR2MifSAg");var pz=/*#__PURE__*/function(){function c(b){var d=b.material;b=G(b,{uniforms:Yx.clone(Kw.basic.uniforms),vertexshader:a.RJa,fragmentshader:a.pha,defines:d.defines},!0);cz.call(this,b);this.type="BasicPickingMaterial";this.transparent=!1;this.blending=yu;this.side=d.side}var a=$y;D(c,cz);L(c,"geotoolkit3d.picking.pickingrenderer.BasicPickingMaterial");return c}();var qz=/*#__PURE__*/function(){function c(a){pz.call(this,a);this.type="DefaultMeshPickingMaterial"}D(c,pz);L(c,"geotoolkit3d.picking.pickingrenderer.DefaultMeshPickingMaterial");return c}();var rz=/*#__PURE__*/function(){function c(f){f=new Bx(d);f.wrapS=f.wrapT=pw;f.needsUpdate=!0;var g=$y;hx.call(this,{map:f,transparent:!1});this.vertexShader=g.RJa;this.fragmentShader=g.pha;this.uniforms=Yx.clone(Kw.sprite.uniforms);this.type="DefaultSpritePickingMaterial";this.blending=yu}var a=cz.htc,b=Yy.B2b,d=wc(1,1,!0),e=d.getContext("2d");null!=e&&(e.fillStyle="white",e.fillRect(0,0,1,1));D(c,hx);L(c,"geotoolkit3d.picking.pickingrenderer.DefaultSpritePickingMaterial");c.prototype.setOptions=function(f){var g=
f.plot;switch(f.pickingmode){case Ey.Ifb:var h=f.pickingrgba;this.color=new Pq(h.x,h.y,h.z);this.opacity=h.w;break;case Ey.Aa:case Ey.Ca:case Ey.Rf:h=f.candidates;if(null==h)throw Error("Cannot pick XYZ if no object has been selected");var k=this;h.forEach(function(l){if(l.material===k){l=l.position.clone().applyMatrix4(l.matrixWorld);l=g.gaa(l.sub(g.LSa()));l=l.applyMatrix4(a(g));switch(f.pickingmode){case Ey.Aa:var m=l.x;break;case Ey.Ca:m=l.y;break;case Ey.Rf:m=l.z}m=b(m);k.color=new Pq(m.x,m.y,
m.z);k.opacity=m.w}});break;default:throw Error("not implemented");}return this};return c}();var sz=/*#__PURE__*/function(){function c(a){pz.call(this,a);this.type="DefaultLinePickingMaterial"}D(c,pz);L(c,"geotoolkit3d.picking.pickingrenderer.DefaultLinePickingMaterial");return c}();var tz=/*#__PURE__*/function(){function c(b){var d=b.material;b=G(b,{uniforms:d.uniforms,vertexshader:a.hcd(d),fragmentshader:a.gcd(d),defines:d.defines},!0);cz.call(this,b);this.type="DefaultShaderPickingMaterial";this.transparent=!1;this.lights=d.lights;this.side=d.side;this.blending=yu;this.extensions={derivatives:!0}}var a=$y;D(c,cz);L(c,"geotoolkit3d.picking.pickingrenderer.DefaultShaderPickingMaterial");return c}();var vz=/*#__PURE__*/va(/*#__PURE__*/function(){function c(C){for(var z=null,v=0;v<C.length;v++){var B=C[v],E=oz.I6a(B);E?z?z.union(E):z=E:w<r&&(hb("Warning Picking: object ("+B.type+"), children of ("+B.parent.type+"), do not have a proper bounding box. Picking accuracy will be reduced."),w++,w===r&&hb("Warning Picking: too much warnings, picking warnings will stop displaying."))}return z}function a(C,z){C.Zub().traverse(function(v){null!=v.material&&null!=z[v.uuid]&&(v.material=z[v.uuid],z[v.uuid]=null)})}function b(C,z){for(var v=
Object.keys(C),B=0;B<v.length;B++)z[v[B]].visible=C[v[B]]}function d(C,z,v){C=Object.keys(C);for(var B=0;B<v.length;B++)for(var E=v[B],H=0;H<C.length;H++)z[C[H]].visible=E.uuid===C[H];return C}function e(){}function f(C,z){for(var v=[],B=0;B<z.length;B++)v.push(Yy.$db(C[z[B]]));return v}function g(C){C.w++;255<C.w&&(C.z++,C.w=0);255<C.z&&(C.z=0,C.y++);255<C.y&&(C.x++,C.y=0);if(255<C.x)throw Error("Error, can't generate a unique picking ID");}function h(C){C=C.split(",");return new Mp(+C[0],+C[1],
+C[2],+C[3])}function k(C){return C.x+","+C.y+","+C.z+","+C.w}function l(C,z){var v=C.getCamera().projectionMatrix;C=C.getCamera().matrixWorldInverse;C=(new Yt).copy(C).invert();v=(new Yt).copy(v).invert();var B=cz.ftc(z.modellimits);z.projectioninversematrix=v;z.viewinversematrix=C;z.normalizationmatrix=B}function m(C,z,v,B,E,H){var F=new Mp(0,0,0,0),I=C.o4().getClearColor(t),J=(new Mp(I.r,I.g,I.b,C.o4().getClearAlpha())).multiplyScalar(255);C.Zub().traverse(function(K){var N=null!=K.Qr&&!1===K.Qr();
if(!H(K,!N))v[K.uuid]=K.visible,B[K.uuid]=K,K.visible=!1;else if(null!=K.material){v[K.uuid]=K.visible;B[K.uuid]=K;N=Array.isArray(K.material)?K.material:[K.material];g(F);F.equals(J)&&g(F);var P=[];N.forEach(function(Q){if(null==K.userData.Iqb){var R=uz(Q);null!=R&&null!=q[R]&&(Q=new q[R]({material:Q,object:K}),K instanceof Kp&&(K.userData.Iqb=Q,ez.pea(K,{dispose:function(){oz.r7a(K.userData.Iqb);K.userData.Iqb=null}})),P.push(Q))}else{R=K.userData.Iqb;if(null!=Q.uniforms&&null!=R.uniforms)for(var Y=
Object.keys(R.uniforms),ca=0;ca<Y.length;ca++)null!=Q.uniforms[Y[ca]]&&(R.uniforms[Y[ca]].value=Q.uniforms[Y[ca]].value);P.push(R)}});0!==P.length&&(1===P.length&&(N=N[0],P=P[0]),z[K.uuid]=N,K.material=P);E[k(F)]=K}})}function n(C,z,v,B){C=Array.isArray(C.material)?C.material:[C.material];C.forEach(function(E){if(null!=E.vtb){E=E.vtb();for(var H=0;H<E.length;H++)z.pickingmode=E[H].pickingmode,E[H].callback(x(z)[0],v,B)}})}function p(){0!==A.length&&(A.forEach(function(C){if(C.userData&&C.userData.dispose){var z=
C.userData.dispose;z(C)}}),A=[])}var q={},r=10,t=new Pq,u=new Vd,w=0,y=cz.etc,A=[];D(e,dz);L(e,"geotoolkit3d.picking.RendererPicking");e.sv=function(C,z){q[C]=z};var x=function(){var C=null,z=[];return function(v){var B=2*v.width+1,E=2*v.height+1,H=Math.floor(v.x-v.width),F=Math.floor(v.texture.height-(v.y+v.height));v.texture.scissor.set(H,F,H+B,F+E);v.texture.scissorTest=!0;var I=B*E;if(null==C||4*I!==C.length)C=new Uint8Array(4*I),z.length=I;else if(null!=C.fill)C.fill(0);else for(var J=0;J<C.length;J++)C[J]=
0;J=Object.keys(v.objects);for(var K=0;K<J.length;K++)if(null==v.candidates||-1!==v.candidates.indexOf(v.objects[J[K]])){v.pickingrgba=h(J[K]).divideScalar(255);var N=Array.isArray(v.objects[J[K]].material)?v.objects[J[K]].material:[v.objects[J[K]].material];N.forEach(function(P){P.setOptions(v)})}J=v.plot;J.o4().setRenderTarget(v.texture);J.o4().clear();J.o4().render(J.Zub(),J.getCamera());J.o4().setRenderTarget(null);J.o4().readRenderTargetPixels(v.texture,H,F,B,E,C);for(B=0;B<I;B++)null!=z[B]?
z[B].set(C[4*B],C[4*B+1],C[4*B+2],C[4*B+3]):z[B]=new Mp(C[4*B],C[4*B+1],C[4*B+2],C[4*B+3]);return z}}();e.Ym=function(C,z,v,B,E,H){p();var F=C.getSize(u);if(0>z||0>v||z>F.ca()||v>F.da())return[];!1!==C.$xd()&&C.render();null==B&&(B=0);null==E&&(E=0);null==H&&(H=function(gb,$a){return $a});F={};var I={},J={},K={};C.ayb();var N=C.pa(!0).clone();m(C,F,J,K,I,H);B={plot:C,texture:C.vrd(),pickingmode:Ey.Ifb,objects:I,x:z,y:v,width:B,height:E,modellimits:N};l(C,B);var P=y(N);P=x(B);E=C.o4().getClearColor(t);
var Q=(new Mp(E.r,E.g,E.b,C.o4().getClearAlpha())).multiplyScalar(255);E=[];H=[];for(var R=[],Y=B.width,ca=B.height,ea=2*Y+1,ua=0;ua<P.length;ua++){var Ga=P[ua];if(!Ga.equals(Q)){var Aa=I[k(Ga)];if(null!=Aa){Ga=E.indexOf(Aa);-1===Ga&&(E.push(Aa),Ga=E.length-1);null==H[Ga]&&(H[Ga]=[Number.MAX_VALUE,Number.MAX_VALUE]);Aa=H[Ga];var Ba=ua%ea,La=Math.floor(ua/ea),Pa=(Aa[0]-Y)*(Aa[0]-Y)+(Aa[1]-ca)*(Aa[1]-ca),Oa=(Ba-Y)*(Ba-Y)+(La-ca)*(La-ca);Pa>Oa&&(Aa[0]=Ba,Aa[1]=La,R[Ga]=ua)}}}I=[];if(0<E.length){B.candidates=
E;d(J,K,E);C.csb();C.iR().updateMatrixWorld();P=c(E);if(!P||oz.GWb(P)<oz.MXc)P=N;C.rRc(!0);C.ayb({n3b:{tAd:P,QDd:{x:z,y:v}}});B.modellimits=P;l(C,B);P=y(P);B.pickingmode=Ey.Aa;N=f(x(B),R);B.pickingmode=Ey.Ca;Q=f(x(B),R);B.pickingmode=Ey.Rf;R=f(x(B),R);for(ea=0;ea<E.length;ea++)Aa=new Lp(N[ea],Q[ea],R[ea]),Aa.applyMatrix4(P),ua=z+(H[ea][0]-Y),Ga=v-(H[ea][1]-ca),Aa={object:E[ea],point:C.gaa(Aa),pointdevice:new gy(ua,Ga)},I.push(Aa),B.x=ua,B.y=Ga,B.width=0,B.height=0,n(E[ea],B,Aa,A)}var Va=new gy(z,
v);I.sort(function(gb,$a){gb=gb.pointdevice.distanceTo(Va);$a=$a.pointdevice.distanceTo(Va);return V.sign(gb-$a)});C.csb();C.rRc(!1);C.iR().updateMatrixWorld();b(J,K);a(C,F);return I};return e}(),2,"eyJzZXRQaWNraW5nTWF0ZXJpYWwiOiJzdiIsInBpY2siOiJZbSJ9");
function uz(c){return c.Oa?c.Oa():c instanceof au||c===au?"THREE.MeshBasicMaterial":c instanceof hu||c===hu?"THREE.MeshPhongMaterial":c instanceof gu||c===gu?"THREE.MeshNormalMaterial":c instanceof eu||c===eu?"THREE.MeshLambertMaterial":c instanceof hx||c===hx?"THREE.SpriteMaterial":c instanceof tt||c===tt?"THREE.LineBasicMaterial":c instanceof wt||c===wt?"THREE.LineDashedMaterial":c instanceof iw||c===iw||c instanceof Lw||c===Lw?"THREE.RawShaderMaterial":null}vz.sv(uz(au),qz);vz.sv(uz(eu),qz);
vz.sv(uz(hu),qz);vz.sv(uz(gu),qz);vz.sv(uz(hx),rz);vz.sv(uz(tt),sz);vz.sv(uz(wt),sz);vz.sv(uz(Lw),tz);var wz=/*#__PURE__*/va(/*#__PURE__*/function(){function c(f){f=G(f,{zoomspeed:1,mindistance:0,maxdistance:Infinity,norotate:!1,rotatespeed:1,keypanspeed:7,nodblclick:!1,dblclickspeed:250,autorotate:!1,autorotatespeed:2,minpolarangle:0,maxpolarangle:Math.PI,minazimuthangle:-Infinity,maxazimuthangle:Infinity,constantzoom:!1,nokeys:!1,keys:{LEFT:37,a4c:38,RIGHT:39,UXa:40},name:"orbitcontroller"},!0);Wy.call(this,f);this.I_a=f.constantzoom;this.dd=b.NONE;this.bV=new gy;this.VL=new gy;this.Wsa=new gy;this.CO=new gy;this.SU=new gy;
this.ida=new gy;this.e8=new Lp;this.Cb=new Lp;this.$Ib=new gy;this.ZIb=new gy;this.YIb=new gy;this.N4a=this.t3a=0;this.Pg=1;this.O2=new Lp;this.hh=!0;this.setOptions(f)}var a=1E-6,b={NONE:-1,yza:3,VFb:4,Mgb:5},d=(new tv).setFromUnitVectors(new Lp(0,0,1),new Lp(0,1,0)),e=d.clone().invert();D(c,Wy);L(c,"geotoolkit3d.controller.OrbitController");c.prototype.setOptions=function(f){Wy.prototype.setOptions.call(this,f);if(!this.hh)return this;var g=G(f,{mindistance:this.MU,maxdistance:this.Uca,norotate:this.I2,
rotatespeed:this.Ada,keypanspeed:this.ujc,nodblclick:this.fCa,autorotate:this.xLa,autorotatespeed:this.cgc,minpolarangle:this.LMb,maxpolarangle:this.yMb,minazimuthangle:this.GMb,maxazimuthangle:this.rMb,nokeys:this.s8c,keys:this.wE,constantzoom:this.I_a,position:null!=this.Rb?this.Rb.position:this.ECa,lookat:this.Qg},!0);this.I_a=g.constantzoom;this.MU=g.mindistance;this.Uca=g.maxdistance;this.I2=g.norotate;this.Ada=g.rotatespeed;this.ujc=g.keypanspeed;this.fCa=g.nodblclick;this.xLa=g.autorotate;
this.cgc=g.autorotatespeed;this.LMb=g.minpolarangle;this.yMb=g.maxpolarangle;this.GMb=g.minazimuthangle;this.rMb=g.maxazimuthangle;this.s8c=g.nokeys;this.wE=g.keys;this.CIb=f.dblclickspeed;this.BDa=g.lookat;this.wAa=this.RLa=(new Lp).subVectors(this.BDa,this.ECa).length();this.Qg.copy(this.BDa);this.dd=b.NONE;this.dQd();return this};c.prototype.ta=function(){var f=Wy.prototype.ta.call(this);f.mindistance=this.MU;f.maxdistance=this.Uca;f.norotate=this.I2;f.rotatespeed=this.Ada;f.nodblclick=this.fCa;
f.dblclickspeed=this.CIb;return f};c.prototype.cF=function(f){!1===this.If||this.fCa||this.u$b(f.plotX,f.plotY)};c.prototype.LD=function(f){!1===this.If||this.I2||(this.dd=b.yza,this.bV.set(f.plotX,f.plotY))};c.prototype.Rz=function(f){!1!==this.If&&!0!==this.I2&&this.dd===b.yza&&(this.VL.set(f.plotX,f.plotY),this.Wsa.subVectors(this.VL,this.bV),f=this.lc.getSize().da(),this.$4b(2*Math.PI*this.Wsa.x/f*this.Ada),this.XHd(2*Math.PI*this.Wsa.y/f*this.Ada),this.bV.copy(this.VL),this.DT())};c.prototype.KD=
function(f){!1!==this.If&&(this.dd=b.NONE)};c.prototype.OD=function(f){if(!1!==this.If&&!0!==this.wO){this.dd=b.VFb;var g=f.distanceX;f=f.distanceY;g=Math.sqrt(g*g+f*f);this.$Ib.set(0,g)}};c.prototype.ND=function(f){if(!1!==this.If&&!0!==this.wO&&this.dd===b.VFb){var g=f.distanceX;f=f.distanceY;g=Math.sqrt(g*g+f*f);this.ZIb.set(0,g);this.YIb.subVectors(this.ZIb,this.$Ib);if(5<this.YIb.y)this.zvc();else if(-5>this.YIb.y)this.yvc();else return;this.$Ib.copy(this.ZIb);this.DT()}};c.prototype.dF=function(f){!1!==
this.If&&(this.dd=b.NONE)};c.prototype.eF=function(f){!1!==this.If&&!0!==this.W7&&(this.dd=b.Mgb,this.CO.set(f.plotX,f.plotY))};c.prototype.QD=function(f){!1!==this.If&&!0!==this.W7&&this.dd===b.Mgb&&(this.SU.set(f.plotX,f.plotY),this.ida.subVectors(this.SU,this.CO),5>this.ida.length()||(this.pan(this.ida.x,this.ida.y),this.CO.copy(this.SU),this.DT()))};c.prototype.lC=function(f){!1!==this.If&&(this.dd=b.NONE)};c.prototype.zp=function(f){!1!==this.If&&!0!==this.wO&&(f.preventDefault(),f=-f.deltaY,
0<f?this.zvc():this.yvc(),this.DT())};c.prototype.dQd=function(){var f=this.Rb.position;this.Cb.copy(f).sub(this.Qg);this.Cb.applyQuaternion(d);this.Tba=Math.atan2(this.Cb.x,this.Cb.z);this.kda=Math.atan2(Math.sqrt(this.Cb.x*this.Cb.x+this.Cb.z*this.Cb.z),this.Cb.y)};c.prototype.u$b=function(f,g){f=vz.Ym(this.lc,f,g,this.wc,this.wc);0<f.length&&(this.lc.F5b(f[0].point,!0),this.BDa.copy(f[0].point),this.ECa.copy(this.lc.Yua()),this.wAa=this.RLa=(new Lp).subVectors(this.BDa,this.ECa).length())};c.prototype.$4b=
function(f){void 0===f&&(f=this.vWb());this.Tba-=f;this.Tba=Math.max(this.GMb,Math.min(this.rMb,this.Tba))};c.prototype.XHd=function(f){void 0===f&&(f=this.vWb());this.kda=!this.I_a||0<this.wAa?this.kda-f:this.kda+f;this.kda=Math.max(this.LMb,Math.min(this.yMb,this.kda))};c.prototype.vWb=function(){return 2*Math.PI/60/60*this.cgc};c.prototype.REc=function(){return Math.pow(.95,this.P5a)};c.prototype.xxb=function(f){var g=this.Rb.matrix.elements;this.e8.set(g[0],g[1],g[2]);this.e8.multiplyScalar(-f);
this.O2.add(this.e8)};c.prototype.zxb=function(f){var g=this.Rb.matrix.elements;this.e8.set(g[4],g[5],g[6]);this.e8.multiplyScalar(f);this.O2.add(this.e8)};c.prototype.pan=function(f,g){var h=this.lc.getSize(),k=h.ca();h=h.da();if(this.Rb instanceof av){var l=this.RLa;this.I_a||(l=this.Rb.position,l=l.clone().sub(this.Qg),l=l.length());l*=Math.tan(this.Rb.fov/2*Math.PI/180);this.xxb(2*f*l/k);this.zxb(2*g*l/h)}else void 0!==this.Rb.top&&(this.xxb(f*(this.Rb.right-this.Rb.left)/k),this.zxb(g*(this.Rb.top-
this.Rb.bottom)/h))};c.prototype.yvc=function(f){void 0===f&&(f=this.REc());this.Pg/=f;this.wAa+=this.RLa*(1-f)};c.prototype.zvc=function(f){void 0===f&&(f=this.REc());this.Pg*=f;this.wAa-=this.RLa*(1-f)};c.prototype.DT=function(){var f=this.Rb.position;if(this.dd===b.ROTATE||this.dd===b.yza)this.kda=Math.max(a,Math.min(Math.PI-a,this.kda));if(this.I_a)var g=this.wAa;else this.Cb.copy(f).sub(this.Qg),g=this.Cb.length()*this.Pg;g=Math.max(this.MU,Math.min(this.Uca,g));this.Qg.add(this.O2);this.Rb instanceof
av||(this.Rb.left*=this.Pg,this.Rb.right*=this.Pg,this.Rb.top*=this.Pg,this.Rb.bottom*=this.Pg,this.Rb.updateProjectionMatrix());this.xLa&&this.dd===b.NONE&&this.$4b();this.Cb.x=g*Math.sin(this.kda)*Math.sin(this.Tba);this.Cb.y=g*Math.cos(this.kda);this.Cb.z=g*Math.sin(this.kda)*Math.cos(this.Tba);this.Cb.applyQuaternion(e);f.copy(this.Qg).add(this.Cb);this.Rb.lookAt(this.Qg);this.Pg=1;this.O2.set(0,0,0);mz.prototype.Xf.call(this.Rb,new gz({type:fz.Camera,source:this,args:[]}))};c.prototype.VMc=function(){};
c.prototype.dispose=function(){this.lc=this.Rb=null;Wy.prototype.dispose.call(this)};return c}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoidGEiLCJvbk1vdXNlV2hlZWwiOiJ6cCJ9fX0g");var xz=/*#__PURE__*/va(/*#__PURE__*/function(){function c(){}L(c,"geotoolkit3d.scene.animation.AbstractAnimation");c.prototype.oN=Fb;return c}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJydW4iOiJvTiJ9fX0g");var yz=/*#__PURE__*/va(/*#__PURE__*/function(){function c(b){xz.call(this);this.z6c=(b?b["function"]:null)||a}function a(){return!0}D(c,xz);L(c,"geotoolkit3d.scene.animation.Animation");c.prototype.oN=function(){return this.z6c()};return c}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJydW4iOiJvTiJ9fX0g");var zz=/*#__PURE__*/va(/*#__PURE__*/function(){function c(g){g=G(g,{name:"firstpersoncontroller",keypanspeed:168,pointerlock:!1,inverty:!1,rotatespeed:30,deltaCap:.1},!0);wz.call(this,g);this.i8=!1;this.dsa=g.inverty;this.Z_a=g.deltaCap;this.jlc=new gy;this.iOa=new gy;this.hh=!0;this.setOptions(g)}function a(){}var b=1E-6,d={NONE:-1,yza:3,VFb:4,Mgb:5},e=(new tv).setFromUnitVectors(new Lp(0,0,1),new Lp(0,1,0)),f=e.clone().invert();D(c,wz);L(c,"geotoolkit3d.controller.FirstPersonController");c.prototype.setOptions=function(g){wz.prototype.setOptions.call(this,
g);if(!this.hh)return this;g=G(g,{pointerlock:this.i8,inverty:this.dsa,deltaCap:this.Z_a},!0);this.i8=sd.Fna()?!1:g.pointerlock;this.dsa=g.inverty;this.Z_a=g.deltaCap;this.Cb.copy(this.Qg).sub(this.Rb.position);return this};c.prototype.ta=function(){var g=wz.prototype.ta.call(this);g.pointerlock=this.i8;g.inverty=this.dsa;g.deltaCap=this.Z_a;return g};c.prototype.BG=a;c.prototype.tI=a;c.prototype.AK=a;c.prototype.BK=function(g){for(var h in this.ika)delete this.ika[h]};c.prototype.Xc=function(g){wz.prototype.Xc.call(this,
g);this.i8&&(g=this.lc.o4().domElement,g.requestPointerLock=g.requestPointerLock||g.mozRequestPointerLock||g.webkitRequestPointerLock,g.requestPointerLock())};c.prototype.Oc=function(g){wz.prototype.Oc.call(this,g);this.i8&&(Za.document.exitPointerLock=Za.document.exitPointerLock||Za.document.mozExitPointerLock||Za.document.webkitExitPointerLock,Za.document.exitPointerLock())};c.prototype.zK=function(g){!1!==this.If&&this.ITc()};c.prototype.Rmd=function(g,h){for(var k=!1,l=!1,m=0;m<g.length;m++){switch(g[m]){case "37":case "65":h.add(new Lp(-1,
0,0));break;case "39":case "68":h.add(new Lp(1,0,0));break;case "38":case "87":h.add(new Lp(0,0,-1));break;case "40":case "83":h.add(new Lp(0,0,1));break;case "82":h.add(new Lp(0,1,0));break;case "70":h.add(new Lp(0,-1,0));break;case "16":k=!0;break;case "90":l=!0;break;default:h.add(new Lp(0,0,0))}k&&h.multiplyScalar(2);l&&h.multiplyScalar(.5)}};c.prototype.ITc=function(){if(null==this.c_a){var g=new Yt,h=this;this.c_a=new yz({"function":function(){var k=Date.now(),l=(k-h.Ijc)/1E3;l>h.Z_a&&(l=h.Z_a);
h.Ijc=k;k=Object.keys(h.ika);if(0===k.length&&0===h.O2.lengthSq()&&0===h.N4a&&0===h.t3a)return!0;if(0!==k.length){var m=new Lp;h.Rmd(k,m);h.Rb.updateMatrixWorld();g.extractRotation(h.Rb.matrixWorld);m.applyMatrix4(g);m.multiplyScalar(h.ujc*l);h.Rb.position.add(m);h.Qg.add(m)}if(0!==h.N4a||0!==h.t3a){k=h.Rb.position;h.Cb.copy(h.Qg).sub(k);h.Cb.applyQuaternion(e);m=Math.atan2(h.Cb.x,h.Cb.z);var n=Math.atan2(Math.sqrt(h.Cb.x*h.Cb.x+h.Cb.z*h.Cb.z),h.Cb.y);h.xLa&&h.$4b(h.vWb());m+=h.N4a*l*h.Ada;n+=h.t3a*
l*h.Ada;m=Math.max(h.GMb,Math.min(h.rMb,m));n=Math.max(h.LMb,Math.min(h.yMb,n));if(h.dd===d.ROTATE||h.dd===d.yza)n=Math.max(b,Math.min(Math.PI-b,n));l=h.Cb.length()*h.Pg;l=Math.max(h.MU,Math.min(h.Uca,l));h.Rb.position.add(h.O2);h.Rb instanceof av||(h.Rb.left*=h.Pg,h.Rb.right*=h.Pg,h.Rb.top*=h.Pg,h.Rb.bottom*=h.Pg,h.Rb.updateProjectionMatrix());h.Cb.x=l*Math.sin(n)*Math.sin(m);h.Cb.y=l*Math.cos(n);h.Cb.z=l*Math.sin(n)*Math.cos(m);h.Cb.applyQuaternion(f);h.Qg.copy(k).add(h.Cb);h.Rb.lookAt(h.Qg);h.N4a=
0;h.t3a=0;h.Pg=1}0!==h.O2.lengthSq()&&(h.Rb.position.add(h.O2),h.Qg.add(h.O2),h.O2.set(0,0,0));return!1}})}this.lc.a8a().isc(this.c_a)||(this.lc.a8a().ORb(this.c_a),this.Ijc=Date.now())};c.prototype.LD=function(g){!1===this.If||this.I2||(this.dd=d.yza,this.bV.set(g.plotX,this.dsa?g.plotY:-g.plotY))};c.prototype.Rz=function(g){!1!==this.If&&!0!==this.I2&&this.dd===d.yza&&(this.i8&&!this.Gm(g)?this.Wsa.set(g.movementX,this.dsa?g.movementY:-g.movementY):this.i8&&this.Gm(g)?(this.VL.set(g.plotX,this.dsa?
g.plotY:-g.plotY),this.Wsa.subVectors(this.VL,this.jlc),this.jlc.copy(this.VL)):(this.VL.set(g.plotX,this.dsa?g.plotY:-g.plotY),this.Wsa.subVectors(this.VL,this.bV)),g=this.lc.getSize().ca(),this.N4a=2*Math.PI*this.Wsa.x/g,this.t3a=2*Math.PI*this.Wsa.y/g,this.i8||this.bV.copy(this.VL),this.DT())};c.prototype.QD=function(g){!1!==this.If&&!0!==this.W7&&this.dd===d.Mgb&&(this.i8&&!this.Gm(g)?this.ida.set(g.movementX,this.dsa?g.movementY:-g.movementY):this.i8&&this.Gm(g)?(this.SU.set(g.plotX,g.plotY),
0===this.iOa.x&&0===this.iOa.y&&this.iOa.copy(this.CO),this.ida.subVectors(this.SU,this.iOa),this.iOa.copy(this.SU)):(this.SU.set(g.plotX,g.plotY),this.ida.subVectors(this.SU,this.CO),this.CO.copy(this.SU)),5>this.ida.length()||(this.e8.set(this.ida.x,this.ida.y,0),this.O2.add(this.e8),this.DT()))};c.prototype.lC=function(g){wz.prototype.lC.call(this,g);this.iOa=new gy};c.prototype.KD=function(g){!1!==this.If&&(this.dd=d.NONE,this.i8&&(Za.document.exitPointerLock=Za.document.exitPointerLock||Za.document.mozExitPointerLock||
Za.document.webkitExitPointerLock,Za.document.exitPointerLock()))};c.prototype.OD=function(g){if(!1!==this.If&&!0!==this.wO){var h=g.distanceX;g=g.distanceY;this.vmc=Math.sqrt(h*h+g*g)}};c.prototype.ND=function(g){if(!1!==this.If&&!0!==this.wO){g.preventDefault();var h=g.distanceX;g=g.distanceY;g=Math.sqrt(h*h+g*g);h=this.vmc-g;if(0!==h){this.vmc=g;g=this.lc.getSize();g=g.ca();if(this.Rb instanceof av){var k=this.Rb.position;k=k.clone().sub(this.Qg);k=k.length();k*=Math.tan(this.Rb.fov/2*Math.PI/
180);this.Axb(2*h*k/g)}else void 0!==this.Rb.top&&this.Axb(2*(this.Rb.right-this.Rb.left)/g);this.DT()}}};c.prototype.zp=function(g){if(!1!==this.If&&!0!==this.wO){g.preventDefault();g=-g.deltaY;var h=this.lc.getSize();h=h.ca();if(this.Rb instanceof av){var k=this.Rb.position;k=k.clone().sub(this.Qg);k=k.length();k*=Math.tan(this.Rb.fov/2*Math.PI/180);this.Axb(2*g*k/h)}else void 0!==this.Rb.top&&this.Axb(2*(this.Rb.right-this.Rb.left)/h);this.DT()}};c.prototype.Axb=function(g){var h=this.Rb.matrix.elements;
this.e8.set(h[8],h[9],h[10]);this.e8.multiplyScalar(g);this.O2.add(this.e8)};c.prototype.DT=function(){this.ITc()};return c}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoidGEiLCJvbk1vdXNlV2hlZWwiOiJ6cCJ9fX0g");var Az=/*#__PURE__*/va(/*#__PURE__*/{l1:"XY",$gb:"XZ",vGb:"YZ"},2,"eyJYWSI6ImwxIiwiWFoiOiIkZ2IiLCJZWiI6InZHYiJ9"),Bz=/*#__PURE__*/va(/*#__PURE__*/function(){function c(a){a=G(a,{zoomspeed:1,panspeed:.001,noroll:!1,plane:c.Plane.$gb,name:"rollcontroller"});Wy.call(this,a);this.CO=new gy;this.H3=new gy;this.ox=new gy;this.POb=0;this.ym=a.plane;this.V3a=this.fXb();this.hh=!0;this.setOptions(a)}D(c,Wy);L(c,"geotoolkit3d.controller.RollController");c.Plane=Az;c.prototype.setOptions=function(a){Wy.prototype.setOptions.call(this,a);if(!this.hh)return this;a=G(a,{panspeed:this.wOa,noroll:this.zsa,plane:this.ym},
!0);this.wOa=a.panspeed;this.zsa=a.noroll;this.ym=a.plane;this.POb=0;this.V3a=this.fXb();return this};c.prototype.ta=function(){var a=Wy.prototype.ta.call(this);a.panspeed=this.wOa;a.noroll=this.zsa;a.plane=this.ym;return a};c.prototype.LD=function(a){this.zsa||(this.F9c=new gy(a.plotX,a.plotY),this.POb=this.fXb())};c.prototype.Rz=function(a){if(!0!==this.zsa){var b=new gy;this.ox.set(a.plotX,a.plotY);b.subVectors(this.ox,new gy(this.lc.getSize().ca()/2,this.lc.getSize().da()/2));a=(new gy).subVectors(this.F9c,
new gy(this.lc.getSize().ca()/2,this.lc.getSize().da()/2));a=Math.atan2(a.x,-a.y);b=Math.atan2(b.x,-b.y);this.VHd(b-a+this.POb);mz.prototype.Xf.call(this.Rb,new gz({type:fz.Camera,source:this,args:[]}))}};c.prototype.KD=function(a){};c.prototype.OD=function(a){if(!0!==this.wO){var b=a.distanceX;a=a.distanceY;b=Math.sqrt(b*b+a*a);this.H3.set(0,b)}};c.prototype.ND=function(a){if(!0!==this.wO){var b=a.distanceX;a=a.distanceY;var d=new gy;this.ox.set(b,a);d.subVectors(this.ox,this.H3);this.xCb(d.y/this.lc.getSize().da());
this.H3.copy(this.ox);mz.prototype.Xf.call(this.Rb,new gz({type:fz.Camera,source:this,args:[]}))}};c.prototype.dF=function(a){};c.prototype.eF=function(a){!0!==this.W7&&this.CO.set(a.plotX,a.plotY)};c.prototype.QD=function(a){if(!0!==this.W7){var b=new gy;this.ox.set(a.plotX,a.plotY);b.subVectors(this.ox,this.CO);this.G2b(b);this.CO.copy(this.ox);mz.prototype.Xf.call(this.Rb,new gz({type:fz.Camera,source:this,args:[]}))}};c.prototype.lC=function(a){};c.prototype.zp=function(a){!1!==this.If&&!0!==
this.wO&&(a.preventDefault(),a=a.deltaY,this.xCb(a),mz.prototype.Xf.call(this.Rb,new gz({type:fz.Camera,source:this,args:[]})))};c.prototype.G2b=function(a){var b=this.Rb.position;b=b.clone().sub(this.Qg);b=b.length();b*=Math.tan(this.Rb.fov/2*Math.PI/180);this.xxb(2*a.x*b/this.lc.getSize().ca());this.zxb(2*a.y*b/this.lc.getSize().da())};c.prototype.xxb=function(a){var b=this.Rb.matrix.elements;b=new Lp(b[0],b[1],b[2]);b.multiplyScalar(-a);this.Rb.position.add(b);this.Qg.add(b);this.Rb.lookAt(this.Qg);
this.W9b()};c.prototype.zxb=function(a){var b=this.Rb.matrix.elements;b=new Lp(b[4],b[5],b[6]);b.multiplyScalar(a);this.Rb.position.add(b);this.Qg.add(b);this.Rb.lookAt(this.Qg);this.W9b()};c.prototype.xCb=function(a){a=this.Rb.fov+=a*this.P5a;a=Math.min(Math.max(10,a),90);this.lc.setOptions({camera:{fov:a}})};c.prototype.VHd=function(a){this.V3a=a;this.W9b()};c.prototype.fXb=function(){switch(this.ym){case Az.$gb:return this.Rb.rotation.z;case Az.l1:return this.Rb.rotation.y;case Az.vGb:return this.Rb.rotation.x}return 0};
c.prototype.W9b=function(){switch(this.ym){case Az.$gb:this.Rb.rotation.z=this.V3a;break;case Az.l1:this.Rb.rotation.y=this.V3a;break;case Az.vGb:this.Rb.rotation.x=this.V3a}};return c}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoidGEiLCJvbk1vdXNlV2hlZWwiOiJ6cCJ9fX0g");var Dz=/*#__PURE__*/va(/*#__PURE__*/function(){function c(g){var h=G(g,{rotatespeed:1,zoomspeed:.005,panspeed:.001,norotate:!1,noroll:!1,nodblclick:!1,dblclickspeed:250,staticmoving:!1,dynamicdampingfactor:.2,mindistance:0,maxdistance:Infinity,keys:{LEFT:37,a4c:38,RIGHT:39,UXa:40},name:"trackballcontroller"});Wy.call(this,h);this.F3a=this.dd=b;this.uY=new Lp;this.bV=new Lp;this.VL=new Lp;this.H3=new gy;this.qQa=new gy;this.uoe=this.voe=0;this.CO=new gy;this.SU=new gy;this.mJ=g.position.clone();this.hh=!0;this.setOptions(h)}var a=
1E-6,b=-1,d=3,e=4,f=5;D(c,Wy);L(c,"geotoolkit3d.controller.TrackballController");c.prototype.setOptions=function(g){Wy.prototype.setOptions.call(this,g);if(!this.hh)return this;var h=G(g,{rotatespeed:this.Ada,panspeed:this.wOa,norotate:this.I2,noroll:this.zsa,nodblclick:this.fCa,staticmoving:this.qob,dynamicdampingfactor:this.djb,mindistance:this.MU,maxdistance:this.Uca,position:null!=this.Rb?this.Rb.position:this.ECa,lookat:this.Qg,keys:this.wE},!0);this.CIb=g.dblclickspeed;this.Ada=h.rotatespeed;
this.wOa=h.panspeed;this.I2=h.norotate;this.zsa=h.noroll;this.fCa=h.nodblclick;this.qob=h.staticmoving;this.djb=h.dynamicdampingfactor;this.MU=h.mindistance;this.Uca=h.maxdistance;this.wE=h.keys;this.BDa=h.lookat;this.Qg.copy(this.BDa);this.F3a=this.dd=b;return this};c.prototype.ta=function(){var g=Wy.prototype.ta.call(this);g.mindistance=this.MU;g.maxdistance=this.Uca;g.norotate=this.I2;g.rotatespeed=this.Ada;g.nodblclick=this.fCa;g.dblclickspeed=this.CIb;g.panspeed=this.wOa;g.noroll=this.zsa;return g};
c.prototype.cF=function(g){!1===this.If||this.fCa||this.u$b(g.plotX,g.plotY)};c.prototype.u$b=function(g,h){g=vz.Ym(this.lc,g,h,this.wc,this.wc);0<g.length&&this.lc.F5b(g[0].point,!0)};c.prototype.IBc=function(g,h){var k=new Lp,l=new Lp,m=new Lp,n=this.lc.getSize(),p=.5*n.ca();n=.5*n.da();m.set((g-p)/p,(n-h)/n,0);g=m.length();this.zsa?m.z=g<Math.SQRT1_2?Math.sqrt(1-g*g):.5/g:1<g?m.normalize():m.z=Math.sqrt(1-g*g);this.uY.copy(this.Rb.position).sub(this.Qg);k.copy(this.Rb.up).setLength(m.y);k.add(l.copy(this.Rb.up).cross(this.uY).setLength(m.x));
k.add(this.uY.setLength(m.z));return k};c.prototype.VMc=function(){if(this.dd===d){var g=new Lp,h=new tv,k=Math.acos(this.bV.dot(this.VL)/this.bV.length()/this.VL.length());.01<k&&(g.crossVectors(this.bV,this.VL).normalize(),k*=this.Ada,h.setFromAxisAngle(g,-k),this.uY.applyQuaternion(h),this.Rb.up.applyQuaternion(h),this.VL.applyQuaternion(h),this.qob?this.bV.copy(this.VL):(h.setFromAxisAngle(g,k*(this.djb-1)),this.bV.applyQuaternion(h)))}};c.prototype.xCb=function(){if(this.dd===e){var g=1+Math.abs(this.qQa.y-
this.H3.y)*this.P5a;this.qQa.y>this.H3.y&&(g=1/g);1!==g&&0<g&&(this.uY.multiplyScalar(g),this.qob?this.H3.copy(this.qQa):this.H3.y+=(this.qQa.y-this.H3.y)*this.djb)}};c.prototype.G2b=function(){if(this.dd===f){var g=new gy,h=new Lp,k=new Lp;g.copy(this.SU).sub(this.CO);g.lengthSq()&&(g.multiplyScalar(this.uY.length()*this.wOa),k.copy(this.uY).cross(this.Rb.up).setLength(g.x),k.add(h.copy(this.Rb.up).setLength(g.y)),this.Rb.position.add(k),this.Qg.add(k),this.qob?this.CO.copy(this.SU):this.CO.add(g.subVectors(this.SU,
this.CO).multiplyScalar(this.djb)))}};c.prototype.vdd=function(){this.wO&&this.W7||(this.uY.lengthSq()>this.Uca*this.Uca&&this.Rb.position.addVectors(this.Qg,this.uY.setLength(this.Uca)),this.uY.lengthSq()<this.MU*this.MU&&this.Rb.position.addVectors(this.Qg,this.uY.setLength(this.MU)))};c.prototype.DT=function(){this.uY.subVectors(this.Rb.position,this.Qg);this.I2||this.VMc();this.wO||this.xCb();this.W7||this.G2b();this.Rb.position.addVectors(this.Qg,this.uY);this.vdd();this.Rb.lookAt(this.Qg);this.mJ.distanceToSquared(this.Rb.position)>
a&&this.mJ.copy(this.Rb.position);mz.prototype.Xf.call(this.Rb,new gz({type:fz.Camera,source:this,args:[]}))};c.prototype.LD=function(g){!1===this.If||this.I2||(this.dd=d,this.bV.copy(this.IBc(g.plotX,g.plotY)),this.VL.copy(this.bV))};c.prototype.Rz=function(g){!1!==this.If&&!0!==this.I2&&this.dd===d&&(this.VL.copy(this.IBc(g.plotX,g.plotY)),this.DT())};c.prototype.KD=function(g){!1!==this.If&&(this.dd=b)};c.prototype.OD=function(g){if(!1!==this.If&&!0!==this.wO){this.dd=e;var h=g.distanceX;g=g.distanceY;
h=Math.sqrt(h*h+g*g);this.H3.set(0,h)}};c.prototype.ND=function(g){if(!1!==this.If&&!0!==this.wO&&this.dd===e){var h=g.distanceX;g=g.distanceY;h=Math.sqrt(h*h+g*g);this.qQa.set(0,h);this.DT()}};c.prototype.dF=function(g){!1!==this.If&&(this.dd=b)};c.prototype.eF=function(g){!1!==this.If&&!0!==this.W7&&(this.dd=f,this.CO.set(g.plotX,g.plotY))};c.prototype.QD=function(g){!1!==this.If&&!0!==this.W7&&this.dd===f&&(this.SU.set(g.plotX,g.plotY),this.DT())};c.prototype.lC=function(g){!1!==this.If&&(this.dd=
b)};c.prototype.zp=function(g){!1!==this.If&&!0!==this.wO&&(this.dd=e,g.preventDefault(),g=-g.deltaY,this.H3.y=0,this.qQa.y=3*g,this.DT())};c.prototype.dispose=function(){this.lc=this.Rb=null;Wy.prototype.dispose.call(this)};return c}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoidGEiLCJvbk1vdXNlV2hlZWwiOiJ6cCJ9fX0g");var Ez=/*#__PURE__*/function(){function c(){this.ikc=xr}L(c,"geotoolkit3d.data.loader.surface.AbstractLoader");c.prototype.load=Fb;c.prototype.parse=Fb;return c}();var Fz=/*#__PURE__*/function(){function c(){Ez.call(this)}L(c,"geotoolkit3d.data.loader.surface.EarthVisionLoader");D(c,"geotoolkit3d.data.loader.AbstractLoader");c.prototype.load=function(a,b,d){function e(g){this.parse(new up({stream:new tp({buffer:g,stride:1}),chunksize:g.byteLength}),b,d)}var f=new bs(this.ikc);f.setResponseType("arraybuffer");f.load(a,e.bind(this),d)};c.prototype.parse=function(a,b,d){return b=(new Eg(function(e,f){a.baa(0,function(g,h,k,l,m){g&&f();k=k.filter(function(J){return J&&J.length});
var n=Number.POSITIVE_INFINITY,p=Number.NEGATIVE_INFINITY,q=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY,t=Number.POSITIVE_INFINITY,u=Number.NEGATIVE_INFINITY;g=[];h=[];l=[];m=[];var w=[],y=!1,A=!1,x=!1,C=-999.25,z;for(z=0;z<k.length;z++){var v=k[z].split(/(\s+)/).filter(function(J){return 0<J.trim().length});if(!(null==v||3>v.length))if("#"===v[0]){if(k[z].toLowerCase().includes("field")&&(k[z].includes("4")&&k[z].toLowerCase().includes("column")&&(y=!0),k[z].includes("5")&&k[z].toLowerCase().includes("row")&&
(A=!0),y&&A&&(x=!0)),k[z].includes("# Grid_size:")){v=k[z].split(" ");var B=+v[2];var E=+v[4]}}else{var H=Number(v[0]),F=Number(v[1]),I=Number(v[2]);isNaN(H)||isNaN(F)||isNaN(I)||(n=Math.min(n,H),p=Math.max(p,H),q=Math.min(q,F),r=Math.max(r,F),t=Math.min(t,I),u=Math.max(u,I),g.push(H),h.push(F),l.push(I),x&&(H=Number(v[3]),v=Number(v[4]),isNaN(H)||isNaN(v)||(m.push(H),w.push(v))))}}if(0<t)for(z=t,t=-u,u=-z,z=0;z<l.length;z++)l[z]*=-1;k={x:g,y:h,z:l,xmin:n,xmax:p,ymin:q,ymax:r,zmin:t,zmax:u};if(x){z=
B*E;x=g.length;n=Array(z);p=Array(z);q=Array(z);for(z=0;z<B*E;z++)q[z]=C;for(z=0;z<x;z++)r=m[z],t=w[z],r=(t-1)*B+(r-1),n[r]=g[z],p[r]=h[z],q[r]=l[z];k=G(k,{isgridsurface:!0,width:B,height:E,xvalues:n,yvalues:p,elevation:q,nullvalue:C})}e(k)})})).then(b,d)};return c}();var Gz=/*#__PURE__*/function(){function c(){}var a=/(.*)\s+(\-?\d+\.?[\d\-\+e]*)\s+(\-?\d+\.?[\d\-\+e]*)\s+(\-?\d+\.?[\d\-\+e]*)/,b=/(.*)\s+(\-?\d+\.?[\d\-\+e]*)\s/,d=/^NORMALS[ ]+(\w+)[ ]+(\w+)/,e=/^VECTORS[ ]+(\w+)[ ]+(\w+)/,f=/^SCALARS[ ]+(\w+)[ ]+(\w+)/,g=/^FIELD[ ]+(\w+)[ ]+(\w+)/,h=/^POINTS /,k=/^POLYGONS /,l=/^LINES /,m=/^TRIANGLE_STRIPS /,n=/^POINT_DATA[ ]+(\d+)/,p=/^CELL_DATA[ ]+(\d+)/,q=/^CELLS /,r=/^CELL_TYPES /,t=/^DATASET[ ]+(\w+)/,u="STRUCTURED_POINTS",w="STRUCTURED_GRID",y="RECTILINEAR_GRID",A=
"POLYDATA",x="UNSTRUCTURED_GRID",C=/^(\d+)\s+([\s\d]*)/,z=/\s+/;c.Ndb=function(v){return+v};c.uba={Xxb:function(v,B,E){null!=E.wN&&("normals"===E.wN.type||"vector"===E.wN.type||"scalar"===E.wN.type?Array.prototype.push.apply(B.data[E.wN.name].values,v.split(z).map(c.Ndb)):"field"===E.wN.type&&(B=B.data[E.wN.name].arrays,Array.prototype.push.apply(B[B.length-1].values,v.split(z).map(c.Ndb))))},points:function(v,B,E){Array.prototype.push.apply(B.data.position,v.split(z).map(c.Ndb))},cells:function(v,
B,E){var H;null!==(H=C.exec(v))&&B.data.cells.push(H[2].split(z).map(c.Ndb))},ldd:function(v,B,E){E=B.data.cells[E.cellIndex++];switch(+v){case 1:case 2:null==B.data.pointindex&&(B.data.pointindex=[]);Array.prototype.push.apply(B.data.pointindex,E);break;case 3:null==B.data.lineindex&&(B.data.lineindex=[]);Array.prototype.push.apply(B.data.lineindex,E);break;case 4:null==B.data.lineindex&&(B.data.lineindex=[]);Array.prototype.push.apply(B.data.polylineindex,E.slice(0,2));for(v=2;v<E.length;v++)B.data.polylineindex.push(B.data.polylineindex[B.data.polylineindex.length-
1],E[v]);break;case 5:null==B.data.index&&(B.data.index=[]);Array.prototype.push.apply(B.data.index,E);break;case 6:null==B.data.index&&(B.data.index=[]);B=B.data.index;Array.prototype.push.apply(B,E.slice(0,3));for(v=3;v<E.length;v++)B.push(B[B.length-2],B[B.length-1],E[v]);break;case 7:hb("VTKParser: Unsupported/Unhandled cell type: VTK_POLYGON");break;case 8:case 9:null==B.data.index&&(B.data.index=[]);B.data.index.push(E[0],E[1],E[2]);B.data.index.push(E[0],E[2],E[3]);break;case 10:null==B.data.index&&
(B.data.index=[]);B.data.index.push(E[0],E[2],E[1]);B.data.index.push(E[0],E[1],E[3]);B.data.index.push(E[1],E[2],E[3]);B.data.index.push(E[0],E[3],E[2]);break;case 11:case 12:case 13:case 14:hb("VTKParser: Unsupported/Unhandled cell type: VTK_VOXEL VTK_HEXAHEDRON VTK_WEDGE VTK_PYRAMID");break;case 21:case 22:case 23:case 24:case 25:hb("VTKParser: Unsupported/Unhandled cell type: VTK_QUADRATIC_EDGE VTK_QUADRATIC_TRIANGLE VTK_QUADRATIC_QUAD VTK_QUADRATIC_TETRA VTK_QUADRATIC_HEXAHEDRON")}},triangles:function(v,
B,E){if(null!==(E=C.exec(v))&&(v=parseInt(E[1]),E=E[2].split(/\s+/),3<=v))for(var H,F,I,J=0;J<v-2;J++)1===J%2?(H=parseInt(E[J]),F=parseInt(E[J+2]),I=parseInt(E[J+1])):(H=parseInt(E[J]),F=parseInt(E[J+1]),I=parseInt(E[J+2])),B.data.index.push(H,F,I)},polygon:function(v,B,E){if(null!==(E=C.exec(v))&&(v=parseInt(E[1]),E=E[2].split(z),3<=v))for(var H=parseInt(E[0]),F,I,J=1,K=0;K<v-2;++K)F=parseInt(E[J]),I=parseInt(E[J+1]),B.data.index.push(H,F,I),J++},line:function(v,B,E){if(null!==(E=C.exec(v))){v=parseInt(E[1]);
E=E[2].split(z);for(var H=[],F=0;F<v;F++)H.push(parseInt(E[F]));B.data.lineindex.push(H)}}};c.nDd=function(v,B,E){null!==k.exec(v)?(B.lga=c.uba.polygon,E.data.index=[]):null!==l.exec(v)?(B.lga=c.uba.line,E.data.lineindex=[]):null!==h.exec(v)?(B.lga=c.uba.points,E.data.position=[]):null!==m.exec(v)?(B.lga=c.uba.triangles,E.data.index=[]):null!==q.exec(v)?(B.lga=c.uba.cells,E.data.cells=[]):null!==r.exec(v)?(B.lga=c.uba.ldd,B.cellIndex=0,E.data.index=[]):null!==n.exec(v)?B.lga=c.uba.Xxb:null!==p.exec(v)?
B.lga=c.uba.Xxb:g.test(v)?(B.lga=c.uba.Xxb,v=g.exec(v),B.wN={type:"field",name:v[1].toLowerCase(),arrays:[]},E.data[v[1].toLowerCase()]=B.wN):B.lga===c.uba.Xxb?f.test(v)?(v=f.exec(v),B.wN={type:"scalar",name:v[1].toLowerCase(),values:[]},E.data[v[1].toLowerCase()]=B.wN):d.test(v)?(v=d.exec(v),null==E.data.normals&&(E.data.normals=E.data[v[1].toLowerCase()]),B.wN={type:"normals",name:v[1].toLowerCase(),values:[]},E.data[v[1].toLowerCase()]=B.wN):e.test(v)?(v=e.exec(v),B.wN={type:"vector",name:v[1].toLowerCase(),
values:[]},E.data[v[1].toLowerCase()]=B.wN):null!=B.wN&&"field"===B.wN.type?(E=v.split(z),B.wN.arrays.push({name:E[0],stride:+E[1],values:[]})):hb("VTKParser: Unsupported/Unhandled submode: "+v):hb("VTKParser: Unsupported/Unhandled entry: "+v)};c.CCd=function(v,B){var E=c.Ndb;switch(t.exec(v[3])[1]){case u:B.metadata.dataset.dimensions=a.exec(v[4]).slice(2).map(E);B.metadata.dataset.origin=a.exec(v[5]).slice(2).map(E);B.metadata.dataset.spacing=a.exec(v[6]).slice(2).map(E);v=3;break;case w:B.metadata.dataset.dimensions=
a.exec(v[4]).slice(2).map(E);B.metadata.dataset.points=b.exec(v[5]).slice(2).map(E)[0];v=2;break;case y:B.metadata.dataset.dimensions=a.exec(v[4]).slice(2).map(E);v=1;break;case A:case x:B.metadata.dataset.points=b.exec(v[4]).slice(2).map(E)[0];v=1;break;default:v=-1}return v};return c}();var Hz=/*#__PURE__*/va(/*#__PURE__*/function(){function c(){}var a=/^[e\-0-9\. ]*$/,b=/(?![\x20-\x7E]|[\x0D]|[\x0A])./g,d="ASCII",e=Gz;L(c,"geotoolkit3d.data.loader.vtk.VTKASCIIStreamLoader");c.ZFc=function(f){return new Eg(function(g,h){f.kyb(0,10,function(k,l,m,n,p,q){k?h(k):g(-1!==m[2].indexOf(d))})})};c.parse=function(f){return new Eg(function(g,h){var k={};f.kyb(0,10,function(l,m,n,p,q,r){if(l)h(l);else if(l=n,n=n.map(function(u){return u.replace(b," ").trim()}).filter(function(u){return 0!==u.length}),k.metadata={header:n[0],
title:n[1],type:n[2].split(" ")[1],dataset:{type:n[3]}},k.data={},m=e.CCd(n,k),-1===m)h("Unsupported dataset type: "+n[3]);else{m+=l.indexOf(n[3]);var t={};f.baa(m,function v(w,y,A,x,C,z){for(w=0;w<A.length;w++)C=A[w],C=C.replace(b," ").trim(),0!==C.length&&"#"!==C.charAt(0)&&(a.test(C)?t.lga(C,k,t):e.nDd(C,t,k));x?g(k):f.baa(y+A.length,v)})}})})};return c}(),1,"eyJpc0FzY2lpIjoiWkZjIn0g");var Iz=/*#__PURE__*/va(/*#__PURE__*/function(){function c(){}L(c,"geotoolkit3d.util.Attributes");c.LEa=function(a){var b=a.Ph(),d=a.rb();d=Pd.Sg(d);var e=new Pq(d.lk()/255,d.kk()/255,d.ik()/255);b=null==b||0===b.length?new tt({color:e.getHex(),linewidth:a.ca(),transparent:255>d.Ek(),opacity:d.Ek()/255}):new wt({color:e.getHex(),linewidth:a.ca(),scale:250,gapSize:b[1],dashSize:b[0],transparent:255>d.Ek(),opacity:d.Ek()/255});b.userData.EW=a;return b};c.hUb=function(a){var b=c.$va(a.rb());b=new eu({color:b.color.getHex(),transparent:1>
b.opacity,opacity:b.opacity,side:Gr});b.userData.Yla=a;return b};c.yfd=function(a){var b=c.$va(a.rb());b=new hu({color:b.color.getHex(),transparent:1>b.opacity,opacity:b.opacity,side:Gr});b.userData.Yla=a;return b};c.$va=function(a){var b=Pd.Sg(a);a=new Pq(b.lk()/255,b.kk()/255,b.ik()/255);b=b.Ek()/255;return{color:a,opacity:b}};c.kWc=function(a,b){var d=c.$va(b.rb());a.color=d.color;a.transparent=1>d.opacity;a.opacity=d.opacity;a.userData.Yla=b;a.needsUpdate=!0;return a};return c}(),2,"eyJjcmVhdGVMaW5lTWF0ZXJpYWwiOiJMRWEiLCJjcmVhdGVNZXNoTWF0ZXJpYWwiOiJoVWIiLCJjcmVhdGVQaG9uZ01lc2hNYXRlcmlhbCI6InlmZCIsImdldFRocmVlQ29sb3IiOiIkdmEiLCJ1cGRhdGVNZXNoTWF0ZXJpYWwiOiJrV2MifSAg");var Jz=/*#__PURE__*/function(){function c(b){b.defines.hasOwnProperty("addedPointCloudShaders")||(b.defines.addedPointCloudShaders=!0,b.uniforms.cgalphaTest={type:"f",value:1},b.uniforms.cgpointTexture={type:"tv",value:null},b.uniforms.cgpointColor={type:"c",value:new Pq(1,1,1)},b.uniforms.cgpointOpacity={type:"f",value:1},b.uniforms.cgpixelScale={type:"f",value:ac()})}function a(){}L(a,"geotoolkit3d.util.shaders.PointCloud");a.R1c=["attribute float cgpointSize;\nattribute float cgpointVisible;\nvarying float vcgpointVisible;\nuniform float cgpixelScale;\n#include <common>\n#include <logdepthbuf_pars_vertex>",
Zy.eYa,"",Zy.PN+" {","\tvec4 mvPosition = modelViewMatrix * vec4(position, 1.0);",Zy.dYa,"\tvcgpointVisible = cgpointVisible;\n\tgl_PointSize = cgpixelScale * cgpointSize * 2.0;\n\tgl_Position = projectionMatrix * mvPosition;\n#include <logdepthbuf_vertex>\n}"].join("\n");a.Q1c=["uniform sampler2D cgpointTexture;\nuniform vec3 cgpointColor;\nuniform float cgpointOpacity;\nuniform float cgalphaTest;\n#include <logdepthbuf_pars_fragment>",Zy.cYa,"varying float vcgpointVisible;",Zy.PN+" {","\tif(vcgpointVisible < 0.1) {\n\t\tdiscard;\n\t}\n\tvec4 diffuseColor = vec4(cgpointColor, 1.0);",
Zy.bYa,"\tvec4 finalColor = texture2D(cgpointTexture, gl_PointCoord);\n\n\tif(finalColor.a < cgalphaTest) {\n\t\tdiscard;\n\t}\n\tfinalColor.a = max(finalColor.r + finalColor.g + finalColor.b, 1.0) * cgpointOpacity;\n\tgl_FragColor = diffuseColor * finalColor;\n#include <logdepthbuf_fragment>\n}"].join("\n");a.$Ld=function(b,d){d&&(c(b),d.hasOwnProperty("colorprovider")?b.uniforms.cgpointColor.value="string"===typeof d.colorprovider?new Pq(d.colorprovider):d.colorprovider instanceof Pq?d.colorprovider:
new Pq(16777215):d.hasOwnProperty("color")&&(b.uniforms.cgpointColor.value=d.color),d.hasOwnProperty("symbol")&&(b.uniforms.cgpointTexture.value=d.symbol),d.hasOwnProperty("opacity")&&(b.uniforms.cgpointOpacity.value=d.opacity),d.hasOwnProperty("alphatest")&&(b.uniforms.cgalphaTest.value=d.alphatest))};a.$qd=function(b){c(b);return{symbol:b.uniforms.cgpointTexture.value,color:b.uniforms.cgpointColor.value,opacity:b.uniforms.cgpointOpacity.value,alphatest:b.uniforms.cgalphaTest.value,pixelscale:b.uniforms.cgpixelScale.value}};
return a}();var Kz=/*#__PURE__*/va(/*#__PURE__*/function(){function c(a){Lw.call(this,{side:a.side||Gr,opacity:null!=a.opacity?a.opacity:1,transparent:null!=a.transparent?a.transparent:!0,vertexShader:a.vertexShader,fragmentShader:a.fragmentShader,uniforms:null!=a.uniforms?a.uniforms:{}});this.i5a=null;this.type="ColorMapShaderMaterial";this.setOptions(a)}D(c,Lw);L(c,"geotoolkit3d.scene.ColorMapShaderMaterial");c.prototype.setOptions=function(a){null!=a.vertexcolors&&(a.vertexcolors!==jy&&a.vertexcolors!==zu&&a.vertexcolors!==as||hb("THREE.VertexColors, THREE.FaceColors and THREE.NoColors was deprecated since 3.3, use true instead of THREE.VertexColors and false instead of THREE.NoColors"),
a.vertexColors=a.vertexcolors===jy||!0===a.vertexcolors);var b=G(a,{opacity:this.opacity,transparent:this.transparent,side:this.side,vertexColors:this.vertexColors,alphaTest:this.alphaTest,blendDst:this.blendDst,blendEquation:this.blendEquation,blending:this.blending,blendSrc:this.blendSrc,colorWrite:this.colorWrite,depthFunc:this.depthFunc,depthTest:this.depthTest,depthWrite:this.depthWrite,fog:this.fog,lights:this.lights,precision:this.precision,toneMapped:this.toneMapped,clipping:this.clipping});
this.opacity=b.opacity;this.transparent=b.transparent;this.side=b.side;this.vertexColors=b.vertexColors;this.alphaTest=b.alphaTest;this.blendDst=b.blendDst;this.blendEquation=b.blendEquation;this.blending=b.blending;this.blendSrc=b.blendSrc;this.colorWrite=b.colorWrite;this.depthFunc=b.depthFunc;this.depthTest=b.depthTest;this.depthWrite=b.depthWrite;this.fog=b.fog;this.lights=b.lights;this.toneMapped=b.toneMapped;this.clipping=b.clipping;Zy.lRc(this,a);this.needsUpdate=!0;return this};c.prototype.ta=
function(){return Zy.hCc(this)};c.prototype.dispose=function(){this.userData.yM instanceof Oo&&this.i5a&&this.userData.yM.za(No.gb,this.i5a);Lw.prototype.dispose.call(this)};c.prototype.onBeforeCompile=function(a,b){this.userData.IVc&&(Zy.h4b(this),this.userData.IVc=!1);Lw.prototype.onBeforeCompile.call(this,a,b)};c.prototype.q$a=function(){this.i5a||(this.i5a=function(){this.needsUpdate=!0;this.userData.IVc=!0}.bind(this));return this.i5a};return c}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoidGEiLCJnZXRVcGRhdGVDb2xvck1hcCI6InEkYSJ9fX0g");var Lz=/*#__PURE__*/function(){function c(b){var d=b.material,e=G(b,{uniforms:d.uniforms,vertexshader:a.orc(d),fragmentshader:a.nrc(d),defines:d.defines},!0);cz.call(this,e);this.Hr=b.object;b=null!=this.Hr.geometry.getAttribute("position")?this.Hr.geometry.getAttribute("position").count:0;null!=this.Hr.geometry.getAttribute("cgpointindex")?e=this.Hr.geometry.getAttribute("cgpointindex"):(e=new Float32Array(1*b),e=new zq(e,1),this.Hr.geometry.setAttribute("cgpointindex",e));for(var f=0;f<b;f++)e.setX(f,this.iVb(f));
this.type="DefaultPointCloudPickingMaterial";this.transparent=!1;this.lights=d.lights;this.side=d.side;this.blending=yu}var a=$y;D(c,cz);L(c,"geotoolkit3d.picking.pickingrenderer.DefaultPointCloudPickingMaterial");c.prototype.iVb=function(b){return b/this.Hr.geometry.getAttribute("position").count};c.prototype.k7a=function(b){return Math.round(b*this.Hr.geometry.getAttribute("position").count)};c.U_c=100;c.prototype.vtb=function(){var b=this;return[{pickingmode:a.Icc,callback:function(d,e){d=b.k7a(Yy.$db(d));
e.pointindex=d;var f=b.Hr.parent&&b.Hr.parent.Oa&&"geotoolkit3d.scene.pointset.PointCloud"===b.Hr.parent.Oa();f&&e.point&&(d=b.Hr.parent.USa(d),null!=d&&(d=d.position,e.point.x=d[0],e.point.y=d[1],e.point.z=d[2]))}}]};return c}();var Mz=/*#__PURE__*/function(){function c(b){Kz.call(this,{vertexShader:a.R1c,fragmentShader:a.Q1c,transparent:!0});this.type="PointCloudMaterial";c.prototype.setOptions.call(this,b)}var a=Jz;D(c,Kz);L(c,"geotoolkit3d.scene.pointset.PointCloudMaterial");c.prototype.setOptions=function(b){Kz.prototype.setOptions.call(this,b);a.$Ld(this,b);return this};c.prototype.ta=function(){return xb(a.$qd(this),Kz.prototype.ta.call(this))};return c}();vz.sv(Mz.Oa(),Lz);var Nz=/*#__PURE__*/va(/*#__PURE__*/function(){function c(){}L(c,"geotoolkit3d.util.Texture");c.Vqc=function(a,b,d){a=(new Cx).load("data:image/png;base64,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",a,
b,d);a.name="ball";return a};c.Rbd=c.Vqc();c.TTc=function(a,b,d){a=(new Cx).load("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEACAYAAABccqhmAAAACXBIWXMAAC4jAAAuIwF4pT92AAAGAGlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS42LWMxNDUgNzkuMTYzNDk5LCAyMDE4LzA4LzEzLTE2OjQwOjIyICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdEV2dD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlRXZlbnQjIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOSAoTWFjaW50b3NoKSIgeG1wOkNyZWF0ZURhdGU9IjIwMTktMDktMDRUMjM6NDY6MzUtMDU6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMTktMDktMDRUMjM6NDY6MzUtMDU6MDAiIHhtcDpNb2RpZnlEYXRlPSIyMDE5LTA5LTA0VDIzOjQ2OjM1LTA1OjAwIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOmRkZGEwNzYwLTY2ODMtNDQ5Yy1hMjc5LTdmZTFjMTAwYzE2ZCIgeG1wTU06RG9jdW1lbnRJRD0iYWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOmQ3N2I5NWVlLWE5NDktNDI0Yy1hZjY2LTMwZDJhMmEzOGNlMCIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjk1MTE4ZWFlLThlOTItNDY3NC04MWUyLTBjNWU0OGRhMTgxYiIgZGM6Zm9ybWF0PSJpbWFnZS9wbmciIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIHBob3Rvc2hvcDpJQ0NQcm9maWxlPSJzUkdCIElFQzYxOTY2LTIuMSI+IDx4bXBNTTpIaXN0b3J5PiA8cmRmOlNlcT4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNyZWF0ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6OTUxMThlYWUtOGU5Mi00Njc0LTgxZTItMGM1ZTQ4ZGExODFiIiBzdEV2dDp3aGVuPSIyMDE5LTA5LTA0VDIzOjQ2OjM1LTA1OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOSAoTWFjaW50b3NoKSIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6ZGRkYTA3NjAtNjY4My00NDljLWEyNzktN2ZlMWMxMDBjMTZkIiBzdEV2dDp3aGVuPSIyMDE5LTA5LTA0VDIzOjQ2OjM1LTA1OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOSAoTWFjaW50b3NoKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8L3JkZjpTZXE+IDwveG1wTU06SGlzdG9yeT4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7o6NP6AAAPRklEQVR4nO3df6zfVX3H8WfbO2qh0FJuXRAphV7J/pDfkoVqJQJDurmFDV10mOmgWTZRR8bGxGwzaiBsM8pQGUkFFzZMFMeW6EBQMOiAzVTGD/+ZllKqrhlcSgsthaXl7o/37VpKy/35/bzP+ZznI/nm9o/77Xnf7+ec1/d8P9/P+Zw5Y2NjSGrT3OwCJOUxAKSGGQBSwwwAqWEGgNQwA0BqmAEgNcwAkBpmAEgNMwCkhhkAUsMMAKlhBoDUMANAapgB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",
a,b,d);a.name="soliddot";return a};c.Z8b=c.TTc();c.tsc=function(a,b,d){a=(new Cx).load("data:image/png;base64,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",
a,b,d);a.name="circle";return a};c.nTb=c.tsc();c.ZTc=function(a,b,d){a=(new Cx).load("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAA7EAAAOxAGVKw4bAAAAB3RJTUUH3wQYEi8ITPQaqwAAAGVJREFUeNrt0AEBADAIAyB9/4rLoj0uRKCTTB326jgBAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIECBAgAABAgQIEPCDBbsABBZDMwGRAAAAAElFTkSuQmCC",a,b,d);a.name="square";return a};c.UWa=c.ZTc();c.luc=function(a,b,d){a=(new Cx).load("data:image/png;base64,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",
a,b,d);a.name="cube";return a};c.Eea=c.luc();c.YTc=function(a,b,d){a=(new Cx).load("data:image/png;base64,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",
a,b,d);a.name="sphere";return a};c.spa=c.YTc();c.lVc=function(a,b,d){a=(new Cx).load("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAEACAYAAABccqhmAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAAJ18AACdfAR2GumoAAAmWaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjYtYzE0NSA3OS4xNjM0OTksIDIwMTgvMDgvMTMtMTY6NDA6MjIgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOSAoTWFjaW50b3NoKSIgeG1wOkNyZWF0ZURhdGU9IjIwMTktMTAtMTBUMTI6MTA6NTQtMDU6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMTktMTAtMTBUMTY6MzY6MzYtMDU6MDAiIHhtcDpNb2RpZnlEYXRlPSIyMDE5LTEwLTEwVDE2OjM2OjM2LTA1OjAwIiBkYzpmb3JtYXQ9ImltYWdlL3BuZyIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo1MTJmYWRkYy1mZmMyLTQ4NWMtODIyOS03Yzk3YzY1YmEzMTMiIHhtcE1NOkRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDoyY2YwYzBiNi0yNTFjLWU5NDItYTA5YS02ZmYyZjcxOTY4NTUiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDo4M2QzOGVkOS03NmNjLTQ0NTItYWMwZC01MGJiODUwMGI3ODEiIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIHBob3Rvc2hvcDpJQ0NQcm9maWxlPSJzUkdCIElFQzYxOTY2LTIuMSI+IDx4bXBNTTpIaXN0b3J5PiA8cmRmOlNlcT4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNyZWF0ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6ODNkMzhlZDktNzZjYy00NDUyLWFjMGQtNTBiYjg1MDBiNzgxIiBzdEV2dDp3aGVuPSIyMDE5LTEwLTEwVDEyOjEwOjU0LTA1OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOSAoTWFjaW50b3NoKSIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6NmE3NTNiYjMtZDUwNi00MzNiLTk5NjktMjNlODYyODM2ZjgwIiBzdEV2dDp3aGVuPSIyMDE5LTEwLTEwVDEyOjExOjE1LTA1OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOSAoTWFjaW50b3NoKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY29udmVydGVkIiBzdEV2dDpwYXJhbWV0ZXJzPSJmcm9tIGFwcGxpY2F0aW9uL3ZuZC5hZG9iZS5waG90b3Nob3AgdG8gaW1hZ2UvcG5nIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJkZXJpdmVkIiBzdEV2dDpwYXJhbWV0ZXJzPSJjb252ZXJ0ZWQgZnJvbSBhcHBsaWNhdGlvbi92bmQuYWRvYmUucGhvdG9zaG9wIHRvIGltYWdlL3BuZyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6ZWFjYTVlNDctNzBmNC00OWNlLTlmZmQtZjNiMGU1MDhmODM4IiBzdEV2dDp3aGVuPSIyMDE5LTEwLTEwVDEyOjExOjE1LTA1OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOSAoTWFjaW50b3NoKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6NTEyZmFkZGMtZmZjMi00ODVjLTgyMjktN2M5N2M2NWJhMzEzIiBzdEV2dDp3aGVuPSIyMDE5LTEwLTEwVDE2OjM2OjM2LTA1OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOSAoTWFjaW50b3NoKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8L3JkZjpTZXE+IDwveG1wTU06SGlzdG9yeT4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NmE3NTNiYjMtZDUwNi00MzNiLTk5NjktMjNlODYyODM2ZjgwIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOjgzZDM4ZWQ5LTc2Y2MtNDQ1Mi1hYzBkLTUwYmI4NTAwYjc4MSIgc3RSZWY6b3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOjgzZDM4ZWQ5LTc2Y2MtNDQ1Mi1hYzBkLTUwYmI4NTAwYjc4MSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PkFrnbcAAA4lSURBVHhe7d1rt6/lFMfxneGZ4VX02Kvw1LsoSQcUUVHRgRJtGkSlKEKElKKGkeRQVE6hqK3SQTopISTb/K65tnZ777XW/3AfrsP3M8Yca64e7tb6rf993dc1r8P27t27S1KfXrP5VVKHDACpYwaA1DEDQOqYASB1zACQOmYASB0zAKSOGQBSxwwAqWMGgNQxA0Dq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",
a,b,d);a.name="triangle";return a};c.NBb=c.lVc();return c}(),2,"eyJiYWxsTG9hZGVyIjoiVnFjIiwiYmFsbCI6IlJiZCIsInNvbGlkZG90TG9hZGVyIjoiVFRjIiwic29saWRkb3QiOiJaOGIiLCJjaXJjbGVMb2FkZXIiOiJ0c2MiLCJjaXJjbGUiOiJuVGIiLCJzcXVhcmVMb2FkZXIiOiJaVGMiLCJzcXVhcmUiOiJVV2EiLCJjdWJlTG9hZGVyIjoibHVjIiwiY3ViZSI6IkVlYSIsInNwaGVyZUxvYWRlciI6IllUYyIsInNwaGVyZSI6InNwYSIsInRyaWFuZ2xlTG9hZGVyIjoibFZjIiwidHJpYW5nbGUiOiJOQmIifSAg");var Oz=/*#__PURE__*/va(/*#__PURE__*/{spa:Nz.spa,UWa:Nz.UWa,Eea:Nz.Eea},2,"eyJzcGhlcmUiOiJzcGEiLCJzcXVhcmUiOiJVV2EiLCJjdWJlIjoiRWVhIn0g"),Pz=/*#__PURE__*/va(/*#__PURE__*/function(){function c(a){mz.call(this);a=G(a,{name:"default",colorprovider:"red",symbol:Oz.spa,symbolminsize:2,symbolmaxsize:7,alphatest:.8});this.name=a.name;this.lL=-Number.MAX_VALUE;this.tB=Number.MAX_VALUE;var b=null!=a.data.xyz?a.data.xyz.length/3:a.data.x.length;var d=new Ws(new Float32Array(6*b),6),e=new Xs(d,3,0),f=new Xs(d,1,3),g=new Xs(d,1,4);d=new Xs(d,1,5);if(null!=a.data.xyz){var h=a.data.xyz;for(var k=0;k<b;k++){var l=null!=a.data.visible?
!0===a.data.visible[k]?1:0:1;e.setXYZW(k,h[3*k],h[3*k+1],h[3*k+2],l)}}else{b=a.data.x;h=a.data.y;k=a.data.z;for(var m=0;m<b.length;m++)l=null!=a.data.visible?!0===a.data.visible[m]?1:0:1,e.setXYZW(m,b[m],h[m],k[m],l)}null==a.data.sizes?this.e8b([1]):this.e8b(a.data.sizes,a.data.sizemin,a.data.sizemax);this.Gb=a.data.values;this.gH=a.colorprovider;l=new Mz(a);b=new Aq;b.setAttribute("position",e);b.setAttribute("cgpointVisible",f);b.setAttribute("cgpointSize",g);b.setAttribute(Zy.bm,d);this.UU=new jv(b,
l);this.T$c=function(){if(null!=this.Gb){for(var n=this.UU.geometry.getAttribute(Zy.bm),p=0;p<this.UU.geometry.getAttribute("position").count;p++)n.setX(p,this.Gb[p]);this.UU.geometry.getAttribute(Zy.bm).data.needsUpdate=!0}}.bind(this);this.add(this.UU);this.setOptions(a)}D(c,mz);L(c,"geotoolkit3d.scene.pointset.PointCloud");c.prototype.e8b=function(a,b,d){Array.isArray(a)||(a=[a]);if(null==b||null==d){b=Number.MAX_VALUE;d=-Number.MAX_VALUE;var e;for(e=0;e<a.length;e++)isNaN(a[e])||(b=Math.min(b,
a[e]),d=Math.max(d,a[e]))}this.lL=d;this.tB=b;this.Mc=bz.L$(a,0,1,this.tB,this.lL)};c.Symbol=Oz;c.prototype.setOptions=function(a){if(null==a)return this;mz.prototype.setOptions.call(this,a);var b=!1;null!=a.data&&null!=a.data.values&&(b=!0,this.Gb=a.data.values);var d=G(a,{symbolminsize:this.fM,symbolmaxsize:this.TO}),e=this.fM!==d.symbolminsize||this.TO!==d.symbolmaxsize;null!=a.data&&null!=d.data.sizes&&(this.e8b(d.data.sizes,d.data.sizemin,d.data.sizemax),e=!0);this.fM=d.symbolminsize;this.TO=
d.symbolmaxsize;if(e){e=bz.L$(this.Mc,this.fM,this.TO);var f=this.UU.geometry;f=f.getAttribute("cgpointSize");for(var g=0;g<f.count;g++)f.setX(g,e[g%e.length]);f.data.needsUpdate=!0}b&&this.T$c();if(null!=a.data&&null!=a.data.visible)if(b=this.UU.geometry.getAttribute("cgpointVisible"),e=0,Array.isArray(a.data.visible))for(;e<b.count&&e<a.data.visible.length;e++)b.setX(e,a.data.visible[e]);else for(;e<b.count;e++)b.setX(e,a.data.visible);this.UU.material.setOptions(d);this.Xf();return this};c.prototype.ta=
function(){var a=this.UU.material.ta();a.data={};a.data.values=this.Gb;a.data.sizes=this.Mc;a.data.sizemin=this.tB;a.data.sizemax=this.lL;a.data.visible=[];a.symbolminsize=this.fM;a.symbolmaxsize=this.TO;a.colorprovider=this.gH;for(var b=this.UU.geometry.getAttribute("cgpointVisible"),d=0;d<b.count;d++)a.data.visible[d]=1===b.getX(d);return xb(a,mz.prototype.ta.call(this))};c.prototype.xAb=function(a,b){if(!this.UP(a))return this;var d=this.UU.geometry;null!=b.visible&&(d.getAttribute("cgpointVisible").setX(a,
b.visible?1:0),d.getAttribute("cgpointVisible").data.needsUpdate=!0);null!=b.size&&(this.Mc[a]=(b.size-this.tB)/(this.lL-this.tB),d.getAttribute("cgpointSize").setX(a,this.fM+(this.TO-this.fM)*this.Mc[a]),d.getAttribute("cgpointSize").data.needsUpdate=!0);null!=b.value&&null!=this.Gb&&(this.Gb[a]=b.value,d.getAttribute(Zy.bm).setX(a,this.Gb[a]),d.getAttribute(Zy.bm).data.needsUpdate=!0);return this};c.prototype.USa=function(a){if(!this.UP(a))return null;var b=this.UU.geometry,d=b.getAttribute("position").array,
e=6*a;return{visible:1===b.getAttribute("cgpointVisible").getX(a),size:(b.getAttribute("cgpointSize").getX(a)-this.fM)/(this.TO-this.fM)*(this.lL-this.tB)+this.tB,value:this.Gb?this.Gb[a]:null,position:[d[e],d[e+1],d[e+2]]}};c.prototype.rZb=function(a,b){a=a||"default";if(this.name!==a||!this.UP(b))return null;a=this.UU.geometry;var d=a.getAttribute("position").array;a=d[6*b];var e=d[6*b+1],f=d[6*b+2],g=d[6*b+3],h=d[6*b+4];b=d[6*b+5];var k=new Ws(new Float32Array(6),6);d=new Xs(k,3,0);var l=new Xs(k,
1,3),m=new Xs(k,1,4);k=new Xs(k,1,5);d.setXYZ(0,a,e,f);l.setX(0,g);m.setX(0,h);k.setX(0,b);return{position:d,cgpointVisible:l,cgpointSize:m,cgcolormapValue:k}};c.prototype.UP=function(a){var b=this.UU.geometry.getAttribute("position").count;return Number.isFinite(a)&&0<=a&&a<b};c.prototype.sZb=function(){return this.UU};return c}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoidGEiLCJzZXRQb2ludE9wdGlvbnMiOiJ4QWIiLCJnZXRQb2ludE9wdGlvbnMiOiJVU2EiLCJnZXRQb2ludEJ5SW5kZXgiOiJyWmIiLCJpc1ZhbGlkSW5kZXgiOiJVUCIsImdldFBvaW50Q2xvdWQiOiJzWmIifX19");var Rz=/*#__PURE__*/va(/*#__PURE__*/function(){function c(){}L(c,"geotoolkit3d.data.loader.vtk.VTKFactory");c.prototype.create=function(a,b){var d=[],e=a.data;null!=e.index&&d.push(this.Cla(a,b));(null!=e.pointindex||null==e.index&&null==e.lineindex)&&d.push(this.$tc(a,b));null!=e.lineindex&&Array.prototype.push.apply(d,this.Z6a(a,b));return d};c.prototype.Cla=function(a,b){var d=a.data;a=new Aq;a.setAttribute("position",new zq(new Float32Array(d.position),3));a.setIndex(new zq(new Uint32Array(d.index),1));null==b.mesh&&(b.mesh=
{});!0!==b.mesh.zup&&(a.applyMatrix4((new Yt).makeRotationZ(Math.PI/2)),a.applyMatrix4((new Yt).makeRotationY(Math.PI/2)));null!=d.colors&&a.setAttribute("colors",new zq(new Float32Array(d.colors.values),3));null!=d.normals?a.setAttribute("normal",new zq(new Float32Array(d.normals.values),3)):a.computeVertexNormals();d=null!=b.mesh.material?b.mesh.material:new hu({color:"lightgrey"});a=new $t(a,d);null!=b.mesh.position&&a.position.copy(b.mesh.position);null!=b.scale&&a.scale.multiplyVectors(b.scale,
a.scale);null!=b.mesh.scale&&a.scale.multiplyVectors(b.mesh.scale,a.scale);return a};c.prototype.Z6a=function(a,b){var d=a.data,e=new zq(new Float32Array(d.position),3);return a.data.lineindex.map(function(f,g){var h=new Aq;h.setAttribute("position",e);h.setIndex(new zq(new Uint32Array(f),1));null==b.line&&(b.line={});f=null!=b.line.material?b.line.material.clone():Iz.LEa(new X("lightgrey"));f=new rt(h,f);!0!==b.line.zup&&0===g&&(h.applyMatrix4((new Yt).makeRotationZ(Math.PI/2)),h.applyMatrix4((new Yt).makeRotationY(Math.PI/
2)));null!=b.line.position&&f.position.copy(b.line.position);null!=b.scale&&f.scale.multiplyVectors(b.scale,f.scale);null!=b.line.scale&&f.scale.multiplyVectors(b.line.scale,f.scale);return f})};c.prototype.$tc=function(a,b){var d=a.data;a=Object.keys(d).filter(function(l){return l="position"!==l&&"scalar"===d[l].type&&0<d[l].values.length});var e=a.map(function(l){return d[l]});Object.keys(d).filter(function(l){return"field"===d[l].type}).forEach(function(l){d[l].arrays.forEach(function(m){1===m.stride&&
0<m.values.length&&e.push(m)})});null==b.pointcloud&&(b.pointcloud={});a=e.filter(function(l){return null!=b.pointcloud.attributes&&l.name===b.pointcloud.attributes.sizes});var f=e.filter(function(l){return null!=b.pointcloud.attributes&&l.name===b.pointcloud.attributes.values});0===a.length&&0===f.length&&0!==e.length&&(1<e.length?(0<e[0].values.length&&(a=[e[0]]),0<e[1].values.length&&(f=[e[1]])):1===e.length&&0<e[0].values.length&&(f=[e[0]]));var g=null;if(null!=d.pointindex){g=[];for(var h=0;h<
d.position.length/3;h++)g[h]=!1;for(h=0;h<d.pointindex.length;h++)g[d.pointindex[h]]=!0}h="red";if(0<f.length){var k=V.Xt(f);k[0]!==Number.POSITIVE_INFINITY&&k[1]!==Number.NEGATIVE_INFINITY&&(h=(new Ro).Mn(Mo.rgb,k[0],k[1]))}a=new Pz({data:{xyz:new Float32Array(d.position),sizes:0<a.length?a[0].values:null,values:0<f.length?f[0].values:null,visible:g},symbolmaxsize:6,colorprovider:null!=b.pointcloud.colorprovider?b.pointcloud.colorprovider:h});!0!==b.pointcloud.zup&&(a.sZb().geometry.applyMatrix4((new Yt).makeRotationZ(Math.PI/
2)),a.sZb().geometry.applyMatrix4((new Yt).makeRotationY(Math.PI/2)));null!=b.pointcloud.position&&a.position.copy(b.pointcloud.position);null!=b.scale&&a.scale.multiplyVectors(b.scale,a.scale);null!=b.pointcloud.scale&&a.scale.multiplyVectors(b.pointcloud.scale,a.scale);return a};return c}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJjcmVhdGVNZXNoIjoiQ2xhIiwiY3JlYXRlTGluZXMiOiJaNmEiLCJjcmVhdGVQb2ludGNsb3VkIjoiJHRjIn19fSAg");var Sz=/*#__PURE__*/function(){function c(){Ez.call(this)}L(c,"geotoolkit3d.data.loader.vtk.VTKLoader");D(c,"geotoolkit3d.data.loader.AbstractLoader");c.prototype.load=function(a,b,d){var e=this,f=new bs(e.ikc);f.setResponseType("arraybuffer");f.load(a,function(g){e.parse(new up({stream:new tp({buffer:g,stride:1})}),b,d)},function(){},d)};c.prototype.parse=function(a,b,d){var e=new Eg(function(f,g){Hz.ZFc(a).then(function(h){h||g("Warning: Only ASCII format is supported");Hz.parse(a).then(function(k){f(k)},g)},
g)});e.then(b,d);return e};return c}();var Tz=/*#__PURE__*/va(/*#__PURE__*/function(){function c(e,f,g,h){for(var k=[],l=[],m=Number.NaN,n=[-g,-g+1,-1,1,g-1,g],p=[[-1,0],[-1,1],[0,-1],[0,1],[1,-1],[1,0]],q=0,r=0;r<h;r++)for(var t=0;t<g;t++){var u=t+r*g,w=e[u];if(w!==m||isNaN(w)||w===f)m=w;else{q++;k.push(u);l.push(w,[r,t]);for(e[u]=Number.NaN;0<k.length;){u=k[0];k.splice(0,1);for(var y=Math.floor(u/g),A=u%g,x=0;x<n.length;x++){var C=y+p[x][0],z=A+p[x][1];0<=C&&C<h&&0<=z&&z<g&&e[u+n[x]]===w&&(k.push(u+n[x]),l.push([C,z]),e[u+n[x]]=Number.NaN)}}a(e,l,g,h,f);l=[]}}return q}function a(e,f,g,h,k){if(!(2>f.length)){var l=f[0];f.splice(0,1);f.sort(b);for(var m=[[-1,0],[0,-1],[0,1],[1,0]],n=0;n<f.length;n++){for(var p=f[n][0],q=f[n][1],r=0,t=0,u=0;u<m.length;u++){var w=p+m[u][0],y=q+m[u][1];0<=w&&w<h&&0<=y&&y<g&&(w=e[y+w*g],isNaN(w)||null==w||w===k||(r+=w,t++))}r=0<t?r/t:l;r+=Math.sqrt(1+n)*V.Qb;e[q+p*g]=r}}}function b(e,f){return e[0]<f[0]?-1:e[0]>f[0]?1:e[1]-f[1]}function d(){}L(d,"geotoolkit3d.util.surface.BasicTriangulator");d.RK=function(e){var f=G(e.data,{xmin:0,xstep:1,
ymin:0,ystep:1,normals:!0}),g=e.bufferpadding||0,h=e.surfacesmooth,k=f.width,l=f.height,m=k*l,n=f.xmin,p=Number.NEGATIVE_INFINITY,q=f.ymin,r=Number.NEGATIVE_INFINITY,t=Number.POSITIVE_INFINITY,u=Number.NEGATIVE_INFINITY;if(3>k||3>l)throw Error("Unsupported operation: cannot triangulate a grid with less than 3 rows or less than 2 columns");var w;g+=3;!0===f.normals&&(g+=3);if(!0===e.interleaved){var y=new Float32Array(m*g);y=new Ws(y,g);e=new Xs(y,3,0);!0===f.normals&&(w=new Xs(y,3,3))}else e=new zq(new Float32Array(3*
m),3),!0===f.normals&&(w=new zq(new Float32Array(3*m),3));var A=new zq(new Uint32Array((l-1)*(k-1)*6),1);h&&null!=f.elevation&&c(f.elevation,f.nullvalue,k,l);h=!1;if(f.elevation&&Array.isArray(f.elevation)){h=f.xvalues&&Array.isArray(f.xvalues)&&f.xvalues.length===f.elevation.length;var x=f.yvalues&&Array.isArray(f.yvalues)&&f.yvalues.length===f.elevation.length;h=h&&x}var C,z;for(x=0;x<l;x++)for(C=0;C<k;C++){if(h){var v=f.xvalues[C+x*k];var B=f.yvalues[C+x*k]}else v=f.xmin+C*f.xstep,B=f.ymin+x*f.ystep;
var E=x*k+C;if(null!=f.elevation){var H=f.elevation[C+x*k];H=(z=isNaN(H)||H===f.nullvalue)?Number.NaN:H;z||(n=Math.min(v,n),p=Math.max(v,p),q=Math.min(B,q),r=Math.max(B,r),t=Math.min(H,t),u=Math.max(H,u))}else H=0;e.setXYZ(E,v,B,H);x<l-1&&C<k-1&&(E=6*(x*(k-1)+C),v=C+k*x,B=C+k*(x+1),z=C+1+k*(x+1),H=C+1+k*x,A.setXYZ(E,v,B,H),A.setXYZ(E+3,B,z,H))}h&&(A=d.Dwc(A,e,f.nullvalue));!0===f.normals&&d.hrb(A,e,w,f.nullvalue);return{triangles:{position:e,normal:w,index:A,vertexcount:m},xmin:n,xmax:p,ymin:q,ymax:r,
zmin:t,zmax:u,bufferpadding:g,bufferused:!0===f.normals?6:3,buffer:y}};d.hrb=function(e,f,g,h){for(var k=0;k<e.count;k+=3){var l=[],m=e.getX(k),n=e.getY(k),p=e.getZ(k);bz.Xwa(f,m,n,p,l,h);if(!isNaN(l[0])&&!isNaN(l[1])&&!isNaN(l[2])){var q=g.getX(m);var r=g.getY(m);var t=g.getZ(m);g.setXYZ(m,q+l[0],r+l[1],t+l[2]);q=g.getX(n);r=g.getY(n);t=g.getZ(n);g.setXYZ(n,q+l[0],r+l[1],t+l[2]);q=g.getX(p);r=g.getY(p);t=g.getZ(p);g.setXYZ(p,q+l[0],r+l[1],t+l[2])}}};d.Dwc=function(e,f,g){for(var h=[],k=0;k<e.count;k+=
3){var l=e.getX(k),m=e.getY(k),n=e.getZ(k),p=[f.getX(l),f.getY(l),f.getZ(l)],q=[f.getX(m),f.getY(m),f.getZ(m)],r=[f.getX(n),f.getY(n),f.getZ(n)];(null==g||p[2]!==g&&q[2]!==g&&r[2]!==g)&&isFinite(p[0])&&isFinite(p[1])&&isFinite(p[2])&&isFinite(q[0])&&isFinite(q[1])&&isFinite(q[2])&&isFinite(r[0])&&isFinite(r[1])&&isFinite(r[2])&&h.push(l,m,n)}e=new zq(new Uint32Array(h.length),1);e.set(h,0);return e};return d}(),2,"eyJ0cmlhbmd1bGF0ZSI6IlJLIiwiY3JlYXRlTm9ybWFscyI6ImhyYiIsImZpbHRlckluZGljZXMiOiJEd2MifSAg");var Uz=/*#__PURE__*/function(){function c(a){Aq.call(this);this.type="SurfaceGeometry";a=G(a,{});var b=a.data.surface.getAttributes(),d=b.position;this.pz=b.nullvalue;this.setAttribute("position",d);this.setIndex(b.index);null!=b.normal?this.setAttribute("normal",b.normal):this.computeVertexNormals(b.normal);b.values&&(b.values instanceof zq||b.values instanceof Xs?this.setAttribute(Zy.bm,b.values):b.values instanceof Float32Array?this.setAttribute(Zy.bm,new zq(b.values,1)):this.setAttribute(Zy.bm,new zq(new Float32Array(b.values),
1)));null!=b.xmin&&b.xmax&&null!=b.ymin&&b.ymax&&null!=b.zmin&&b.zmax?(d=new Lp(b.xmin,b.ymin,b.zmin),b=new Lp(b.xmax,b.ymax,b.zmax),this.boundingBox=new uq(d,b)):this.computeBoundingBox();this.setOptions(a)}D(c,Aq);L(c,"geotoolkit3d.scene.surface.SurfaceGeometry");c.prototype.setOptions=function(a){if(null==a.data)return this;(Array.isArray(a.data.values)||a.data.values instanceof Float32Array)&&this.y$b(a.data.values);return this};c.prototype.ta=function(){var a=this.getAttribute(Zy.bm);if(null==
a)return{};for(var b=new Float32Array(a.count),d=0;d<a.count;d++)b[d]=a.getX(d);return{data:{values:b}}};c.prototype.computeBoundingBox=function(){for(var a=this.getAttribute("position"),b=new Lp(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY),d=new Lp(Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY),e=0;e<a.count;e++){b.x=Math.min(a.getX(e),b.x);d.x=Math.max(a.getX(e),d.x);b.y=Math.min(a.getY(e),b.y);d.y=Math.max(a.getY(e),d.y);var f=a.getZ(e);
f===this.pz||isNaN(f)||(b.z=Math.min(f,b.z),d.z=Math.max(f,d.z))}this.boundingBox=new uq(b,d)};c.prototype.computeBoundingSphere=function(){null==this.boundingBox&&this.computeBoundingBox();this.boundingSphere=new Xw;this.boundingBox.getBoundingSphere(this.boundingSphere)};c.prototype.y$b=function(a){var b=this.getAttribute("position").count;a.length!==b&&rb("Given values array does not match vertices count: "+b+"="+b+", actual="+a.length);var d=this.getAttribute(Zy.bm);null==d&&(d=new zq(new Float32Array(b),
1),this.setAttribute(Zy.bm,d));for(b=0;b<d.count;b++)d.setX(b,a[b]);d.needsUpdate=!0};c.prototype.computeVertexNormals=function(){var a=this.getAttribute("position");if(a){var b=this.getAttribute("normal");void 0===b&&(b=new zq(new Float32Array(a.count*a.itemSize),3),this.setAttribute("normal",b));Tz.hrb(this.getIndex(),a,b)}};return c}();var Vz=/*#__PURE__*/function(){function c(){}L(c,"geotoolkit3d.util.shaders.FlatShading");c.Dza="isFlatShadingEnabled";c.eqa="smoothShadingBlendingFactor";c.wfb=["","uniform bool "+c.Dza+";","uniform float "+c.eqa+";","varying vec3 vertexMVposition;\nvarying float flip_sided;\n"].join("\n");c.bcc=["","    if("+c.Dza+") {","        vertexMVposition = mvPosition.xyz;\n        flip_sided = 1.0;\n        #ifdef FLIP_SIDED\n            flip_sided = -1.0;\n        #endif\n    }\n"].join("\n");var a="\n#if __VERSION__ >= 300\n",
b="\n#endif\n",d=Jw.lights_lambert_vertex;d=d.replace(/vLightFront/g,"vFlatLightFront");d=d.replace(/vIndirectFront/g,"vFlatIndirectFront");d=d.replace(/vLightBack/g,"vFlatLightBack");d=d.replace(/vIndirectBack/g,"vFlatIndirectBack");d=d.replace(/mvPosition/g,"vertexMVposition");d=d.replace(/transformedNormal/g,"flatTransformedNormal");c.Pya="blendedLightFront";c.kYa="blendedLightBack";c.dza="blendedIndirectFront";c.JYa="blendedIndirectBack";c.acc=[a,"    if("+c.Dza+") {","        vec3 U = dFdx(vertexMVposition);\n        vec3 V = dFdy(vertexMVposition);\n        vec3 flatTransformedNormal = flip_sided * normalize(cross(U,V));\n        vec3 vFlatLightFront;\n        vec3 vFlatIndirectFront;\n        vec3 vFlatLightBack;\n        vec3 vFlatIndirectBack;",
d,"        float smoothScale = "+c.eqa+";","        float flatScale = 1. - smoothScale;","        "+c.Pya+" = smoothScale * vLightFront + flatScale * vFlatLightFront;","        "+c.kYa+"  = smoothScale * vLightBack  + flatScale * vFlatLightFront;","        "+c.dza+" = smoothScale * vIndirectFront + flatScale * vFlatIndirectFront;","        "+c.JYa+"  = smoothScale * vIndirectBack  + flatScale * vFlatIndirectBack;","    }",b].join("\n");return c}();var Wz=/*#__PURE__*/function(){function c(n){n.defines.hasOwnProperty("addedHeightMapShaders")||(n.defines.addedHeightMapShaders=!0,n.uniforms.cgheightmap={type:"tv",value:null},n.uniforms.cgvaluemap={type:"tv",value:null},n.uniforms.cgheightmapSize={type:"v2",value:new gy},n.uniforms.cggridStart={type:"v2",value:new gy(0,0)},n.uniforms.cggridSteps={type:"v2",value:new gy(0,0)},n.uniforms.cgzOrient={type:"f",value:0},n.uniforms.cgvalueMode={type:"i",value:Dy.UCb},n.uniforms.useOSMShader={type:"b",value:!1})}function a(n){n.defines.hasOwnProperty("addedSurfaceShaders")||
(n.defines.addedSurfaceShaders=!0,n.uniforms[f]={type:"f",value:-999.25},n.uniforms[d.eqa]=new Wx(1),n.uniforms[d.Dza]=new Wx(!1),n.uniforms[g]=new Wx(n.wireframe))}function b(){}var d=Vz,e=Yy,f=Zy.bm+"NullValue",g="wireframeEnabled";L(b,"geotoolkit3d.util.shaders.Surface");b.jec=["#define LAMBERT",d.wfb,"varying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n    varying vec3 vLightBack;\n    varying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef CG_USE_COLOR_MAP\n    attribute float cgcolormapValue;\n    varying float vcgcolormapValue;\n    uniform vec4 cgcolormapParams;\n    uniform int cgcolormapLogValue;\n    float Shaders_norm(float value, float srcmin, float srcmax, float dstmin, float dstmax) {\n        float norm = dstmin + (dstmax - dstmin) * (clamp(value, srcmin, srcmax) - srcmin)  / (srcmax - srcmin);\n        if (norm < 0.0 || norm >= 0.0) {\n            return norm;\n        }\n        return 0.0;\n    }\n    float normValueForColorMap(float value) {\n        if( cgcolormapLogValue == 1) {\n            value = log2(value)/log2(10.0);\n        }\n        return Shaders_norm(value - cgcolormapParams.x, 0.0, cgcolormapParams.y, 0.0, 1.0);\n    }\n#endif\nvarying float vcgdeadCell;\nuniform float cgcolormapValueNullValue;\nbool _isnan( float val ) {\n    return ( val < 0.0 || 0.0 < val || val == 0.0 ) ? false : true;\n}\nvoid main() {\n    #ifdef CG_USE_COLOR_MAP\n        vcgdeadCell = _isnan(cgcolormapValue) || abs( cgcolormapValue - cgcolormapValueNullValue ) < 0.00001 ? 1.0 : 0.0 ;\n    #endif\n    #include <uv_vertex>\n    #include <uv2_vertex>\n    #include <color_vertex>\n    #ifdef CG_USE_COLOR_MAP\n        vcgcolormapValue = normValueForColorMap(cgcolormapValue);\n    #endif\n    #include <beginnormal_vertex>\n    #include <morphnormal_vertex>\n    #include <skinbase_vertex>\n    #include <skinnormal_vertex>\n    // normalize normal vector\n    objectNormal = normalize(objectNormal);\n    #include <defaultnormal_vertex>\n    #include <begin_vertex>\n    #include <morphtarget_vertex>\n    #include <skinning_vertex>\n    #include <project_vertex>\n    #include <logdepthbuf_vertex>\n    #include <clipping_planes_vertex>\n    #include <worldpos_vertex>\n    #include <envmap_vertex>\n    #include <lights_lambert_vertex>\n    #include <shadowmap_vertex>\n    #include <fog_vertex>",
d.bcc,"}"].join("\n");b.iec=["uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;","uniform bool "+g+";",d.wfb,"varying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n    varying vec3 vLightBack;\n    varying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nuniform int useDiffuseAsColor;\n#ifdef CG_USE_COLOR_MAP\n    varying float vcgcolormapValue;\n    uniform sampler2D cgcolormapTexture;\n    vec4 getColorFromColorMap(float normValue) {\n        return texture2D(cgcolormapTexture, vec2(normValue, 0.5));\n    }\n#endif\nvarying float vcgdeadCell;\nvoid main() {\n    if(vcgdeadCell != 0.0) discard;\n    #include <clipping_planes_fragment>\n    vec4 diffuseColor = vec4( diffuse, opacity );\n    ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n    vec3 totalEmissiveRadiance = emissive;\n    #include <logdepthbuf_fragment>\n    #include <map_fragment>\n    #include <color_fragment>\n    #ifdef CG_USE_COLOR_MAP\n        diffuseColor *= getColorFromColorMap(vcgcolormapValue);\n    #endif\n    #include <alphamap_fragment>\n    #include <alphatest_fragment>\n    #include <specularmap_fragment>\n    #include <emissivemap_fragment>\n    reflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );",
"    vec3 "+d.Pya+" = vLightFront;","    vec3 "+d.kYa+" = vLightBack;","    vec3 "+d.dza+" = vIndirectFront;","    vec3 "+d.JYa+" = vIndirectBack;",d.acc,"    #ifdef DOUBLE_SIDED","        reflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? "+d.dza+" : "+d.JYa+";","    #else","        reflectedLight.indirectDiffuse += "+d.dza+";","    #endif\n    #include <lightmap_fragment>\n    reflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n    #ifdef DOUBLE_SIDED","        reflectedLight.directDiffuse = ( gl_FrontFacing ) ? "+
d.Pya+" : "+d.kYa+";","    #else","        reflectedLight.directDiffuse = "+d.Pya+";","    #endif\n    reflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n    #include <aomap_fragment>\n    vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n    #include <envmap_fragment>","    if(useDiffuseAsColor == 1 || "+g+") {","        gl_FragColor = diffuseColor;\n    } else {\n        gl_FragColor = vec4( outgoingLight, diffuseColor.a );\n    };\n    #include <tonemapping_fragment>\n    #include <encodings_fragment>\n    #include <fog_fragment>\n    #include <premultiplied_alpha_fragment>\n    #include <dithering_fragment>\n}"].join("\n");
b.dMd=function(n,p){p&&(a(n),p.hasOwnProperty("wireframe")&&(n.uniforms[g].value=p.wireframe),p.hasOwnProperty("data")&&p.data.hasOwnProperty("nullvalue")&&(n.uniforms[f].value=p.data.nullvalue,n.uniforms[f].needsUpdate=!0),p.hasOwnProperty("smoothshadingfactor")&&(n.uniforms[d.eqa].value=p.smoothshadingfactor,n.uniforms[d.Dza].value=1!==n.uniforms[d.eqa].value))};b.crd=function(n){a(n);return{data:{nullvalue:n.uniforms[f].value}}};var h="#ifndef HEIGHTMAP_SHADER_UTILS\n   #define HEIGHTMAP_SHADER_UTILS\n   const vec3 cgheightmapTextureOffset = vec3(-1.0, 0.0, 1.0);\n   const vec2 cgheightmapDirection = vec2(2.0,0.0);\n#endif";
h=["#ifndef REGULAR_HEIGHTMAP_FORMULA\n   #define REGULAR_HEIGHTMAP_FORMULA",h,"   vec4 computeRegularHeightValue(sampler2D cgheightmap, vec2 tex_coord, vec2 cgheightmapSize, float cgzOrient,\n       float cgOSMShaderOffset) {\n       float s11 = texture2D(cgheightmap, tex_coord).x * cgzOrient - cgOSMShaderOffset;\n       float s01 = texture2D(cgheightmap, tex_coord + cgheightmapTextureOffset.xy / cgheightmapSize).x * cgzOrient;\n       float s21 = texture2D(cgheightmap, tex_coord + cgheightmapTextureOffset.zy / cgheightmapSize).x * cgzOrient;\n       float s10 = texture2D(cgheightmap, tex_coord + cgheightmapTextureOffset.yx / cgheightmapSize).x * cgzOrient;\n       float s12 = texture2D(cgheightmap, tex_coord + cgheightmapTextureOffset.yz / cgheightmapSize).x * cgzOrient;\n       vec3 va = normalize(vec3(cgheightmapDirection.xy, s21 - s01));\n       vec3 vb = normalize(vec3(cgheightmapDirection.yx, s12 - s10));\n       return vec4(cross(va, vb), s11);\n   }\n#endif"].join("\n");
var k="USE_VALUE_MAP";h=["uniform sampler2D cgheightmap;\nuniform sampler2D cgvaluemap;\nuniform vec2 cgheightmapSize;\nuniform vec2 cggridStart;\nuniform vec2 cggridSteps;\nuniform float cgzOrient;\nuniform int cgvalueMode;\nuniform bool useOSMShader;",h].join("\n");var l=["#ifdef "+k,"vec4 color = texture2D(cgvaluemap, uv);","float "+Zy.bm+" = 0.0;","if (cgvalueMode == "+Dy.UCb+") {","\t"+Zy.bm+" = color.x;","} else if (cgvalueMode == "+Dy.Qec+") {","\t"+Zy.bm+" = color.r * 2.0 + color.g / 128.0 + color.b / 32768.0 - 1.0;",
"} else if (cgvalueMode == "+Dy.jB+") {","\t"+Zy.bm+" = 1.0 - color.w;","}\n#endif"].join("\n"),m="vec3 alteredPosition = vec3(position);\nfloat cgOSMShaderOffset = useOSMShader ? 0.5 : 0.0;\nvec4 bump = computeRegularHeightValue(cgheightmap, uv, cgheightmapSize, cgzOrient, cgOSMShaderOffset);\nalteredPosition.z += bump.w;\ntransformedNormal = normalMatrix * normalize(-bump.xyz);\n#ifdef USE_SKINNING\n   vec4 mvPosition = modelViewMatrix * skinned;\n#elif defined( USE_MORPHTARGETS )\n   vec4 mvPosition = modelViewMatrix * vec4( morphed, 1.0 );\n#else\n   vec4 mvPosition = modelViewMatrix * vec4( alteredPosition, 1.0 );\n#endif\ngl_Position = projectionMatrix * mvPosition;";
b.bza=b.jec;b.iEb=b.iec;b.bza=e.ot(b.bza,Zy.kE,h,!1,!0);b.bza=e.ot(b.bza,Zy.Lgb,l,!1,!1);b.bza=e.ot(b.bza,Zy.Iec,m,!0);b.iEb=e.ot(b.iEb,Zy.kE,"varying vec2 vTextCoord;",!1,!0);b.nRc=function(n,p){if(p&&p.hasOwnProperty("data")){c(n);var q=null;p.data.hasOwnProperty("surface")?(q=p.data.surface.getAttributes().heightmap,null==q&&(n.uniforms.useOSMShader.value=!0)):p.data.hasOwnProperty("texture")&&(q=p.data.texture);null!=q&&q!==n.uniforms.cgheightmap.value&&(n.uniforms.cgheightmap.value=q,n.uniforms.cgheightmapSize.value.set(q.image.width,
q.image.height),n.uniforms.cgheightmap.needsUpdate=!0,n.uniforms.cgheightmapSize.needsUpdate=!0);p.data.hasOwnProperty("xmin")&&(n.uniforms.cggridStart.value.setX(p.data.xmin),n.uniforms.cggridStart.needsUpdate=!0);p.data.hasOwnProperty("ymin")&&(n.uniforms.cggridStart.value.setY(p.data.ymin),n.uniforms.cggridStart.needsUpdate=!0);p.data.hasOwnProperty("xstep")&&(n.uniforms.cggridSteps.value.setX(p.data.xstep),n.uniforms.cggridSteps.needsUpdate=!0);p.data.hasOwnProperty("ystep")&&(n.uniforms.cggridSteps.value.setY(p.data.ystep),
n.uniforms.cggridSteps.needsUpdate=!0);p.data.hasOwnProperty("zsign")&&(n.uniforms.cgzOrient.value=p.data.zsign,n.uniforms.cgzOrient.needsUpdate=!0);p.data.hasOwnProperty("values")&&p.data.values instanceof Bx&&(n.defines[k]=1,n.uniforms.cgvaluemap.value=p.data.values,n.uniforms.cgvaluemap.needsUpdate=!0);p.data.hasOwnProperty("valuemode")&&p.data.valuemode!==n.uniforms.cgvalueMode.value&&(n.uniforms.cgvalueMode.value=p.data.valuemode,n.uniforms.cgvaluemap.needsUpdate=!0)}};b.Uqd=function(n){c(n);
return{data:{xmin:n.uniforms.cggridStart.value.x,ymin:n.uniforms.cggridStart.value.y,xstep:n.uniforms.cggridSteps.value.x,ystep:n.uniforms.cggridSteps.value.y,zsign:n.uniforms.cgzOrient.value,valuemode:n.uniforms.cgvalueMode.value,values:n.uniforms.cgvaluemap.value}}};return b}();var Xz=/*#__PURE__*/va(/*#__PURE__*/function(){function c(a){a=G(a,{vertexShader:Zy.Rpa,fragmentShader:Zy.qba,uniforms:Yx.clone(Kw.lambert.uniforms),unlit:0});Kz.call(this,a);this.type="MeshColorMapLambertMaterial";this.clipping=this.lights=this.isMeshBasicMaterial=!0;this.setOptions(a)}D(c,Kz);L(c,"geotoolkit3d.scene.MeshColorMapLambertMaterial");c.prototype.setOptions=function(a){a=G(a,{alphaMap:this.alphaMap,aoMap:this.aoMap,aoMapIntensity:this.aoMapIntensity,color:this.color,map:this.map,wireframe:this.wireframe,wireframeLinecap:this.wireframeLinecap,
wireframeLinejoin:this.wireframeLinejoin,emissive:this.emissive,emissiveMap:this.emissiveMap,emissiveintensity:this.emissiveIntensity});this.alphaMap=a.alphaMap;this.aoMap=a.aoMap;this.aoMapIntensity=null!=a.aoMapIntensity?a.aoMapIntensity:1;this.color=new Pq(a.color);this.map=a.map;this.wireframe=null!=a.wireframe?a.wireframe:!1;this.wireframeLinecap=a.wireframeLinecap||"round";this.wireframeLinejoin=a.wireframeLinejoin||"round";this.emissive=a.emissive||new Pq(0);this.emissiveMap=a.emissiveMap;
this.emissiveIntensity=null!=a.emissiveintensity?a.emissiveintensity:1;Zy.qRc(this,a);Kz.prototype.setOptions.call(this,a);return this};c.prototype.ta=function(){var a=xb(Kz.prototype.ta.call(this),Zy.drd(this));a.alphaMap=this.alphaMap;a.aoMap=this.aoMap;a.aoMapIntensity=this.aoMapIntensity;a.color=this.color;a.map=this.map;a.wireframe=this.wireframe;a.wireframeLinecap=this.wireframeLinecap;a.wireframeLinejoin=this.wireframeLinejoin;a.emissive=this.emissive;a.emissiveMap=this.emissiveMap;a.emissiveintensity=
this.emissiveIntensity;return a};return c}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoidGEifX19");vz.sv(Xz.Oa(),tz);var Yz=/*#__PURE__*/va(/*#__PURE__*/function(){function c(b){Xz.call(this,{});this.type="SurfaceMaterial";b=G(b,{},!0);this.vertexShader=a.jec;this.fragmentShader=a.iec;this.polygonOffset=!0;this.polygonOffsetFactor=this.polygonOffsetUnits=.5;this.setOptions(b)}var a=Wz;D(c,Xz);L(c,"geotoolkit3d.scene.surface.SurfaceMaterial");c.$3c=Zy.bm+"NullValue";c.b6=Xz.b6;c.prototype.setOptions=function(b){Xz.prototype.setOptions.call(this,b);a.dMd(this,b);return this};c.prototype.ta=function(){return xb(a.crd(this),Xz.prototype.ta.call(this))};
return c}(),1,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoidGEifX19");vz.sv(Yz.Oa(),tz);var Zz=/*#__PURE__*/function(){function c(a){a=G(a,{interleaved:!1,nullvalue:-999.25,bufferpadding:0});a.trianglestrip&&hb("TriangleStrip is deprecated in GeoToolkit and Three.js");this.$ra=a.interleaved;this.sgc=a.bufferpadding}L(c,"geotoolkit3d.data.surface.AbstractSurfaceData");c.prototype.getAttributes=Fb;c.prototype.Psb=function(){return{geometry:Uz,material:Yz}};return c}();var $z=/*#__PURE__*/function(){function c(){}L(c,"geotoolkit3d.util.surface.ContourLineTriangulator ");c.RK=function(a){a=G(a,{applydepth:!0});for(var b=a.data.lines,d=a.applydepth,e=Number.POSITIVE_INFINITY,f=Number.NEGATIVE_INFINITY,g=Number.POSITIVE_INFINITY,h=Number.NEGATIVE_INFINITY,k=Number.POSITIVE_INFINITY,l=Number.NEGATIVE_INFINITY,m=[],n=[],p=0;p<b.length;p++){var q=b[p],r=q.x.length,t=0;for(q.x[t]===q.x[r-1]&&q.y[t]===q.y[r-1]&&(r=q.x.length-1);t<r;t++)e=Math.min(q.x[t],e),f=Math.max(q.x[t],f),g=Math.min(q.y[t],
g),h=Math.max(q.y[t],h),m.push(q.x[t]),m.push(q.y[t]),d?m.push(q.z):m.push(0),n.push(q.z);k=Math.min(q.z,k);l=Math.max(q.z,l)}try{var u=null!=a.triangulator?new Uint32Array(a.triangulator(m)):new Uint32Array(cp.RK(m))}catch(w){rb(this.Oa()+" failed to Triangulate")}return a={triangles:{position:new Float32Array(m),index:u},xmin:e,xmax:f,ymin:g,ymax:h,zmin:d?k:0,zmax:d?l:0,valuemin:k,valuemax:l,values:n}};return c}();var aA=/*#__PURE__*/va(/*#__PURE__*/function(){function c(a){Zz.call(this,a);a=c.Qaa(a);this.cG={};var b=a.triangles.position;b=b instanceof Float32Array?b:new Float32Array(b);var d=a.triangles.index;d=d instanceof Uint32Array?d:new Uint32Array(d);this.cG.vertices=new zq(b,3);this.cG.indices=new zq(d,1);this.XMb=a.xmin;this.DMb=a.xmax;this.YMb=a.ymin;this.EMb=a.ymax;this.ZMb=a.zmin;this.FMb=a.zmax;this.j8c=a.valuemin;this.b8c=a.valuemax;this.Gb=a.values}D(c,Zz);L(c,"geotoolkit3d.data.surface.ContourLineData");c.Qaa=$z.RK;c.prototype.getAttributes=
function(){var a={position:this.cG.vertices,index:this.cG.indices,interleaved:!1,xmin:this.XMb,xmax:this.DMb,ymin:this.YMb,ymax:this.EMb,zmin:this.ZMb,zmax:this.FMb,valuemin:this.j8c,valuemax:this.b8c,values:this.Gb};return a};return c}(),2,"eyJ0cmlhbmd1bGF0aW9uIjoiUWFhIn0g");var bA=/*#__PURE__*/va(/*#__PURE__*/function(){function c(a){Zz.call(this,a);var b=G(a,{interleaved:!0,bufferpadding:this.sgc,surfacesmooth:!0});null!=a.data.values&&(b.bufferpadding+=1);var d=c.Qaa(b),e=d.triangles.vertexcount;if(null!=a.data.values)for(a=a.data.values,this.TDa=Number.POSITIVE_INFINITY,this.SDa=Number.NEGATIVE_INFINITY,this.Gb=b.interleaved?new Xs(d.buffer,1,d.bufferused):new es(Array(e),1),e=0;e<a.length;e++)this.TDa=Math.min(this.TDa,a[e]),this.SDa=Math.max(this.SDa,a[e]),this.Gb.setX(e,a[e]);this.s5a=d.triangles.position;
this.Cr=d.triangles.index;this.cr=d.triangles.normal;this.K5a=d.xmin;this.J5a=d.xmax;this.N5a=d.ymin;this.M5a=d.ymax;this.ZR=d.zmin;this.YR=d.zmax;this.pz=b.data.nullvalue;this.$ra=b.interleaved}D(c,Zz);L(c,"geotoolkit3d.data.surface.GridSurfaceData");c.Qaa=Tz.RK;c.prototype.getAttributes=function(){var a={position:this.s5a,index:this.Cr,normal:this.cr,nullvalue:this.pz,xmin:this.K5a,xmax:this.J5a,ymin:this.N5a,ymax:this.M5a,zmin:this.ZR,zmax:this.YR,interleaved:this.$ra};this.Gb&&(a.values=this.Gb,
a.valuemin=this.TDa,a.valuemax=this.SDa);return a};return c}(),2,"eyJ0cmlhbmd1bGF0aW9uIjoiUWFhIn0g");var cA=/*#__PURE__*/function(){function c(b){Uz.call(this,b)}var a=new Lp(1,1,1);D(c,Uz);L(c,"geotoolkit3d.scene.surface.HeightMapSurfaceGeometry");c.prototype.computeBoundingBox=function(){Uz.prototype.computeBoundingBox.call(this);this.boundingBox.expandByVector(a)};c.prototype.computeVertexNormals=function(){var b=this.getAttribute("position");if(b){var d=this.getAttribute("uv");if(void 0===d){d=new zq(new Float32Array(2*b.count),2);this.setAttribute("uv",d);this.computeBoundingBox();var e=new Lp;this.boundingBox.getSize(e);
for(var f=0;f<b.count;f++){var g=(b.getX(f)-this.boundingBox.min.x)/e.x,h=(b.getY(f)-this.boundingBox.min.y)/e.y;d.setX(f,g);d.setY(f,h)}}}};return c}();var dA=/*#__PURE__*/va(/*#__PURE__*/function(){function c(b){Yz.call(this);this.type="HeightMapSurfaceMaterial";null==b&&(b={});null==b.data&&(b.data={});b.data=G(b.data,{xmin:0,ymin:0,xstep:1,ystep:1,zsign:1},!0);if(!b.data.surface)throw Error("Height Map Surface Material has no Data");this.vertexShader=a.bza;this.fragmentShader=a.iEb;var d=b.data.surface.getAttributes();this.h7c=b.data.surface;this.bkb=new U(0,0,d.width,d.height);this.TLa={};this.NR={};this.setOptions(b)}var a=Wz;D(c,Yz);L(c,"geotoolkit3d.scene.surface.HeightMapSurfaceMaterial");
c.prototype.setOptions=function(b){Yz.prototype.setOptions.call(this,b);a.nRc(this,b);b.texture&&this.CJa(b.texture,0,0,this.bkb.ca()/b.texture.image.width,this.bkb.da()/b.texture.image.height,"material");return this};c.prototype.ta=function(){var b=xb(a.Uqd(this),Yz.prototype.ta.call(this));b.texture=this.NR.material;return b};c.prototype.CJa=function(b,d,e,f,g,h){if(null==this.TLa[h]){var k=wc(this.bkb.ca()/ac(),this.bkb.da()/ac());this.TLa[h]=k.getContext("2d");this.NR[h]=new Hq(k);"material"===
h&&(this.uniforms.map.value=this.NR[h],this.map=this.NR[h]);"geometry"===h&&a.nRc(this,{data:{surface:this.h7c.vKd(this.NR[h]),values:this.NR[h]}});this.needsUpdate=!0}this.TLa[h].drawImage(b.image,d,e,b.image.width*f,b.image.height*g);this.NR[h].needsUpdate=!0;return this};c.prototype.dispose=function(){for(var b in this.TLa)this.TLa.hasOwnProperty(b)&&(this.TLa[b]=null,this.NR[b].dispose(),this.NR[b]=null);Yz.prototype.dispose.call(this)};return c}(),1,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoidGEifX19");vz.sv(dA.Oa(),tz);var eA=/*#__PURE__*/va(/*#__PURE__*/function(){function c(a){a.data=G(a.data,{xmin:0,ymin:0,xstep:1,ystep:1,width:a.data.heightmap?a.data.heightmap.image.width:256,height:a.data.heightmap?a.data.heightmap.image.height:256,normals:!1},!0);Zz.call(this,a);var b=c.Qaa(a),d=b.triangles.position;this.cG={};var e=d instanceof zq||d instanceof Xs?d:d instanceof Float32Array?new zq(d,3):new zq(new Float32Array(d),3);b=b.triangles.index;d=b instanceof zq?b:d instanceof Uint32Array||d instanceof Uint16Array?new zq(b,1):new zq(new Uint32Array(b),
1);this.cG.vertices=e;this.cG.indices=d;this.tic=a.data.heightmap;this.$c=a.data.width;this.kd=a.data.height}D(c,Zz);L(c,"geotoolkit3d.data.surface.HeightMapSurfaceData");c.Qaa=Tz.RK;c.prototype.getAttributes=function(){return{position:this.cG.vertices,index:this.cG.indices,heightmap:this.tic,width:this.$c,height:this.kd}};c.prototype.Psb=function(){return{geometry:cA,material:dA}};c.prototype.vKd=function(a){this.tic=a;return this};return c}(),2,"eyJ0cmlhbmd1bGF0aW9uIjoiUWFhIiwicHJvdG90eXBlIjp7InMiOjAsImMiOnsiZ2V0Q29uc3RydWN0b3JzIjoiUHNiIn19fSAg");var fA=/*#__PURE__*/va(/*#__PURE__*/function(){function c(){}L(c,"geotoolkit3d.util.surface.PillarTriangulator");c.uMc=function(){var a=new Lp,b=new Lp;return function(d,e){var f=0;if(Number.isInteger(e))f=e;else for(e=0;e<d.length;e++)f=Math.max(f,d[e].x.length);for(e=0;e<d.length;e++){var g=d[e],h=g.x,k=g.y;g=g.z;for(var l=f-h.length,m=0;m<l;m++){for(var n=0,p=0,q=0;q<h.length-1;q++){a.set(h[q],k[q],g[q]);a.set(h[q+1],k[q+1],g[q+1]);var r=a.distanceTo(b);r>n&&(a.add(b).multiplyScalar(.5),n=r,p=q)}h.splice(p+1,0,a.x);k.splice(p+
1,0,a.y);g.splice(p+1,0,a.z)}}return d}}();c.P4b=null;c.ASb=!0;c.zSb=!0;c.setOptions=function(a){a=G(a,{resamplingpointcount:c.P4b,autosortpillars:c.ASb,autosortpillarpoints:c.zSb});c.P4b=a.resamplingPointCount;c.ASb=a.autosortpillars;c.zSb=a.autosortpillarpoints};c.AOd=function(a){a.forEach(function(b){for(var d=[],e=[],f=[],g=-1,h=Number.MAX_VALUE,k=0;k<b.z.length;k++)b.z[k]<h&&(g=k,h=b.z[k]);d.push(b.x[g]);e.push(b.y[g]);f.push(b.z[g]);g=[g];h=new Lp;for(k=0;k<b.z.length-1;k++){for(var l=new Lp(d[d.length-
1],e[d.length-1],f[d.length-1]),m=Number.MAX_VALUE,n=-1,p=0;p<b.z.length;p++)if(-1===g.indexOf(p)){var q=l.distanceTo(h.set(b.x[p],b.y[p],b.z[p]));m>q&&(m=q,n=p)}g.push(n);d.push(b.x[n]);e.push(b.y[n]);f.push(b.z[n])}b.x=d;b.y=e;b.z=f});return a};c.zOd=function(a){for(var b=Number.MAX_VALUE,d=-Number.MAX_VALUE,e=[],f=0;f<a.length;f++)b=Math.min(b,a[f].x[0]),d=Math.max(d,a[f].x[0]),e.push([a[f].x[0],a[f].y[0]]);f=bz.dtc(e);var g=f.a,h=f.b;f=[];for(var k=0;k<e.length;k++){var l=e[k],m=l[0],n=l[1];l=
g*b+h;var p=g*d+h,q=d-b;p-=l;var r=q*q+p*p;m=((m-b)*q+(n-l)*p)/r;q=b+m*q;l+=m*p;f.push([q,l,k])}f.sort(function(t,u){return 0===t[0]-u[0]?t[1]-u[1]:0>t[0]-u[0]?-1:1});b=[];for(d=0;d<f.length;d++)b.push(a[f[d][2]]);return b};c.RK=function(a){var b=G(a.data,{}),d=G(a,{resamplingpointcount:c.P4b,autosortpillars:c.ASb,autosortpillarpoints:c.zSb});a=[];b=b.pillars;d.autosortpillarpoints&&(b=c.AOd(b));d.autosortpillars&&(b=c.zOd(b));0<d.resamplingpointcount&&(b=c.uMc(b,d.resamplingpointcount));for(var e=
0,f=0;f<b.length;f++){d=b[f];d.indices=[];for(var g=0;g<d.x.length;g++)a.push(d.x[g]),a.push(d.y[g]),a.push(d.z[g]),d.indices.push(e++)}e=[];for(f=0;f<b.length-1;f++){d=b[f];g=b[f+1];for(var h=0,k=0,l=new Lp(d.x[h],d.y[h],d.z[h]),m=new Lp(g.x[k],g.y[k],g.z[k]);h<d.indices.length-1||k<g.indices.length-1;)if(h+1>=d.indices.length)e.push(d.indices[h],g.indices[k],g.indices[k+1]),k+=1,m=new Lp(g.x[k],g.y[k],g.z[k]);else if(k+1>=g.indices.length)e.push(d.indices[h],g.indices[k],d.indices[h+1]),h+=1,l=
new Lp(d.x[h],d.y[h],d.z[h]);else{var n=new Lp(d.x[h+1],d.y[h+1],d.z[h+1]);var p=new Lp(g.x[k+1],g.y[k+1],g.z[k+1]);var q=l.distanceTo(n)+m.distanceTo(n),r=l.distanceTo(p)+m.distanceTo(p);q<r?(e.push(d.indices[h],g.indices[k],d.indices[h+1]),h+=1,l=n):(e.push(d.indices[h],g.indices[k],g.indices[k+1]),k+=1,m=p)}}return a={triangles:{position:new Float32Array(a),index:new Uint32Array(e)}}};return c}(),1,"eyJyZXNhbXBsZVBpbGxhcnMiOiJ1TWMiLCJ0cmlhbmd1bGF0ZSI6IlJLIn0g");var gA=/*#__PURE__*/va(/*#__PURE__*/function(){function c(a){Zz.call(this,a);a=hc(a,!0);var b=c.RK(a);this.cG={};var d=b.triangles.position;d=d instanceof Float32Array?d:new Float32Array(d);b=b.triangles.index;b=b instanceof Uint32Array?b:new Uint32Array(b);this.cG.vertices=new zq(d,3);this.cG.indices=new zq(b,1);this.R8c=a.data.pillars;this.Cb=a.data.xyoffset||new Lp(0,0,0)}D(c,Zz);L(c,"geotoolkit3d.data.surface.PillarSurfaceData");c.RK=function(a){return fA.RK(a)};c.prototype.getAttributes=function(){var a={position:this.cG.vertices,
index:this.cG.indices,interleaved:!1};return a};c.prototype.wrd=function(){return this.R8c};c.prototype.sp=function(){return this.Cb};return c}(),2,"eyJ0cmlhbmd1bGF0ZSI6IlJLIn0g");var hA=/*#__PURE__*/va(/*#__PURE__*/function(){function c(a){Zz.call(this,a);a=xb(a,{interleaved:!0,bufferpadding:this.sgc,unorderedtriangulation:{enable:!0,enablefiltergaps:!0,filtergapsthreshold:5}});a.data.value&&(a.data.values=a.data.value,hb("SurfaceData: value is deprecated, use values instead."));a.bufferpadding+=3;null!=a.data.values&&(a.bufferpadding+=1);var b=c.Qaa(a),d=b.triangles.position,e=d.length/3;if(!0===a.interleaved){var f=new Float32Array(e*a.bufferpadding);f=new Ws(f,a.bufferpadding);var g=new Xs(f,3,0);
for(var h=0;h<e;h++){var k=3*h;g.setXYZ(h,d[k],d[k+1],d[k+2])}}else g=new zq(d,3);if(null!=a.data.values)for(d=a.data.values,this.TDa=Number.POSITIVE_INFINITY,this.SDa=Number.NEGATIVE_INFINITY,this.Gb=!0===a.interleaved?new Xs(f,1,3):new es(Array(e),1),e=0;e<d.length;e++)this.TDa=Math.min(this.TDa,d[e]),this.SDa=Math.max(this.SDa,d[e]),this.Gb.setX(e,d[e]);this.s5a=g;this.Cr=new zq(b.triangles.index,1);this.pz=a.data.nullvalue;this.$ra=a.interleaved;this.ZMb=b.zmin;this.FMb=b.zmax;this.XMb=b.xmin;
this.DMb=b.xmax;this.YMb=b.ymin;this.EMb=b.ymax}D(c,Zz);L(c,"geotoolkit3d.data.surface.SurfaceData");c.Qaa=function(a){var b=a.data.x,d=a.data.y,e=a.data.z,f,g,h,k;var l=f=g=Number.POSITIVE_INFINITY;var m=h=k=Number.NEGATIVE_INFINITY;for(var n=Array(3*b.length),p=0;p<b.length;p++){var q=3*p;n[q]=b[p];n[q+1]=d[p];n[q+2]=e[p];l=Math.min(l,b[p]);m=Math.max(m,b[p]);f=Math.min(f,d[p]);h=Math.max(h,d[p]);g=Math.min(g,e[p]);k=Math.max(k,e[p])}a=a.unorderedtriangulation.enable?cp.mVc(n,a.unorderedtriangulation):
cp.RK(n);return{triangles:{position:new Float32Array(n),index:new Uint32Array(a)},xmin:l,xmax:m,ymin:f,ymax:h,zmin:g,zmax:k}};c.prototype.getAttributes=function(){var a={position:this.s5a,index:this.Cr,nullvalue:this.pz,interleaved:this.$ra,xmin:this.XMb,xmax:this.DMb,ymin:this.YMb,ymax:this.EMb,zmin:this.ZMb,zmax:this.FMb};this.Gb&&(a.values=this.Gb,a.valuemin=this.TDa,a.valuemax=this.SDa);return a};return c}(),2,"eyJ0cmlhbmd1bGF0aW9uIjoiUWFhIn0g");var iA=/*#__PURE__*/function(){function c(a){var b=G(a,{interleaved:!1});Zz.call(this,b);a=b.data.xyz;a=a instanceof zq?a:a instanceof Float32Array?new zq(a,3):new zq(new Float32Array(a),3);var d=b.data.indices;d=d instanceof zq?d:d instanceof Uint32Array||d instanceof Uint16Array?new zq(d,1):new zq(new Uint32Array(d),1);var e=b.data.normal;null!=e&&(this.AH=e=e instanceof zq?e:e instanceof Uint32Array||e instanceof Uint16Array?new zq(e,3):new zq(new Uint32Array(e),3));this.Gb=b.data.values;this.s5a=a;this.Cr=
d;this.pz=b.data.nullvalue;this.$ra=b.interleaved;this.ZR=this.N5a=this.K5a=Number.POSITIVE_INFINITY;this.YR=this.M5a=this.J5a=Number.NEGATIVE_INFINITY;for(b=0;b<a.count;b++){d=a.getX(b);e=a.getY(b);var f=a.getZ(b);this.K5a=Math.min(d,this.K5a);this.J5a=Math.max(d,this.J5a);this.N5a=Math.min(e,this.N5a);this.M5a=Math.max(e,this.M5a);isNaN(f)||(this.ZR=Math.min(f,this.ZR),this.YR=Math.max(f,this.YR))}}D(c,Zz);L(c,"geotoolkit3d.data.surface.TrimeshSurfaceData");c.prototype.getAttributes=function(){var a=
{position:this.s5a,index:this.Cr,nullvalue:this.pz,interleaved:this.$ra,xmin:this.K5a,xmax:this.J5a,ymin:this.N5a,ymax:this.M5a,zmin:this.ZR,zmax:this.YR};this.AH&&(a.normal=this.AH);this.Gb&&(a.values=this.Gb);return a};return c}();var jA=/*#__PURE__*/va(/*#__PURE__*/function(){function c(b,d){this.Tca=12500;this.PF=b;this.t_a=d;this.Be=[];this.Me=null}var a=new uq;L(c,"geotoolkit3d.data.util.Octree");c.prototype.Poa=function(b){this.Tca=b;return this};c.prototype.split=function(){this.Me=Array(8);var b=new Lp;this.t_a.getSize(b).divideScalar(2);var d=this.t_a.min,e=this.t_a.max,f=b.x,g=b.y,h=b.z;this.Me[0]=(new c(this.PF+1,new uq(d,(new Lp).addVectors(d,b)))).Poa(this.Tca);this.Me[1]=(new c(this.PF+1,new uq(new Lp(d.x+f,d.y,d.z),new Lp(e.x,d.y+g,d.z+h)))).Poa(this.Tca);
this.Me[2]=(new c(this.PF+1,new uq(new Lp(d.x,d.y+g,d.z),new Lp(d.x+f,e.y,d.z+h)))).Poa(this.Tca);this.Me[3]=(new c(this.PF+1,new uq(new Lp(d.x+f,d.y+g,d.z),new Lp(e.x,e.y,e.z-h)))).Poa(this.Tca);this.Me[4]=(new c(this.PF+1,new uq(new Lp(d.x,d.y,d.z+h),new Lp(d.x+f,d.y+g,e.z)))).Poa(this.Tca);this.Me[5]=(new c(this.PF+1,new uq(new Lp(d.x+f,d.y,d.z+h),new Lp(e.x,d.y+g,e.z)))).Poa(this.Tca);this.Me[6]=(new c(this.PF+1,new uq(new Lp(d.x,d.y+g,d.z+h),new Lp(d.x+f,e.y,e.z)))).Poa(this.Tca);this.Me[7]=
(new c(this.PF+1,new uq(new Lp(d.x+f,d.y+g,d.z+h),e))).Poa(this.Tca)};c.prototype.aZb=function(b){if(null==this.Me)return[];var d;for(d=0;8>d;d++){var e=this.Me[d].Isb();if(e.containsBox(b))return[d]}var f=[];for(d=0;8>d;d++)e=this.Me[d].Isb(),e.intersectsBox(b)&&f.push(d);return f};c.prototype.Jn=function(b){var d=b;a.min.set(d[0],d[1],d[2]);a.max.set(d[3],d[4],d[5]);if(null!=this.Me){d=this.aZb(a);for(var e=0;e<d.length;e++)this.Me[d[e]].Jn(b)}else if(this.Be.push(b),this.Be.length>this.Tca){this.split();
for(b=0;b<this.Be.length;++b)this.Jn(this.Be[b]);this.Be=[]}};c.prototype.intersectsPlane=function(b){return this.t_a.intersectsPlane(b)};c.prototype.W4b=function(b){function d(f,g){if(f.Isb().intersectsPlane(g)){var h=f.Pma();if(null==h)for(g=f.Or(),h=0;h<g.length;++h)e.push(g[h]);else for(f=0;f<h.length;++f){var k=h[f];d(k,g)}}}var e=[];d(this,b);return e};c.prototype.V4b=function(){function b(e){var f=e.Or();if(f&&0<f.length)d.push(f);else if(e=e.Pma(),null!=e)for(f=0;f<e.length;f++)b(e[f])}var d=
[];b(this);return d};c.prototype.$Bc=function(){function b(e){var f=e.Or();if(f&&0<f.length)d++;else if(e=e.Pma(),null!=e)for(f=0;f<e.length;f++)b(e[f])}var d=0;b(this);return d};c.prototype.fLc=function(){function b(d){for(var e=d.Or(),f=0;f<e.length;f++)e[f]=e[f][6];d=d.Pma();if(null!=d)for(e=0;e<d.length;e++)b(d[e])}b(this)};c.prototype.Pma=function(){return this.Me};c.prototype.Or=function(){return this.Be};c.prototype.Isb=function(){return this.t_a};return c}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJzZXRDYXBhY2l0eSI6IlBvYSIsImluc2VydCI6IkpuIiwicmV0cmlldmVCeVBsYW5lIjoiVzRiIiwicmV0cmlldmUiOiJWNGIiLCJnZXROdW1iZXJPZk5vZGVzIjoiJEJjIiwicmVkdWNlU2l6ZSI6ImZMYyIsImdldE5vZGVzIjoiUG1hIiwiZ2V0RWxlbWVudHMiOiJPciIsImdldEJvdW5kIjoiSXNiIn19fSAg");var kA=/*#__PURE__*/function(){function c(b){var d=b.material,e=G(b,{uniforms:d.uniforms,vertexshader:a.orc(d),fragmentshader:a.nrc(d),defines:d.defines},!0);cz.call(this,e);this.ACa=b.object;this.type="DefaultPointSetPickingMaterial";this.transparent=!1;this.lights=d.lights;this.side=d.side;this.blending=yu}var a=$y;D(c,cz);L(c,"geotoolkit3d.picking.pickingrenderer.DefaultPointSetPickingMaterial");c.prototype.iVb=function(b){return b/this.ACa.geometry.instanceCount};c.prototype.k7a=function(b){return Math.round(b*
this.ACa.geometry.instanceCount)};c.U_c=100;c.prototype.vtb=function(){var b=this;return[{pickingmode:a.Icc,callback:function(d,e){d=b.k7a(Yy.$db(d));e.pointindex=d;var f=b.ACa.parent&&b.ACa.parent.Oa&&"geotoolkit3d.scene.pointset.PointSet"===b.ACa.parent.Oa();f&&(b.ACa.parent.b0b(d),e.point&&(d=b.ACa.parent.USa(d),null!=d&&(d=d.position,e.point.x=d[0],e.point.y=d[1],e.point.z=d[2])))}}]};return c}();var lA=/*#__PURE__*/va(/*#__PURE__*/function(){function c(){}L(c,"geotoolkit3d.data.reservoir.AbstractReservoirData");c.prototype.getAttributes=Fb;c.prototype.OSa=function(){return 0};c.prototype.u9a=function(){return 1};c.prototype.obd=function(a,b,d,e,f){a[3*b]=d;a[3*b+1]=e;a[3*b+2]=f};return c}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXROdW1iZXJPZkNlbGxzIjoiT1NhIiwiZ2V0TnVtYmVyT2ZHcmlkcyI6InU5YSIsImFwcGVuZFBvaW50Ijoib2JkIn19fSAg");var mA=/*#__PURE__*/va(/*#__PURE__*/function(){function c(f){Ms.call(this);this.type="ReservoirGeometry";this.xwd();f.data instanceof lA?(this.ja=f.data.getAttributes(),this.Anb=f.data):this.ja=f.data;this.LHb=0;this.Yic=!1;this.sQb=this.Uob=this.Ska=0;this.$Oa=[];this.R3a=[];this.uf=this.RAa=this.rmb=this.qmb=null;this.pz=void 0;this.PY=new Mp(this.ja.mini,this.ja.minj,this.ja.mink,Number.NEGATIVE_INFINITY);this.OY=new Mp(this.ja.maxi,this.ja.maxj,this.ja.maxk,Number.POSITIVE_INFINITY);this.oJb=!1;this.Hfc=new Lp(0,0,0);this.Ifc=
new Lp(0,0,0);this.ZX=this.PY.clone();this.YX=this.OY.clone();this.setOptions(f)}function a(){this.array=null}var b=8,d=3*b,e=1E-7;D(c,Ms);L(c,"geotoolkit3d.scene.reservoir.instanced.ReservoirGeometry");c.prototype.setOptions=function(f){var g=!1;if(null!=f.data){g=!0;var h;this.ja=h=f.data instanceof lA?f.data.getAttributes():f.data;this.Sne=this.LHb=this.ja.cellcount;this.wad(h);null!=this.ja.boundingbox?this.boundingBox=this.ja.boundingbox:this.computeBoundingBox(this.ja.positions.array)}this.o6b(f,
g);return this};c.prototype.Atb=function(){this.ja.volume||(this.Anb.Vqb(),this.ja.volume=this.Anb.getAttributes().volume,this.SVc());return this.Uob};c.prototype.ztb=function(){return this.sQb};c.prototype.wad=function(f){this.setValues(f.values.array);this.R3a=f.additionaldata;this.Ska=this.ja.positions.array.length/d;this.userData.dVc=this.Ska;this.Yic=oz.FGc(this.ja.positions.array);this.oed()};c.prototype.xwd=function(){var f=this.AEc(),g=this.Oxc();this.setAttribute("position",(new es(f,3)).onUpload(a));
this.setAttribute("barycentric",(new es(g,3)).onUpload(a))};c.prototype.o6b=function(f,g){g=!!g;f.hasOwnProperty("minbound")&&(this.ZX=f.minbound);f.hasOwnProperty("maxbound")&&(this.YX=f.maxbound);f.hasOwnProperty("minvalue")&&(this.ZX.w=f.minvalue);f.hasOwnProperty("maxvalue")&&(this.YX.w=f.maxvalue);f.hasOwnProperty("mini")&&(this.ZX.x=+f.mini);f.hasOwnProperty("minj")&&(this.ZX.y=+f.minj);f.hasOwnProperty("mink")&&(this.ZX.z=+f.mink);f.hasOwnProperty("maxi")&&(this.YX.x=+f.maxi);f.hasOwnProperty("maxj")&&
(this.YX.y=+f.maxj);f.hasOwnProperty("maxk")&&(this.YX.z=+f.maxk);if(this.PY.x!==this.ZX.x||this.PY.y!==this.ZX.y||this.PY.z!==this.ZX.z)g=!0;this.PY.w!==this.ZX.w&&(g=!0);this.PY.set(this.ZX.x,this.ZX.y,this.ZX.z,this.ZX.w);if(this.OY.x!==this.YX.x||this.OY.y!==this.YX.y||this.OY.z!==this.YX.z)g=!0;this.OY.w!==this.YX.w&&(g=!0);this.OY.set(this.YX.x,this.YX.y,this.YX.z,this.YX.w);f.hasOwnProperty("nullvalue")&&this.c9c!==f.nullvalue&&(this.pz=this.c9c=f.nullvalue,g=!0);f.hasOwnProperty("excludemode")&&
this.oJb!==f.excludemode&&(this.oJb=f.excludemode,g=!0);f.hasOwnProperty("filter")&&this.uf!==f.filter&&(this.uf=f.filter,g=!0);g&&this.Pf();return this};c.prototype.SVc=function(){var f,g=0,h=[];this.sQb=this.Uob=0;var k=!!this.ja.volume;for(f=0;f<this.Ska;f++)if(!this.RAa[f]){this.sQb++;k&&(this.Uob+=this.ja.volume[f]);var l=!1;if(this.qmb[f]){l=!0;for(var m=0;6>m;m++){var n=this.rmb[f][m];if(this.RAa[n]){l=!1;break}}}l||(h.push(f),g++)}this.instanceCount=g;k=(new Ns(new Float32Array(g*d),d)).onUpload(a);
l=(new Ls(new Float32Array(g),1)).onUpload(a);m=(new Ls(new Float32Array(g),1)).onUpload(a);for(f=0;f<g;f++){n=h[f];for(var p=n*b,q=f*d,r=0;r<b;r++){var t=3*r;k.array[q+t]=this.ja.positions.getX(p+r);k.array[q+t+1]=this.ja.positions.getY(p+r);k.array[q+t+2]=this.ja.positions.getZ(p+r)}l.array[f]=this.$Oa[n];m.array[f]=n/this.Ska}h.length=0;this.setAttribute("positionA",new Xs(k,3,0));this.setAttribute("positionB",new Xs(k,3,3));this.setAttribute("positionC",new Xs(k,3,6));this.setAttribute("positionD",
new Xs(k,3,9));this.setAttribute("positionE",new Xs(k,3,12));this.setAttribute("positionF",new Xs(k,3,15));this.setAttribute("positionG",new Xs(k,3,18));this.setAttribute("positionH",new Xs(k,3,21));this.setAttribute("cgcolormapValue",l);this.setAttribute("cgcellindex",m)};c.prototype.med=function(){this.RAa=this.RAa||Array(this.Ska);for(var f=this.ja.ijk,g=0;g<this.Ska;g++)this.RAa[g]=this.Lxd(f.getX(g),f.getY(g),f.getZ(g),this.$Oa[g],this.R3a[g])};c.prototype.Kxd=function(f){return 0>f||f>=this.Ska?
!0:this.RAa[f]};c.prototype.Lxd=function(f,g,h,k,l){return this.Mxd(f,g,h)||this.Nxd(k)||null!=this.uf&&this.uf(f,g,h,k,l)};c.prototype.Mxd=function(f,g,h){return this.oJb?f>=this.PY.x&&f<=this.OY.x&&g>=this.PY.y&&g<=this.OY.y&&h>=this.PY.z&&h<=this.OY.z:f<this.PY.x||f>this.OY.x||g<this.PY.y||g>this.OY.y||h<this.PY.z||h>this.OY.z};c.prototype.Nxd=function(f){return!Number.isFinite(f)||f<this.PY.w||f>this.OY.w||f===this.pz};c.prototype.oed=function(){this.qmb=Array(this.Ska).fill(!1);this.rmb=[];for(var f=
Array(6),g=Array(3*b).fill(0),h=Array(6).fill().map(function(){return Array(3*b).fill(0)}),k=this.ja.cellmap,l=0;l<this.Ska;l++){var m=!0,n=this.ja.ijk.getX(l),p=this.ja.ijk.getY(l),q=this.ja.ijk.getZ(l),r=[[n+1,p,q],[n-1,p,q],[n,p+1,q],[n,p-1,q],[n,p,q+1],[n,p,q-1]],t;for(t=0;6>t;t++){var u=r[t][0],w=r[t][1],y=r[t][2];if(null!=k[u]&&null!=k[u][w]&&null!=k[u][w][y])f[t]=k[u][w][y];else{m=!1;break}}if(m){m=k[n][p][q];this.cyc(m,g);for(t=0;6>t;t++)this.cyc(f[t],h[t]);this.udd(g,h)&&(this.qmb[l]=!0,
this.rmb[l]=f.slice())}}};c.prototype.udd=function(f,g){return this.yA("B","A",f,g[0])&&this.yA("D","C",f,g[0])&&this.yA("F","E",f,g[0])&&this.yA("H","G",f,g[0])&&this.yA("A","B",f,g[1])&&this.yA("C","D",f,g[1])&&this.yA("E","F",f,g[1])&&this.yA("G","H",f,g[1])&&this.yA("C","A",f,g[2])&&this.yA("D","B",f,g[2])&&this.yA("G","E",f,g[2])&&this.yA("H","F",f,g[2])&&this.yA("A","C",f,g[3])&&this.yA("B","D",f,g[3])&&this.yA("E","G",f,g[3])&&this.yA("F","H",f,g[3])&&this.yA("E","A",f,g[4])&&this.yA("F","B",
f,g[4])&&this.yA("G","C",f,g[4])&&this.yA("H","D",f,g[4])&&this.yA("A","E",f,g[5])&&this.yA("B","F",f,g[5])&&this.yA("C","G",f,g[5])?this.yA("D","H",f,g[5]):!1};c.prototype.cyc=function(f,g){f*=b;for(var h=0;h<b;h++)g[3*h]=this.ja.positions.getX(f+h),g[3*h+1]=this.ja.positions.getY(f+h),g[3*h+2]=this.ja.positions.getZ(f+h)};c.prototype.yA=function(f,g,h,k){this.YNc(f,h,this.Hfc);this.YNc(g,k,this.Ifc);return this.Hfc.manhattanDistanceTo(this.Ifc)<e};c.prototype.YNc=function(f,g,h){switch(f){case "A":var k=
0;break;case "B":k=1;break;case "C":k=2;break;case "D":k=3;break;case "E":k=4;break;case "F":k=5;break;case "G":k=6;break;case "H":k=7;break;default:hb("Not a valid cell corner!")}f=3*k;h.set(g[f],g[f+1],g[f+2])};c.prototype.setValues=function(f){this.$Oa=f instanceof zq?f.array:f};c.prototype.AEc=function(){var f=[0,0,1],g=[1,0,1],h=[0,1,1],k=[1,1,1],l=[0,0,0],m=[1,0,0],n=[0,1,0],p=[1,1,0],q=[];q=q.concat(h,k,n,k,p,n);q=q.concat(f,l,g,l,m,g);q=q.concat(g,m,k,m,p,k);q=q.concat(f,h,l,h,n,l);q=q.concat(f,
g,h,g,k,h);return q=q.concat(m,l,p,l,n,p)};c.prototype.Oxc=function(){for(var f=12,g=[],h=0;h<f;h++){var k=0===h%2;k?g.push(0,0,1,0,1,0,1,0,1):g.push(0,1,0,0,0,1,1,0,1)}return g};c.prototype.computeBoundingBox=function(f){this.boundingBox=(new uq).setFromArray(f)};c.prototype.dmd=function(f){var g=[],h=[],k=[],l={index:f,positions:{}};if(0>f||f>=this.LHb)return l;for(var m=f*b;m<(f+1)*b;m++)g.push(this.ja.positions.getX(m)),h.push(this.ja.positions.getY(m)),k.push(this.ja.positions.getZ(m));l.positions.x=
g;l.positions.y=h;l.positions.z=k;f<this.$Oa.length&&(l.value=this.$Oa[f]);f<this.R3a.length&&(l.additionalData=this.R3a[f]);null!=this.ja.ijk&&(l.ijk={i:this.ja.ijk.getX(f),j:this.ja.ijk.getY(f),k:this.ja.ijk.getZ(f)},l.positions.ijk=[l.ijk.i,l.ijk.j,l.ijk.k]);l.volume=this.ja.volume?this.ja.volume[f]:null;return l};c.prototype.VVc=function(f,g){var h=f.positions.x,k=f.positions.y,l=f.positions.z;f=[];f.push(h[0],k[0],l[0],h[1],k[1],l[1],h[1],k[1],l[1],h[3],k[3],l[3],h[3],k[3],l[3],h[2],k[2],l[2],
h[2],k[2],l[2],h[0],k[0],l[0],h[0],k[0],l[0],h[4],k[4],l[4],h[4],k[4],l[4],h[5],k[5],l[5],h[5],k[5],l[5],h[1],k[1],l[1],h[5],k[5],l[5],h[7],k[7],l[7],h[7],k[7],l[7],h[3],k[3],l[3],h[7],k[7],l[7],h[6],k[6],l[6],h[6],k[6],l[6],h[2],k[2],l[2],h[6],k[6],l[6],h[4],k[4],l[4]);h=g.getAttribute("instanceStart");if(null==h||null==h.data||0===h.data.array.length)g.setData({positions:f});else{g=h.data.array;for(k=0;k<f.length;k++)g[k]=f[k];h.needsUpdate=!0}};c.prototype.Ujd=function(f){if(!f||!f.ijk||!f.positions)return null;
var g=new lz({data:{positions:[]},color:new Pq("red"),linewidth:3,opacity:.6,polygonoffset:!0});this.VVc(f,g.geometry);f=g.geometry.getAttribute("instanceStart").data;f.setUsage(Lr);return g};c.prototype.H0b=function(){return this.Yic};c.prototype.lGc=function(f){var g=!0;f.mini&&f.maxi&&(this.ja.mini<f.mini||this.ja.maxi>f.maxi)&&(g=!1);f.minj&&f.maxj&&(this.ja.minj<f.minj||this.ja.maxj>f.maxj)&&(g=!1);f.mink&&f.maxk&&(this.ja.mink<f.mink||this.ja.maxk>f.maxk)&&(g=!1);return g};c.prototype.dispose=
function(){Ms.prototype.dispose.call(this);this.Anb&&this.Anb.dispose();this.ja&&(this.ja.positions=null);this.ja.ijk&&(this.ja.ijk=null);this.ja.values&&(this.ja.values=null);this.ja.cellmap&&(this.ja.cellmap=null);this.RAa=this.rmb=this.qmb=this.R3a=this.$Oa=null};c.prototype.Pf=function(){this.med();this.SVc();return this};return c}(),1,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRGaWx0ZXJlZENlbGxzVm9sdW1lIjoiQXRiIiwiZ2V0RmlsdGVyZWRDZWxsc0NvdW50IjoienRiIiwiZ2V0VW5pdFBvc2l0aW9uIjoiQUVjIiwiZ2V0QmFyeWNlbnRyaWNQZXJJbnN0YW5jZSI6Ik94YyIsImlzQ2VsbE5vcm1hbHNJbnZlcnRlZCI6IkgwYiIsImlzSUpLVmFsaWQiOiJsR2MifX19");var nA=/*#__PURE__*/function(){function c(b){var d=b.material,e=G(b,{uniforms:d.uniforms,vertexshader:a.mcd(d),fragmentshader:a.lcd(d),defines:d.defines},!0);cz.call(this,e);this.dk=b.object;this.ejc=this.dk.geometry instanceof mA;this.Apc=this.dk.geometry.getAttribute("cgcolormapValue").count;this.type="DefaultReservoirPickingMaterial";this.transparent=!1;this.lights=d.lights;this.side=d.side;this.blending=yu;this.extensions.derivatives=!0}var a=$y;D(c,cz);L(c,"geotoolkit3d.picking.pickingrenderer.DefaultReservoirPickingMaterial");
c.prototype.iVb=function(b){var d=this.ejc?this.dk.geometry.userData.dVc:this.Apc;return b/d};c.prototype.k7a=function(b){var d=this.ejc?this.dk.geometry.userData.dVc:this.Apc;return Math.round(b*d)};c.prototype.vtb=function(){var b=this;return[{pickingmode:a.V_c,callback:function(d,e,f){d=b.k7a(Yy.$db(d));var g=b.dk.geometry.dmd(d);for(d=b.dk;d.type&&"ReservoirGrid"!==d.type;)d=d.parent;d.iwd(b.dk.geometry,g);e.value=g.value;e.ijk=g.ijk;e=d.RZb();null!=e&&(e.userData.dispose=d.yLc.bind(d),f.push(e))}}]};
return c}();var oA=/*#__PURE__*/function(){function c(a){a.material=a.material[0];pz.call(this,a);this.side=Gr}D(c,pz);L(c,"geotoolkit3d.picking.pickingrenderer.DefaultSeismicSlicePickingMaterial");return c}();var pA=/*#__PURE__*/va(/*#__PURE__*/function(){function c(){dz.call(this)}var a=new Vd;D(c,dz);L(c,"geotoolkit3d.picking.RayCastPicking");c.trd=function(b,d,e){var f=b.getSize(a),g=b.o4().getContext().canvas.getBoundingClientRect();d=(d-g.left)/(g.right-g.left)*f.ca();e=(e-g.top)/(g.bottom-g.top)*f.da();return c.uCc(b,d,e)};c.uCc=function(b,d,e){b.getCamera().updateMatrixWorld(!0);b.iR().updateMatrixWorld(!0);var f=new kw,g=new gy;g.x=d/b.SV().clientWidth*2-1;g.y=2*-(e/b.SV().clientHeight)+1;f.setFromCamera(g,b.getCamera());
return f.ray};c.m3b=function(b,d,e,f,g,h){g=b.LSa();var k=b.LSa().negate();b.iR().position.add(k);b.getCamera().position.add(k);b.getCamera().updateMatrixWorld(!0);b.iR().updateMatrixWorld(!0);k=new kw;var l=new gy;l.x=d/b.SV().clientWidth*2-1;l.y=2*-(e/b.SV().clientHeight)+1;k.setFromCamera(l,b.getCamera());null!=h&&(k.ste=h);d=k.intersectObjects([f],!0);e=[];f={};for(h=0;h<d.length;h++)isNaN(d[h].distance)||null!=f[d[h].object.uuid]||(d[h].point=d[h].point.clone(),b.gaa(d[h].point),e.push({object:d[h].object,
point:d[h].point,distance:d[h].distance}),f[d[h].object.uuid]=!0);e.sort(function(m,n){return m.distance-n.distance});b.iR().position.add(g);b.getCamera().position.add(g);b.getCamera().updateMatrixWorld(!0);b.iR().updateMatrixWorld(!0);return e};c.Ym=function(b,d,e){var f=b.iR();return this.m3b(b,d,e,f)};return c}(),2,"eyJnZXRQaWNraW5nUmF5Q2xpZW50IjoidHJkIiwiZ2V0UGlja2luZ1JheSI6InVDYyIsInBpY2tGcm9tIjoibTNiIiwicGljayI6IlltIn0g");var qA=/*#__PURE__*/va(/*#__PURE__*/function(){function c(){}c.mjc=!1;c.njc=!1;c.Okb=!1;c.rkc=0;c.skc=0;L(c,"geotoolkit3d.util.WebGLConstants");c.wXa=function(a){if(!c.QF){c.QF=!0;var b=!1;if(!a){try{if(!Za.WebGLRenderingContext)return;a=new qy}catch(f){return}b=!0}if(null!=a){c.mjc=!0;c.njc=a.capabilities.isWebGL2;c.rkc=a.capabilities.maxTextureSize;c.skc=a.capabilities.maxTextures;var d=a.getContext();if(sd.M0b()){var e=d.getParameter(d.RENDERER);c.Okb=0<=e.indexOf("Intel")}else if(e=d.getExtension("WEBGL_debug_renderer_info"),
!e||0<=d.getParameter(e.UNMASKED_RENDERER_WEBGL).indexOf("Intel"))c.Okb=!0;b&&a.dispose()}}};c.MFa=function(){c.QF||c.wXa();return c.rkc};c.$pd=function(){c.QF||c.wXa();return c.skc};c.sCb=function(){c.QF||c.wXa();return c.mjc};c.$$a=function(){c.QF||c.wXa();return null==c.Okb?(hb("WebGLConstants.isIntelGPU: cannot determine the type of GPU"),null):c.Okb};c.isWebGL2=function(){c.QF||c.wXa();return c.njc};c.canvas=function(){null==c.Xic&&(c.Xic=Za.CanvasRenderingContext2D&&!0);return c.Xic};return c}(),1,"eyJnZXRNYXhUZXh0dXJlU2l6ZSI6Ik1GYSIsImdldE1heFRleHR1cmVzIjoiJHBkIiwid2ViZ2wiOiJzQ2IiLCJpc0ludGVsR1BVIjoiJCRhIn0g");var rA=/*#__PURE__*/va(/*#__PURE__*/function(){function c(a){mz.call(this);this.aU=[]}D(c,mz);L(c,"geotoolkit3d.scene.animation.AnimationManager");c.prototype.isc=function(a){nc(a,xz)||hb("checkAnimation with function is deprecated since 2020 (3.0), use geotoolkit3d.scene.animation.AbstractAnimation instead");return-1===this.aU.indexOf(a)?!1:!0};c.prototype.qLc=function(a){nc(a,xz)||hb("removeAnimation with function is deprecated since 2020 (3.0), use geotoolkit3d.scene.animation.AbstractAnimation instead");var b=this.aU.indexOf(a);
-1!==this.aU.indexOf(a)&&this.aU.splice(b,1)};c.prototype.ORb=function(a){nc(a,xz)||hb("addAnimation with function is deprecated since 2020 (3.0), use geotoolkit3d.scene.animation.AbstractAnimation instead");var b=this.aU.indexOf(a);-1===b&&this.aU.push(a);1===this.aU.length&&this.Xf(new gz({type:fz.Animation,source:this,args:{}}));return this};c.prototype.rya=function(a,b){a=[];for(b=0;b<this.aU.length;b++)(nc(this.aU[b],xz)?this.aU[b].oN():this.aU[b]())&&a.push(b);for(b=a.length-1;0<=b;b--)this.aU.splice(a[b],
1);0<this.aU.length&&this.Xf(new gz({type:fz.Animation,source:this,args:{}}))};c.prototype.dispose=function(){this.aU=null};return c}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJjaGVja0FuaW1hdGlvbiI6ImlzYyIsInJlbW92ZUFuaW1hdGlvbiI6InFMYyIsImFkZEFuaW1hdGlvbiI6Ik9SYiJ9fX0g");var sA=/*#__PURE__*/va(/*#__PURE__*/function(){function c(h,k,l){for(var m=0;m<l;m++)if(h[m]!==k[m])return!1;return!0}function a(){if(f)return hb("geotoolkit3d.util.intersection.IntersectionManager is singleton, please avoid constructor and use getDefaultInstance() instead."),f;ue.call(this);this.eda=new Map;this.nNa={};this.Dqa={};this.L2={};this.hda=new Map;return this}function b(h){(h=h&&h instanceof mz)||hb("geotoolkit3d.util.intersection.IntersectionManager only accepts object type of geotoolkit3d.scene.Object3D");return h}function d(h,k,l){null==h[k.uuid]&&(h[k.uuid]=[]);-1===h[k.uuid].indexOf(l.uuid)&&h[k.uuid].push(l.uuid)}function e(h,k){null!=k.uuid&&null!=k.matrixWorld&&(h.has(k.uuid)||h.set(k.uuid,{object:k,matrixworld:k.matrixWorld.elements.slice()}))}var f=null,g={};L(a,"geotoolkit3d.util.intersection.IntersectionManager");D(a,ue);a.ig=function(){null==f&&(f=new a);return f};a.jzb=function(h,k){g[h]=new k};a.prototype.hFa=function(h,k,l){if(b(h)&&b(k)){if(this.L2[h.uuid]&&this.L2[h.uuid][k.uuid])var m=this.L2[h.uuid][k.uuid];
else m={preservecolor:!0,linewidth:6,fillstyle:new rf("red")},null==this.L2[h.uuid]&&(this.L2[h.uuid]={});l=xb(l,m);this.L2[h.uuid][k.uuid]=l;var n=Object.keys(g),p=this;h.traverse(function(q){q.Oa&&n.forEach(function(r){r===q.Oa()&&(p.CLc(q,k),p.Odd(q,k)||(r=g[r].hFa(q,k,l),p.hda.set(q.uuid+k.uuid,r)))})});e(this.eda,h);e(this.eda,k);d(this.Dqa,h,k);d(this.nNa,k,h)}};a.prototype.CLc=function(h,k){if(b(h)&&b(k)&&(k=h.uuid+k.uuid,this.hda.has(k)&&0!==this.hda.get(k).length)){var l=this.hda.get(k);
null!=h.ge&&h.ge()||("function"!==typeof h.Jz?hb("geotoolkit3d.util.intersection.IntersectionManager: cannot find overlay"):(h=h.Jz(),null!=h&&(h.iT(l),this.hda.set(k,[]))))}};a.prototype.Odd=function(h,k){var l=h.uuid+k.uuid,m=!1;null!=h.ge&&h.ge()&&(this.eda.delete(h.uuid),this.Dqa[h.uuid]=null,this.L2[h.uuid]&&(this.L2[h.uuid]=null),m=!0);null!=k.ge&&k.ge()&&(this.eda.delete(k.uuid),this.nNa[k.uuid]=null,this.L2[h.uuid]&&this.L2[h.uuid][k.uuid]&&(this.L2[h.uuid][k.uuid]=null),m=!0);m&&this.hda.delete(l);
return m};a.prototype.AMd=function(h,k,l){if(b(h)&&b(k)&&(h=h.uuid+k.uuid,this.hda.has(h)&&0!==this.hda.get(h).length)){h=this.hda.get(h);for(k=0;k<h.length;k++)h[k].wb(!1),h[k].fa(l);for(k=0;k<h.length;k++)h[k].wb(!0);h[0].Ag(null,!0)}};a.prototype.sGc=function(){for(var h=this.eda.values(),k=h.next();!k.done;){var l=k.value.object.matrixWorld.elements;if(!c(l,k.value.matrixworld,16))return!0;k=h.next()}return!1};a.prototype.$Vc=function(){for(var h=[],k=this.eda.entries(),l=k.next();!l.done;){var m=
l.value[1].object.matrixWorld.elements;c(m,l.value[1].matrixworld,16)||(h.push(l.value[0]),l.value[1].matrixworld=m.slice());l=k.next()}k=[];var n;for(n=0;n<h.length;n++){var p=[];this.nNa[h[n]]&&(p=this.nNa[h[n]]);this.Dqa[h[n]]&&p.push(h[n]);for(l=0;l<p.length;l++)m=p[l],-1===k.indexOf(m)&&k.push(m)}for(l=0;l<k.length;l++)if(m=k[l],null!=this.Dqa[m])for(h=this.eda.get(m).object,n=0;n<this.Dqa[m].length;n++)p=this.eda.get(this.Dqa[m][n]).object,this.hFa(h,p)};a.prototype.epd=function(){return this.nNa};
a.prototype.Kkd=function(){return this.Dqa};a.prototype.Nqd=function(){return this.eda};a.prototype.dispose=function(){f=this.hda=this.L2=this.eda=this.nNa=this.Dqa=null;ue.prototype.dispose.call(this)};return a}(),2,"eyJnZXREZWZhdWx0SW5zdGFuY2UiOiJpZyIsInNldEJhc2VDbGFzcyI6Imp6YiIsInByb3RvdHlwZSI6eyJzIjowLCJjIjp7ImdlbmVyYXRlSW50ZXJzZWN0aW9uIjoiaEZhIiwicmVtb3ZlSW50ZXJzZWN0aW9uIjoiQ0xjIiwic2V0UHJvcGVydHlCeUludGVyc2VjdGlvbiI6IkFNZCIsImlzTWF0cml4V29ybGRDaGFuZ2UiOiJzR2MiLCJ1cGRhdGVJbnRlcnNlY3Rpb24iOiIkVmMiLCJnZXRJbnRlcnNlY3Rpb25Hcm91cCI6ImVwZCIsImdldEJhc2VHcm91cCI6IktrZCIsImdldE9iamVjdE1hcCI6Ik5xZCJ9fX0g");var tA=/*#__PURE__*/function(){function c(a){mz.call(this);1<arguments.length&&(a={origin:arguments[0],direction:arguments[1]});var b=G(a,{origin:new Lp(0,0,0),direction:new Lp(0,1,0),topcolor:new Pq(65280),bottomcolor:new Pq(16711680),outlinecolor:new Pq(0),showlabels:!0},!0),d=b.origin,e=b.direction;this.position.copy(d);d=[new Lp(0,3,-.5),new Lp(1.5,1,-.5),new Lp(.5,1,-.5),new Lp(.5,-2,-.5),new Lp(-.5,-2,-.5),new Lp(-.5,1,-.5),new Lp(-1.5,1,-.5),new Lp(0,3,0),new Lp(1.5,1,0),new Lp(.5,1,0),new Lp(.5,-2,0),
new Lp(-.5,-2,0),new Lp(-.5,1,0),new Lp(-1.5,1,0),new Lp(0,3,.5),new Lp(1.5,1,.5),new Lp(.5,1,.5),new Lp(.5,-2,.5),new Lp(-.5,-2,.5),new Lp(-.5,1,.5),new Lp(-1.5,1,.5)];var f=[20,14,15,19,16,18,17,10,16,9,15,8,14,7,20,13,19,12,18,11,10],g=[1,0,14,15,1,15,16,17,3,17,18,4,18,19,20,6,20,14,0,6,5,4,3,2,1],h=[],k=[2,1,0,5,4,3,5,6,8,15,13,11,17,9,19,9,20,19,12,10,11,11,13,12,10,4,9,9,11,10,4,6,7,7,9,4,6,5,19,19,7,6,5,3,17,17,19,5,3,0,15,15,17,3,0,1,13,13,15,0],l;for(l=0;l<k.length;l++)h.push(d[f[k[l]]]);
l=new Aq;l.setFromPoints(h);h=new $t(l,new au({color:b.topcolor}));h.matrixAutoUpdate=!1;this.add(h);l=l.clone();l.applyMatrix4((new Yt).makeTranslation(0,0,-.5));l=new $t(l,new au({color:b.bottomcolor}));l.matrixAutoUpdate=!1;this.add(l);h=new Aq;f=[];for(l=0;l<g.length;l++)f.push(d[g[l]]);h.setFromPoints(f);b=new rt(h,new tt({color:b.outlinecolor}));b.matrixAutoUpdate=!1;this.add(b);this.setDirection(e);this.scale.set(2,2,2)}D(c,mz);L(c,"geotoolkit3d.scene.compass.CompassArrow");c.prototype.setDirection=
function(a){var b=new Lp;.99999<a.y?this.quaternion.set(0,0,0,1):-.99999>a.y?this.quaternion.set(1,0,0,0):(b.set(a.z,0,-a.x).normalize(),a=Math.acos(a.y),this.quaternion.setFromAxisAngle(b,a))};return c}();var uA=/*#__PURE__*/va(/*#__PURE__*/function(){function c(a){var b=G(a,{container:null,camera:null,visible:!0},!0);this.Be=b.container;null==a.renderer&&(a.renderer={});null==a.renderer.parameters&&(a.renderer.parameters={});a=G(a.renderer.parameters,{canvas:b.canvas,alpha:!0});this.zm=new qy(a);this.zm.setPixelRatio(ac());this.zm.setSize(this.Be.offsetWidth,this.Be.offsetHeight);this.ps=new Np;this.Rb=new av(60,1,1,2E3);null!=b.camera&&(this.Rb.up=b.camera.up);this.ps.add(this.Rb);this.iOc(new tA);this.hp=b.visible;this.CL=
!0;null!=this.Be&&this.Be.appendChild(this.zm.domElement)}L(c,"geotoolkit3d.scene.compass.Compass");c.prototype.xld=function(){return this.jib};c.prototype.iOc=function(a){if(null==a)return this;null!=this.jib&&this.ps.remove(this.jib);this.jib=a;this.ps.add(this.jib);return this};c.prototype.render=function(a,b){!1!==this.CL&&(this.rya(a,b),this.hp&&this.zm.render(this.ps,this.Rb))};c.prototype.Xf=function(a){this.CL=!0};c.prototype.setSize=function(a,b){this.Rb instanceof av?this.Rb.aspect=1:(this.Rb.left=
-a,this.Rb.right=a,this.Rb.top=a,this.Rb.bottom=-a);this.Rb.updateProjectionMatrix();isNaN(b)||this.zm.setPixelRatio(b);this.zm.setSize(a,a);null!=this.Be&&(this.Be.style.width=a+"px",this.Be.style.height=a+"px")};c.prototype.rya=function(){var a=new Lp;return function(b,d){a.set(0,0,1).applyEuler(d.rotation,d.rotation.order);this.Rb.position.copy(a);this.Rb.position.setLength(18);this.Rb.rotation.copy(d.rotation);this.CL=!1}}();c.prototype.dispose=function(){null!=this.ps&&oz.dispose(this.ps.children);
this.ps=null;if(null!=this.zm){null!=this.Be&&this.Be.removeChild(this.zm.domElement);null!=this.zm.dispose&&this.zm.dispose();var a=this.zm.getContext().getExtension("WEBGL_lose_context");a&&a.loseContext()}this.Rb=this.Be=this.zm=null};return c}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRDb21wYXNzT2JqZWN0IjoieGxkIiwic2V0Q29tcGFzc09iamVjdCI6ImlPYyJ9fX0g");var vA=/*#__PURE__*/function(){function c(){this.Be=xc("div");this.Be.style.cssText="position:absolute;top:0;left:0;cursor:pointer;opacity:0.9;z-index:10000";var b=this;this.Be.addEventListener("click",function(l){l.preventDefault();b.OTc(++a%b.Be.children.length)},!1);var d=(Za.performance||Date).now(),e=d,f=0,g=this.XRb(new c.lFb("FPS","#0ff","#002")),h=this.XRb(new c.lFb("MS","#0f0","#020")),k;Za.performance&&Za.performance.memory&&(k=this.XRb(new c.lFb("MB","#f08","#201")));this.OTc(0);return{REVISION:16,
Bw:function(){d=(Za.performance||Date).now()},end:function(){f++;var l=(Za.performance||Date).now();h.update(l-d,200);if(l>=e+1E3&&(g.update(1E3*f/(l-e),100),e=l,f=0,k)){var m=Za.performance.memory;k.update(m.usedJSHeapSize/1048576,m.jsHeapSizeLimit/1048576)}return l},update:function(){d=this.end()},jzc:function(){return b.Be}}}var a=0;L(c,"geotoolkit3d.util.Stats");c.prototype.XRb=function(b){this.Be.appendChild(b.Fhd);return b};c.prototype.OTc=function(b){for(var d=0;d<this.Be.children.length;d++)this.Be.children[d].style.display=
d===b?"block":"none";a=b};c.lFb=function(b,d,e){var f=Infinity,g=0,h=Math.round,k=h(ac()||1),l=80*k,m=48*k,n=3*k,p=2*k,q=3*k,r=15*k,t=74*k,u=30*k,w=wc(l,m,!0);w.style.cssText="width:80px;height:48px";var y=w.getContext("2d");y.font="bold "+9*k+"px Helvetica,Arial,sans-serif";y.textBaseline="top";y.fillStyle=e;y.fillRect(0,0,l,m);y.fillStyle=d;y.fillText(b,n,p);y.fillRect(q,r,t,u);y.fillStyle=e;y.globalAlpha=.9;y.fillRect(q,r,t,u);return{Fhd:w,update:function(A,x){f=Math.min(f,A);g=Math.max(g,A);y.fillStyle=
e;y.globalAlpha=1;y.fillRect(0,0,l,r);y.fillStyle=d;y.fillText(h(A)+" "+b+" ("+h(f)+"-"+h(g)+")",n,p);y.drawImage(w,q+k,r,t-k,u,q,r,t-k,u);y.fillRect(q+t-k,r,k,u);y.fillStyle=e;y.globalAlpha=.9;y.fillRect(q+t-k,r,k,h((1-A/x)*u))}}};return c}();var wA=/*#__PURE__*/function(){function c(){}c.$eb={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:"varying vec2 vUv;\nvoid main() {\n    vUv = uv;\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",fragmentShader:"uniform float opacity;\nuniform sampler2D tDiffuse;\nvarying vec2 vUv;\nvoid main() {\n    vec4 texel = texture2D( tDiffuse, vUv );\n    gl_FragColor = opacity * texel;\n}"};c.k2c={uniforms:{depthTexture:{value:null},cameraNearFar:{value:new gy(.5,.5)},
textureMatrix:{value:new Yt}},vertexShader:"varying vec4 projTexCoord;\nvarying vec4 vPosition;\nuniform mat4 textureMatrix;\nvoid main() {\n    vPosition = modelViewMatrix * vec4( position, 1.0 );\n    vec4 worldPosition = modelMatrix * vec4( position, 1.0 );\n    projTexCoord = textureMatrix * worldPosition;\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",fragmentShader:"#include <packing>\nvarying vec4 vPosition;\nvarying vec4 projTexCoord;\nuniform sampler2D depthTexture;\nuniform vec2 cameraNearFar;\nvoid main() {\n    float depth = unpackRGBAToDepth(texture2DProj( depthTexture, projTexCoord ));\n    float viewZ = - DEPTH_TO_VIEW_Z( depth, cameraNearFar.x, cameraNearFar.y );\n    float depthTest = (-vPosition.z > viewZ) ? 1.0 : 0.0;\n    gl_FragColor = vec4(0.0, depthTest, 1.0, 1.0);\n}"};
c.HZc={uniforms:{maskTexture:{value:null},texSize:{value:new gy(.5,.5)},visibleEdgeColor:{value:new Lp(1,1,1)},hiddenEdgeColor:{value:new Lp(1,1,1)},hiddenLine:{value:!1}},vertexShader:"varying vec2 vUv;\nvoid main() {\n    vUv = uv;\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",fragmentShader:"varying vec2 vUv;\nuniform sampler2D maskTexture;\nuniform vec2 texSize;\nuniform vec3 visibleEdgeColor;\nuniform vec3 hiddenEdgeColor;\nuniform bool hiddenLine;\nvoid main() {\n    vec2 invSize = 1.0 / texSize;\n    vec4 uvOffset = vec4(1.0, 0.0, 0.0, 1.0) * vec4(invSize, invSize);\n    vec4 c1 = texture2D( maskTexture, vUv + uvOffset.xy);\n    vec4 c2 = texture2D( maskTexture, vUv - uvOffset.xy);\n    vec4 c3 = texture2D( maskTexture, vUv + uvOffset.yw);\n    vec4 c4 = texture2D( maskTexture, vUv - uvOffset.yw);\n    float diff1 = (c1.r - c2.r)*0.5;\n    float diff2 = (c3.r - c4.r)*0.5;\n    float d = length( vec2(diff1, diff2) );\n    float a1 = min(c1.g, c2.g);\n    float a2 = min(c3.g, c4.g);\n    float visibilityFactor = min(a1, a2);\n    vec4 edgeColor;\n    if (1.0 - visibilityFactor > 0.001) {\n        gl_FragColor = vec4(visibleEdgeColor, 1.0) * vec4(d);\n    } else {\n        gl_FragColor = vec4(hiddenEdgeColor, hiddenLine ? 0.7 : 0.0) * vec4(d);\n    }\n}"};
c.Y2c={uniforms:{colorTexture:{value:null},texSize:{value:new gy(.5,.5)},direction:{value:new gy(.5,.5)},kernelRadius:{value:1}},vertexShader:"varying vec2 vUv;\nvoid main() {\n    vUv = uv;\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",fragmentShader:"#include <common>\nvarying vec2 vUv;\nuniform sampler2D colorTexture;\nuniform vec2 texSize;\nuniform vec2 direction;\nuniform float kernelRadius;\nfloat gaussianPdf(in float x, in float sigma) {\n    return 0.39894 * exp(-0.5 * x * x / (sigma * sigma)) / sigma;\n}\nvoid main() {\n    vec2 invSize = 1.0 / texSize;\n    float weightSum = gaussianPdf(0.0, kernelRadius);\n    vec4 diffuseSum = texture2D( colorTexture, vUv) * weightSum;\n    vec2 delta = direction * invSize * kernelRadius/float(MAX_RADIUS);\n    vec2 uvOffset = delta;\n    for( int i = 1; i <= MAX_RADIUS; i ++ ) {\n        float w = gaussianPdf(uvOffset.x, kernelRadius);\n        vec4 sample1 = texture2D( colorTexture, vUv + uvOffset);\n        vec4 sample2 = texture2D( colorTexture, vUv - uvOffset);\n        diffuseSum += ((sample1 + sample2) * w);\n        weightSum += (2.0 * w);\n        uvOffset += delta;\n    }\n    gl_FragColor = diffuseSum / weightSum;\n}"};
c.I1c={uniforms:{maskTexture:{value:null},edgeTexture1:{value:null},edgeTexture2:{value:null},patternTexture:{value:null},edgeStrength:{value:1},edgeGlow:{value:1},usePatternTexture:{value:0}},vertexShader:"varying vec2 vUv;\nvoid main() {\n    vUv = uv;\n    gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",fragmentShader:"varying vec2 vUv;\nuniform sampler2D maskTexture;\nuniform sampler2D edgeTexture1;\nuniform sampler2D edgeTexture2;\nuniform sampler2D patternTexture;\nuniform float edgeStrength;\nuniform float edgeGlow;\nuniform bool usePatternTexture;\nvoid main() {\n    vec4 edgeValue1 = texture2D(edgeTexture1, vUv);\n    vec4 edgeValue2 = texture2D(edgeTexture2, vUv);\n    vec4 maskColor = texture2D(maskTexture, vUv);\n    vec4 patternColor = texture2D(patternTexture, 6.0 * vUv);\n    float visibilityFactor = 1.0 - maskColor.g > 0.0 ? 1.0 : 0.5;\n    vec4 edgeValue = edgeValue1 + edgeValue2 * edgeGlow;\n    vec4 finalColor = edgeStrength * maskColor.r * edgeValue;\n    if(usePatternTexture)\n        finalColor += + visibilityFactor * (1.0 - maskColor.r) * (1.0 - patternColor.r);\n    gl_FragColor = finalColor;\n}"};
c.TZc={uniforms:{resolution:{value:new gy(1/1024,1/512)},tDiffuse:{value:null}},vertexShader:"varying vec2 vUv;\nvoid main() {\n   vUv = uv;\n   gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",fragmentShader:'precision highp float;\n\nuniform sampler2D tDiffuse;\n\nuniform vec2 resolution;\n\nvarying vec2 vUv;\n\n// FXAA 3.11 implementation by NVIDIA, ported to WebGL by Agost Biro (biro@archilogic.com)\n\n//----------------------------------------------------------------------------------\n// File:        es3-keplerFXAAassetsshaders/FXAA_DefaultES.frag\n// SDK Version: v3.00\n// Email:       gameworks@nvidia.com\n// Site:        http://developer.nvidia.com/\n//\n// Copyright (c) 2014-2015, NVIDIA CORPORATION. All rights reserved.\n//\n// Redistribution and use in source and binary forms, with or without\n// modification, are permitted provided that the following conditions\n// are met:\n//  * Redistributions of source code must retain the above copyright\n//    notice, this list of conditions and the following disclaimer.\n//  * Redistributions in binary form must reproduce the above copyright\n//    notice, this list of conditions and the following disclaimer in the\n//    documentation and/or other materials provided with the distribution.\n//  * Neither the name of NVIDIA CORPORATION nor the names of its\n//    contributors may be used to endorse or promote products derived\n//    from this software without specific prior written permission.\n//\n// THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS ``AS IS`` AND ANY\n// EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE\n// IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR\n// PURPOSE ARE DISCLAIMED.  IN NO EVENT SHALL THE COPYRIGHT OWNER OR\n// CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,\n// EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,\n// PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR\n// PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY\n// OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n// (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n// OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n//\n//----------------------------------------------------------------------------------\n\n#define FXAA_PC 1\n#define FXAA_GLSL_100 0\n#define FXAA_QUALITY_PRESET 39\n\n#define FXAA_GREEN_AS_LUMA 0\n\n/*--------------------------------------------------------------------------*/\n#ifndef FXAA_GLSL_120\n    #define FXAA_GLSL_120 0\n#endif\n/*--------------------------------------------------------------------------*/\n#ifndef FXAA_GLSL_130\n    #define FXAA_GLSL_130 1\n#endif\n/*==========================================================================*/\n#ifndef FXAA_GREEN_AS_LUMA\n    //\n    // For those using non-linear color,\n    // and either not able to get luma in alpha, or not wanting to,\n    // this enables FXAA to run using green as a proxy for luma.\n    // So with this enabled, no need to pack luma in alpha.\n    //\n    // This will turn off AA on anything which lacks some amount of green.\n    // Pure red and blue or combination of only R and B, will get no AA.\n    //\n    // Might want to lower the settings for both,\n    //    fxaaConsoleEdgeThresholdMin\n    //    fxaaQualityEdgeThresholdMin\n    // In order to insure AA does not get turned off on colors\n    // which contain a minor amount of green.\n    //\n    // 1 = On.\n    // 0 = Off.\n    //\n    #define FXAA_GREEN_AS_LUMA 0\n#endif\n/*--------------------------------------------------------------------------*/\n#ifndef FXAA_EARLY_EXIT\n    //\n    // Controls algorithm\'s early exit path.\n    // On PS3 turning this ON adds 2 cycles to the shader.\n    // On 360 turning this OFF adds 10ths of a millisecond to the shader.\n    // Turning this off on console will result in a more blurry image.\n    // So this defaults to on.\n    //\n    // 1 = On.\n    // 0 = Off.\n    //\n    #define FXAA_EARLY_EXIT 1\n#endif\n/*--------------------------------------------------------------------------*/\n#ifndef FXAA_DISCARD\n    //\n    // Only valid for PC OpenGL currently.\n    // Probably will not work when FXAA_GREEN_AS_LUMA = 1.\n    //\n    // 1 = Use discard on pixels which don\'t need AA.\n    //     For APIs which enable concurrent TEX+ROP from same surface.\n    // 0 = Return unchanged color on pixels which don\'t need AA.\n    //\n    #define FXAA_DISCARD 0\n#endif\n/*--------------------------------------------------------------------------*/\n#ifndef FXAA_FAST_PIXEL_OFFSET\n    //\n    // Used for GLSL 120 only.\n    //\n    // 1 = GL API supports fast pixel offsets\n    // 0 = do not use fast pixel offsets\n    //\n    #ifdef GL_EXT_gpu_shader4\n        #define FXAA_FAST_PIXEL_OFFSET 1\n    #endif\n    #ifdef GL_NV_gpu_shader5\n        #define FXAA_FAST_PIXEL_OFFSET 1\n    #endif\n    #ifdef GL_ARB_gpu_shader5\n        #define FXAA_FAST_PIXEL_OFFSET 1\n    #endif\n    #ifndef FXAA_FAST_PIXEL_OFFSET\n        #define FXAA_FAST_PIXEL_OFFSET 0\n    #endif\n#endif\n/*--------------------------------------------------------------------------*/\n#ifndef FXAA_GATHER4_ALPHA\n    //\n    // 1 = API supports gather4 on alpha channel.\n    // 0 = API does not support gather4 on alpha channel.\n    //\n    #ifdef GL_ARB_gpu_shader5\n        #define FXAA_GATHER4_ALPHA 1\n    #endif\n    #ifdef GL_NV_gpu_shader5\n        #define FXAA_GATHER4_ALPHA 1\n    #endif\n    #ifndef FXAA_GATHER4_ALPHA\n        #define FXAA_GATHER4_ALPHA 0\n    #endif\n#endif\n\n\n/*============================================================================\n                        FXAA QUALITY - TUNING KNOBS\n------------------------------------------------------------------------------\nNOTE the other tuning knobs are now in the shader function inputs!\n============================================================================*/\n#ifndef FXAA_QUALITY_PRESET\n    //\n    // Choose the quality preset.\n    // This needs to be compiled into the shader as it effects code.\n    // Best option to include multiple presets is to\n    // in each shader define the preset, then include this file.\n    //\n    // OPTIONS\n    // -----------------------------------------------------------------------\n    // 10 to 15 - default medium dither (10=fastest, 15=highest quality)\n    // 20 to 29 - less dither, more expensive (20=fastest, 29=highest quality)\n    // 39       - no dither, very expensive\n    //\n    // NOTES\n    // -----------------------------------------------------------------------\n    // 12 = slightly faster then FXAA 3.9 and higher edge quality (default)\n    // 13 = about same speed as FXAA 3.9 and better than 12\n    // 23 = closest to FXAA 3.9 visually and performance wise\n    //  _ = the lowest digit is directly related to performance\n    // _  = the highest digit is directly related to style\n    //\n    #define FXAA_QUALITY_PRESET 12\n#endif\n\n\n/*============================================================================\n\n                           FXAA QUALITY - PRESETS\n\n============================================================================*/\n\n/*============================================================================\n                     FXAA QUALITY - MEDIUM DITHER PRESETS\n============================================================================*/\n#if (FXAA_QUALITY_PRESET == 10)\n    #define FXAA_QUALITY_PS 3\n    #define FXAA_QUALITY_P0 1.5\n    #define FXAA_QUALITY_P1 3.0\n    #define FXAA_QUALITY_P2 12.0\n#endif\n/*--------------------------------------------------------------------------*/\n#if (FXAA_QUALITY_PRESET == 11)\n    #define FXAA_QUALITY_PS 4\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.5\n    #define FXAA_QUALITY_P2 3.0\n    #define FXAA_QUALITY_P3 12.0\n#endif\n/*--------------------------------------------------------------------------*/\n#if (FXAA_QUALITY_PRESET == 12)\n    #define FXAA_QUALITY_PS 5\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.5\n    #define FXAA_QUALITY_P2 2.0\n    #define FXAA_QUALITY_P3 4.0\n    #define FXAA_QUALITY_P4 12.0\n#endif\n/*--------------------------------------------------------------------------*/\n#if (FXAA_QUALITY_PRESET == 13)\n    #define FXAA_QUALITY_PS 6\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.5\n    #define FXAA_QUALITY_P2 2.0\n    #define FXAA_QUALITY_P3 2.0\n    #define FXAA_QUALITY_P4 4.0\n    #define FXAA_QUALITY_P5 12.0\n#endif\n/*--------------------------------------------------------------------------*/\n#if (FXAA_QUALITY_PRESET == 14)\n    #define FXAA_QUALITY_PS 7\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.5\n    #define FXAA_QUALITY_P2 2.0\n    #define FXAA_QUALITY_P3 2.0\n    #define FXAA_QUALITY_P4 2.0\n    #define FXAA_QUALITY_P5 4.0\n    #define FXAA_QUALITY_P6 12.0\n#endif\n/*--------------------------------------------------------------------------*/\n#if (FXAA_QUALITY_PRESET == 15)\n    #define FXAA_QUALITY_PS 8\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.5\n    #define FXAA_QUALITY_P2 2.0\n    #define FXAA_QUALITY_P3 2.0\n    #define FXAA_QUALITY_P4 2.0\n    #define FXAA_QUALITY_P5 2.0\n    #define FXAA_QUALITY_P6 4.0\n    #define FXAA_QUALITY_P7 12.0\n#endif\n\n/*============================================================================\n                     FXAA QUALITY - LOW DITHER PRESETS\n============================================================================*/\n#if (FXAA_QUALITY_PRESET == 20)\n    #define FXAA_QUALITY_PS 3\n    #define FXAA_QUALITY_P0 1.5\n    #define FXAA_QUALITY_P1 2.0\n    #define FXAA_QUALITY_P2 8.0\n#endif\n/*--------------------------------------------------------------------------*/\n#if (FXAA_QUALITY_PRESET == 21)\n    #define FXAA_QUALITY_PS 4\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.5\n    #define FXAA_QUALITY_P2 2.0\n    #define FXAA_QUALITY_P3 8.0\n#endif\n/*--------------------------------------------------------------------------*/\n#if (FXAA_QUALITY_PRESET == 22)\n    #define FXAA_QUALITY_PS 5\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.5\n    #define FXAA_QUALITY_P2 2.0\n    #define FXAA_QUALITY_P3 2.0\n    #define FXAA_QUALITY_P4 8.0\n#endif\n/*--------------------------------------------------------------------------*/\n#if (FXAA_QUALITY_PRESET == 23)\n    #define FXAA_QUALITY_PS 6\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.5\n    #define FXAA_QUALITY_P2 2.0\n    #define FXAA_QUALITY_P3 2.0\n    #define FXAA_QUALITY_P4 2.0\n    #define FXAA_QUALITY_P5 8.0\n#endif\n/*--------------------------------------------------------------------------*/\n#if (FXAA_QUALITY_PRESET == 24)\n    #define FXAA_QUALITY_PS 7\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.5\n    #define FXAA_QUALITY_P2 2.0\n    #define FXAA_QUALITY_P3 2.0\n    #define FXAA_QUALITY_P4 2.0\n    #define FXAA_QUALITY_P5 3.0\n    #define FXAA_QUALITY_P6 8.0\n#endif\n/*--------------------------------------------------------------------------*/\n#if (FXAA_QUALITY_PRESET == 25)\n    #define FXAA_QUALITY_PS 8\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.5\n    #define FXAA_QUALITY_P2 2.0\n    #define FXAA_QUALITY_P3 2.0\n    #define FXAA_QUALITY_P4 2.0\n    #define FXAA_QUALITY_P5 2.0\n    #define FXAA_QUALITY_P6 4.0\n    #define FXAA_QUALITY_P7 8.0\n#endif\n/*--------------------------------------------------------------------------*/\n#if (FXAA_QUALITY_PRESET == 26)\n    #define FXAA_QUALITY_PS 9\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.5\n    #define FXAA_QUALITY_P2 2.0\n    #define FXAA_QUALITY_P3 2.0\n    #define FXAA_QUALITY_P4 2.0\n    #define FXAA_QUALITY_P5 2.0\n    #define FXAA_QUALITY_P6 2.0\n    #define FXAA_QUALITY_P7 4.0\n    #define FXAA_QUALITY_P8 8.0\n#endif\n/*--------------------------------------------------------------------------*/\n#if (FXAA_QUALITY_PRESET == 27)\n    #define FXAA_QUALITY_PS 10\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.5\n    #define FXAA_QUALITY_P2 2.0\n    #define FXAA_QUALITY_P3 2.0\n    #define FXAA_QUALITY_P4 2.0\n    #define FXAA_QUALITY_P5 2.0\n    #define FXAA_QUALITY_P6 2.0\n    #define FXAA_QUALITY_P7 2.0\n    #define FXAA_QUALITY_P8 4.0\n    #define FXAA_QUALITY_P9 8.0\n#endif\n/*--------------------------------------------------------------------------*/\n#if (FXAA_QUALITY_PRESET == 28)\n    #define FXAA_QUALITY_PS 11\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.5\n    #define FXAA_QUALITY_P2 2.0\n    #define FXAA_QUALITY_P3 2.0\n    #define FXAA_QUALITY_P4 2.0\n    #define FXAA_QUALITY_P5 2.0\n    #define FXAA_QUALITY_P6 2.0\n    #define FXAA_QUALITY_P7 2.0\n    #define FXAA_QUALITY_P8 2.0\n    #define FXAA_QUALITY_P9 4.0\n    #define FXAA_QUALITY_P10 8.0\n#endif\n/*--------------------------------------------------------------------------*/\n#if (FXAA_QUALITY_PRESET == 29)\n    #define FXAA_QUALITY_PS 12\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.5\n    #define FXAA_QUALITY_P2 2.0\n    #define FXAA_QUALITY_P3 2.0\n    #define FXAA_QUALITY_P4 2.0\n    #define FXAA_QUALITY_P5 2.0\n    #define FXAA_QUALITY_P6 2.0\n    #define FXAA_QUALITY_P7 2.0\n    #define FXAA_QUALITY_P8 2.0\n    #define FXAA_QUALITY_P9 2.0\n    #define FXAA_QUALITY_P10 4.0\n    #define FXAA_QUALITY_P11 8.0\n#endif\n\n/*============================================================================\n                     FXAA QUALITY - EXTREME QUALITY\n============================================================================*/\n#if (FXAA_QUALITY_PRESET == 39)\n    #define FXAA_QUALITY_PS 12\n    #define FXAA_QUALITY_P0 1.0\n    #define FXAA_QUALITY_P1 1.0\n    #define FXAA_QUALITY_P2 1.0\n    #define FXAA_QUALITY_P3 1.0\n    #define FXAA_QUALITY_P4 1.0\n    #define FXAA_QUALITY_P5 1.5\n    #define FXAA_QUALITY_P6 2.0\n    #define FXAA_QUALITY_P7 2.0\n    #define FXAA_QUALITY_P8 2.0\n    #define FXAA_QUALITY_P9 2.0\n    #define FXAA_QUALITY_P10 4.0\n    #define FXAA_QUALITY_P11 8.0\n#endif\n\n\n\n/*============================================================================\n\n                                API PORTING\n\n============================================================================*/\n#if (FXAA_GLSL_100 == 1) || (FXAA_GLSL_120 == 1) || (FXAA_GLSL_130 == 1)\n    #define FxaaBool bool\n    #define FxaaDiscard discard\n    #define FxaaFloat float\n    #define FxaaFloat2 vec2\n    #define FxaaFloat3 vec3\n    #define FxaaFloat4 vec4\n    #define FxaaHalf float\n    #define FxaaHalf2 vec2\n    #define FxaaHalf3 vec3\n    #define FxaaHalf4 vec4\n    #define FxaaInt2 ivec2\n    #define FxaaSat(x) clamp(x, 0.0, 1.0)\n    #define FxaaTex sampler2D\n#else\n    #define FxaaBool bool\n    #define FxaaDiscard clip(-1)\n    #define FxaaFloat float\n    #define FxaaFloat2 float2\n    #define FxaaFloat3 float3\n    #define FxaaFloat4 float4\n    #define FxaaHalf half\n    #define FxaaHalf2 half2\n    #define FxaaHalf3 half3\n    #define FxaaHalf4 half4\n    #define FxaaSat(x) saturate(x)\n#endif\n/*--------------------------------------------------------------------------*/\n#if (FXAA_GLSL_100 == 1)\n  #define FxaaTexTop(t, p) texture2D(t, p, 0.0)\n  #define FxaaTexOff(t, p, o, r) texture2D(t, p + (o * r), 0.0)\n#endif\n/*--------------------------------------------------------------------------*/\n#if (FXAA_GLSL_120 == 1)\n    // Requires,\n    //  #version 120\n    // And at least,\n    //  #extension GL_EXT_gpu_shader4 : enable\n    //  (or set FXAA_FAST_PIXEL_OFFSET 1 to work like DX9)\n    #define FxaaTexTop(t, p) texture2DLod(t, p, 0.0)\n    #if (FXAA_FAST_PIXEL_OFFSET == 1)\n        #define FxaaTexOff(t, p, o, r) texture2DLodOffset(t, p, 0.0, o)\n    #else\n        #define FxaaTexOff(t, p, o, r) texture2DLod(t, p + (o * r), 0.0)\n    #endif\n    #if (FXAA_GATHER4_ALPHA == 1)\n        // use #extension GL_ARB_gpu_shader5 : enable\n        #define FxaaTexAlpha4(t, p) textureGather(t, p, 3)\n        #define FxaaTexOffAlpha4(t, p, o) textureGatherOffset(t, p, o, 3)\n        #define FxaaTexGreen4(t, p) textureGather(t, p, 1)\n        #define FxaaTexOffGreen4(t, p, o) textureGatherOffset(t, p, o, 1)\n    #endif\n#endif\n/*--------------------------------------------------------------------------*/\n#if (FXAA_GLSL_130 == 1)\n    // Requires "#version 130\' or better\n    #define FxaaTexTop(t, p) textureLod(t, p, 0.0)\n    #define FxaaTexOff(t, p, o, r) textureLodOffset(t, p, 0.0, o)\n    #if (FXAA_GATHER4_ALPHA == 1)\n        // use #extension GL_ARB_gpu_shader5 : enable\n        #define FxaaTexAlpha4(t, p) textureGather(t, p, 3)\n        #define FxaaTexOffAlpha4(t, p, o) textureGatherOffset(t, p, o, 3)\n        #define FxaaTexGreen4(t, p) textureGather(t, p, 1)\n        #define FxaaTexOffGreen4(t, p, o) textureGatherOffset(t, p, o, 1)\n    #endif\n#endif\n/*============================================================================\n                   GREEN AS LUMA OPTION SUPPORT FUNCTION\n============================================================================*/\n#if (FXAA_GREEN_AS_LUMA == 0)\n    FxaaFloat FxaaLuma(FxaaFloat4 rgba) { return rgba.w; }\n#else\n    FxaaFloat FxaaLuma(FxaaFloat4 rgba) { return rgba.y; }\n#endif\n\n/*============================================================================\n\n                             FXAA3 QUALITY - PC\n\n============================================================================*/\n#if (FXAA_PC == 1)\n/*--------------------------------------------------------------------------*/\nFxaaFloat4 FxaaPixelShader(\n    //\n    // Use noperspective interpolation here (turn off perspective interpolation).\n    // {xy} = center of pixel\n    FxaaFloat2 pos,\n    //\n    // Used only for FXAA Console, and not used on the 360 version.\n    // Use noperspective interpolation here (turn off perspective interpolation).\n    // {xy_} = upper left of pixel\n    // {_zw} = lower right of pixel\n    FxaaFloat4 fxaaConsolePosPos,\n    //\n    // Input color texture.\n    // {rgb_} = color in linear or perceptual color space\n    // if (FXAA_GREEN_AS_LUMA == 0)\n    //     {__a} = luma in perceptual color space (not linear)\n    FxaaTex tex,\n    //\n    // Only used on the optimized 360 version of FXAA Console.\n    // For everything but 360, just use the same input here as for "tex".\n    // For 360, same texture, just alias with a 2nd sampler.\n    // This sampler needs to have an exponent bias of -1.\n    FxaaTex fxaaConsole360TexExpBiasNegOne,\n    //\n    // Only used on the optimized 360 version of FXAA Console.\n    // For everything but 360, just use the same input here as for "tex".\n    // For 360, same texture, just alias with a 3nd sampler.\n    // This sampler needs to have an exponent bias of -2.\n    FxaaTex fxaaConsole360TexExpBiasNegTwo,\n    //\n    // Only used on FXAA Quality.\n    // This must be from a constant/uniform.\n    // {x_} = 1.0/screenWidthInPixels\n    // {_y} = 1.0/screenHeightInPixels\n    FxaaFloat2 fxaaQualityRcpFrame,\n    //\n    // Only used on FXAA Console.\n    // This must be from a constant/uniform.\n    // This effects sub-pixel AA quality and inversely sharpness.\n    //   Where N ranges between,\n    //     N = 0.50 (default)\n    //     N = 0.33 (sharper)\n    // {x__} = -N/screenWidthInPixels\n    // {_y_} = -N/screenHeightInPixels\n    // {_z_} =  N/screenWidthInPixels\n    // {__w} =  N/screenHeightInPixels\n    FxaaFloat4 fxaaConsoleRcpFrameOpt,\n    //\n    // Only used on FXAA Console.\n    // Not used on 360, but used on PS3 and PC.\n    // This must be from a constant/uniform.\n    // {x__} = -2.0/screenWidthInPixels\n    // {_y_} = -2.0/screenHeightInPixels\n    // {_z_} =  2.0/screenWidthInPixels\n    // {__w} =  2.0/screenHeightInPixels\n    FxaaFloat4 fxaaConsoleRcpFrameOpt2,\n    //\n    // Only used on FXAA Console.\n    // Only used on 360 in place of fxaaConsoleRcpFrameOpt2.\n    // This must be from a constant/uniform.\n    // {x__} =  8.0/screenWidthInPixels\n    // {_y_} =  8.0/screenHeightInPixels\n    // {_z_} = -4.0/screenWidthInPixels\n    // {__w} = -4.0/screenHeightInPixels\n    FxaaFloat4 fxaaConsole360RcpFrameOpt2,\n    //\n    // Only used on FXAA Quality.\n    // This used to be the FXAA_QUALITY_SUBPIX define.\n    // It is here now to allow easier tuning.\n    // Choose the amount of sub-pixel aliasing removal.\n    // This can effect sharpness.\n    //   1.00 - upper limit (softer)\n    //   0.75 - default amount of filtering\n    //   0.50 - lower limit (sharper, less sub-pixel aliasing removal)\n    //   0.25 - almost off\n    //   0.00 - completely off\n    FxaaFloat fxaaQualitySubpix,\n    //\n    // Only used on FXAA Quality.\n    // This used to be the FXAA_QUALITY_EDGE_THRESHOLD define.\n    // It is here now to allow easier tuning.\n    // The minimum amount of local contrast required to apply algorithm.\n    //   0.333 - too little (faster)\n    //   0.250 - low quality\n    //   0.166 - default\n    //   0.125 - high quality\n    //   0.063 - overkill (slower)\n    FxaaFloat fxaaQualityEdgeThreshold,\n    //\n    // Only used on FXAA Quality.\n    // This used to be the FXAA_QUALITY_EDGE_THRESHOLD_MIN define.\n    // It is here now to allow easier tuning.\n    // Trims the algorithm from processing darks.\n    //   0.0833 - upper limit (default, the start of visible unfiltered edges)\n    //   0.0625 - high quality (faster)\n    //   0.0312 - visible limit (slower)\n    // Special notes when using FXAA_GREEN_AS_LUMA,\n    //   Likely want to set this to zero.\n    //   As colors that are mostly not-green\n    //   will appear very dark in the green channel!\n    //   Tune by looking at mostly non-green content,\n    //   then start at zero and increase until aliasing is a problem.\n    FxaaFloat fxaaQualityEdgeThresholdMin,\n    //\n    // Only used on FXAA Console.\n    // This used to be the FXAA_CONSOLE_EDGE_SHARPNESS define.\n    // It is here now to allow easier tuning.\n    // This does not effect PS3, as this needs to be compiled in.\n    //   Use FXAA_CONSOLE_PS3_EDGE_SHARPNESS for PS3.\n    //   Due to the PS3 being ALU bound,\n    //   there are only three safe values here: 2 and 4 and 8.\n    //   These options use the shaders ability to a free *|/ by 2|4|8.\n    // For all other platforms can be a non-power of two.\n    //   8.0 is sharper (default!!!)\n    //   4.0 is softer\n    //   2.0 is really soft (good only for vector graphics inputs)\n    FxaaFloat fxaaConsoleEdgeSharpness,\n    //\n    // Only used on FXAA Console.\n    // This used to be the FXAA_CONSOLE_EDGE_THRESHOLD define.\n    // It is here now to allow easier tuning.\n    // This does not effect PS3, as this needs to be compiled in.\n    //   Use FXAA_CONSOLE_PS3_EDGE_THRESHOLD for PS3.\n    //   Due to the PS3 being ALU bound,\n    //   there are only two safe values here: 1/4 and 1/8.\n    //   These options use the shaders ability to a free *|/ by 2|4|8.\n    // The console setting has a different mapping than the quality setting.\n    // Other platforms can use other values.\n    //   0.125 leaves less aliasing, but is softer (default!!!)\n    //   0.25 leaves more aliasing, and is sharper\n    FxaaFloat fxaaConsoleEdgeThreshold,\n    //\n    // Only used on FXAA Console.\n    // This used to be the FXAA_CONSOLE_EDGE_THRESHOLD_MIN define.\n    // It is here now to allow easier tuning.\n    // Trims the algorithm from processing darks.\n    // The console setting has a different mapping than the quality setting.\n    // This only applies when FXAA_EARLY_EXIT is 1.\n    // This does not apply to PS3,\n    // PS3 was simplified to avoid more shader instructions.\n    //   0.06 - faster but more aliasing in darks\n    //   0.05 - default\n    //   0.04 - slower and less aliasing in darks\n    // Special notes when using FXAA_GREEN_AS_LUMA,\n    //   Likely want to set this to zero.\n    //   As colors that are mostly not-green\n    //   will appear very dark in the green channel!\n    //   Tune by looking at mostly non-green content,\n    //   then start at zero and increase until aliasing is a problem.\n    FxaaFloat fxaaConsoleEdgeThresholdMin,\n    //\n    // Extra constants for 360 FXAA Console only.\n    // Use zeros or anything else for other platforms.\n    // These must be in physical constant registers and NOT immediates.\n    // Immediates will result in compiler un-optimizing.\n    // {xyzw} = float4(1.0, -1.0, 0.25, -0.25)\n    FxaaFloat4 fxaaConsole360ConstDir\n) {\n/*--------------------------------------------------------------------------*/\n    FxaaFloat2 posM;\n    posM.x = pos.x;\n    posM.y = pos.y;\n    #if (FXAA_GATHER4_ALPHA == 1)\n        #if (FXAA_DISCARD == 0)\n            FxaaFloat4 rgbyM = FxaaTexTop(tex, posM);\n            #if (FXAA_GREEN_AS_LUMA == 0)\n                #define lumaM rgbyM.w\n            #else\n                #define lumaM rgbyM.y\n            #endif\n        #endif\n        #if (FXAA_GREEN_AS_LUMA == 0)\n            FxaaFloat4 luma4A = FxaaTexAlpha4(tex, posM);\n            FxaaFloat4 luma4B = FxaaTexOffAlpha4(tex, posM, FxaaInt2(-1, -1));\n        #else\n            FxaaFloat4 luma4A = FxaaTexGreen4(tex, posM);\n            FxaaFloat4 luma4B = FxaaTexOffGreen4(tex, posM, FxaaInt2(-1, -1));\n        #endif\n        #if (FXAA_DISCARD == 1)\n            #define lumaM luma4A.w\n        #endif\n        #define lumaE luma4A.z\n        #define lumaS luma4A.x\n        #define lumaSE luma4A.y\n        #define lumaNW luma4B.w\n        #define lumaN luma4B.z\n        #define lumaW luma4B.x\n    #else\n        FxaaFloat4 rgbyM = FxaaTexTop(tex, posM);\n        #if (FXAA_GREEN_AS_LUMA == 0)\n            #define lumaM rgbyM.w\n        #else\n            #define lumaM rgbyM.y\n        #endif\n        #if (FXAA_GLSL_100 == 1)\n          FxaaFloat lumaS = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 0.0, 1.0), fxaaQualityRcpFrame.xy));\n          FxaaFloat lumaE = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 1.0, 0.0), fxaaQualityRcpFrame.xy));\n          FxaaFloat lumaN = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 0.0,-1.0), fxaaQualityRcpFrame.xy));\n          FxaaFloat lumaW = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(-1.0, 0.0), fxaaQualityRcpFrame.xy));\n        #else\n          FxaaFloat lumaS = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 0, 1), fxaaQualityRcpFrame.xy));\n          FxaaFloat lumaE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 1, 0), fxaaQualityRcpFrame.xy));\n          FxaaFloat lumaN = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 0,-1), fxaaQualityRcpFrame.xy));\n          FxaaFloat lumaW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 0), fxaaQualityRcpFrame.xy));\n        #endif\n    #endif\n/*--------------------------------------------------------------------------*/\n    FxaaFloat maxSM = max(lumaS, lumaM);\n    FxaaFloat minSM = min(lumaS, lumaM);\n    FxaaFloat maxESM = max(lumaE, maxSM);\n    FxaaFloat minESM = min(lumaE, minSM);\n    FxaaFloat maxWN = max(lumaN, lumaW);\n    FxaaFloat minWN = min(lumaN, lumaW);\n    FxaaFloat rangeMax = max(maxWN, maxESM);\n    FxaaFloat rangeMin = min(minWN, minESM);\n    FxaaFloat rangeMaxScaled = rangeMax * fxaaQualityEdgeThreshold;\n    FxaaFloat range = rangeMax - rangeMin;\n    FxaaFloat rangeMaxClamped = max(fxaaQualityEdgeThresholdMin, rangeMaxScaled);\n    FxaaBool earlyExit = range < rangeMaxClamped;\n/*--------------------------------------------------------------------------*/\n    if(earlyExit)\n        #if (FXAA_DISCARD == 1)\n            FxaaDiscard;\n        #else\n            return rgbyM;\n        #endif\n/*--------------------------------------------------------------------------*/\n    #if (FXAA_GATHER4_ALPHA == 0)\n        #if (FXAA_GLSL_100 == 1)\n          FxaaFloat lumaNW = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(-1.0,-1.0), fxaaQualityRcpFrame.xy));\n          FxaaFloat lumaSE = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 1.0, 1.0), fxaaQualityRcpFrame.xy));\n          FxaaFloat lumaNE = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2( 1.0,-1.0), fxaaQualityRcpFrame.xy));\n          FxaaFloat lumaSW = FxaaLuma(FxaaTexOff(tex, posM, FxaaFloat2(-1.0, 1.0), fxaaQualityRcpFrame.xy));\n        #else\n          FxaaFloat lumaNW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1,-1), fxaaQualityRcpFrame.xy));\n          FxaaFloat lumaSE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 1, 1), fxaaQualityRcpFrame.xy));\n          FxaaFloat lumaNE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2( 1,-1), fxaaQualityRcpFrame.xy));\n          FxaaFloat lumaSW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 1), fxaaQualityRcpFrame.xy));\n        #endif\n    #else\n        FxaaFloat lumaNE = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(1, -1), fxaaQualityRcpFrame.xy));\n        FxaaFloat lumaSW = FxaaLuma(FxaaTexOff(tex, posM, FxaaInt2(-1, 1), fxaaQualityRcpFrame.xy));\n    #endif\n/*--------------------------------------------------------------------------*/\n    FxaaFloat lumaNS = lumaN + lumaS;\n    FxaaFloat lumaWE = lumaW + lumaE;\n    FxaaFloat subpixRcpRange = 1.0/range;\n    FxaaFloat subpixNSWE = lumaNS + lumaWE;\n    FxaaFloat edgeHorz1 = (-2.0 * lumaM) + lumaNS;\n    FxaaFloat edgeVert1 = (-2.0 * lumaM) + lumaWE;\n/*--------------------------------------------------------------------------*/\n    FxaaFloat lumaNESE = lumaNE + lumaSE;\n    FxaaFloat lumaNWNE = lumaNW + lumaNE;\n    FxaaFloat edgeHorz2 = (-2.0 * lumaE) + lumaNESE;\n    FxaaFloat edgeVert2 = (-2.0 * lumaN) + lumaNWNE;\n/*--------------------------------------------------------------------------*/\n    FxaaFloat lumaNWSW = lumaNW + lumaSW;\n    FxaaFloat lumaSWSE = lumaSW + lumaSE;\n    FxaaFloat edgeHorz4 = (abs(edgeHorz1) * 2.0) + abs(edgeHorz2);\n    FxaaFloat edgeVert4 = (abs(edgeVert1) * 2.0) + abs(edgeVert2);\n    FxaaFloat edgeHorz3 = (-2.0 * lumaW) + lumaNWSW;\n    FxaaFloat edgeVert3 = (-2.0 * lumaS) + lumaSWSE;\n    FxaaFloat edgeHorz = abs(edgeHorz3) + edgeHorz4;\n    FxaaFloat edgeVert = abs(edgeVert3) + edgeVert4;\n/*--------------------------------------------------------------------------*/\n    FxaaFloat subpixNWSWNESE = lumaNWSW + lumaNESE;\n    FxaaFloat lengthSign = fxaaQualityRcpFrame.x;\n    FxaaBool horzSpan = edgeHorz >= edgeVert;\n    FxaaFloat subpixA = subpixNSWE * 2.0 + subpixNWSWNESE;\n/*--------------------------------------------------------------------------*/\n    if(!horzSpan) lumaN = lumaW;\n    if(!horzSpan) lumaS = lumaE;\n    if(horzSpan) lengthSign = fxaaQualityRcpFrame.y;\n    FxaaFloat subpixB = (subpixA * (1.0/12.0)) - lumaM;\n/*--------------------------------------------------------------------------*/\n    FxaaFloat gradientN = lumaN - lumaM;\n    FxaaFloat gradientS = lumaS - lumaM;\n    FxaaFloat lumaNN = lumaN + lumaM;\n    FxaaFloat lumaSS = lumaS + lumaM;\n    FxaaBool pairN = abs(gradientN) >= abs(gradientS);\n    FxaaFloat gradient = max(abs(gradientN), abs(gradientS));\n    if(pairN) lengthSign = -lengthSign;\n    FxaaFloat subpixC = FxaaSat(abs(subpixB) * subpixRcpRange);\n/*--------------------------------------------------------------------------*/\n    FxaaFloat2 posB;\n    posB.x = posM.x;\n    posB.y = posM.y;\n    FxaaFloat2 offNP;\n    offNP.x = (!horzSpan) ? 0.0 : fxaaQualityRcpFrame.x;\n    offNP.y = ( horzSpan) ? 0.0 : fxaaQualityRcpFrame.y;\n    if(!horzSpan) posB.x += lengthSign * 0.5;\n    if( horzSpan) posB.y += lengthSign * 0.5;\n/*--------------------------------------------------------------------------*/\n    FxaaFloat2 posN;\n    posN.x = posB.x - offNP.x * FXAA_QUALITY_P0;\n    posN.y = posB.y - offNP.y * FXAA_QUALITY_P0;\n    FxaaFloat2 posP;\n    posP.x = posB.x + offNP.x * FXAA_QUALITY_P0;\n    posP.y = posB.y + offNP.y * FXAA_QUALITY_P0;\n    FxaaFloat subpixD = ((-2.0)*subpixC) + 3.0;\n    FxaaFloat lumaEndN = FxaaLuma(FxaaTexTop(tex, posN));\n    FxaaFloat subpixE = subpixC * subpixC;\n    FxaaFloat lumaEndP = FxaaLuma(FxaaTexTop(tex, posP));\n/*--------------------------------------------------------------------------*/\n    if(!pairN) lumaNN = lumaSS;\n    FxaaFloat gradientScaled = gradient * 1.0/4.0;\n    FxaaFloat lumaMM = lumaM - lumaNN * 0.5;\n    FxaaFloat subpixF = subpixD * subpixE;\n    FxaaBool lumaMLTZero = lumaMM < 0.0;\n/*--------------------------------------------------------------------------*/\n    lumaEndN -= lumaNN * 0.5;\n    lumaEndP -= lumaNN * 0.5;\n    FxaaBool doneN = abs(lumaEndN) >= gradientScaled;\n    FxaaBool doneP = abs(lumaEndP) >= gradientScaled;\n    if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P1;\n    if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P1;\n    FxaaBool doneNP = (!doneN) || (!doneP);\n    if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P1;\n    if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P1;\n/*--------------------------------------------------------------------------*/\n    if(doneNP) {\n        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n        doneN = abs(lumaEndN) >= gradientScaled;\n        doneP = abs(lumaEndP) >= gradientScaled;\n        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P2;\n        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P2;\n        doneNP = (!doneN) || (!doneP);\n        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P2;\n        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P2;\n/*--------------------------------------------------------------------------*/\n        #if (FXAA_QUALITY_PS > 3)\n        if(doneNP) {\n            if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n            if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n            if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n            if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n            doneN = abs(lumaEndN) >= gradientScaled;\n            doneP = abs(lumaEndP) >= gradientScaled;\n            if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P3;\n            if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P3;\n            doneNP = (!doneN) || (!doneP);\n            if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P3;\n            if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P3;\n/*--------------------------------------------------------------------------*/\n            #if (FXAA_QUALITY_PS > 4)\n            if(doneNP) {\n                if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n                if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n                if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n                if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n                doneN = abs(lumaEndN) >= gradientScaled;\n                doneP = abs(lumaEndP) >= gradientScaled;\n                if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P4;\n                if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P4;\n                doneNP = (!doneN) || (!doneP);\n                if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P4;\n                if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P4;\n/*--------------------------------------------------------------------------*/\n                #if (FXAA_QUALITY_PS > 5)\n                if(doneNP) {\n                    if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n                    if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n                    if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n                    if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n                    doneN = abs(lumaEndN) >= gradientScaled;\n                    doneP = abs(lumaEndP) >= gradientScaled;\n                    if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P5;\n                    if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P5;\n                    doneNP = (!doneN) || (!doneP);\n                    if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P5;\n                    if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P5;\n/*--------------------------------------------------------------------------*/\n                    #if (FXAA_QUALITY_PS > 6)\n                    if(doneNP) {\n                        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n                        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n                        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n                        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n                        doneN = abs(lumaEndN) >= gradientScaled;\n                        doneP = abs(lumaEndP) >= gradientScaled;\n                        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P6;\n                        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P6;\n                        doneNP = (!doneN) || (!doneP);\n                        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P6;\n                        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P6;\n/*--------------------------------------------------------------------------*/\n                        #if (FXAA_QUALITY_PS > 7)\n                        if(doneNP) {\n                            if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n                            if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n                            if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n                            if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n                            doneN = abs(lumaEndN) >= gradientScaled;\n                            doneP = abs(lumaEndP) >= gradientScaled;\n                            if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P7;\n                            if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P7;\n                            doneNP = (!doneN) || (!doneP);\n                            if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P7;\n                            if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P7;\n/*--------------------------------------------------------------------------*/\n    #if (FXAA_QUALITY_PS > 8)\n    if(doneNP) {\n        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n        doneN = abs(lumaEndN) >= gradientScaled;\n        doneP = abs(lumaEndP) >= gradientScaled;\n        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P8;\n        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P8;\n        doneNP = (!doneN) || (!doneP);\n        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P8;\n        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P8;\n/*--------------------------------------------------------------------------*/\n        #if (FXAA_QUALITY_PS > 9)\n        if(doneNP) {\n            if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n            if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n            if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n            if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n            doneN = abs(lumaEndN) >= gradientScaled;\n            doneP = abs(lumaEndP) >= gradientScaled;\n            if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P9;\n            if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P9;\n            doneNP = (!doneN) || (!doneP);\n            if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P9;\n            if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P9;\n/*--------------------------------------------------------------------------*/\n            #if (FXAA_QUALITY_PS > 10)\n            if(doneNP) {\n                if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n                if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n                if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n                if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n                doneN = abs(lumaEndN) >= gradientScaled;\n                doneP = abs(lumaEndP) >= gradientScaled;\n                if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P10;\n                if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P10;\n                doneNP = (!doneN) || (!doneP);\n                if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P10;\n                if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P10;\n/*--------------------------------------------------------------------------*/\n                #if (FXAA_QUALITY_PS > 11)\n                if(doneNP) {\n                    if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n                    if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n                    if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n                    if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n                    doneN = abs(lumaEndN) >= gradientScaled;\n                    doneP = abs(lumaEndP) >= gradientScaled;\n                    if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P11;\n                    if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P11;\n                    doneNP = (!doneN) || (!doneP);\n                    if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P11;\n                    if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P11;\n/*--------------------------------------------------------------------------*/\n                    #if (FXAA_QUALITY_PS > 12)\n                    if(doneNP) {\n                        if(!doneN) lumaEndN = FxaaLuma(FxaaTexTop(tex, posN.xy));\n                        if(!doneP) lumaEndP = FxaaLuma(FxaaTexTop(tex, posP.xy));\n                        if(!doneN) lumaEndN = lumaEndN - lumaNN * 0.5;\n                        if(!doneP) lumaEndP = lumaEndP - lumaNN * 0.5;\n                        doneN = abs(lumaEndN) >= gradientScaled;\n                        doneP = abs(lumaEndP) >= gradientScaled;\n                        if(!doneN) posN.x -= offNP.x * FXAA_QUALITY_P12;\n                        if(!doneN) posN.y -= offNP.y * FXAA_QUALITY_P12;\n                        doneNP = (!doneN) || (!doneP);\n                        if(!doneP) posP.x += offNP.x * FXAA_QUALITY_P12;\n                        if(!doneP) posP.y += offNP.y * FXAA_QUALITY_P12;\n/*--------------------------------------------------------------------------*/\n                    }\n                    #endif\n/*--------------------------------------------------------------------------*/\n                }\n                #endif\n/*--------------------------------------------------------------------------*/\n            }\n            #endif\n/*--------------------------------------------------------------------------*/\n        }\n        #endif\n/*--------------------------------------------------------------------------*/\n    }\n    #endif\n/*--------------------------------------------------------------------------*/\n                        }\n                        #endif\n/*--------------------------------------------------------------------------*/\n                    }\n                    #endif\n/*--------------------------------------------------------------------------*/\n                }\n                #endif\n/*--------------------------------------------------------------------------*/\n            }\n            #endif\n/*--------------------------------------------------------------------------*/\n        }\n        #endif\n/*--------------------------------------------------------------------------*/\n    }\n/*--------------------------------------------------------------------------*/\n    FxaaFloat dstN = posM.x - posN.x;\n    FxaaFloat dstP = posP.x - posM.x;\n    if(!horzSpan) dstN = posM.y - posN.y;\n    if(!horzSpan) dstP = posP.y - posM.y;\n/*--------------------------------------------------------------------------*/\n    FxaaBool goodSpanN = (lumaEndN < 0.0) != lumaMLTZero;\n    FxaaFloat spanLength = (dstP + dstN);\n    FxaaBool goodSpanP = (lumaEndP < 0.0) != lumaMLTZero;\n    FxaaFloat spanLengthRcp = 1.0/spanLength;\n/*--------------------------------------------------------------------------*/\n    FxaaBool directionN = dstN < dstP;\n    FxaaFloat dst = min(dstN, dstP);\n    FxaaBool goodSpan = directionN ? goodSpanN : goodSpanP;\n    FxaaFloat subpixG = subpixF * subpixF;\n    FxaaFloat pixelOffset = (dst * (-spanLengthRcp)) + 0.5;\n    FxaaFloat subpixH = subpixG * fxaaQualitySubpix;\n/*--------------------------------------------------------------------------*/\n    FxaaFloat pixelOffsetGood = goodSpan ? pixelOffset : 0.0;\n    FxaaFloat pixelOffsetSubpix = max(pixelOffsetGood, subpixH);\n    if(!horzSpan) posM.x += pixelOffsetSubpix * lengthSign;\n    if( horzSpan) posM.y += pixelOffsetSubpix * lengthSign;\n    #if (FXAA_DISCARD == 1)\n        return FxaaTexTop(tex, posM);\n    #else\n        return FxaaFloat4(FxaaTexTop(tex, posM).xyz, lumaM);\n    #endif\n}\n/*==========================================================================*/\n#endif\n\nvoid main() {\n  gl_FragColor = FxaaPixelShader(\n    vUv,\n    vec4(0.0),\n    tDiffuse,\n    tDiffuse,\n    tDiffuse,\n    resolution,\n    vec4(0.0),\n    vec4(0.0),\n    vec4(0.0),\n    0.75,\n    0.166,\n    0.0833,\n    0.0,\n    0.0,\n    0.0,\n    vec4(0.0)\n  );\n\n  // TODO avoid querying texture twice for same texel\n  gl_FragColor.a = texture2D(tDiffuse, vUv).a;\n}'};
return c}();var xA=/*#__PURE__*/function(){function c(){this.type="AbstractPass";this.axb=this.enabled=!0;this.Eoa=this.clear=!1}var a=1/256;L(c,"geotoolkit3d.postprocessing.AbstractPass");c.prototype.setSize=Fb;c.prototype.dispose=Fb;c.prototype.render=Fb;c.prototype.m$b=function(b){b.OVb&&b.gsb&&rb("WARNING: Materials cannot have the property [forceTransparent] and [forceOpaque] both true at the same time ("+b.type+")");if(b.OVb)b.opacity=1,b.transparent=!1;else if(b.gsb)b.transparent=!0;else{var d=b.Hoe||b.defines&&b.defines.ALPHA_TO_COVERAGE,
e=b.opacity<1-a,f=null!=b.alphaMap||null!=b.map&&(b.map.format===yv||b.map.format===zv||b.map.format===Tp);b.transparent=e||d||f}};c.BYa=function(){function b(f){this.Ad=new $t(e,f)}var d=new Qu(-1,1,1,-1,0,1),e=new cv(2,2);Object.defineProperty(b.prototype,"material",{get:function(){return this.Ad.material},set:function(f){this.Ad.material=f}});b.prototype.dispose=function(){this.Ad.geometry.dispose()};b.prototype.render=function(f){f.render(this.Ad,d)};return b}();return c}();var yA=/*#__PURE__*/function(){function c(a){xA.call(this);this.hb=G(a,{textureid:"tDiffuse"},!0);this.type="ShaderPass";a=this.hb.shader;a instanceof Lw?(this.uniforms=a.uniforms,this.material=a):null!=a&&(this.uniforms=Yx.clone(a.uniforms),this.material=new Lw({defines:Object.assign({},a.defines),uniforms:this.uniforms,vertexShader:a.vertexShader,fragmentShader:a.fragmentShader}));this.lz=new xA.BYa(this.material);this.setOptions(this.hb)}L(c,"geotoolkit3d.postprocessing.ShaderPass");D(c,xA);c.prototype.setOptions=
function(a){this.hb=G(a,this.hb);null!=a.enabled&&(this.enabled=a.enabled);return this};c.prototype.ta=function(){return this.hb};c.prototype.setSize=function(){return this};c.prototype.dispose=function(){null!=this.material&&this.material.dispose()};c.prototype.render=function(a,b,d){this.uniforms[this.hb.textureid]&&(this.uniforms[this.hb.textureid].value=d.texture);this.lz.material=this.material;this.Eoa?a.setRenderTarget(null):(a.setRenderTarget(b),this.clear&&a.clear(a.autoClearColor,a.autoClearDepth,
a.autoClearStencil));this.lz.render(a)};return c}();var zA=/*#__PURE__*/function(){function c(b,d){this.gF=b;if(void 0===d){d={minFilter:Ct,magFilter:Ct,format:yv,stencilBuffer:!1};var e=b.getSize(new gy);this.g8=b.getPixelRatio();this.$c=e.width;this.kd=e.height;d=new oy(this.$c*this.g8,this.kd*this.g8,d);d.texture.name="EffectComposer.rt1"}else this.g8=1,this.$c=d.width,this.kd=d.height;this.VHa=d;this.WHa=d.clone();this.WHa.texture.name="EffectComposer.rt2";this.yeb=this.VHa;this.readBuffer=this.WHa;this.Eoa=!0;this.d5=[];this.zpe=new yA({shader:a.$eb});this.ced=
new Nq}var a=wA;L(c,"geotoolkit3d.postprocessing.EffectComposer");c.prototype.setOptions=function(b){return this};c.prototype.YOd=function(){var b=this.readBuffer;this.readBuffer=this.yeb;this.yeb=b};c.prototype.vQa=function(b){this.d5.push(b);b.setSize(this.$c*this.g8,this.kd*this.g8)};c.prototype.Lse=function(b,d){this.d5.splice(d,0,b)};c.prototype.dyd=function(b){for(b+=1;b<this.d5.length;b++)if(this.d5[b].enabled)return!1;return!0};c.prototype.render=function(b){void 0===b&&(b=this.ced.getDelta());
var d=this.gF.getRenderTarget(),e,f=this.d5.length;for(e=0;e<f;e++){var g=this.d5[e];!1!==g.enabled&&(g.Eoa=this.Eoa&&this.dyd(e),g.render(this.gF,this.yeb,this.readBuffer,b),g.axb&&this.YOd())}this.gF.setRenderTarget(d)};c.prototype.reset=function(b){void 0===b&&(b=this.gF.getSize(new gy),this.g8=this.gF.getPixelRatio(),this.$c=b.width,this.kd=b.height,b=this.VHa.clone(),b.setSize(this.$c*this.g8,this.kd*this.g8));this.VHa.dispose();this.WHa.dispose();this.VHa=b;this.WHa=b.clone();this.yeb=this.VHa;
this.readBuffer=this.WHa};c.prototype.dispose=function(){this.VHa.dispose();this.WHa.dispose();this.readBuffer=this.yeb=this.render=null;for(var b=0;b<this.d5.length;b++)this.d5[b].dispose();this.d5=[]};c.prototype.setSize=function(b,d){this.$c=b;this.kd=d;b=this.$c*this.g8;d=this.kd*this.g8;this.VHa.setSize(b,d);this.WHa.setSize(b,d);for(var e=0;e<this.d5.length;e++)this.d5[e].setSize(b,d);return this};c.prototype.setPixelRatio=function(b){this.g8=b;this.setSize(this.$c,this.kd);return this};c.prototype.Hub=
function(){return this.d5};return c}();var AA=/*#__PURE__*/va(/*#__PURE__*/function(){function c(b){this.fc=b||"processor";this.bv={};this.Dia=0}L(c,"geotoolkit3d.util.ObjectProcessor");var a=null;c.prototype.Da=function(){return this.fc};c.prototype.kb=function(b){this.fc=b;return this};c.prototype.Bbb=function(b,d){if(null==b||null==d)return this;this.bv.hasOwnProperty(b)||this.Dia++;this.bv[b]=d;return this};c.prototype.H3b=function(b){for(var d,e=b;null!=b;){if("function"===typeof b.Oa&&(d=this.bv[b.Oa()],null!=d))return d(b);b=b.parent}return e};c.ig=function(){null==
a&&(a=new c);return a};c.prototype.ia=function(){var b={};b[this.fc]=this.bv;b.count=this.Dia;return b};c.prototype.CHd=function(){this.Dia=0;this.bv={};this.fc="processor";return this};return c}(),2,"eyJnZXREZWZhdWx0SW5zdGFuY2UiOiJpZyIsInByb3RvdHlwZSI6eyJzIjowLCJjIjp7ImdldE5hbWUiOiJEYSIsInNldE5hbWUiOiJrYiIsInJlZ2lzdGVyT2JqZWN0IjoiQmJiIiwicHJvY2Vzc09iamVjdCI6IkgzYiIsImdldFByb3BlcnRpZXMiOiJpYSIsInJlc2V0UHJvY2Vzc29yIjoiQ0hkIn19fSAg");var BA=/*#__PURE__*/va(/*#__PURE__*/function(){function c(){xA.call(this);this.Y2=[];this.bv=AA.ig()}D(c,xA);L(c,"geotoolkit3d.posprocessing.AbstractHighlightPass");c.prototype.B6a=function(){this.Y2=[]};c.prototype.V5a=function(a){a=this.bv.H3b(a);if(Array.isArray(a))for(var b=0;b<a.length;b++)null!=a[b]&&this.Y2.push(a[b]);else null!=a&&this.Y2.push(a)};return c}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJjbGVhclNlbGVjdGVkT2JqZWN0cyI6IkI2YSIsImFkZFNlbGVjdGVkT2JqZWN0cyI6IlY1YSJ9fX0g");var CA=/*#__PURE__*/va(/*#__PURE__*/function(){function c(b){BA.call(this);this.hb=G(b,{resolution:new gy(256,256)},!0);this.axb=!1;this.type="HighlightPass";this.setOptions(this.hb)}function a(b,d){for(;null!=b&&!(b instanceof mz);)b=b.parent;null!=b&&b.AKd(d)}D(c,BA);L(c,"geotoolkit3d.posprocessing.HighlighPass");c.prototype.setOptions=function(b){if(null==b)return this;b.hasOwnProperty("highlight")&&(b=G(b,b.highlight),delete b.highlight);this.hb=G(b,this.hb);null!=b.enabled&&(this.enabled=b.enabled);return this};c.prototype.ta=
function(){return this.hb};c.prototype.B6a=function(){this.Y2.forEach(function(b){a(b,!1)});this.Y2=[]};c.prototype.V5a=function(b){b=this.bv.H3b(b);if(Array.isArray(b))for(var d=0;d<b.length;d++)null!=b[d]&&(a(b[d],!0),this.Y2.push(b[d]));else null!=b&&(a(b,!0),this.Y2.push(b))};c.prototype.render=function(b,d,e,f){};c.prototype.setSize=function(b,d){};c.prototype.dispose=function(){};return c}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoidGEiLCJjbGVhclNlbGVjdGVkT2JqZWN0cyI6IkI2YSIsImFkZFNlbGVjdGVkT2JqZWN0cyI6IlY1YSJ9fX0g");var DA=/*#__PURE__*/va(/*#__PURE__*/function(){function c(x){xA.call(this);this.hb=G(x,{clearcolor:0,clearcoloralpha:0,depthpeeling:{enabled:!0,peelinglevel:5},antialias:{enabled:!0}},!0);this.type="DepthPeelingPass";this.hb.antialias.enabled=this.hb.antialias.mode===Iy.EFb;this.setOptions(this.hb);this.sz=x.scene;this.TL=x.camera;this.yoe=[];this.zob=2;this.xJ=[];this.oAa=this.Dsa=void 0;this.KIb=a("depthTexture_1");this.Xib=a("depthTexture_2");this.Jmb=a("opacity_depthTexture");x=wA.$eb;this.hIb=new Lw({uniforms:Yx.clone(x.uniforms),
blending:Cu,vertexShader:x.vertexShader,fragmentShader:x.fragmentShader,premultipliedAlpha:!0,transparent:!0,depthTest:!1,depthWrite:!1});this.lz=new xA.BYa(this.hIb);this.lz.material.uniforms.tDiffuse.value=null;this.p5c=new Lw({uniforms:Yx.clone(x.uniforms),blending:yu,vertexShader:x.vertexShader,fragmentShader:x.fragmentShader,premultipliedAlpha:!1,transparent:!1,depthTest:!1,depthWrite:!1});this.Fjb=new xA.BYa(this.p5c);this.Fjb.material.uniforms.tDiffuse.value=null;this.ljb=new Wx(!1);this.kjb=
new Wx(!1);this.bOb=new Wx(this.Xib);this.Kmb=new Wx(null);this.fnc=new Wx(new gy)}function a(x){var C=new Ar(0,0,hs);C.format=yr;C.name=x;return C}function b(x,C,z,v){x=new oy(x,C,{format:yv,minFilter:Ct,magFilter:Ct,generateMipmaps:!1,stencilBuffer:!1,depthBuffer:!0,depthTexture:v});x.texture.name="RenderTarget_"+z;return x}function d(x,C){x.forEach(function(z){C?(z.blending=mr,z.blendEquation=Pp,z.blendSrc=ix,z.blendDst=xy,z.blendEquationAlpha=Pp,z.blendSrcAlpha=Lu,z.blendDstAlpha=xy):(z.blending=
z.vua.blending,z.blendEquation=z.vua.blendEquation,z.blendSrc=z.vua.blendSrc,z.blendDst=z.vua.blendDst,z.blendEquationAlpha=z.vua.blendEquationAlpha,z.blendSrcAlpha=z.vua.blendSrcAlpha,z.blendDstAlpha=z.vua.blendDstAlpha)})}function e(x,C){x.forEach(function(z){switch(C){case f:z.visible=!z.transparent;break;case g:z.visible=z.transparent;break;default:z.visible=z.L5c}})}var f=1,g=2,h=3,k=new Pq(0),l=sd.iUa()?.001:1E-7,m="depthPeelingEnabled",n="ignoreDepthTest",p="enablePeelingDiscard",q="peelingDepthTexture",
r="opaqueGeometryDepthTexture",t="renderResolution",u="#if __VERSION__ >= 300",w="#endif";Jw.clipping_planes_pars_fragment=[Jw.clipping_planes_pars_fragment,u,"uniform bool "+m+";","uniform bool "+n+";","uniform bool "+p+";","uniform sampler2D "+q+";","uniform sampler2D "+r+";",w,"#define VARIABLE_RENDER_RESOLUTION","uniform vec2 "+t+";"].join("\n");var y="currentDepth",A=Jw.logdepthbuf_fragment;A=A.replace("gl_FragDepthEXT",y);Jw.clipping_planes_fragment=[Jw.clipping_planes_fragment,u,"if ("+m+" || "+
p+" && "+n+") {","   float "+y+" = gl_FragCoord.z;",A,"   ivec2 intFragCoord = ivec2(gl_FragCoord.xy);\n   bool isNotDeeper = false;\n   bool isOccluded = false;","   if ("+m+") {","      isNotDeeper = "+y+" <= texelFetch("+q+", intFragCoord, 0).x + "+l+";","   }","   if ("+p+") {","      isOccluded = "+y+" >= texelFetch("+r+", intFragCoord, 0).x;","   }\n   if(isNotDeeper || isOccluded) discard;\n}",w].join("\n");L(c,"geotoolkit3d.postprocessing.DepthPeelingPass");D(c,xA);c.prototype.setOptions=
function(x){if(!x)return this;this.hb=G(x,this.hb);x.depthpeeling&&null!=x.depthpeeling.peelinglevel&&this.JJd(x.depthpeeling.peelinglevel);return this};c.prototype.ta=function(){return this.hb};c.prototype.setSize=function(x,C){this.hb.antialias.enabled&&(x*=this.zob,C*=this.zob);this.fnc.value.set(x,C);if(this.xJ)for(var z=this.xJ.length,v=0;v<z;v++)this.xJ[v].setSize(x,C);this.Dsa&&(this.Dsa.setSize(x,C),this.oAa.setSize(x,C));return this};c.prototype.dispose=function(){this.ovc();this.KIb&&this.KIb.dispose();
this.Xib&&this.Xib.dispose();this.Jmb&&this.Jmb.dispose()};c.prototype.ovc=function(){if(this.xJ&&0<this.xJ.length){for(var x=this.xJ.length,C=0;C<x;C++)this.xJ[C].dispose();this.xJ=[]}this.Dsa&&this.Dsa.dispose();this.oAa&&this.oAa.dispose()};c.prototype.JJd=function(x){this.ghc=Math.max(x,2)};c.prototype.vfd=function(x,C){this.hb.antialias.enabled&&(x*=this.zob,C*=this.zob);var z=this.ghc+1;if(this.xJ.length!==z){this.ovc();for(var v=!0,B=0;B<z;B++){var E=v?this.KIb:this.Xib,H="transparency_target_"+
B;this.xJ[B]=b(x,C,H,E);v=!v}}this.Dsa||(this.Dsa=b(x,C,"opacity_target",this.Jmb));this.oAa||(this.oAa=b(x,C,"composition_target",null))};c.prototype.CJa=function(x){if(!x.bBd){x.bBd=!0;var C=this,z=x.onBeforeCompile;x.onBeforeCompile=function(v,B){void 0===v.uniforms&&(v.uniforms={});var E=x.depthFunc===lt||x.depthFunc===kt;E=x.depthWrite&&x.depthTest&&E;v.uniforms[m]=C.ljb;v.uniforms[p]=C.kjb;v.uniforms[r]=C.Kmb;v.uniforms[n]={value:E};v.uniforms[q]=C.bOb;v.uniforms[t]=C.fnc;x.needsUpdate=!0;"undefined"!==
typeof z&&"function"===typeof z&&z.apply(this,[v,B])}}};c.prototype.cQd=function(x){var C=this;x.traverse(function(z){if(void 0!==z.material)if(Array.isArray(z.material))for(var v=0;v<z.material.length;v++)C.CJa(z.material[v]);else C.CJa(z.material)})};c.prototype.Uqc=function(x,C){x.push(C);C.L5c=C.visible;C.vua||(C.vua={blending:C.blending,blendEquation:C.blendEquation,blendSrc:C.blendSrc,blendDst:C.blendDst,blendEquationAlpha:C.blendEquationAlpha,blendSrcAlpha:C.blendSrcAlpha,blendDstAlpha:C.blendDstAlpha});
this.m$b(C)};c.prototype.Qbd=function(x){var C=[],z=this;x.traverseVisible(function(v){if(void 0!==v.material)if(Array.isArray(v.material))for(var B=0;B<v.material.length;B++)z.Uqc(C,v.material[B]);else z.Uqc(C,v.material)});return C};c.prototype.Pbb=function(x,C,z){z&&(this.bOb.value=z.depthTexture);x.setRenderTarget(C);x.clear();x.render(this.sz,this.TL)};c.prototype.render=function(x,C,z){this.cQd(this.sz);this.vfd(z.width,z.height);z=x.autoClear;x.autoClear=!1;var v=this.sz.background;this.sz.background=
null;if(this.hb.depthpeeling.enabled){x.setClearColor(k,0);var B=this.ghc-1,E=this.Qbd(this.sz);this.ljb.value=!1;this.kjb.value=!1;this.Kmb.value=null;e(E,f);this.Pbb(x,this.Dsa);this.Kmb.value=this.Jmb;this.kjb.value=!0;e(E,g);d(E,!0);this.Pbb(x,this.xJ[0]);this.ljb.value=!0;for(var H=1;H<B;H++)this.Pbb(x,this.xJ[H],this.xJ[H-1]);d(E,!1);this.Pbb(x,this.xJ[B],this.xJ[B-1]);e(E,h);this.ljb.value=!1;this.kjb.value=!1;this.Kmb.value=null;this.bOb.value=null;x.setRenderTarget(this.oAa);x.setClearColor(this.hb.clearcolor,
this.hb.clearcoloralpha);this.sz.background=v;x.clear();this.lz.material.uniforms.tDiffuse.value=this.Dsa.texture;this.lz.render(x);for(v=B;0<=v;v--)this.lz.material.uniforms.tDiffuse.value=this.xJ[v].texture,this.lz.render(x);x.setRenderTarget(this.Eoa?null:C);this.Fjb.material.uniforms.tDiffuse.value=this.oAa.texture}else x.setClearColor(this.hb.clearcolor,this.hb.clearcoloralpha),this.Pbb(x,this.xJ[0]),this.sz.background=v,x.setRenderTarget(this.Eoa?null:C),x.clear(),this.Fjb.material.uniforms.tDiffuse.value=
this.xJ[0].texture;this.Fjb.render(x);x.autoClear=z};return c}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoidGEifX19");var EA=/*#__PURE__*/function(){function c(d){xA.call(this);this.hb=G(d,{clearcolor:0,clearcoloralpha:0,unbiased:!0,samplelevel:2},!0);this.type="SSAARenderPass";this.sz=d.scene;this.TL=d.camera;d=b.$eb;this.Sqa=Yx.clone(d.uniforms);this.Cda=null;this.hIb=new Lw({uniforms:this.Sqa,vertexShader:d.vertexShader,fragmentShader:d.fragmentShader,premultipliedAlpha:!0,transparent:!0,blending:Sp,depthTest:!1,depthWrite:!1});this.lz=new xA.BYa(this.hIb);this.setOptions(this.hb)}var a=new Pq,b=wA;L(c,"geotoolkit3d.postprocessing.SSAARenderPass");
D(c,xA);c.prototype.setOptions=function(d){if(null==d)return this;d.hasOwnProperty("antialias")&&(d=G(d,d.antialias),delete d.antialias);this.hb=G(d,this.hb);null!=d.enabled&&(this.enabled=d.enabled);return this};c.prototype.ta=function(){return this.hb};c.prototype.setSize=function(d,e){this.Cda&&this.Cda.setSize(d,e);return this};c.prototype.dispose=function(){this.Cda&&(this.Cda.dispose(),this.Cda=null)};c.prototype.NQd=function(d){var e=this;d.traverseVisible(function(f){if(void 0!==f.material)if(Array.isArray(f.material))for(var g=
0;g<f.material.length;g++)e.m$b(f.material[g]);else e.m$b(f.material)})};c.prototype.render=function(d,e,f){var g=f.width;f=f.height;this.NQd(this.sz);null==this.Cda&&(this.Cda=new oy(g,f,{minFilter:Ct,magFilter:Ct,format:yv}),this.Cda.texture.name="SSAARenderPass.sample");var h=c.o0c[Math.max(0,Math.min(this.hb.samplelevel,5))],k=d.autoClear;d.autoClear=!1;var l=d.getClearColor(a).getHex(),m=d.getClearAlpha(),n=1/h.length,p=.03125;this.Sqa.tDiffuse.value=this.Cda.texture;for(var q=0;q<h.length;q++){var r=
h[q];this.TL.setViewOffset&&this.TL.setViewOffset(g,f,.0625*r[0],.0625*r[1],g,f);r=n;if(this.hb.unbiased){var t=-.5+(q+.5)/h.length;r+=p*t}this.Sqa.opacity.value=r;d.setClearColor(this.hb.clearcolor,this.hb.clearcoloralpha);d.setRenderTarget(this.Cda);d.clear();d.render(this.sz,this.TL);d.setRenderTarget(this.Eoa?null:e);0===q&&(d.setClearColor(0,0),d.clear());this.lz.render(d)}this.TL.clearViewOffset&&this.TL.clearViewOffset();d.autoClear=k;d.setClearColor(l,m)};c.o0c=[[[0,0]],[[4,4],[-4,-4]],[[-2,
-6],[6,-2],[-6,2],[2,6]],[[1,-3],[-1,3],[5,1],[-3,-5],[-5,5],[-7,-1],[3,7],[7,-7]],[[1,1],[-1,-3],[-3,2],[4,-1],[-5,-2],[2,5],[5,3],[3,-5],[-2,6],[0,-7],[-4,-6],[-6,4],[-8,0],[7,-4],[6,7],[-7,-8]],[[-4,-7],[-7,-5],[-3,-5],[-5,-4],[-1,-4],[-2,-2],[-6,-1],[-4,0],[-7,1],[-1,2],[-6,3],[-3,3],[-7,6],[-3,6],[-5,7],[-1,7],[5,-7],[1,-6],[6,-5],[4,-4],[2,-3],[7,-2],[1,-1],[4,-1],[2,1],[6,2],[0,4],[4,4],[2,5],[7,5],[5,6],[3,7]]];return c}();var FA=/*#__PURE__*/function(){function c(){}c.EX=new Lp(.5,.5,.5);c.afb={x:{start:new Lp(-1,-1,-1),end:new Lp(-1,1,1)},y:{start:new Lp(-1,-1,-1),end:new Lp(1,-1,1)},z:{start:new Lp(-1,-1,-1),end:new Lp(1,1,-1)}};c.Plane={right:{normal:new Lp(-1,0,0),axis:{y:"y",z:"z"}},left:{normal:new Lp(1,0,0),axis:{y:"y",z:"z"}},top:{normal:new Lp(0,0,-1),axis:{x:"x",y:"y"}},bottom:{normal:new Lp(0,0,1),axis:{x:"x",y:"y"}},front:{normal:new Lp(0,1,0),axis:{x:"x",z:"z"}},back:{normal:new Lp(0,-1,0),axis:{x:"x",z:"z"}}};c.Vwb=
function(a,b){a.x=0!==b.x?b.x:a.x;a.y=0!==b.y?b.y:a.y;a.z=0!==b.z?b.z:a.z};return c}();var GA=/*#__PURE__*/function(){function c(a){Aq.call(this);this.od=a.axis;var b=a.counts,d=a.normal,e=FA.afb[this.od].start.clone(),f=FA.afb[this.od].end.clone();d=d.clone().negate();FA.Vwb(e,d);FA.Vwb(f,d);e=(new Lp).multiplyVectors(FA.EX,e);f=(new Lp).multiplyVectors(FA.EX,f);a=a.isaxis?0:1;e[this.od]+=a/(b[this.od]-1);f[this.od]+=a/(b[this.od]-1);d=[];for(var g=a;g<b[this.od]-a;g+=1)d.push(e.clone()),d.push(f.clone()),e[this.od]+=1/(b[this.od]-1),f[this.od]+=1/(b[this.od]-1);0===d.length&&(d.push(e.clone()),
d.push(e.clone()));this.setFromPoints(d)}D(c,Aq);L(c,"geotoolkit3d.scene.grid.GridAxisGeometry");c.prototype.Gz=function(){return this.od};return c}();var HA=/*#__PURE__*/va(/*#__PURE__*/function(){function c(b){mz.call(this);this.ug(!1);this.hb=G(b,{});this.od=this.hb.axis;this.XId(this.hb);this.name="GRIDTEXTS"}function a(b,d,e,f,g,h,k){e=new nz(e,{style:f,dontmanuallyupdate:!0,outline:k});e.position.copy(g);e.userData.anchor=d;e.visible=!1;isNaN(h)||(g[b]+=h);e.Qr=function(){return!1};return e}D(c,mz);L(c,"geotoolkit3d.scene.grid.GridAxisTexts");c.prototype.XId=function(b){var d=b.axis,e=b.textstyles[d],f=b.start,g=b.end,h=b.formatters[d],k=b.labeldistance||3,l=FA.afb[d].start.clone(),
m=FA.afb[d].end.clone(),n=g[d]-f[d],p=(g[d]-f[d])/(b.counts[d]-1);g=b.plane.normal.clone().negate();FA.Vwb(l,g);FA.Vwb(m,g);l=(new Lp).multiplyVectors(FA.EX,l);m=(new Lp).multiplyVectors(FA.EX,m);g=l.clone();for(var q=m.clone(),r=[],t=[],u=[],w=0,y=0;y<b.counts[d];y+=1){var A=y*p;A=h(f[d]+A,n)+"";w=Math.max(w,A.length);u.push(A)}for(f=0;f<b.counts[d];f+=1)n=1/(b.counts[d]-1),2>b.counts[d]-f&&(n*=b.counts[d]-f-1),h=a(d,Hy.start,u[f],e,g,n,b.outlines[d]),n=a(d,Hy.end,u[f],e,q,n,b.outlines[d]),p=k*Math.pow(w/
u[f].length,1.2),h.ccb(new gy(p,k)),n.ccb(new gy(p,k)),r.push(h),t.push(n);this.YId(b,r,l,m);this.nqc(r);this.nqc(t)};c.prototype.YId=function(b,d,e,f){var g=b.axis,h=b.title.texts[g];if(0!==h.length){var k=b.title.textstyles[g],l=b.title.distance,m=d.length/2,n=new Lp(1,1,1);if(Math.floor(m)!==Math.ceil(m)){var p=d[Math.floor(m)];d=d[Math.ceil(m)];null!=p&&null!=d&&(n=p.scale.clone(),n.add(d.scale.clone()));n.multiplyScalar(1.5*l)}else{p=-1;m=Number.NEGATIVE_INFINITY;for(var q=0;q<d.length;q++){var r=
d[q].scale.lengthSq();r>m&&(p=q,m=r)}d=d[p];null!=d&&(n=d.scale.clone());n.multiplyScalar(2*l)}e=e.clone();e[g]=0;e=a(g,Hy.start,h,k,e,Number.NaN,b.title.outlines[g]);e.ccb(new gy(n.x,n.y));this.add(e);f=f.clone();f[g]=0;b=a(g,Hy.end,h,k,f,Number.NaN,b.title.outlines[g]);b.ccb(new gy(n.x,n.y));this.add(b)}};c.prototype.nqc=function(b){2<=b.length&&(this.add(b[0]),this.add(b[b.length-1]),b.splice(0,1),b.splice(b.length-1,1));0!==b.length%2&&(this.add(b[Math.floor(b.length/2)]),b.splice(Math.floor(b.length/
2),1));for(var d=0;d<b.length/2;d++)this.add(b[d]),this.add(b[b.length-1-d])};c.prototype.du=function(b,d,e){if(this.hp=e)for(var f=0;f<this.children.length;f++)null!=b&&this.children[f].userData.anchor!==b||null==d?this.children[f].visible=!1:(this.children[f].visible=e,this.children[f].mIa(d))};c.prototype.cud=function(b,d,e,f){if(!this.visible)return null;for(var g=0;g<this.children.length;g++)this.children[g].ai(b,d,e,f,!0);return{children:this.children,isaxis:this.hb.isaxis}};c.prototype.jEd=
function(b,d,e,f){if(this.visible)for(var g=0;g<this.children.length;g++)this.children[g].ai(b,d,e,f,!0)};c.prototype.Gz=function(){return this.hb.axis};c.prototype.jb=function(){return this.hb.textstyles[this.od]};c.prototype.Jw=function(){return this.hb.outlines[this.od]};c.prototype.Fm=function(){return this.hb.title.texts[this.od]};c.prototype.Ffa=function(){return this.hb.title.distance};c.prototype.t4=function(){return this.hb.title.textstyles[this.od]};c.prototype.fEc=function(){return this.hb.title.outlines[this.od]};
c.prototype.G9=function(){return this.hb.formatters[this.od]};c.prototype.PM=function(){return this.hb.start};c.prototype.rS=function(){return this.hb.end};c.prototype.ava=function(){return this.hb.counts};return c}(),1,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRBeGlzIjoiR3oiLCJnZXRUZXh0U3R5bGUiOiJqYiIsImdldE91dGxpbmUiOiJKdyIsImdldFRpdGxlIjoiRm0iLCJnZXRUaXRsZURpc3RhbmNlRmFjdG9yIjoiRmZhIiwiZ2V0VGl0bGVUZXh0U3R5bGUiOiJ0NCIsImdldFRpdGxlT3V0bGluZSI6ImZFYyIsImdldEZvcm1hdHRlciI6Ikc5IiwiZ2V0U3RhcnQiOiJQTSIsImdldEVuZCI6InJTIiwiZ2V0Q291bnRzIjoiYXZhIn19fSAg");var IA=/*#__PURE__*/va(/*#__PURE__*/function(){function c(a){a=G(a,{vertexShader:Zy.ZYa,fragmentShader:Zy.YYa,uniforms:Yx.clone(Kw.basic.uniforms)});Kz.call(this,a);this.isMeshBasicMaterial=!0;this.type="MeshColorMapBasicMaterial";this.clipping=!0;this.setOptions(a)}D(c,Kz);L(c,"geotoolkit3d.scene.MeshColorMapBasicMaterial");c.prototype.setOptions=function(a){Kz.prototype.setOptions.call(this,a);a=G(a,{alphaMap:this.alphaMap,aoMap:this.aoMap,aoMapIntensity:this.aoMapIntensity,color:this.color,map:this.map,wireframe:this.wireframe,
wireframeLinecap:this.wireframeLinecap,wireframeLinejoin:this.wireframeLinejoin});this.alphaMap=a.alphaMap;this.aoMap=a.aoMap;this.aoMapIntensity=null!=a.aoMapIntensity?a.aoMapIntensity:1;this.color=a.color?new Pq(a.color):new Pq(16777215);this.map=a.map;this.wireframe=null!=a.wireframe?a.wireframe:!1;this.wireframeLinecap=a.wireframeLinecap||"round";this.wireframeLinejoin=a.wireframeLinejoin||"round";Zy.qRc(this,a);return this};c.prototype.ta=function(){var a=Kz.prototype.ta.call(this);a.alphaMap=
this.alphaMap;a.aoMap=this.aoMap;a.aoMapIntensity=this.aoMapIntensity;a.color=this.color;a.map=this.map;a.wireframe=this.wireframe;a.wireframeLinecap=this.wireframeLinecap;a.wireframeLinejoin=this.wireframeLinejoin;return a};return c}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoidGEifX19");vz.sv(IA.Oa(),tz);var JA=/*#__PURE__*/va(/*#__PURE__*/function(){function c(l){mz.call(this);this.ug(!1);this.b8=[];a(this,l)}function a(l,m){l.ym=m.plane;l.mode=m.mode;var n=FA.Plane[l.ym],p=m.counts,q=m.axis.linestyles,r=m.grid.linestyles,t=Object.keys(n.axis),u=0<m.opacity,w;for(w=0;w<l.b8.length;w++)l.b8[w]&&(l.remove(l.b8[w]),oz.dispose(l.b8[w]));l.b8=[];for(w=0;w<t.length;w++)l.b8.push(e(t[w],h,n,q[t[w]],g,u)),l.b8.push(e(t[w],p,n,r[t[w]],f,u)),l.b8.push(d(t[w],n,m,p));u&&l.b8.push(b(n,m.color,m.opacity));for(w=0;w<l.b8.length;w++)l.add(l.b8[w]);
l.name="GRIDPLANE";l.userData.plane=l.ym}function b(l,m,n){m instanceof Pq||(m=new Pq(m));var p=l.axis;m=new $t(new dv,new IA({color:m,opacity:n,transparent:1>n}));m.scale.set(k,k,1);p.x&&p.z?m.rotation.set(.5*Math.PI,0,0):p.y&&p.z&&m.rotation.set(0,.5*Math.PI,0);m.position.copy(l.normal).multiplyScalar(-.5*k);return m}function d(l,m,n,p){return new HA({axis:l,plane:m,start:n.start,end:n.end,counts:p,textstyles:n.axis.textstyles,formatters:n.axis.formatters,title:n.title,labeldistance:n.axis.distance,
outlines:n.axis.outlines})}function e(l,m,n,p,q,r){m=new GA({axis:l,counts:m,normal:n.normal,isaxis:q===g});n=Pd.Sg(p.rb());var t=p.Ph();Array.isArray(t)&&!t.length&&(t=null);r=new lz({data:{positions:m.getAttribute("position").array},linewidth:p.ca(),color:new Pq(n.lk()/255,n.kk()/255,n.ik()/255),opacity:n.Ek()/255,dashscale:250,dashsize:t?t[0]:1,gapsize:t?t[1]:1,dashed:t?!0:!1,polygonoffset:r,polygonoffsetfactor:.75});r.userData.axis=l;r.userData.linestyle=p;r.name=q;r.computeLineDistances();r.raycast=
function(u,w){};return r}var f="GRIDLINE",g="AXISLINE",h=new Lp(2,2,2),k=1.0018;D(c,mz);L(c,"geotoolkit3d.scene.grid.GridPlane");c.prototype.setOptions=function(l){a(this,l)};c.prototype.PM=function(){var l=null;this.traverse(function(m){m instanceof HA&&(l=m.PM())});return l};c.prototype.ava=function(){var l=null;this.traverse(function(m){m instanceof HA&&(l=m.ava())});return l};c.prototype.yma=function(){var l={};this.traverse(function(m){m instanceof lz&&m.name===f&&(l[m.userData.axis]=m.userData.linestyle)});
return l};c.prototype.kma=function(){var l={};this.traverse(function(m){m instanceof lz&&m.name===g&&(l[m.userData.axis]=m.userData.linestyle)});return l};c.prototype.LP=function(){var l={};this.traverse(function(m){m instanceof HA&&(l[m.Gz()]=m.jb())});return l};c.prototype.XFa=function(){var l={};this.traverse(function(m){m instanceof HA&&(l[m.Gz()]=m.Jw())});return l};c.prototype.lK=function(){var l={};this.traverse(function(m){m instanceof HA&&(l[m.Gz()]=m.Fm())});return l};c.prototype.Ffa=function(){var l;
this.traverse(function(m){m instanceof HA&&(l=m.Ffa())});return l};c.prototype.e$a=function(){var l={};this.traverse(function(m){m instanceof HA&&(l[m.Gz()]=m.t4())});return l};c.prototype.lGa=function(){var l={};this.traverse(function(m){m instanceof HA&&(l[m.Gz()]=m.fEc())});return l};c.prototype.jma=function(){var l={};this.traverse(function(m){m instanceof HA&&(l[m.Gz()]=m.G9())});return l};c.prototype.qp=function(){return this.mode};c.prototype.rS=function(){var l=null;this.traverse(function(m){m instanceof
HA&&(l=m.rS())});return l};c.prototype.du=function(l,m,n,p){for(var q=0;q<this.children.length;q++)this.children[q]instanceof HA&&(null!=l&&this.children[q].Gz()!==l||this.children[q].du(m,n,p))};c.prototype.wX=function(l,m){l=this.mode(this,l,m);for(m=0;m<this.children.length;m++)this.children[m]instanceof HA||(this.children[m].visible=l)};c.prototype.mod=function(l,m,n,p){for(var q=[],r=[],t=0;t<this.children.length;t++)if(this.children[t]instanceof HA){var u=this.children[t].cud(l,m,n,p);if(null!=
u){var w=r;u.isaxis&&(w=q);for(var y=0;y<u.children.length;y++)w.push(u.children[y])}}return{nofilter:q,filter:r}};c.prototype.Hwe=function(l,m,n,p){for(var q=0;q<this.children.length;q++)this.children[q]instanceof HA&&this.children[q].jEd(l,m,n,p)};c.prototype.dispose=function(){mz.prototype.dispose.call(this);for(var l=0;l<this.children.length;l++)this.children[l]&&oz.dispose(this.children[l])};return c}(),1,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPdXRsaW5lcyI6IlhGYSIsImdldFRpdGxlT3V0bGluZXMiOiJsR2EifX19");var KA=/*#__PURE__*/va(/*#__PURE__*/function(){function c(b){this.LJ=this.VR=this.ZO=this.JJ=this.RH=this.IJ=this.QH=this.HJ=this.PH=0}L(c,"geotoolkit3d.transformation.XYCoordinates");c.prototype.validate=function(){if(null==this.PH){var b=bz.E6a(this.QH,this.IJ,this.RH,this.JJ,this.ZO,this.VR);if(null==b)throw Error("Given XY values do not belong to a rectangle");this.PH=b.x;this.HJ=b.y}else if(null==this.QH){b=bz.E6a(this.PH,this.HJ,this.RH,this.JJ,this.ZO,this.VR);if(null==b)throw Error("Given XY values do not belong to a rectangle");
this.QH=b.x;this.IJ=b.y}else if(null==this.RH){b=bz.E6a(this.QH,this.IJ,this.PH,this.HJ,this.ZO,this.VR);if(null==b)throw Error("Given XY values do not belong to a rectangle");this.RH=b.x;this.JJ=b.y}else if(null==this.ZO){b=bz.E6a(this.QH,this.IJ,this.RH,this.JJ,this.PH,this.HJ);if(null==b)throw Error("Given XY values do not belong to a rectangle");this.ZO=b.x;this.VR=b.y}null==this.LJ&&(this.LJ=0)};c.prototype.Ljd=function(b){this.PH=b.x0;this.HJ=b.y0;this.QH=b.x1;this.IJ=b.y1;this.RH=b.x2;this.JJ=
b.y2;this.ZO=b.x3;this.VR=b.y3;this.LJ=null!=b.z0?b.z0:0;this.jea=null!=b.z1?b.z1:this.LJ;this.validate();return this};c.prototype.TVb=function(b){this.PH=null!=b.p0?b.p0.x:null;this.HJ=null!=b.p0?b.p0.y:null;this.QH=null!=b.p1?b.p1.x:null;this.IJ=null!=b.p1?b.p1.y:null;this.RH=null!=b.p2?b.p2.x:null;this.JJ=null!=b.p2?b.p2.y:null;this.ZO=null!=b.p3?b.p3.x:null;this.VR=null!=b.p3?b.p3.y:null;this.LJ=null!=b.z0?b.z0:0;this.jea=null!=b.z1?b.z1:this.LJ;this.validate();return this};c.prototype.fua=function(){return new uq(new Lp(Math.min(Math.min(this.PH,
this.QH),Math.min(this.RH,this.ZO)),Math.min(Math.min(this.HJ,this.IJ),Math.min(this.JJ,this.VR)),this.LJ),new Lp(Math.max(Math.max(this.PH,this.QH),Math.max(this.RH,this.ZO)),Math.max(Math.max(this.HJ,this.IJ),Math.max(this.JJ,this.VR)),this.jea))};c.prototype.sea=function(){return new uq(new Lp(Math.min(Math.min(this.PH,this.QH),Math.min(this.RH,this.ZO)),Math.min(Math.min(this.HJ,this.IJ),Math.min(this.JJ,this.VR)),-this.jea),new Lp(Math.max(Math.max(this.PH,this.QH),Math.max(this.RH,this.ZO)),
Math.max(Math.max(this.HJ,this.IJ),Math.max(this.JJ,this.VR)),-this.LJ))};var a=new gy;c.Kqb=function(b,d,e){a.subVectors(e,b);b=d.dot(a);return 0>b};c.getNormal=function(b,d,e){a.subVectors(d,b);b=e.clone();b.x=-e.y;b.y=e.x;0>b.dot(a)&&(b.x=-b.x,b.y=-b.y);return b};c.prototype.twb=function(b){var d=Math.min(this.LJ,this.jea),e=Math.max(this.LJ,this.jea),f=new gy(b.x,b.y);if(b.z<d||b.z>e)return!1;null==this.Od&&(this.Od=new gy(0,0,0),this.Od.x=(this.PH+this.QH+this.RH+this.ZO)/4,this.Od.y=(this.HJ+
this.IJ+this.JJ+this.VR)/4);null==this.$kc&&(b=new gy(this.QH-this.PH,this.IJ-this.HJ),this.Tmb=new gy(this.PH,this.HJ),this.$kc=c.getNormal(this.Tmb,this.Od,b));null==this.blc&&(b=new gy(this.RH-this.QH,this.JJ-this.IJ),this.rz=new gy(this.QH,this.IJ),this.blc=c.getNormal(this.rz,this.Od,b));null==this.clc&&(b=new gy(this.ZO-this.RH,this.VR-this.JJ),this.jA=new gy(this.RH,this.JJ),this.clc=c.getNormal(this.jA,this.Od,b));null==this.alc&&(b=new gy(this.ZO-this.PH,this.VR-this.HJ),this.alc=c.getNormal(this.Tmb,
this.Od,b));return c.Kqb(this.Tmb,this.$kc,f)||c.Kqb(this.rz,this.blc,f)||c.Kqb(this.jA,this.clc,f)||c.Kqb(this.Tmb,this.alc,f)?!1:!0};c.prototype.zXb=function(){return-this.LJ};c.prototype.AXb=function(){return-this.jea};c.prototype.rfa=function(){return new Lp(this.PH,this.HJ,this.LJ)};c.prototype.Jva=function(){return new Lp(this.QH,this.IJ,this.LJ)};c.prototype.sfa=function(){return new Lp(this.RH,this.JJ,this.LJ)};c.prototype.Kva=function(){return new Lp(this.ZO,this.VR,this.LJ)};return c}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJmcm9tSlNPTlhZIjoiTGpkIiwiZnJvbUpTT05Qb2ludHMiOiJUVmIiLCJhc0JveDMiOiJmdWEiLCJhc0VsZXZhdGlvbkJveDMiOiJzZWEiLCJpc1BvaW50SW5zaWRlIjoidHdiIn19fSAg");var LA=/*#__PURE__*/function(){function c(a,b){this.qq=a;this.pca=b}L(c,"geotoolkit3d.transformation.XYToXY");c.prototype.FQa=function(a){var b=this.qq.zXb(),d=this.qq.AXb(),e=this.pca.zXb(),f=this.pca.AXb();b=[new Lp(this.qq.rfa().x,this.qq.rfa().y,b),new Lp(this.qq.Jva().x,this.qq.Jva().y,b),new Lp(this.qq.sfa().x,this.qq.sfa().y,d),new Lp(this.qq.Kva().x,this.qq.Kva().y,b)];e=[new Lp(this.pca.rfa().x,this.pca.rfa().y,e),new Lp(this.pca.Jva().x,this.pca.Jva().y,e),new Lp(this.pca.sfa().x,this.pca.sfa().y,f),
new Lp(this.pca.Kva().x,this.pca.Kva().y,e)];a.updateMatrix();a.applyMatrix4(bz.T4b(b,e))};return c}();var MA=/*#__PURE__*/va(/*#__PURE__*/{box:function(){return function(c,a,b){return!0}}(),WBd:function(){var c=new Lp,a=new Lp,b=new Lp;return function(d,e,f){d.worldToLocal(c.copy(f.position));a.copy(FA.Plane[d.userData.plane].normal);b.copy(FA.EX).multiply(a.negate());a.copy(FA.Plane[d.userData.plane].normal);return a.dot(c)>=a.dot(b)}}(),back:function(){var c=new Lp;return function(a,b,d){a.worldToLocal(c.copy(d.position));b=FA.Plane[a.userData.plane].normal.dot(c);return"bottom"===a.userData.plane||"left"===a.userData.plane?
-.01<=b:.01<b}}()},2,"eyJvcGVuYm94IjoiV0JkIn0g"),NA=/*#__PURE__*/va(/*#__PURE__*/function(){function c(C){mz.call(this);this.ug(!1);null==C.axis&&(C.axis={});null==C.grid&&(C.grid={});null==C.title&&(C.title={});C.axis=G(C.axis,{textstyles:e,linestyles:b,formatters:h,outlines:f});C.title=G(C.title,{textstyles:g,texts:k,outlines:f});C.grid=G(C.grid,{linestyles:d});C.grid.linestyles=G(C.grid.linestyles,d.clone());C.axis.linestyles=G(C.axis.linestyles,b.clone());C.axis.textstyles=G(C.axis.textstyles,e.clone());C.axis.formatters=G(C.axis.formatters,h.clone());
C.axis.distance=C.axis.distance||2;C.title.texts=G(C.title.texts,k.clone());C.title.textstyles=G(C.title.textstyles,g.clone());C.title.distance=C.title.distance||1;C=G(C,{start:new Lp(-1,-1,-1),end:new Lp(1,1,1),counts:new Lp(5,5,5),modelstart:C.start?C.start:new Lp(-1,-1,-1),modelend:C.end?C.end:new Lp(1,1,1),mode:MA.back,planecolor:"transparent",planeopacity:0},!0);this.kf={};this.setOptions(C);this.name="GRID"}function a(C,z){var v=0;z=Math.abs(z);5>z&&(v=1);1>z&&(v=2);.5>z&&(v=3);return C.toFixed(v)}var b={x:new X("white",1.5),y:new X("white",1.5),z:new X("white",1.5),clone:function(){return{x:b.x,y:b.y,z:b.z}}},d={x:new X("grey",2),y:new X("grey",2),z:new X("grey",2),clone:function(){return{x:d.x,y:d.y,z:d.z}}},e={x:new Ki({color:"white",font:"11px Arial"}),y:new Ki({color:"white",font:"11px Arial"}),z:new Ki({color:"white",font:"11px Arial"}),clone:function(){return{x:e.x,y:e.y,z:e.z}}},f={x:null,y:null,z:null,clone:function(){return{x:f.x,y:f.y,z:f.z}}},g={x:new Ki({color:"white",font:"13px Arial"}),
y:new Ki({color:"white",font:"13px Arial"}),z:new Ki({color:"white",font:"13px Arial"}),clone:function(){return{x:g.x,y:g.y,z:g.z}}},h={x:a,y:a,z:a,clone:function(){return{x:h.x,y:h.y,z:h.z}}},k={x:"X",y:"Y",z:"Z",clone:function(){return{x:k.x,y:k.y,z:k.z}}};D(c,mz);L(c,"geotoolkit3d.scene.grid.Grid");c.prototype.Jfa=function(){return(new uq(new Lp(-.5,-.5,-.5),new Lp(.5,.5,.5))).applyMatrix4(this.matrixWorld)};c.prototype.setOptions=function(C){if(null==C)return this;mz.prototype.setOptions.call(this,
C);this.position.set(0,0,0);this.rotation.set(0,0,0);this.scale.set(1,1,1);this.updateMatrix();null==C.axis&&(C.axis={});null==C.grid&&(C.grid={});null==C.title&&(C.title={});C.axis=G(C.axis,{textstyles:this.LP(),linestyles:this.kma(),formatters:this.jma(),outlines:this.XFa()});C.title=G(C.title,{textstyles:this.e$a(),texts:this.lK(),distance:this.Ffa(),outlines:this.lGa()});C.grid=G(C.grid,{linestyles:this.yma()});C.grid.linestyles=G(C.grid.linestyles,this.yma());C.axis.linestyles=G(C.axis.linestyles,
this.kma());C.axis.textstyles=G(C.axis.textstyles,this.LP());C.axis.formatters=G(C.axis.formatters,this.jma());C.hasOwnProperty("planecolor")&&(this.zmc=C.planecolor);C.hasOwnProperty("planeopacity")&&(this.Amc=C.planeopacity);var z=G(C,{start:this.PM(),end:this.rS(),counts:this.ava(),modelstart:this.VYb(),modelend:this.QYb(),mode:this.qp(),planecolor:this.zmc,planeopacity:this.Amc});C=z.start;for(var v=z.end,B=z.counts,E=Object.keys(FA.Plane),H=0;H<E.length;H++){var F={plane:E[H],start:z.modelstart,
end:z.modelend,counts:B,axis:z.axis,title:z.title,grid:z.grid,mode:z.mode,color:z.planecolor,opacity:z.planeopacity};null==this.kf[E[H]]?(F=new JA(F),this.kf[E[H]]=F,this.add(F)):this.kf[E[H]].setOptions(F)}z=new KA;z.TVb({p0:new gy(-FA.EX.x,-FA.EX.y),p1:new gy(FA.EX.x,-FA.EX.y),p2:new gy(FA.EX.x,FA.EX.y),z0:-FA.EX.z,z1:FA.EX.z});B=new KA;B.TVb({p0:new gy(C.x,C.y),p1:new gy(v.x,C.y),p3:new gy(C.x,v.y),z0:-Math.max(C.z,v.z),z1:-Math.min(C.z,v.z)});z=new LA(z,B);z.FQa(this);this.RO=C;this.ox=v;this.Xf(new gz({source:this,
type:fz.bZa,args:[]}));return this};c.prototype.ta=function(){return xb({axis:{textstyles:this.LP(),formatters:this.jma(),linestyles:this.kma(),outlines:this.XFa()},grid:{linestyles:this.yma()},title:{textstyles:this.e$a(),texts:this.lK(),distance:this.Ffa(),outlines:this.lGa()},start:this.PM(),end:this.rS(),counts:this.ava(),modelstart:this.VYb(),modelend:this.QYb(),mode:this.qp(),planecolor:this.zmc,planeopacity:this.Amc},mz.prototype.ta.call(this))};c.prototype.yma=function(){return this.kf.right?
G(this.kf.right.yma(),this.kf.top.yma()):{}};c.prototype.kma=function(){return this.kf.right?G(this.kf.right.kma(),this.kf.top.kma()):{}};c.prototype.LP=function(){return this.kf.right?G(this.kf.right.LP(),this.kf.top.LP()):{}};c.prototype.XFa=function(){return this.kf.right?G(this.kf.right.XFa(),this.kf.top.XFa()):{}};c.prototype.jma=function(){return this.kf.right?G(this.kf.right.jma(),this.kf.top.jma()):{}};c.prototype.lK=function(){return this.kf.right?G(this.kf.right.lK(),this.kf.top.lK()):{}};
c.prototype.Ffa=function(){return this.kf.right?this.kf.right.Ffa():0};c.prototype.e$a=function(){return this.kf.right?G(this.kf.right.e$a(),this.kf.top.e$a()):{}};c.prototype.lGa=function(){return this.kf.right?G(this.kf.right.lGa(),this.kf.top.lGa()):{}};c.prototype.PM=function(){return this.RO};c.prototype.rS=function(){return this.ox};c.prototype.qp=function(){var C=Object.keys(FA.Plane)[0];return this.kf[C]?this.kf[C].qp():null};c.prototype.ava=function(){var C=Object.keys(FA.Plane)[0];return this.kf[C]?
this.kf[C].ava():null};c.prototype.VYb=function(){var C=Object.keys(FA.Plane)[0];return this.kf[C]?this.kf[C].PM():null};c.prototype.QYb=function(){var C=Object.keys(FA.Plane)[0];return this.kf[C]?this.kf[C].rS():null};c.prototype.qZb=function(){return this.kf};c.Av=MA;c.prototype.$pb=function(C){C.qqc(this)};var l=new Lp(0,-1,-1),m=new Lp(1,0,-1),n=new Lp(-1,0,-1),p=new Lp(-1,-1,0),q=new Lp(1,-1,0),r=new Lp(0,-1,1),t=new Lp(1,0,1),u=new Lp(-1,1,0),w=new Lp(0,1,-1),y=new Lp(0,1,1),A=new Lp(1,1,0),
x=new Lp;c.prototype.ai=function(C,z,v,B){mz.prototype.ai.call(this,C,z,v,B);if(!this.visible)return this;this.worldToLocal(x.copy(z.position));var E;for(E=0;E<this.children.length;E++)this.children[E].wX(C,z);var H=this.qp();E=H(this.kf.bottom,C,z);var F=H(this.kf.back,C,z),I=H(this.kf.left,C,z);H=H(this.kf.right,C,z);this.kf.top.du(null,null,null,!1);this.kf.bottom.du(null,null,null,!1);this.kf.front.du(null,null,null,!1);this.kf.back.du(null,null,null,!1);this.kf.left.du(null,null,null,!1);this.kf.right.du(null,
null,null,!1);var J=Hy;F?E?I?(this.kf.front.du("x",J.start,l,!0),this.kf.bottom.du("y",J.end,m,!0),this.kf.left.du("z",J.start,p,!0)):(this.kf.front.du("x",J.start,l,!0),this.kf.bottom.du("y",J.start,n,!0),this.kf.front.du("z",J.end,q,!0)):I?(this.kf.front.du("x",J.end,r,!0),this.kf.top.du("y",J.end,t,!0),this.kf.left.du("z",J.start,p,!0)):(this.kf.front.du("x",J.end,r,!0),this.kf.top.du("y",J.start,n,!0),this.kf.front.du("z",J.end,q,!0)):E?H?(this.kf.back.du("x",J.start,w,!0),this.kf.bottom.du("y",
J.start,n,!0),this.kf.back.du("z",J.end,A,!0)):(this.kf.back.du("x",J.start,w,!0),this.kf.bottom.du("y",J.end,m,!0),this.kf.back.du("z",J.start,u,!0)):H?(this.kf.back.du("x",J.end,y,!0),this.kf.top.du("y",J.start,n,!0),this.kf.back.du("z",J.end,A,!0)):(this.kf.back.du("x",J.end,y,!0),this.kf.top.du("y",J.end,t,!0),this.kf.back.du("z",J.start,u,!0));var K;F=[];I=[];for(K in this.kf){H=this.kf[K].mod(C,z,v,B);for(E=0;E<H.filter.length;E++)F.push(H.filter[E]);for(E=0;E<H.nofilter.length;E++)I.push(H.nofilter[E])}oz.MUb(C,
z,F,6,new Mp(0,4,0,0),I);return this};c.prototype.dispose=function(){mz.prototype.dispose.call(this);for(var C=0;C<this.children.length;C++)this.children[C]&&oz.dispose(this.children[C])};return c}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRXb3JsZEJvdW5kaW5nQm94IjoiSmZhIiwiZ2V0T3B0aW9ucyI6InRhIiwiZ2V0T3V0bGluZXMiOiJYRmEiLCJnZXRUaXRsZU91dGxpbmVzIjoibEdhIiwiZ2V0U3RhcnQiOiJQTSIsImdldEVuZCI6InJTIiwiZ2V0TW9kZSI6InFwIiwiZ2V0Q291bnRzIjoiYXZhIiwiZ2V0TW9kZWxTdGFydCI6IlZZYiIsImdldE1vZGVsRW5kIjoiUVliIiwiZ2V0UGxhbmVzIjoicVpiIiwiYWRkTGVnZW5kIjoiJHBiIiwiYmVmb3JlUmVuZGVyIjoiYWkifX19");var PA=/*#__PURE__*/function(){function c(e){BA.call(this);this.hb=G(e,{resolution:new gy(256,256)},!0);this.axb=!1;this.type="OutlinePass";this.sz=e.scene;this.TL=e.camera;this.W$c=!1;this.bjb=2;this.bv=AA.ig();var f={minFilter:Ct,magFilter:Ct,format:yv};e=Math.round(this.hb.resolution.x/this.bjb);var g=Math.round(this.hb.resolution.y/this.bjb);this.RCa=new oy(this.hb.resolution.x,this.hb.resolution.y,f);this.RCa.texture.name="OutlinePass.mask";this.RCa.texture.generateMipmaps=!1;this.Wib=new bu;this.Wib.side=
Gr;this.Wib.depthPacking=xv;this.Wib.blending=yu;this.HCa=this.Krd();this.HCa.side=Gr;this.HCa.fragmentShader=a(this.HCa.fragmentShader,this.TL);this.XOa=new oy(this.hb.resolution.x,this.hb.resolution.y,f);this.XOa.texture.name="OutlinePass.depth";this.XOa.texture.generateMipmaps=!1;this.Tsa=new oy(e,g,f);this.Tsa.texture.name="OutlinePass.depthDownSample";this.Tsa.texture.generateMipmaps=!1;this.VOa=new oy(e,g,f);this.VOa.texture.name="OutlinePass.blur1";this.VOa.texture.generateMipmaps=!1;this.WOa=
new oy(Math.round(e/2),Math.round(g/2),f);this.WOa.texture.name="OutlinePass.blur2";this.WOa.texture.generateMipmaps=!1;this.wMa=this.cnd();this.oka=new oy(e,g,f);this.oka.texture.name="OutlinePass.edge1";this.oka.texture.generateMipmaps=!1;this.YOa=new oy(Math.round(e/2),Math.round(g/2),f);this.YOa.texture.name="OutlinePass.edge2";this.YOa.texture.generateMipmaps=!1;var h=f=4;this.Cka=this.sDc(f);this.Cka.uniforms.texSize.value=new gy(e,g);this.Cka.uniforms.kernelRadius.value=1;this.bta=this.sDc(h);
this.bta.uniforms.texSize.value=new gy(Math.round(e/2),Math.round(g/2));this.bta.uniforms.kernelRadius.value=h;this.Uja=this.hrd();e=d.$eb;this.Sqa=Yx.clone(e.uniforms);this.Sqa.opacity.value=1;this.lkc=new Lw({uniforms:this.Sqa,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader,blending:yu,depthTest:!1,depthWrite:!1,transparent:!0});this.sNb=new Pq;this.ilc=1;this.lz=new xA.BYa(null);this.$Pb=new Pq;this.aQb=new Pq;this.Gob=new Yt;this.setOptions(this.hb)}function a(e,f){f=f.isPerspectiveCamera?
"perspective":"orthographic";return e.replace(/DEPTH_TO_VIEW_Z/g,f+"DepthToViewZ")}var b=new Pq("white"),d=wA;L(c,"geotoolkit3d.postprocessing.OutlinePass");D(c,BA);c.prototype.setOptions=function(e){if(null==e)return this;e.hasOwnProperty("highlight")&&(e=G(e,e.highlight),delete e.highlight);this.hb=G(e,this.hb);null!=e.enabled&&(this.enabled=e.enabled);return this};c.prototype.ta=function(){return this.hb};c.prototype.dispose=function(){this.RCa.dispose();this.XOa.dispose();this.Tsa.dispose();this.VOa.dispose();
this.WOa.dispose();this.oka.dispose();this.YOa.dispose()};c.prototype.setSize=function(e,f){this.RCa.setSize(e,f);this.XOa.setSize(e,f);e=Math.round(e/this.bjb);f=Math.round(f/this.bjb);this.Tsa.setSize(e,f);this.VOa.setSize(e,f);this.oka.setSize(e,f);this.Cka.uniforms.texSize.value=new gy(e,f);e=Math.round(e/2);f=Math.round(f/2);this.WOa.setSize(e,f);this.YOa.setSize(e,f);this.bta.uniforms.texSize.value=new gy(e,f);return this};c.prototype.dsc=function(e){function f(k){k.isMesh&&(e?(k.visible=k.userData.uIc,
delete k.userData.uIc):(k.userData.uIc=k.visible,k.visible=e))}for(var g=0;g<this.Y2.length;g++){var h=this.Y2[g];h.traverse(f)}};c.prototype.csc=function(e){function f(n){if(n.isMesh||n.isLine||n.isSprite){for(var p=!1,q=0;q<h.length;q++){var r=h[q].id;if(r===n.id){p=!0;break}}if(!p){p=n.visible;if(!e||n.Obd)n.visible=e;n.Obd=p}}k&&n instanceof NA&&(p=n.userData.oldVisible,n.hp=p)}function g(n){n.isMesh&&h.push(n)}for(var h=[],k=e,l=0;l<this.Y2.length;l++){var m=this.Y2[l];m.traverse(g)}this.sz.traverse(f)};
c.prototype.ndd=function(e){function f(g){g instanceof NA&&(g.userData.oldVisible=g.hp,g.hp=e)}this.sz.traverse(f)};c.prototype.$Qd=function(){this.Gob.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1);this.Gob.multiply(this.TL.projectionMatrix);this.Gob.multiply(this.TL.matrixWorldInverse)};c.prototype.render=function(e,f,g,h){0<this.Y2.length&&(e.getClearColor(this.sNb),this.ilc=e.getClearAlpha(),f=e.autoClear,e.autoClear=!1,e.setClearColor(16777215,1),this.dsc(!1),this.ndd(!1),h=this.sz.background,this.sz.background=
null,this.sz.overrideMaterial=this.Wib,e.setRenderTarget(this.XOa),e.clear(),e.render(this.sz,this.TL),this.dsc(!0),this.$Qd(),this.csc(!1),this.sz.overrideMaterial=this.HCa,this.HCa.uniforms.cameraNearFar.value=new gy(this.TL.near,this.TL.far),this.HCa.uniforms.depthTexture.value=this.XOa.texture,this.HCa.uniforms.textureMatrix.value=this.Gob,e.setRenderTarget(this.RCa),e.clear(),e.render(this.sz,this.TL),this.sz.overrideMaterial=null,this.csc(!0),this.sz.background=h,this.lz.material=this.lkc,this.Sqa.tDiffuse.value=
this.RCa.texture,e.setRenderTarget(this.Tsa),e.clear(),this.lz.render(e),this.$Pb.copy(this.hb.visiblecolor),this.aQb.copy(this.hb.hiddencolor),0<this.hb.pulseperiod&&(h=(Za.performance||Date).now(),h=.625+.75*Math.cos(.01*h/this.hb.pulseperiod)/2,this.$Pb.multiplyScalar(h),this.aQb.multiplyScalar(h)),this.lz.material=this.wMa,this.wMa.uniforms.maskTexture.value=this.Tsa.texture,this.wMa.uniforms.texSize.value=new gy(this.Tsa.width,this.Tsa.height),this.wMa.uniforms.visibleEdgeColor.value=this.$Pb,
this.wMa.uniforms.hiddenEdgeColor.value=this.aQb,this.wMa.uniforms.hiddenLine.value=this.hb.hiddenline,e.setRenderTarget(this.oka),e.clear(),this.lz.render(e),this.lz.material=this.Cka,this.Cka.uniforms.colorTexture.value=this.oka.texture,this.Cka.uniforms.direction.value=c.pac,this.Cka.uniforms.kernelRadius.value=this.hb.edgethickness,e.setRenderTarget(this.VOa),e.clear(),this.lz.render(e),this.Cka.uniforms.colorTexture.value=this.VOa.texture,this.Cka.uniforms.direction.value=c.qac,e.setRenderTarget(this.oka),
e.clear(),this.lz.render(e),this.lz.material=this.bta,this.bta.uniforms.colorTexture.value=this.oka.texture,this.bta.uniforms.direction.value=c.pac,e.setRenderTarget(this.WOa),e.clear(),this.lz.render(e),this.bta.uniforms.colorTexture.value=this.WOa.texture,this.bta.uniforms.direction.value=c.qac,e.setRenderTarget(this.YOa),e.clear(),this.lz.render(e),this.Uja.blending=this.sNb.equals(b)?Cu:Sp,this.lz.material=this.Uja,this.Uja.uniforms.maskTexture.value=this.RCa.texture,this.Uja.uniforms.edgeTexture1.value=
this.oka.texture,this.Uja.uniforms.edgeTexture2.value=this.YOa.texture,this.Uja.uniforms.patternTexture.value=this.Tue,this.Uja.uniforms.edgeStrength.value=this.hb.edgestrength,this.Uja.uniforms.edgeGlow.value=this.hb.edgeglow,this.Uja.uniforms.usePatternTexture.value=this.W$c,e.setRenderTarget(g),this.lz.render(e),e.setClearColor(this.sNb,this.ilc),e.autoClear=f);this.Eoa&&(this.lz.material=this.lkc,this.Sqa.tDiffuse.value=g.texture,e.setRenderTarget(null),this.lz.render(e))};c.prototype.Krd=function(){var e=
d.k2c;return new Lw({uniforms:e.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})};c.prototype.cnd=function(){var e=d.HZc;return new Lw({uniforms:e.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})};c.prototype.sDc=function(e){var f=d.Y2c;return new Lw({defines:{MAX_RADIUS:e},uniforms:f.uniforms,vertexShader:f.vertexShader,fragmentShader:f.fragmentShader})};c.prototype.hrd=function(){var e=d.I1c,f=this.hb.clearcolor,g=Sp;f.equals(b)&&(g=Cu);return new Lw({uniforms:e.uniforms,
vertexShader:e.vertexShader,fragmentShader:e.fragmentShader,blending:g,depthTest:!1,depthWrite:!1,transparent:!0})};c.pac=new gy(1,0);c.qac=new gy(0,1);return c}();var QA=/*#__PURE__*/va(/*#__PURE__*/{Rx:"onSelectionChanged"},2,"eyJvblNlbGVjdGlvbkNoYW5nZWQiOiJSeCJ9"),RA=/*#__PURE__*/va(/*#__PURE__*/function(){function c(a){a=G(a,{name:"selectiontool",enabled:!0,filter:null,hover:!1});Vy.call(this,a);this.uf=a.filter;this.lkb=a.hover;this.ap=[]}D(c,Vy);L(c,"geotoolkit3d.tool.SelectionTool");c.Ja=QA;c.prototype.setOptions=function(a){a=G(a,{plot:this.lc,enabled:this.If,filter:this.uf,hover:this.lkb});this.uf=a.filter;this.lc=a.plot;this.lkb=a.hover;this.If=a.enabled;Vy.prototype.setOptions.call(this,a);return this};c.prototype.ta=function(){var a=Vy.prototype.ta.call(this);
a.filter=this.uf;a.hover=this.lkb;a.enabled=this.If;return a};c.prototype.BG=function(a){this.lkb&&this.oxb(vz.Ym(this.lc,a.plotX,a.plotY,this.wc,this.wc,this.uf),a)};c.prototype.tI=function(a){this.If&&this.oxb(vz.Ym(this.lc,a.plotX,a.plotY,this.wc,this.wc,this.uf),a)};c.prototype.oxb=function(a,b){this.notify(c.Ja.oxb,this,a);this.notify(c.Ja.Rx,this,{selection:a,event:b});for(var d=0;d<this.ap.length;d++)this.ap[d](a,b)};c.prototype.zK=Hb;c.prototype.eN=Hb;c.prototype.fN=Hb;c.prototype.cF=Hb;c.prototype.zp=
Hb;c.prototype.OD=Hb;c.prototype.ND=Hb;c.prototype.dF=Hb;c.prototype.LD=Hb;c.prototype.Rz=Hb;c.prototype.KD=Hb;c.prototype.eF=Hb;c.prototype.QD=Hb;c.prototype.lC=Hb;c.prototype.AK=Hb;c.prototype.BK=Hb;return c}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoidGEiLCJvbkN1cnNvck1vdmUiOiJCRyIsIm9uVGFwIjoidEkiLCJvblNlbGVjdGlvbiI6Im94YiIsIm9uS2V5U3RhcnQiOiJ6SyIsIm9uS2V5IjoiZU4iLCJvbktleUVuZCI6ImZOIiwib25Eb3VibGVUYXAiOiJjRiIsIm9uTW91c2VXaGVlbCI6InpwIiwib25QaW5jaFN0YXJ0IjoiT0QiLCJvblBpbmNoIjoiTkQiLCJvblBpbmNoRW5kIjoiZEYiLCJvbkRyYWdTdGFydCI6IkxEIiwib25EcmFnIjoiUnoiLCJvbkRyYWdFbmQiOiJLRCIsIm9uU2xpZGVTdGFydCI6ImVGIiwib25TbGlkZSI6IlFEIiwib25TbGlkZUVuZCI6ImxDIiwib25WaXNpYmlsaXR5R2FpbmVkIjoiQUsiLCJvblZpc2liaWxpdHlMb3N0IjoiQksifX19");var TA=/*#__PURE__*/function(){function c(a){yA.call(this,{shader:wA.TZc});this.type="FXAARenderPass";this.setOptions(a)}L(c,"geotoolkit3d.postprocessing.FXAARenderPass");D(c,yA);c.prototype.setOptions=function(a){if(!a)return this;null!=a.enabled&&(this.enabled=a.enabled);return this};c.prototype.setSize=function(a,b){this.material.uniforms.resolution.value.x=1/a;this.material.uniforms.resolution.value.y=1/b};c.prototype.render=function(a,b,d){yA.prototype.render.call(this,a,b,d)};return c}();var UA=/*#__PURE__*/va(/*#__PURE__*/function(){function c(d){xz.call(this);d=d||{};this.lc=d.plot;this.RO=Date.now();this.d0a=!1;this.tMb=d.duration||1E3;this.Jda=this.lc.qC(this.lc.Yua());this.Uia=this.lc.qC(d.position||this.lc.Yua());this.r$c=this.lc.getCamera().quaternion.clone();this.nJb=this.lc.getCamera().quaternion.clone();this.d2a=null;if(d=d.lookat){this.d2a=this.lc.qC(d);var e=oz.Wud(this.Uia,this.d2a,this.lc);a.copy(this.Uia).sub(this.d2a).normalize();b.lookAt(this.Uia,d,e);b.decompose(a,this.nJb,a)}}var a=new Lp,
b=new Yt;D(c,xz);L(c,"geotoolkit3d.scene.animation.CameraMoveAnimation");c.prototype.oN=function(){if(!this.lc||this.d0a)return!0;var d=this.lc.getCamera(),e=this.lc.getController(),f=Date.now()-this.RO;if(f>this.tMb)return d.position.copy(this.Uia),d.quaternion.copy(this.nJb),e.setOptions({position:this.Uia,lookat:this.d2a?this.d2a:this.lc.bSa()}),this.lc.Xf(new gz({type:fz.Camera,source:this.lc.getCamera(),args:[]})),!0;d.position.lerpVectors(this.Jda,this.Uia,f/this.tMb);d.quaternion.copy(this.r$c).slerp(this.nJb,
f/this.tMb);e.setOptions({position:this.lc.Yua(),lookat:this.lc.bSa()});this.lc.Xf(new gz({type:fz.Camera,source:this.lc.getCamera(),args:[]}));return!1};c.prototype.stop=function(){this.d0a=!0};return c}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJydW4iOiJvTiJ9fX0g");var VA=/*#__PURE__*/va(/*#__PURE__*/{oFb:"perspective",F1c:"orthographic"},2,"eyJQZXJzcGVjdGl2ZSI6Im9GYiIsIk9ydGhvZ3JhcGhpYyI6IkYxYyJ9"),WA=/*#__PURE__*/va(/*#__PURE__*/{Bc:"None",UEb:"MaintainScale"},2,"eyJOb25lIjoiQmMiLCJNYWludGFpblNjYWxlIjoiVUViIn0g"),XA=/*#__PURE__*/va(/*#__PURE__*/{kgb:"orbit",$ec:"trackball",Lbc:"firstperson",Bc:"none"},2,"eyJPcmJpdCI6ImtnYiIsIlRyYWNrQmFsbCI6IiRlYyIsIkZpcnN0UGVyc29uIjoiTGJjIiwiTm9uZSI6IkJjIn0g"),YA=/*#__PURE__*/va(/*#__PURE__*/{Ro:"hover",GX:"click"},2,"eyJIb3ZlciI6IlJvIiwiQ2xpY2siOiJHWCJ9"),ZA=/*#__PURE__*/va(/*#__PURE__*/{z_c:"HighlightTool"},2,"eyJIaWdobGlnaHRUb29sIjoiel9jIn0g"),$A=/*#__PURE__*/va(/*#__PURE__*/function(){function c(r){.1>r.max.x-r.min.x&&(r.min.x-=.05,r.max.x+=.05);.1>r.max.y-r.min.y&&(r.min.y-=.05,r.max.y+=.05);.1>r.max.z-r.min.z&&(r.min.z-=.05,r.max.z+=.05)}function a(r){return r.visible}function b(r){ue.call(this);r=r||{};r.renderer&&null!=r.renderer.parameteres&&hb("Parameters for renderer should be camelCase, following three.js convention.");
this.hb=xb(r,{container:null,autoupdate:!0,autoupdateinterval:0,autoupdatemodellimits:!0,scale:new Lp(1,1,1),translation:new Lp(0,0,0),applyorigintranslation:!1,stats:!1,camera:{type:b.cDb.oFb,orthoresize:b.iFb.UEb,position:new Lp(0,-500,500),lookat:new Lp(0,0,0),up:new Lp(0,f,1),fov:50,near:"auto",far:"auto",minnear:1,minfar:100,nearfarscale:null,movewithscale:!1,controller:{type:b.Kya.kgb,autorotate:!1}},compass:{enabled:!0},ambientlighting:{color:"#1c1c1c",enabled:!0},cameralighting:{color:"white",
enabled:!0,intensity:1},renderer:{parameters:{precision:"highp",logarithmicDepthBuffer:!0},devicepixelratio:ac(),clearcolor:"black",clearcoloralpha:1},postprocessing:{enabled:!0,depthpeeling:{enabled:!0,peelinglevel:5},antialias:{enabled:!0,mode:Iy.VDb},highlight:{enabled:!0,mode:b.tcc.GX,edgestrength:4,edgeglow:0,edgethickness:1,pulseperiod:0,visiblecolor:new Pq("red"),hiddencolor:new Pq(11167591),hiddenline:!1,highlightedges:!0}}});"none"===this.hb.camera.controller.type&&(this.hb.renderer.parameters.antialias=
!0,this.hb.postprocessing.enabled=!1);this.zm=new qy(this.hb.renderer.parameters);qA.wXa(this.zm);if(!qA.sCb())throw Error("WebGL is not supported by this browser");qA.$$a()&&hb("Detected Intel Graphics - rendering performance may be poor");this.Be=this.hb.container;null==this.Be?(this.$c=this.zm.domElement.width,this.kd=this.zm.domElement.height,this.Be=this.zm.domElement.parentNode):(this.$c=this.Be.offsetWidth,this.kd=this.Be.offsetHeight,this.Be.appendChild(this.zm.domElement));this.zm.setSize(this.$c,
this.kd);this.zm.setPixelRatio(this.hb.renderer.devicepixelratio);this.ps=new Np;this.Oj=new mz;this.Oj.matrixWorldNeedsUpdate=!0;this.ps.add(this.Oj);this.Eta=new mz;this.Eta.name="ROOT";this.Oj.add(this.Eta);this.uk=[];this.yn=this.hb.autoupdate;this.N4c=this.hb.autoupdateinterval;this.O4c=this.hb.autoupdatemodellimits;this.bHb=this.hb.applyorigintranslation;this.CL=!1;this.Hta=this.Ksa=null;this.X7=this.cNb=!0;this.Z7c=16;this.fda=new Lp;this.Rb=this.WNc(this.hb.camera);this.ps.add(this.Rb);r=
this.hb.camera.controller.type;var t=this.qC(this.hb.camera.position.clone()),u=this.qC(this.hb.camera.lookat.clone());null==this.jY&&(this.jY=d(r,this.Rb,this,t,u),this.bSb(this.jY));this.HUa(t,u);this.ps.userData.plot=this;this.ps.updateMatrixWorld();this.ps.add(this.hhb=new rA);this.Xf(new gz({source:this,type:fz.CN,args:[this.ps]}));this.F3=null;this.dLb=sA.ig();this.setOptions(this.hb);this.yn&&this.startRendering();return this}function d(r,t,u,w,y){return r===b.Kya.kgb?new wz({camera:t,plot:u,
position:w,lookat:y}):r===b.Kya.$ec?new Dz({camera:t,plot:u,position:w,lookat:y}):r===b.Kya.Bc?new Xy({camera:t,plot:u,position:w,lookat:y}):r===b.Kya.Lbc?new zz({camera:t,plot:u,position:w,lookat:y}):new r({camera:t,plot:u,position:w,lookat:y})}function e(r,t){if(null!=r&&(r.visible||t)){!0===r.matrixAutoUpdate&&r.updateMatrix();if(!0===r.matrixWorldNeedsUpdate||!0===t)void 0===r.parent?r.matrixWorld.copy(r.matrix):r.matrixWorld.multiplyMatrices(r.parent.matrixWorld,r.matrix),t=!0,r.matrixWorldNeedsUpdate=
!1;for(var u=r.children.length,w=0;w<u;w++)e(r.children[w],t)}}var f=1E-7,g=new Yt,h=new gy,k=new Pq,l=new Lp,m=new Lp,n=null,p=100;D(b,ue);L(b,"geotoolkit3d.Plot");b.prototype.setOptions=function(r){r=r||{};this.hb=xb(r,this.hb);var t=this;if(null==this.ZNa){var u=10*this.hb.camera.lookat.distanceTo(this.hb.camera.position),w=this.hb.camera.lookat;this.hb.modellimits=new uq(w.clone().addScalar(-u),w.clone().addScalar(u));this.ZNa=this.hb.modellimits}else r.modellimits&&(this.ZNa=r.modellimits);u=
!1;!r.renderer||null==r.renderer.clearcolor&&null==r.renderer.clearcoloralpha||(u=r.renderer.clearcolor||this.zm.getClearColor(k),w=r.renderer.clearcoloralpha||this.zm.getClearAlpha(),this.zm.setClearColor(u,w),u=!0);r.ambientlighting&&(null==this.sqa&&this.hb.ambientlighting.enabled?(this.sqa=new Wp,this.ps.add(this.sqa)):null==this.sqa||this.hb.ambientlighting.enabled||(this.ps.remove(this.sqa),this.sqa=null),this.sqa&&r.ambientlighting.color&&(this.sqa.color=new Pq(r.ambientlighting.color)));if(r.cameralighting){if(null==
this.G6&&this.hb.cameralighting.enabled){this.G6=new hv(r.cameralighting.color);var y=new Lp;this.G6.ai=function(x,C,z,v){this.position.copy(z.qC(z.Yua(y)))};this.ps.add(this.G6)}else null==this.G6||this.hb.cameralighting.enabled||(this.ps.remove(this.G6),this.G6=null);null!=this.G6&&r.cameralighting.intensity&&(this.G6.intensity=r.cameralighting.intensity);null!=this.G6&&r.cameralighting.color&&(this.G6.color=new Pq(r.cameralighting.color))}w=!1;r.translation&&!this.Eta.position.equals(r.translation)&&
(this.Eta.position.copy(r.translation),w=this.Eta.matrixWorldNeedsUpdate=!0);r.scale&&!this.Oj.scale.equals(r.scale)&&(this.Oj.scale.copy(r.scale),w=this.Oj.matrixWorldNeedsUpdate=!0);w&&e(this.Oj);r.camera&&(this.WNc(r.camera),(r.camera.position||r.camera.lookat)&&this.HUa(r.camera.position,r.camera.lookat),r.camera.controller&&(w=G(r.camera.controller,r.camera.controller.options),this.xLa=w.autorotate&&this.hb.camera.controller.type===b.Kya.kgb,this.jY.setOptions(w)));r.compass&&(null==this.iY&&
this.hb.compass.enabled?(null==r.compass.container&&null==r.compass.canvas?(w=Math.min(this.$c,this.kd),this.L6=xc("div","__geotoolkit_compass"),this.L6.style.position="absolute",this.L6.style.bottom="0px",this.L6.style.right="0px",this.L6.style.border="none",this.L6.style.width=Math.floor(w/6)+"px",this.L6.style.height=Math.floor(w/6)+"px",this.L6.style["pointer-events"]="none",this.Be.appendChild(this.L6),this.aIb=this.L6):this.aIb=r.compass.container,this.iY=new uA({container:this.aIb,camera:this.Rb,
canvas:r.compass.canvas})):null==this.iY||this.hb.compass.enabled||(this.Be.removeChild(this.L6),this.iY=this.L6=null));null==this.Gka&&r.stats?(this.Gka=new vA,this.Be.appendChild(this.Gka.jzc())):null==this.Gka||r.stats||(this.Be.removeChild(this.Gka.jzc()),this.Gka=null);if(r.postprocessing)if(qA.isWebGL2()||(hb("geotoolkit3d: WebGL 2.0 is not supported by this browser. Effects such as highlighting is disabled."),r.postprocessing.enabled=!1),null==this.BF&&r.postprocessing.enabled){this.Emc=!0;
u=ac();r=this.hb.postprocessing;r.highlight.edgethickness*=u;r.highlight.edgestrength*=u;2>u&&1440>Za.screen.height&&2560>Za.screen.width&&(r.antialias.mode=Iy.EFb);this.BF=new zA(this.zm);u=G(r.highlight,{scene:this.ps,camera:this.Rb,clearcolor:this.zm.getClearColor(new Pq),resolution:new gy(this.$c,this.kd)});w=new CA(u);this.BF.vQa(w);w=xb(r,{scene:this.ps,camera:this.Rb,unbiased:!0,clearcolor:this.zm.getClearColor(k).getHex(),clearcoloralpha:this.zm.getClearAlpha()});var A=G(this.hb.postprocessing,
w);A=new DA(A);this.BF.vQa(A);r.antialias.mode===Iy.hec&&(w=G(this.hb.postprocessing.antialias,w),w=new EA(w),this.BF.vQa(w));u=new PA(u);this.BF.vQa(u);u=new RA({name:"HighlightTool",hover:"hover"===this.hb.postprocessing.highlight.mode});u.on(QA.Rx,function(x,C,z){var v=z.selection;t.BF.Hub().forEach(function(B){if(B instanceof BA){B.B6a();if(v[0]&&v[0].object){var E=!1;if(t.hb.postprocessing.highlight.highlightedges){for(E=v[0].object;null!=E&&!(E instanceof mz);)E=E.parent;if(E&&E.A$b())return;
E=null!=E&&E.xea()}(E&&B instanceof CA||!E&&B instanceof PA)&&B.V5a(v[0].object)}t.Xf()}})});this.bSb(u);r.antialias.mode===Iy.VDb&&(r=new TA,this.BF.vQa(r));u=!1}else if(null!=this.BF)for(w=this.BF.Hub(),A=0;A<w.length;A++)w[A].setOptions(r.postprocessing);u&&null!=this.BF&&this.BF.Hub().forEach(function(x){x.setOptions({clearcolor:t.zm.getClearColor(k).getHex(),clearcoloralpha:t.zm.getClearAlpha()})});this.Xf();this.ur();return this};b.prototype.ta=function(){return this.hb};b.prototype.startRendering=
function(){function r(){if(t.CL||t.xLa)t.CL=!1,t.rya(),t.render()}var t=this,u=this.N4c;Za.requestAnimationFrame||(u=this.Z7c);if(0===u){var w=function(){null!=t.Gka&&t.Gka.Bw();r();t.Hta=Za.requestAnimationFrame(w);null!=t.Gka&&t.Gka.end()};this.Hta=Za.requestAnimationFrame(w)}else this.Hta=new Kl(u,r),this.Hta.start()};b.cDb=VA;b.iFb=WA;b.Kya=XA;b.tcc=YA;b.$Yc=ZA;b.prototype.qC=function(r){e(this.Oj);g.copy(this.Eta.matrixWorld);return r.applyMatrix4(g)};b.prototype.gaa=function(r){e(this.Oj);g.copy(this.Eta.matrixWorld).invert();
return r.applyMatrix4(g)};b.prototype.WNc=function(r){r=xb(r,this.hb.camera);this.H8c=r.orthoresize;this.eNb=r.nearfarscale;this.g8c=r.minnear;this.f8c=r.minfar;"auto"===r.near&&(this.bgc=!0,r.near=1);"auto"===r.far&&(this.Zfc=!0,r.far=1E5);null==this.Rb?this.Rb=r.type===b.cDb.oFb?new av(r.fov,this.$c/this.kd,r.near,r.far):new Qu(-this.$c/2,this.$c/2,this.kd/2,-this.kd/2,r.near,r.far):(this.Rb.near=r.near,this.Rb.far=r.far,this.Rb.fov=r.fov);this.Rb.up=r.up;this.Rb.updateProjectionMatrix();return this.Rb};
b.prototype.Yua=function(r){null==r?r=this.Rb.position.clone():r.copy(this.Rb.position);return this.gaa(r)};b.prototype.bSa=function(){var r=new Lp;return function(t){null==t&&(t=new Lp);return nc(this.jY,Wy)?this.gaa(t.copy(this.jY.vG())):this.Yua(t).add(this.Xxc(r))}}();b.prototype.vHd=function(r,t){this.Xwc(new Lp(0,1,0),r,t);return this};b.prototype.Xwc=function(r,t,u,w){var y=oz.I6a(this.Oj,function(v){return v.visible});if(null==y)return this;this.gaa(y.min);this.gaa(y.max);var A=new gy;y.getSize(A);
var x=new Lp;null==r&&(r=this.gaa(this.Rb.position.clone()).sub(y.getCenter(x)),r=r.normalize());w=null!=w?w:1;if(this.Rb instanceof av){var C=this.Rb.fov;A=.65*A.length();C=A/Math.sin(Math.PI/180*C*.5)}else{C=A.length()/2;A=this.getSize().ca();var z=this.getSize().da();this.Rb.left=-C*A/z;this.Rb.right=C*A/z;this.Rb.top=C;this.Rb.bottom=-C}C*=w;r.multiplyScalar(C).add(y.getCenter(x));this.HUa(r,x,t,u);return this};b.prototype.Xxc=function(r){null==r?r=new Lp(0,0,-1):r.set(0,0,-1);return r.applyEuler(this.Rb.rotation,
this.Rb.rotation.order)};b.prototype.Wqe=function(r){null==r&&(r=new Yt);this.Rb.updateMatrix();return r.copy(this.Rb.matrix)};b.prototype.iJd=function(r,t,u){this.HUa(r,null,t,u);return this};b.prototype.F5b=function(r,t,u){this.HUa(null,r,t,u);return this};b.prototype.HUa=function(r,t,u,w){null!=this.w_a&&(this.w_a.stop(),this.a8a().qLc(this.w_a),this.w_a=null);if(null==r&&null==t)return this;!0===u?(this.w_a=new UA({plot:this,position:r,lookat:t,duration:w}),this.a8a().ORb(this.w_a)):(null!=r&&
this.Rb.position.copy(this.qC(r.clone())),null!=t&&this.Rb.lookAt(this.qC(t.clone())),null!=this.jY&&this.jY.setOptions({position:null!=r?this.qC(r.clone()):void 0,lookat:null!=t?this.qC(t.clone()):void 0}),this.Xf(new gz({type:fz.Camera,source:this.Rb,args:[]})));return this};b.prototype.Joe=function(r,t){null!=r&&this.Rb.position.copy(this.qC(r.clone()));null!=t&&this.Rb.lookAt(this.qC(t.clone()));this.jY.setOptions({position:null!=r?this.qC(r.clone()):void 0,lookat:null!=t?this.qC(t.clone()):void 0});
this.Xf(new gz({type:fz.Camera,source:this.Rb,args:[]}));return this};b.prototype.getRoot=function(){return this.Eta};b.prototype.Zub=function(){return this.ps};b.prototype.a8a=function(){return this.hhb};b.prototype.wld=function(){return this.iY};b.prototype.rya=function(){var r=this.ps,t=this.Rb;this.ps.traverse(function(u){null!=u.rya&&u.rya(r,t)})};var q=function(){for(var r=[],t=0;8>t;t++)r.push(new Lp);var u=new Lp;return function(w,y,A){r[0].set(w.min.x,w.min.y,w.min.z);r[1].set(w.max.x,w.min.y,
w.min.z);r[2].set(w.max.x,w.max.y,w.min.z);r[3].set(w.max.x,w.max.y,w.max.z);r[4].set(w.max.x,w.min.y,w.max.z);r[5].set(w.min.x,w.max.y,w.min.z);r[6].set(w.min.x,w.max.y,w.max.z);r[7].set(w.min.x,w.min.y,w.max.z);for(var x=w=-1,C=Number.MAX_VALUE,z=-Number.MAX_VALUE,v=0;8>v;v++){var B=u.subVectors(r[v],y).dot(A);B<C&&(w=v,C=B);B>z&&(x=v,z=B)}return{min:r[w],svc:C,max:r[x],rvc:z}}}();b.prototype.$ad=function(r){m.copy(this.Rb.position);this.Xxc(l);var t=q(r,m,l),u=t.svc;r=t.rvc;var w=(t.rvc-t.svc)/
100;t=(r+u)/2;var y=t/4;u-=w;r+=w;r-u<y&&(u=t-y,r=t+y);this.eNb&&u<r/this.eNb&&(u=r/this.eNb);this.Rb.near=this.bgc?Math.max(u,this.g8c):this.Rb.near;this.Rb.far=this.Zfc?Math.max(r,this.f8c):this.Rb.far;this.Rb.updateProjectionMatrix()};b.prototype.ied=function(){if(!n){n=[];for(var r=0;8>r;r++)n.push(new Lp)}r=n;r[0].set(-1,-1,-1);r[1].set(-1,-1,1);r[2].set(-1,1,-1);r[3].set(-1,1,1);r[4].set(1,-1,-1);r[5].set(1,-1,1);r[6].set(1,1,-1);r[7].set(1,1,1);for(var t=new uq,u=0;8>u;u++)r[u].unproject(this.Rb),
t.expandByPoint(r[u]);return t};b.prototype.ayb=function(r){var t=null;r&&r.n3b&&(t=r.n3b.tAd,c(t),r=oz.urd(t,this,this.Rb,r.n3b.QDd),t.copy(r));t||(t=this.pa(!0,a).clone());!0!==this.bgc&&!0!==this.Zfc||this.$ad(t);r=this.ied();t.intersectsBox(r)&&t.intersect(r);c(t);this.bHb&&(t.getCenter(this.fda).negate(),this.Oj.position.add(this.fda),this.Rb.position.add(this.fda),t.min.add(this.fda),t.max.add(this.fda));this.Rb.updateMatrixWorld();e(this.Oj,!0);t=this.CTa();if(null!=t){this.Rb.near>p&&(this.Rb.near=
p,this.Rb.updateProjectionMatrix());if(null==this.F3){if(this.Rb instanceof av){r=2*this.Rb.near*Math.tan(this.Rb.fov*Math.PI/360)/this.Rb.zoom;var u=r*this.Rb.aspect}else r=(this.Rb.top-this.Rb.bottom)/this.Rb.zoom,u=(this.Rb.right-this.Rb.left)/this.Rb.zoom;r=new cv(u,r);u=new au({transparent:!0});this.F3=new $t(r,u);this.F3.Qr=function(){return!1}}this.F3.userData.BRd!==t&&(this.F3.material.map=(new Cx).load(Bj.GRa(t,this.$c*ac(),this.kd*ac(),!1,!1,t.ga())),this.F3.userData.BRd=t);this.F3.parent!==
this.ps&&this.ps.add(this.F3);this.Rb.getWorldDirection(this.F3.position);this.F3.position.multiplyScalar(this.Rb.near+1);this.F3.position.add(this.Rb.position);this.F3.setRotationFromQuaternion(this.Rb.quaternion)}};b.prototype.csb=function(){return function(){this.bHb&&(this.Oj.position.sub(this.fda),this.Rb.position.sub(this.fda),this.fda.set(0,0,0));this.Rb.updateProjectionMatrix();this.Rb.updateMatrixWorld();e(this.Oj,!0)}}();b.prototype.render=function(){return function(){this.notify(fz.lac,
this);this.ayb();var r=this;this.ps.traverseVisible(function(t){null!=t.ai&&t.ai(r.ps,r.Rb,r,r.zm)});null!=this.iY&&this.iY.render(r.ps,r.Rb);this.Emc?this.BF.render():this.zm.render(this.ps,this.Rb);this.xLa&&(this.Rb.position.sub(this.fda),this.jY.DT(),this.Rb.position.add(this.fda));this.dLb&&this.dLb.sGc()&&this.dLb.$Vc();this.csb();this.ps.traverseVisible(function(t){null!=t.K3&&t.K3(r.ps,r.Rb,r,r.zm)});this.notify(fz.NXa,this)}}();b.prototype.setSize=function(r,t,u){var w=this.zm.getSize(h),
y=this.zm.getPixelRatio();u=isNaN(u)?ac():u;if(w.width===r&&w.height===t&&u===y)return this;if(this.Rb instanceof av)this.Rb.aspect=r/t;else if(this.Rb instanceof Qu&&this.H8c===b.iFb.UEb){if(w.width!==r){var A=(this.Rb.right-this.Rb.left)/2;y=this.Rb.left+A;A=A/w.width*r;this.Rb.left=y-A;this.Rb.right=y+A}w.height!==t&&(A=(this.Rb.top-this.Rb.bottom)/2,y=this.Rb.bottom+A,w=A/w.height*t,this.Rb.bottom=y-w,this.Rb.top=y+w)}this.Rb.updateProjectionMatrix();this.zm.setSize(r,t);this.Emc&&this.BF.setSize(r,
t);isNaN(u)||this.zm.setPixelRatio(u);null!=this.iY&&(w=Math.min(r,t),this.iY.setSize(Math.floor(w/6),u));u=this.$c;w=this.kd;this.$c=r;this.kd=t;this.Xf(new gz({type:fz.Vpa,source:this,args:{dve:new Vd(u,w),current:new Vd(r,t)}}));return this};b.prototype.Lad=function(r){null!=this.BF&&r instanceof xA&&this.BF.vQa(r)};b.prototype.JBc=function(){return null==this.BF?[]:this.BF.Hub()};b.prototype.getSize=function(r){return r?r.setSize(this.$c,this.kd):new Vd(this.$c,this.kd)};b.prototype.LSa=function(){var r=
new Lp;return this.pa().getCenter(r)};b.prototype.pa=function(r,t){null==t&&(t=a);if(r||t!==a)return this.Oj.updateMatrixWorld(!0),r=oz.I6a(this.Oj,t,r),null==r&&(r=new uq),r;this.cNb&&this.ur(t);return this.ZNa.clone()};b.prototype.project=function(r){this.Rb.updateMatrixWorld();r.project(this.Rb);return r};b.prototype.bSb=function(r){this.uk.push(r);r.setOptions({plot:this,domelement:this.zm.domElement});return this};b.prototype.Wb=function(r){for(var t=0;t<this.uk.length;t++)if(this.uk[t].Da()===
r)return this.uk[t];return null};b.prototype.pGd=function(r){var t=this.uk.indexOf(r);-1!==t&&this.uk.splice(t,1)[0].dispose();r===this.jY&&(this.jY=null);return this};b.prototype.pzd=function(){return this.uk};b.prototype.Xf=function(r){var t=fz;this.CL=!0;if(this.X7)if(r instanceof gz){var u=r.Gq();u!==t.CN&&u!==t.uF&&u!==t.bZa||!this.O4c||(this.cNb=!0);null==this.iY||u!==t.Camera&&u!==t.Vpa||this.iY.Xf(r);this.notify(u,this,{source:r.nt(),args:r.Cxc()});r.dispose()}else this.notify(t.gb,this);
return this};b.prototype.ur=function(r,t){r=r||a;this.Oj.updateMatrixWorld(!0);r=oz.I6a(this.Oj,r,t);null==r?null==this.ZNa&&(r=10*this.bSa().distanceTo(this.Rb.position),t=this.bSa(),this.ZNa=new uq(t.clone().addScalar(-r),t.clone().addScalar(r))):(this.gaa(r.min),this.gaa(r.max),this.ZNa.copy(r));this.cNb=!1;return this};b.prototype.o4=function(){return this.zm};b.prototype.Yud=function(){return this.zm.info};b.prototype.vrd=function(){if(null==this.Ksa){var r=new Ar(this.$c,this.kd,ay);this.Ksa=
new oy(this.$c,this.kd,{depthTexture:r})}this.Ksa.width===this.$c&&this.Ksa.height===this.kd||this.Ksa.setSize(this.$c,this.kd);return this.Ksa};b.prototype.dispose=function(){xe.ya().SBb(this.Oj);this.Hta&&(this.Hta instanceof Kl?this.Hta.stop():Za.cancelAnimationFrame(this.Hta));this.uk.forEach(function(t){t.dispose()});this.uk=[];null!=this.iY&&this.iY.dispose();this.iY=null;null!=this.ps&&oz.dispose(this.ps.children);this.ps=null;null!=this.hhb&&this.hhb.dispose();this.hhb=null;null!=this.Ksa&&
this.Ksa.dispose();if(null!=this.zm){this.Be.removeChild(this.zm.domElement);null!=this.zm.dispose&&this.zm.dispose();var r=this.zm.getContext().getExtension("WEBGL_lose_context");r&&r.loseContext();this.zm=null}null!=this.BF&&(this.BF.dispose(),this.BF=null);this.aIb=this.jY=this.G6=this.sqa=this.Rb=this.Oj=this.Be=null;ue.prototype.dispose.call(this)};b.prototype.getCamera=function(){return this.Rb};b.prototype.getController=function(){return this.jY};b.prototype.iR=function(){return this.Oj};b.prototype.SV=
function(){return this.Be};b.prototype.$xd=function(){return this.CL};b.prototype.J8b=function(r){xe.ya().q4b(this.Oj,r);return this};b.prototype.CTa=function(){return xe.ya().CTa(this.Oj)};b.prototype.rRc=function(r){this.bHb=r};return b}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoidGEiLCJyb290U2NhbGUiOiJxQyIsInJvb3RTY2FsZUludiI6ImdhYSIsImdldENhbWVyYUxvY2F0aW9uIjoiWXVhIiwiZ2V0Q2FtZXJhTG9va0F0IjoiYlNhIiwicmVzZXRDYW1lcmEiOiJ2SGQiLCJmaXRDYW1lcmEiOiJYd2MiLCJzZXRDYW1lcmFMb2NhdGlvbiI6ImlKZCIsInNldENhbWVyYUxvb2tBdCI6IkY1YiIsIm1vdmVDYW1lcmEiOiJIVWEiLCJnZXRTY2VuZSI6Ilp1YiIsImdldEFuaW1hdGlvbk1hbmFnZXIiOiJhOGEiLCJnZXRDb21wYXNzIjoid2xkIiwicHJlcGFyZVJlbmRlciI6ImF5YiIsImZpbmlzaFJlbmRlciI6ImNzYiIsImFkZE11bHRpcGFzcyI6IkxhZCIsImdldE11bHRpcGFzcyI6IkpCYyIsImdldE1vZGVsT3JpZ2luIjoiTFNhIiwiZ2V0TW9kZWxMaW1pdHMiOiJwYSIsImFkZFRvb2wiOiJiU2IiLCJnZXRUb29sQnlOYW1lIjoiV2IiLCJyZW1vdmVUb29sIjoicEdkIiwibGlzdFRvb2wiOiJwemQiLCJpbnZhbGlkYXRlT2JqZWN0IjoiWGYiLCJ1cGRhdGVNb2RlbExpbWl0cyI6InVyIiwiZ2V0UmVuZGVyZXIiOiJvNCIsImdldFVzYWdlU3RhdGlzdGljcyI6Ill1ZCIsImdldENvbnRhaW5lciI6IlNWIiwic2V0V2F0ZXJtYXJrIjoiSjhiIn19fSAg");var bB=/*#__PURE__*/function(){function c(b){xA.call(this);this.hb=G(b,{clearalpha:0},!0);this.Rdd=this.hb.clearalpha;this.clear=!0;this.axb=!1;this.type="RenderPass";this.sz=b.scene;this.TL=b.camera;this.o3a=b.overridematerial;this.b5c=!1;this.setOptions(this.hb)}var a=new Pq;L(c,"geotoolkit3d.postprocessing.RenderPass");D(c,xA);c.prototype.setOptions=function(b){this.hb=G(b,this.hb);b.overridematerial&&(this.o3a=b.overridematerial,this.o3a.needsUpdate=!0);null!=b.enabled&&(this.enabled=b.enabled);return this};
c.prototype.ta=function(){return this.hb};c.prototype.setSize=function(){return this};c.prototype.dispose=function(){null!=this.o3a&&this.o3a.dispose()};c.prototype.render=function(b,d,e){d=b.autoClear;b.autoClear=!1;this.sz.overrideMaterial=this.o3a;if(this.hb.clearcolor){var f=b.getClearColor(a).getHex();var g=b.getClearAlpha();b.setClearColor(this.hb.clearcolor,this.Rdd)}this.b5c&&b.clearDepth();b.setRenderTarget(this.Eoa?null:e);this.clear&&b.clear(b.autoClearColor,b.autoClearDepth,b.autoClearStencil);
b.render(this.sz,this.TL);this.hb.clearcolor&&b.setClearColor(f,g);this.sz.overrideMaterial=null;b.autoClear=d};return c}();var cB=/*#__PURE__*/va(/*#__PURE__*/function(){function c(){Aq.call(this);var a=new Nw;a.moveTo(0,0);var b=Xg.wFa(0,0,1,1),d=b[0];a.moveTo(d.mna(),d.pna());for(var e=0;e<b.length;++e)d=b[e],a.bezierCurveTo(d.nna(),d.qna(),d.ona(),d.rna(),d.Kfa(),d.Lfa());a.closePath();a=a.extractPoints().shape;b=[];for(d=0;d<a.length;d++)b.push(new Lp(a[d].x,a[d].y,0));this.setFromPoints(b)}D(c,Aq);L(c,"geotoolkit3d.scene.ellipse.EllipseGeometry");c.prototype.mwc=function(){for(var a=this.getAttribute("position").array,b=[],d=0;d<a.length/3-
1;d++)b.push(a[3*d],a[3*d+1],a[3*d+2],a[3*(d+1)],a[3*(d+1)+1],a[3*(d+1)+2]);return b};return c}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJleHRyYWN0U2VnbWVudFBvaW50cyI6Im13YyJ9fX0g");var dB=/*#__PURE__*/va(/*#__PURE__*/{Na:"center",Lac:"closest"},2,"eyJDZW50ZXIiOiJOYSIsIkNsb3Nlc3QiOiJMYWMifSAg"),eB=/*#__PURE__*/va(/*#__PURE__*/function(){function c(k){mz.call(this);k=k||{};this.ie=new nz("Missing Label!!!",k.hasOwnProperty("titlestyle")?null:{style:new Ki({font:"12px Arial",color:"white"})});this.ie.visible=!0;this.add(this.ie);this.Nob=1;var l=new Aq,m=[];m.push(new Lp(0,0,0));m.push(new Lp(1,1,1));l.setFromPoints(m);m=k.hasOwnProperty("linestyle")?null:Iz.LEa(new X);this.Cl=new rt(l,m);this.add(this.Cl);this.eH=new rt(new cB,m);this.eH.scale.set(0,0,0);this.add(this.eH);this.te=dB.Na;
this.nu=null;this.qLa=50;this.Uk=new uq;this.fAa=new Lp;this.TGb=null;this.setOptions(k)}for(var a,b=[],d=[],e=0;8>e;e++)b.push(new Lp),d.push(new Lp);var f=new Lp,g=new Lp,h=new Lp;D(c,mz);L(c,"geotoolkit3d.scene.AnnotationBase");c.prototype.ai=function(k,l,m,n){if(this.visible){mz.prototype.ai.call(this,k,l,m,n);this.nu||(this.parent.getBoundingBox?this.Uk.copy(this.parent.getBoundingBox()).getCenter(this.fAa):this.parent.geometry&&(this.parent.geometry.boundingBox||"function"!==typeof this.parent.geometry.computeBoundingBox||
this.parent.geometry.computeBoundingBox(),this.Uk.copy(this.parent.geometry.boundingBox).getCenter(this.fAa)));b[0].set(this.Uk.min.x,this.Uk.min.y,this.Uk.min.z);b[1].set(this.Uk.min.x,this.Uk.min.y,this.Uk.max.z);b[2].set(this.Uk.min.x,this.Uk.max.y,this.Uk.min.z);b[3].set(this.Uk.min.x,this.Uk.max.y,this.Uk.max.z);b[4].set(this.Uk.max.x,this.Uk.min.y,this.Uk.min.z);b[5].set(this.Uk.max.x,this.Uk.min.y,this.Uk.max.z);b[6].set(this.Uk.max.x,this.Uk.max.y,this.Uk.min.z);b[7].set(this.Uk.max.x,this.Uk.max.y,
this.Uk.max.z);var p,q=0;for(p=0;p<d.length;p++)oz.LXa(b[p],l,m.getSize(),d[p]);g.set(0,0,1).applyEuler(l.rotation);switch(this.ie.jb().pj()){case Fi.kc:f.set(-g.y,g.x,0);h.set(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE);for(p=0;p<d.length;p++)h.x<d[p].x&&h.z<d[p].z&&(h.x=d[p].x,h.y=d[p].y,q=p);break;case Fi.$b:for(f.set(g.y,-g.x,0),h.set(Number.MAX_VALUE,Number.MAX_VALUE,-Number.MAX_VALUE),p=0;p<d.length;p++)h.x>d[p].x&&h.z<d[p].z&&(h.x=d[p].x,h.y=d[p].y,q=p)}this.ie.mIa(f.normalize());
1!==this.Nob?(g.subVectors(this.TGb||b[q],this.fAa),g.setLength(g.length()*this.Nob),g.add(this.fAa),this.ie.position.copy(g)):this.ie.position.copy(this.TGb||b[q]);this.ie.ai(k,l,m,n);this.eH.visible=0<this.eH.scale.x&&0<this.Fm().length;if(this.te===c.Av.Lac&&!this.eH.visible&&(a=a||new kw,h.copy(this.fAa),this.parent.localToWorld(h),g.subVectors(h,l.position).normalize(),a.set(l.position,g),k=a.intersectObject(this.parent,!0),0<k.length)){l=Number.MAX_VALUE;for(p=q=0;p<k.length;p++)m=k[p],null!=
m.face&&l>m.distance&&(l=m.distance,q=p);this.Crc(this.parent.worldToLocal(k[q].point));return}this.Crc(this.fAa)}};c.prototype.Qq=function(k){this.ie.Eb(k);return this};c.prototype.Fm=function(){return this.ie.ee()};c.prototype.ZSc=function(k){this.Nob=k;return this};c.prototype.Ffa=function(){return this.Nob};c.prototype.bTc=function(k){this.ie.ib(k);return this};c.prototype.hEc=function(){return this.ie.jb()};c.prototype.ra=function(k){k=Iz.LEa(k);this.Cl.material=k;this.Cl.needsUpdate=!0;this.eH.material=
k;this.eH.needsUpdate=!0;return this};c.prototype.Ea=function(){return this.Cl.material.userData.EW};c.prototype.setMode=function(k){this.te=k;return this};c.prototype.qp=function(){return this.te};c.prototype.OVa=function(k){this.nu=k;this.ie.position.copy(k);this.Cl.position.copy(k);this.eH.position.copy(k);this.VSb();return this};c.prototype.Hx=function(){return this.nu};c.prototype.k0=function(k){this.ie.k0(k);return this};c.prototype.setOptions=function(k){if(null==k)return this;mz.prototype.setOptions.call(this,
k);k.hasOwnProperty("title")&&this.Qq(k.title);k.hasOwnProperty("titledistancefactor")&&this.ZSc(k.titledistancefactor);k.hasOwnProperty("titlestyle")&&this.bTc(k.titlestyle);k.hasOwnProperty("linestyle")&&this.ra(k.linestyle);k.hasOwnProperty("mode")&&this.setMode(k.mode);k.hasOwnProperty("anchorpoint")&&this.OVa(k.anchorpoint);k.hasOwnProperty("outline")&&this.k0(k.outline);return this};c.prototype.ta=function(){return xb({title:this.Fm(),titledistancefactor:this.Ffa(),titlestyle:this.hEc(),linestyle:this.Ea(),
mode:this.qp(),anchorpoint:this.Hx()},mz.prototype.ta.call(this))};c.prototype.mcb=function(k,l){this.eH.scale.copy(k);this.eH.rotation.copy(l);return this};c.prototype.dcb=function(k){this.TGb=k;return this};c.Av=dB;c.prototype.VSb=function(){this.Uk.min.x=this.nu.x-this.qLa-this.eH.scale.x;this.Uk.min.y=this.nu.y-this.qLa-this.eH.scale.y;this.Uk.min.z=this.nu.z-this.qLa;this.Uk.max.x=this.nu.x+this.qLa+this.eH.scale.x;this.Uk.max.y=this.nu.y+this.qLa+this.eH.scale.y;this.Uk.max.z=this.nu.z+this.qLa;
this.Uk.getCenter(this.fAa)};c.prototype.Crc=function(k){h.copy(k);var l=.75;if(this.eH.visible){this.eH.position.copy(k);g.set(0,0,1);g.applyEuler(this.eH.rotation);var m=Math.asin(g.x),n=Math.asin(g.y),p=Math.sign(this.ie.M9().x-k.x);k=Math.sign(this.ie.M9().y-k.y);var q=this.eH.scale.x*l*.5,r=this.eH.scale.y*l*.5;g.set(p*q*Math.cos(m),k*r*Math.cos(n),-p*q*Math.sin(m)-k*r*Math.sin(n));h.add(g);this.ie.M9().add(g)}this.Cl.position.copy(h);g.subVectors(this.ie.position,this.ie.M9()).multiplyScalar(l);
g.subVectors(this.ie.position,g);this.Cl.scale.copy(h.sub(g)).negate()};return c}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJiZWZvcmVSZW5kZXIiOiJhaSIsInNldFRpdGxlIjoiUXEiLCJnZXRUaXRsZSI6IkZtIiwic2V0VGl0bGVEaXN0YW5jZUZhY3RvciI6IlpTYyIsImdldFRpdGxlRGlzdGFuY2VGYWN0b3IiOiJGZmEiLCJzZXRUaXRsZVN0eWxlIjoiYlRjIiwiZ2V0VGl0bGVTdHlsZSI6ImhFYyIsInNldExpbmVTdHlsZSI6InJhIiwiZ2V0TGluZVN0eWxlIjoiRWEiLCJnZXRNb2RlIjoicXAiLCJzZXRBbmNob3JQb2ludCI6Ik9WYSIsImdldEFuY2hvclBvaW50IjoiSHgiLCJzZXRPdXRsaW5lIjoiazAiLCJnZXRPcHRpb25zIjoidGEifX19");var gB=/*#__PURE__*/function(){function c(a){mz.call(this);a=G(a,{zaxiscolor:new Pq(255),yaxiscolor:new Pq(65280),xaxiscolor:new Pq(16711680)},!0);var b=new Lp(0,0,0),d=new Lp(0,0,1);this.add(new eq(d,b,8,a.zaxiscolor,2,1));d=new Lp(0,1,0);this.add(new eq(d,b,8,a.yaxiscolor,2,1));d=new Lp(1,0,0);this.add(new eq(d,b,8,a.xaxiscolor,2,1))}D(c,mz);L(c,"geotoolkit3d.scene.compass.CompassAxis");return c}();var hB=/*#__PURE__*/function(){function c(){var a=new Nw,b=Xg.wFa(0,0,1,1),d=b[0];a.moveTo(d.mna(),d.pna());for(var e=0;e<b.length;++e)d=b[e],a.bezierCurveTo(d.nna(),d.qna(),d.ona(),d.rna(),d.Kfa(),d.Lfa());Pw.call(this,a)}D(c,Pw);L(c,"geotoolkit3d.scene.ellipse.FilledEllipseGeometry");return c}();var iB=/*#__PURE__*/va(/*#__PURE__*/{nb:"top",xd:"bottom",Na:"center"},2,"eyJUb3AiOiJuYiIsIkJvdHRvbSI6InhkIiwiQ2VudGVyIjoiTmEifSAg");var jB=/*#__PURE__*/va(/*#__PURE__*/function(){function c(f,g,h,k){e.set(0,0,0);f.min.x<g.min.x&&(e.x=(g.min.x-f.min.x)/h.x);f.max.x>g.max.x&&(e.x=(g.max.x-f.max.x)/h.x);f.min.y<g.min.y&&(e.y=(g.min.y-f.min.y)/h.y);f.max.y>g.max.y&&(e.y=(g.max.y-f.max.y)/h.y);f.min.z<g.min.z&&(e.z=(g.min.z-f.min.z)/h.z);f.max.z>g.max.z&&(e.z=(g.max.z-f.max.z)/h.z);k.add(e)}function a(){mz.call(this);this.rHb=new Lp;this.zgc=this.uic=!0}var b=new Lp,d=new Lp;D(a,mz);L(a,"geotoolkit3d.scene.grid.legend.PlaneLegendContainer");a.prototype.setOptions=
function(f){mz.prototype.setOptions.call(this,f);f.legendlabel!==this.sO&&(this.sO&&(this.remove(this.sO),oz.dispose(this.sO)),this.sO=f.legendlabel,this.add(this.sO));this.sd=f.grid;this.rHb.copy(f.position);this.position.copy(this.rHb);this.scale.copy(f.scale);this.uic=f.hideiftoolarge;this.zgc=f.centerbeforehiding;return this};var e=new Lp;a.prototype.ai=function(f,g,h,k){mz.prototype.ai.call(this,f,g,h,k);if(!this.sd||!this.sO||!this.visible)return this;this.position.copy(this.rHb);this.updateMatrixWorld();
this.sO.visible=!0;if(!this.uic)return this;this.sO.ai(f,g,h,k);this.sO.K3(f,g,h,k);this.sO.computeBoundingBox();f=this.sO.getBoundingBox();f.getSize(b);g=this.sd.Jfa();g.getSize(d);this.sO.visible=!1;if(b.x>d.x||b.y>d.y||b.z>d.z)return this;if(g.containsBox(f))return this.sO.visible=!0,this;this.zgc&&(c(f,g,d,this.position),this.updateMatrixWorld(),this.sO.visible=!0);return this};a.prototype.dispose=function(){mz.prototype.dispose.call(this);oz.dispose(this.sO);this.sd=this.sO=null};return a}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJiZWZvcmVSZW5kZXIiOiJhaSJ9fX0g");var kB=/*#__PURE__*/function(){function c(b){b.defines.hasOwnProperty("addedLabelShaders")||(b.defines.addedLabelShaders=!0,b.uniforms.map={value:new Bx},b.uniforms.uColor={value:new Pq("white")})}function a(){}L(a,"geotoolkit3d.util.shaders.LabelShaders");a.x0c="attribute vec2 texcoord;\nattribute vec2 texcoordInv;\nvarying vec2 vTexcoord;\nvarying vec2 vTexcoordInv;\n#include <common>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n    vTexcoord = texcoord;\n    vTexcoordInv = texcoordInv;\n    #include <uv2_vertex>\n    #include <color_vertex>\n    #include <skinbase_vertex>\n    vec4 mvPosition = vec4( position, 1.0 );\n    mvPosition = modelViewMatrix * mvPosition;\n    gl_Position = projectionMatrix * mvPosition;\n    #include <logdepthbuf_vertex>\n    #include <clipping_planes_vertex>\n    #include <envmap_vertex>\n    #include <fog_vertex>\n}";a.w0c=
"uniform vec3 uColor;\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D map;\nvarying vec2 vTexcoord;\nvarying vec2 vTexcoordInv;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n    #include <clipping_planes_fragment>\n    #include <logdepthbuf_fragment>\n    #include <color_fragment>\n    #include <alphamap_fragment>\n    #include <alphatest_fragment>\n    #include <specularmap_fragment>\n    #include <aomap_fragment>\n    #include <envmap_fragment>\n    vec4 textColor = vec4(uColor, 1);\n    if (gl_FrontFacing) {\n        gl_FragColor = textColor * texture2D(map, vTexcoord);\n    } else {\n        gl_FragColor = textColor * texture2D(map, vTexcoordInv);\n    }\n    #include <tonemapping_fragment>\n    #include <encodings_fragment>\n    #include <fog_fragment>\n    #include <premultiplied_alpha_fragment>\n    #include <dithering_fragment>\n}";
a.setOptions=function(b,d){null!=d&&(c(b),null!=d.map&&(b.uniforms.map.value=d.map),null!=d.textcolor&&(b.uniforms.uColor.value=new Pq(d.textcolor),b.uniforms.uColor.needsUpdate=!0))};return a}();var lB=/*#__PURE__*/function(){function c(a){Lw.call(this);this.type="LabelMaterial";var b=xb(a,{opacity:1,renderside:Gr},!0);this.side=a.renderside;this.opacity=b.opacity;this.transparent=!0;this.vertexShader=kB.x0c;this.fragmentShader=kB.w0c;this.map=b.map;this.setOptions(b)}D(c,Lw);L(c,"geotoolkit3d.scene.label.LabelMaterial");c.prototype.setOptions=function(a){a.hasOwnProperty("renderside")&&(this.side=a.renderside);a.hasOwnProperty("opacity")&&(this.opacity=a.opacity);kB.setOptions(this,a)};return c}();var mB=/*#__PURE__*/function(){function c(d,e){Aq.call(this);this.type="LabelGeometry";var f=d/2,g=e/2,h=a+1,k=b+1,l=d/a,m=e/b;e=[];d=[];for(var n=[],p=[],q=[],r=0;r<k;r++)for(var t=r*m-g,u=0;u<h;u++){var w=u*l-f;d.push(w,-t,0);n.push(0,0,1);p.push(u/a);p.push(1-r/b);q.push(1-u/a);q.push(1-r/b)}for(f=0;f<a;f++)for(g=0;g<b;g++)k=g+h*g,l=g+h*(f+1),m=g+1+h*(f+1),r=g+1+h*f,e.push(k,l,r),e.push(l,m,r);this.setIndex(e);this.setAttribute("position",new es(d,3));this.setAttribute("normal",new es(n,3));this.setAttribute("texcoord",
new es(p,2));this.setAttribute("texcoordInv",new es(q,2))}var a=1,b=1;D(c,Aq);L(c,"geotoolkit3d.scene.label.LabelGeometry");return c}();var nB=/*#__PURE__*/va(/*#__PURE__*/function(){function c(w,y,A){this.Od=w;this.kR=y;this.tka=A}for(var a=null,b=[new Lp,new Lp,new Lp],d=[],e=null,f=[new Lp,new Lp,new Lp],g=[],h=[[],[],[]],k=[[],[],[]],l=[],m=new Lp,n=new Lp,p=new Lp,q=new Lp,r=new Lp,t=Array(8),u=0;u<t.length;u++)t[u]=new Lp;L(c,"geotoolkit3d.util.OrientedBoundingBox");c.prototype.set=function(w,y,A){this.Od=w;this.kR=y;this.tka=A;return this};c.prototype.LG=function(w){this.Od=w;return this};c.prototype.rKd=function(w){this.kR=w;return this};c.prototype.LMd=
function(w){this.tka=w;return this};c.prototype.copy=function(w){this.Od.copy(w.getCenter());this.kR.copy(w.ifa());this.tka.copy(w.Pva());return this};c.prototype.clone=function(){return(new c).copy(this)};c.prototype.equals=function(w){return w.getCenter().equals(this.Od)&&w.ifa().equals(this.kR)&&w.Pva().equals(this.tka)};c.prototype.containsPoint=function(w){q.subVectors(w,this.Od);this.tka.extractBasis(m,n,p);return Math.abs(q.dot(m))<=this.kR.x&&Math.abs(q.dot(n))<=this.kR.y&&Math.abs(q.dot(p))<=
this.kR.z};c.prototype.ixc=function(w){w.getCenter(this.Od);w.getSize(this.kR).multiplyScalar(.5);this.tka.identity();return this};c.prototype.zxd=function(w){w=(new c).ixc(w);return this.QFc(w)};c.prototype.intersectsPlane=function(w){this.tka.extractBasis(m,n,p);var y=this.kR.x*Math.abs(w.normal.dot(m))+this.kR.y*Math.abs(w.normal.dot(n))+this.kR.z*Math.abs(w.normal.dot(p));w=w.normal.dot(this.Od)-w.constant;return Math.abs(w)<=y};c.prototype.QFc=function(w,y){null==y&&(y=Number.EPSILON);a=this.Od;
d[0]=this.kR.x;d[1]=this.kR.y;d[2]=this.kR.z;this.tka.extractBasis(b[0],b[1],b[2]);e=w.getCenter();var A=w.ifa();g[0]=A.x;g[1]=A.y;g[2]=A.z;w.Pva().extractBasis(f[0],f[1],f[2]);for(w=0;3>w;w++)for(A=0;3>A;A++)h[w][A]=b[w].dot(f[A]);q.subVectors(e,a);l[0]=q.dot(b[0]);l[1]=q.dot(b[1]);l[2]=q.dot(b[2]);for(w=0;3>w;w++)for(A=0;3>A;A++)k[w][A]=Math.abs(h[w][A])+y;for(w=0;3>w;w++)if(y=d[w],A=g[0]*k[w][0]+g[1]*k[w][1]+g[2]*k[w][2],Math.abs(l[w])>y+A)return!1;for(w=0;3>w;w++)if(y=d[0]*k[0][w]+d[1]*k[1][w]+
d[2]*k[2][w],A=g[w],Math.abs(l[0]*h[0][w]+l[1]*h[1][w]+l[2]*h[2][w])>y+A)return!1;y=d[1]*k[2][0]+d[2]*k[1][0];A=g[1]*k[0][2]+g[2]*k[0][1];if(Math.abs(l[2]*h[1][0]-l[1]*h[2][0])>y+A)return!1;y=d[1]*k[2][1]+d[2]*k[1][1];A=g[0]*k[0][2]+g[2]*k[0][0];if(Math.abs(l[2]*h[1][1]-l[1]*h[2][1])>y+A)return!1;y=d[1]*k[2][2]+d[2]*k[1][2];A=g[0]*k[0][1]+g[1]*k[0][0];if(Math.abs(l[2]*h[1][2]-l[1]*h[2][2])>y+A)return!1;y=d[0]*k[2][0]+d[2]*k[0][0];A=g[1]*k[1][2]+g[2]*k[1][1];if(Math.abs(l[0]*h[2][0]-l[2]*h[0][0])>
y+A)return!1;y=d[0]*k[2][1]+d[2]*k[0][1];A=g[0]*k[1][2]+g[2]*k[1][0];if(Math.abs(l[0]*h[2][1]-l[2]*h[0][1])>y+A)return!1;y=d[0]*k[2][2]+d[2]*k[0][2];A=g[0]*k[1][1]+g[1]*k[1][0];if(Math.abs(l[0]*h[2][2]-l[2]*h[0][2])>y+A)return!1;y=d[0]*k[1][0]+d[1]*k[0][0];A=g[1]*k[2][2]+g[2]*k[2][1];if(Math.abs(l[1]*h[0][0]-l[0]*h[1][0])>y+A)return!1;y=d[0]*k[1][1]+d[1]*k[0][1];A=g[0]*k[2][2]+g[2]*k[2][0];if(Math.abs(l[1]*h[0][1]-l[0]*h[1][1])>y+A)return!1;y=d[0]*k[1][2]+d[1]*k[0][2];A=g[0]*k[2][1]+g[1]*k[2][0];
return Math.abs(l[1]*h[0][2]-l[0]*h[1][2])>y+A?!1:!0};c.prototype.WUc=function(w){q.set(0,0,0).sub(this.ifa());r.copy(this.ifa());var y=this.Pva(),A=this.getCenter();t[0].set(q.x,q.y,q.z).applyMatrix3(y).add(A);t[1].set(q.x,r.y,q.z).applyMatrix3(y).add(A);t[2].set(r.x,r.y,q.z).applyMatrix3(y).add(A);t[3].set(r.x,q.y,q.z).applyMatrix3(y).add(A);t[4].set(q.x,q.y,r.z).applyMatrix3(y).add(A);t[5].set(q.x,r.y,r.z).applyMatrix3(y).add(A);t[6].set(r.x,r.y,r.z).applyMatrix3(y).add(A);t[7].set(r.x,q.y,r.z).applyMatrix3(y).add(A);
w=w?w:new uq;w.setFromPoints(t);return w};c.prototype.getCenter=function(){return this.Od};c.prototype.ifa=function(){return this.kR};c.prototype.Pva=function(){return this.tka};return c}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJzZXRDZW50ZXIiOiJMRyIsInNldEhhbGZTaXplIjoicktkIiwic2V0Um90YXRpb24iOiJMTWQiLCJmcm9tQm94MyI6Iml4YyIsImludGVyc2VjdHNCb3gzIjoienhkIiwiaW50ZXJzZWN0c09yaWVudGVkQm91bmRpbmdCb3giOiJRRmMiLCJ0b1RocmVlQm94IjoiV1VjIiwiZ2V0SGFsZlNpemUiOiJpZmEiLCJnZXRSb3RhdGlvbiI6IlB2YSJ9fX0g");var oB=/*#__PURE__*/va(/*#__PURE__*/function(){function c(x){mz.call(this);this.ug(!1);this.CB=new $t(new mB(1,1),a(x.canvas));this.add(this.CB);var C=xb(x,{enabled:!0,style:new Ki({font:"10px Arial",color:"rgba(0, 0, 0, 1.0)",alignment:b,baseline:d}),outline:{enabled:!1,innercolor:"white",outlinecolor:"black",thickness:6},issizeindevice:!0,renderside:Gr,opacity:1,scale:new Lp(1,1,1),normal:h,freeorientation:!1,enforcetextupright:!0,facingoffset:0,verticalanchor:iB.Na});null==x.origin&&hb("geotoolkit3d.scene.label.Label: origin cannot be null");
this.Qi=C.canvas;this.Gg=this.Qi.getContext("2d");this.qq=C.origin instanceof Lp?C.origin:(new Lp).fromArray(C.origin);this.ZR=C.zmin;this.YR=C.zmax;this.Pb=C.text||this.qq.z;this.AH=C.normal instanceof Lp?C.normal.clone():(new Lp).fromArray(C.normal);this.O5a=this.AH.clone();this.nLb=C.freeorientation;this.Ahc=C.enforcetextupright;this.r0a=C.facingoffset;this.lf=C.style;this.jRb=C.verticalanchor;this.CB.scale.copy(C.scale);this.whb=this.CB.scale.clone();this.visible=C.enabled;this.Zna=this.boundingSphere=
this.boundingBox=null;this.fob=C.issizeindevice;this.QNb=C.outline.enabled||!1;this.RNb=C.outline;this.hpb=!0;this.I0();this.hZ=!1;this.fob=C.issizeindevice;this.MR=this.Qi.width;this.LR=this.Qi.height;this.M4a=new Lp(this.MR,this.LR,1);this.gob=1;this.jLb=new Lp(1,1,1);this.Qhc=new tv;this.wOb=new tv;this.I1a=new Lp;this.J1a=new Yt;this.HRb=new Lp;this.CB.material.setOptions({opacity:C.opacity,renderside:C.renderside,textcolor:this.lf.AD().H5()});this.position.copy(this.qq);this.frustumCulled=!1;
this.name="label";this.cWc();this.computeBoundingSphere()}function a(x){x=new Hq(x);x.minFilter=Ct;x.generateMipmaps=!1;return new lB({map:x})}var b=Fi.kc,d=Di.xd,e=new Lp(1,0,0),f=new Lp(0,1,0),g=new Lp(0,0,1),h=e,k=/<br\s*\/?>|\r\n|\n|\r/g,l=new Vd,m=new Lp,n=new Lp,p=new tv,q=new Lp,r=new Lp,t=new Yt,u=new tv,w=new tv,y=new tv,A=new Lp;D(c,mz);L(c,"geotoolkit3d.scene.label.Label");c.prototype.gMd=function(x){this.setOptions({origin:x});return this};c.prototype.dKd=function(x){this.setOptions({normal:x});
return this};c.prototype.cWc=function(){this.AH.normalize();this.O5a.copy(this.AH);this.O5a.z=0;this.O5a.normalize();var x=e.angleTo(this.O5a);r.crossVectors(e,this.O5a);0>r.z&&(x=-x);u.setFromAxisAngle(g,x);x=this.nLb?g.angleTo(this.AH):Math.PI/2;w.setFromAxisAngle(f,x);y.setFromAxisAngle(g,Math.PI/2);this.wOb.copy(u).multiply(w).multiply(y).normalize();this.CB.quaternion.copy(this.wOb);y.setFromAxisAngle(g,-Math.PI/2);this.Qhc.copy(u).multiply(w).multiply(y).normalize()};c.prototype.setOptions=
function(x){x=x||{};null!=x.style&&(this.lf=x.style,this.CB.material.setOptions({textcolor:this.lf.AD().H5()}),this.hpb=!0);null!=x.doublesided&&(this.CB.material.side=x.doublesided?Gr:ms);null!=x.enforcetextupright&&(this.Ahc=x.enforcetextupright);var C=!1;x.origin&&(Array.isArray(x.origin)?this.qq.fromArray(x.origin):this.qq.copy(x.origin),this.position.copy(this.qq),C=!0);var z=!1;x.normal&&(Array.isArray(x.normal)?this.AH.fromArray(x.normal):this.AH.copy(x.normal),z=!0);null!=x.freeorientation&&
x.freeorientation!==this.nLb&&(this.nLb=x.freeorientation,z=!0);null!=x.facingoffset&&x.facingoffset!==this.r0a&&(this.r0a=x.facingoffset,C=!0);z&&this.cWc();(C||z)&&this.computeBoundingSphere();return this};c.prototype.I0=function(){var x=rg.measureText(this.Pb,this.lf),C=x.ca(),z=x.da();x=(this.Pb+"").split(k);var v=0;this.QNb&&(v=this.RNb.thickness,C+=2*v,z+=2*v*x.length);var B=z/x.length;this.Gg.clearRect(0,0,this.Qi.width,this.Qi.height);this.Qi.width=C;this.Qi.height=z;this.Gg.font=this.lf.lt();
this.QNb?(this.Gg.strokeStyle=this.RNb.outlinecolor,this.Gg.lineWidth=v,this.Gg.lineJoin="miter",this.Gg.miterLimit=3):this.Gg.fillStyle="white";this.Gg.textBaseline=d;this.Gg.textAlign=b;C=B;for(z=0;z<x.length;z++)this.QNb?(this.Gg.strokeText(x[z],v,C-v),this.Gg.fillStyle=this.RNb.innercolor,this.Gg.fillText(x[z],v,C-v)):this.Gg.fillText(x[z],0,C),C+=B;this.hZ=!1;this.position.copy(this.qq);this.CB.material.map.needsUpdate=!0};c.prototype.computeBoundingBox=function(){this.Xqb();this.boundingBox||
(this.boundingBox=new uq);this.xub().WUc(this.boundingBox)};c.prototype.computeBoundingSphere=function(){this.computeBoundingBox();this.boundingSphere||(this.boundingSphere=new Xw);this.boundingBox.getBoundingSphere(this.boundingSphere)};c.prototype.Xqb=function(){this.Zna||(this.Zna=new nB(new Lp,new Lp,new Xt));this.whb.copy(this.CB.scale);this.CB.scale.multiply(this.M4a);this.fob&&this.CB.scale.multiplyScalar(this.gob);this.updateMatrixWorld();this.CB.matrixWorld.decompose(q,p,n);this.Zna.getCenter().copy(q);
this.CB.geometry.boundingBox||this.CB.geometry.computeBoundingBox();var x=this.CB.geometry.boundingBox;this.Zna.ifa().copy(x.max).sub(x.min).divideScalar(2);this.Zna.ifa().multiply(n);t.makeRotationFromQuaternion(p);this.Zna.Pva().setFromMatrix4(t);this.CB.scale.copy(this.whb)};c.prototype.getBoundingBox=function(){this.boundingBox||this.computeBoundingBox();return this.boundingBox};c.prototype.getBoundingSphere=function(){this.boundingSphere||this.computeBoundingSphere();return this.boundingSphere};
c.prototype.xub=function(){this.Zna||this.Xqb();return this.Zna};c.prototype.Eb=function(x){this.Pb!==x&&(this.Pb=x,this.hpb=!0)};c.prototype.ee=function(){return this.Pb};c.prototype.cbd=function(x,C,z){x=x.distanceTo(C.position);C instanceof av?(C=C.fov*Math.PI/180,C=2*Math.tan(C/2)*x):C=C.top-C.bottom;z=z.userData.plot.getSize(l).da();this.gob=C/z};c.prototype.ald=function(x){this.I1a.equals(x.position)&&this.J1a.equals(x.projectionMatrix)||(this.I1a.copy(x.position),this.J1a.copy(x.projectionMatrix),
x.getWorldDirection(this.HRb),this.HRb.z=0);return this.HRb};c.prototype.ai=function(x,C,z,v){if(!this.visible)return this;this.position.copy(this.qq);mz.prototype.ai.call(this,x,C,z,v);this.whb.copy(this.CB.scale);this.hpb&&(this.hpb=!1,this.I0());this.hZ||(mz.prototype.Xf.call(this),this.MR=this.Qi.width,this.LR=this.Qi.height,this.hZ=!0);this.M4a.set(this.MR,this.LR,1);this.fob&&(z=this.parent.localToWorld(m.copy(this.position)),this.cbd(z,C,x));m.setFromMatrixScale(this.parent.matrixWorld);this.jLb.set(1/
m.x,1/m.y,1/m.z);x=0!==this.r0a||this.jRb!==iB.Na;A.set(0,0,0);0!==this.r0a&&(A.z=this.r0a*this.M4a.y);this.jRb!==iB.Na&&(A.y=this.M4a.y/2,this.jRb===iB.nb&&(A.y*=-1));x&&(A.applyQuaternion(this.CB.quaternion),A.multiply(this.jLb));this.CB.scale.multiply(this.M4a);this.fob&&(x&&A.multiplyScalar(this.gob),this.CB.scale.multiplyScalar(this.gob));this.position.add(A);this.Ahc&&(C=this.ald(C),m.copy(this.AH),m.z=0,C=this.AH.angleTo(C)<Math.PI/2,this.CB.quaternion.copy(C?this.Qhc:this.wOb));this.scale.copy(this.jLb);
return this};c.prototype.K3=function(x,C,z,v){if(!this.visible)return this;mz.prototype.K3.call(this,x,C,z,v);this.CB.scale.copy(this.whb);return this};c.prototype.u_=function(){return new gy(this.MR,this.LR)};c.prototype.dispose=function(){mz.prototype.dispose.call(this);oz.dispose(this.CB);this.Zna=this.boundingSphere=this.boundingBox=null};return c}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJzZXRPcmlnaW4iOiJnTWQiLCJzZXRGYWNpbmdEaXJlY3Rpb24iOiJkS2QiLCJjb21wdXRlT3JpZW50ZWRCb3VuZGluZ0JveCI6IlhxYiIsImdldE9yaWVudGVkQm91bmRpbmdCb3giOiJ4dWIiLCJzZXRUZXh0IjoiRWIiLCJnZXRUZXh0IjoiZWUiLCJiZWZvcmVSZW5kZXIiOiJhaSIsImFmdGVyUmVuZGVyIjoiSzMiLCJnZXRUZXh0dXJlRGltZW5zaW9uIjoidV8ifX19");var pB=/*#__PURE__*/va(/*#__PURE__*/function(){function c(k){this.hb={};this.sd=null;this.Lsa=Array(4);for(var l=0;4>l;l++)this.Lsa[l]=new jB;this.Qi=Array(4);this.setOptions(k)}var a={front:{name:"front",arraypos:0,labelToGrid:(new Yt).set(-1,0,0,.5,0,0,1,0,0,1,0,-.5,0,0,0,1),normal:new Lp(0,1,0)},back:{name:"back",arraypos:1,labelToGrid:(new Yt).set(1,0,0,-.5,0,0,-1,0,0,1,0,-.5,0,0,0,1),normal:new Lp(0,-1,0)},left:{name:"left",arraypos:2,labelToGrid:(new Yt).set(0,0,1,0,1,0,0,-.5,0,1,0,-.5,0,0,0,1),normal:new Lp(1,0,0)},right:{name:"right",
arraypos:3,labelToGrid:(new Yt).set(0,0,-1,0,-1,0,0,.5,0,1,0,-.5,0,0,0,1),normal:new Lp(-1,0,0)}},b=new gy(.5,.5),d=iB.Na,e=new Mp,f=new Mp,g=new Mp,h=new gy(1,1);c.prototype.setOptions=function(k){this.hb=xb(k,this.hb);this.YBb()};c.prototype.qqc=function(k){var l=k.scale.x,m=k.scale.y;this.sd=k;h.x=Math.max(1,m/l);h.y=Math.max(1,l/m);this.YBb()};c.prototype.YBb=function(){if(this.hb.planes&&this.sd){var k=this.hb.planes;k.front&&this.yX(k.front,a.front,this.sd);k.back&&this.yX(k.back,a.back,this.sd);
k.left&&this.yX(k.left,a.left,this.sd);k.right&&this.yX(k.right,a.right,this.sd)}};c.prototype.yX=function(k,l,m){var n=l.arraypos,p=l.name;p=m.qZb()[p];p.remove(this.Lsa[n]);this.Qi[n]||(this.Qi[n]=wc(0,0,!0));var q=k.textoffset?k.textoffset:b,r=k.text?k.text:"Missing Text Option",t=null!=k.enable?k.enable:!0,u=null!=k.nearside?k.nearside:!1,w=null!=k.hideiftoolarge?k.hideiftoolarge:!0,y=null!=k.textscale?k.textscale:1,A=null!=k.centerbeforehiding?k.centerbeforehiding:!0,x=null!=k.verticalanchor?
k.verticalanchor:d;e.set(q.x,q.y,.49,1);u||(e.z-=.98);f.set(0,0,e.z,1);g.set(1,1,e.z,1);e.applyMatrix4(l.labelToGrid);f.applyMatrix4(l.labelToGrid);g.applyMatrix4(l.labelToGrid);q=null!=k.sizeindevice?k.sizeindevice:!0;q||(u=Math.abs(m.scale.x)+Math.abs(m.scale.y)+Math.abs(m.scale.z)/3,y*=u/500);r={canvas:this.Qi[n],origin:new Lp(0,0,0),normal:l.normal,text:r,enabled:t,issizeindevice:q,renderside:ms,verticalanchor:x,scale:new Lp(y,y,1)};k.style&&(r.style=k.style);k.outline&&(r.outline=k.outline);
t=k=1;switch(l.name){case "front":case "back":k*=h.x;break;case "left":case "right":t*=h.y}this.Lsa[n].setOptions({legendlabel:new oB(r),grid:m,position:new Lp(e.x,e.y,e.z),scale:new Lp(k,t,1),hideiftoolarge:w,centerbeforehiding:A});p.add(this.Lsa[n]);this.Lsa[n].Xf();m.Xf()};c.prototype.dispose=function(){if(this.Lsa)for(var k=0;k<this.Lsa.length;k++)oz.dispose(this.Lsa[k]);this.Qi=null};return c}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJhZGRUb0dyaWQiOiJxcWMifX19");var qB=/*#__PURE__*/va(/*#__PURE__*/function(){function c(n){mz.call(this);null==n.axis&&(n.axis={});null==n.grid&&(n.grid={});n.axis=G(n.axis,{textstyle:m,linestyle:k,formatter:d,outline:null});n.grid=G(n.grid,{linestyle:l});n=G(n,{count:3,modelcenter:0,modelsize:10});this.Cn=this.tu=this.Gc=null;this.setOptions(n);this.name=f}function a(n,p,q){n=new nz(n,{style:p});n.k0(q);return n}function b(n,p){var q=p.AD();return new lz({data:{positions:n},color:new Pq(q.lk()/255,q.kk()/255,q.ik()/255),linewidth:p.ca(),opacity:q.Ek()/255,
polygonoffset:!0,polygonoffsetfactor:.75})}function d(n){return n.toFixed(0)}var e="POLAR_AXIS",f="POLAR_GRID",g="POLAR_HORIZON",h="POLAR_VERTICAL",k=new X("white"),l=new X("grey"),m=new Ki({color:"white",font:"11px Arial"});D(c,mz);L(c,"geotoolkit3d.scene.grid.PolarGrid");c.prototype.setOptions=function(n){if(null==n)return this;mz.prototype.setOptions.call(this,n);for(var p=this.children.length-1;0<=p;p--)this.remove(this.children[p]);null==n.axis&&(n.axis={});null==n.grid&&(n.grid={});n.axis=G(n.axis,
{textstyle:this.LP(),linestyle:this.kma(),formatter:this.jma(),outline:this.Jw()});n.grid=G(n.grid,{linestyle:this.yma()});p=G(n,{count:this.Ix(),modelcenter:this.PYb(),modelsize:this.UYb()});this.Lkc=p.modelcenter;this.Tlb=p.modelsize;n=null!=n.axis.formatter&&"function"===typeof n.axis.formatter?n.axis.formatter:function(y){return y};for(var q=p.count,r=(new cB).mwc(),t=0;t<p.count;t++){var u=0===t||t===q-1,w=u?p.axis.linestyle:p.grid.linestyle;w=b(r,w);w.name=u?e:f;w.scale.set((q-t)/q,(q-t)/q,
(q-t)/q);this.add(w)}q=[-.5,0,0,.5,0,0];q=b(q,p.grid.linestyle);q.name=g;this.add(q);q=[0,-.5,0,0,.5,0];q=b(q,p.grid.linestyle);q.name=h;this.add(q);this.tu=n;this.Gc=p.axis.textstyle;this.Cn=p.axis.outline;t=n(this.Tlb-this.Lkc)+"";n=a(t,p.axis.textstyle,p.axis.outline);n.position.set(0,-.5,0);n.mIa(new Lp(0,-1,0));q=a(t,p.axis.textstyle,p.axis.outline);q.position.set(0,.5,0);q.mIa(new Lp(0,1,0));r=a(t,p.axis.textstyle,p.axis.outline);r.position.set(.5,0,0);r.mIa(new Lp(1,0,0));p=a(t,p.axis.textstyle,
p.axis.outline);p.position.set(-.5,0,0);p.mIa(new Lp(-1,0,0));this.add([n,q,r,p]);return this};c.prototype.ta=function(){return xb({axis:{textstyle:this.LP(),formatter:this.jma(),linestyle:this.kma(),outline:this.Jw()},grid:{linestyles:this.yma()},count:this.Ix(),modelcenter:this.PYb(),modelsize:this.UYb()},mz.prototype.ta.call(this))};c.prototype.yma=function(){var n=null;this.traverse(function(p){p.name===f&&(p=p.material[0]||p.material,n=p.userData.EW)});return n};c.prototype.kma=function(){var n=
null;this.traverse(function(p){p.name===e&&(p=p.material[0]||p.material,n=p.userData.EW)});return n};c.prototype.LP=function(){return this.Gc};c.prototype.jma=function(){return this.tu};c.prototype.Jw=function(){return this.Cn};c.prototype.Ix=function(){var n=0;this.traverse(function(p){p.name!==f&&p.name!==e||n++});return n};c.prototype.PYb=function(){return this.Lkc};c.prototype.UYb=function(){return this.Tlb};return c}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoidGEiLCJnZXRPdXRsaW5lIjoiSnciLCJnZXRDb3VudCI6Ikl4IiwiZ2V0TW9kZWxDZW50ZXIiOiJQWWIiLCJnZXRNb2RlbFNpemUiOiJVWWIifX19");var rB=/*#__PURE__*/va(/*#__PURE__*/function(){function c(e){e=xb(e,{texturewidth:a,textureheight:a,backgroundfillstyle:null});IA.call(this,e);this.type="PlaneMaterial";this.lHb=this.qz=this.LR=this.MR=null;this.setOptions(e)}var a=256,b=128,d=4096;D(c,IA);L(c,"geotoolkit3d.scene.plane.PlaneMaterial");c.prototype.setOptions=function(e){if(null==e)return this;IA.prototype.setOptions.call(this,e);null!=e.texturewidth&&(this.MR=this.jtc(e.texturewidth));null!=e.textureheight&&(this.LR=this.jtc(e.textureheight));if(e.hasOwnProperty("backgroundfillstyle")){var f=
e.backgroundfillstyle;this.lHb=null==f||f instanceof rf?f:new rf(f)}null!=e.overlay&&(this.qz=e.overlay,this.juc(e.overlay));return this};c.prototype.jtc=function(e){return Math.min(d,Math.max(b,e))};c.prototype.juc=function(e){if(this.MR&&this.LR){null==this.map&&(this.map=new Bx);var f=this.map.image;null==f&&(f=wc(this.MR,this.LR,!0));if(f.getContext){var g=f;var h=f.getContext("2d");var k=Gh.zla({context:h,viewport:new U(0,0,g.width,g.height),pixelscale:1});h.clearRect(0,0,g.width,g.height);this.lHb&&
(k.qa(this.lHb),h.fillRect(0,0,g.width,g.height))}else{g=wc(this.MR,this.LR);h=g.getContext("2d");var l=ac();k=Gh.zla({context:h,viewport:new U(0,0,g.width,g.height),pixelscale:l});k.drawImage(this.map.image,0,0,f.width,f.height,0,0,g.width/l,g.height/l)}e.sa(k.JEc());e.render(k);this.map=new Hq(g);this.map.generateMipmaps=!0;this.map.minFilter=Ht;this.map.anisotropy=4}};c.prototype.u_=function(){return this.MR&&this.LR?new gy(this.MR,this.LR):new gy(a,a)};c.prototype.Jz=function(){return this.qz};
return c}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJjcmVhdGVVcGRhdGVPdmVybGF5IjoianVjIiwiZ2V0VGV4dHVyZURpbWVuc2lvbiI6InVfIn19fSAg");vz.sv(rB.Oa(),tz);var sB=/*#__PURE__*/function(){function c(a){mz.call(this,a);this.type="AbstractSurface"}D(c,mz);L(c,"geotoolkit3d.scene.surface.AbstractSurface");return c}();var tB=/*#__PURE__*/va(/*#__PURE__*/function(){function c(){}var a="#000000",b=new Lp,d=new st,e=new uq;L(c,"geotoolkit3d.util.intersection.AbstractIntersection");c.prototype.Jea=Fb;c.prototype.Kea=Fb;c.prototype.hFa=function(f,g,h){var k=!1,l=!1;g.traverse(function(n){if(n.Oa)if("geotoolkit3d.scene.reservoir.hexahedral.ReservoirGrid"===n.Oa())k=!0,g=n;else if(n instanceof sB||"geotoolkit3d.scene.seismic.Horizon"===n.Oa())l=!0,g=n});"function"!==typeof g.ta||h.hasOwnProperty("preservecolor")||(h.preservecolor=null!=g.ta().colorprovider);
var m=[];k?m=this.Jea(f,g,h):l?m=this.Kea(f,g,h):hb("geotoolkit3d.util.intersection.AbstractIntersection: does not support this type of object.");return m};c.prototype.X7a=function(f,g,h){f=f.normal.clone().normalize();h=(new Lp).subVectors(h,g).normalize();var k=f.clone().cross(h);g=(new Yt).set(g.x,g.x+h.x,g.x+k.x,g.x+f.x,g.y,g.y+h.y,g.y+k.y,g.y+f.y,g.z,g.z+h.z,g.z+k.z,g.z+f.z,1,1,1,1);f=(new Yt).set(0,0,1,0,0,1,0,0,0,0,0,1,1,1,1,1);return f.multiply(g.invert())};c.prototype.dma=function(f,g){var h=
new Lp,k=new Lp,l=new Lp,m=new bv,n=f.geometry,p=n.getAttribute("position"),q=n.getIndex();n=q.getX(0);var r=q.getY(0);q=q.getZ(0);f.localToWorld(h.set(p.getX(n),p.getY(n),p.getZ(n)));f.localToWorld(k.set(p.getX(r),p.getY(r),p.getZ(r)));f.localToWorld(l.set(p.getX(q),p.getY(q),p.getZ(q)));g.worldToLocal(h);g.worldToLocal(k);g.worldToLocal(l);m.setFromCoplanarPoints(h,k,l);return m};c.prototype.S7a=function(f){if(0===f.length)return null;for(var g=new ng({startColor:f[0][1]||a,endColor:f[f.length-
1][1]||a,startPoint:new M(0,0),endPoint:new M(1,0)}),h=1;h<f.length-1;h++)g.$n(f[h][0],f[h][1]||a);return g};c.prototype.nm=function(f,g,h,k){k=null==k?!0:k;h=g.Jz();null==h&&(h=new oi);var l=f.coordinates.x,m=f.coordinates.y;if(k)var n=new $n({x:l,y:m,visible:!0,linestyle:new X({width:f.linewidth,fill:f.fillstyle})});else{n=new go;for(k=0;k<l.length-1;k+=2){var p=k,q=k+1;n.add([l[p],l[q]],[m[p],m[q]])}n.ra(new X({width:f.linewidth,fill:f.fillstyle}))}h.OJ(n);g.sAb(h);"function"===typeof g.zFa?g.zFa().zC(null,
null,!0):"function"===typeof g.HP&&g.HP().zC(null,null,!0);return[n]};c.prototype.Sj=function(f,g,h){h=g.Jz();null==h&&(h=new oi);var k=[],l=f.coordinates.x,m=f.coordinates.y;f=f.fillstyle;for(var n=0;n<l.length;n++)if(!(3>l[n].length)){3<l[n].length&&V.a9b(l[n],m[n]);var p=new Vm({x:l[n],y:m[n],fillstyle:f[n]});h.OJ(p);k.push(p)}g.sAb(h);"function"===typeof g.zFa?g.zFa().zC(null,null,!0):"function"===typeof g.HP&&g.HP().zC(null,null,!0);return k};c.prototype.$Zb=function(f,g,h){function k(z,v,B,
E,H){for(var F=0;F<r.length;F++){var I=r[F];z[I[0]]!==z[I[1]]&&(d.start.set(z[I[0]],v[I[0]],B[I[0]]),d.end.set(z[I[1]],v[I[1]],B[I[1]]),H.intersectsLine(d)&&(H.intersectLine(d,b),p.push([b.x,b.y,b.z]),h&&(I=(l[E[I[1]]]*(b.x-z[I[0]])+l[E[I[0]]]*(z[I[1]]-b.x))/(z[I[1]]-z[I[0]]),q.push(n.rb(I).Nl()))))}}var l,m=g.ta().data,n=g.ta().colorprovider;null!=m&&null!=m.values?l=m.values:h=!1;var p=[],q=[];m=g.children[0];g=m.geometry.getIndex();m=m.geometry.getAttribute("position");for(var r=[[0,1],[1,2],[2,
0]],t=0;t<g.count;t+=3){var u=g.getX(t),w=g.getY(t),y=g.getZ(t),A=[m.getX(u),m.getX(w),m.getX(y)],x=[m.getY(u),m.getY(w),m.getY(y)],C=[m.getZ(u),m.getZ(w),m.getZ(y)];u=[u,w,y];k(A,x,C,u,f)}return f={coordinates:p,colors:q}};c.prototype.DZb=function(f,g,h){function k(u,w){for(var y=u.x,A=u.y,x=u.z,C=[],z=0;z<q.length;++z)d.start.set(y[q[z][0]],A[q[z][0]],x[q[z][0]]),d.end.set(y[q[z][1]],A[q[z][1]],x[q[z][1]]),w.intersectsLine(d)&&(w.intersectLine(d,b),C.push(b.x,b.y,b.z));n.push(C);h&&p.push(u.value)}var l=g.ta().data,m=l.eZb();m=m.W4b(f);for(var n=[],p=[],q=[[0,2],[0,1],[2,3],[1,3],[1,5],[3,7],[5,7],[6,7],[4,5],[4,6],[2,6],[0,4]],r=0;r<m.length;++r){var t=m[r];t=l.sva(t[0],t[1],t[2]);g.aGc(t)||(t=l.byc(t,e),e.intersectsPlane(f)&&k(t,f))}return{coordinates:n,colors:p}};return c}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJkcmF3UmVzZXJ2b2lySW50ZXJzZWN0aW9uIjoiSmVhIiwiZHJhd1N1cmZhY2VJbnRlcnNlY3Rpb24iOiJLZWEiLCJnZW5lcmF0ZUludGVyc2VjdGlvbiI6ImhGYSIsImdldEFmZmluZVRyYW5zZm9ybWF0aW9uTWF0cml4IjoiWDdhIn19fSAg");var uB=/*#__PURE__*/va(/*#__PURE__*/function(){function c(){tB.call(this)}var a=new Lp;L(c,"geotoolkit3d.util.intersection.PlaneIntersection");D(c,tB);c.prototype.Jea=function(b,d,e){var f=this.uJa(b,d);if(null==f.p1)return hb("geotoolkit3d.util.intersection.PlaneIntersection: cannot get bounding box."),[];var g=e.preservecolor,h=f.p1.distanceTo(f.p3),k=f.p1.distanceTo(f.p2),l=[],m=[],n=this.dma(b.n_(),d);var p=this.DZb(n,d,g);var q=p.coordinates;p=p.colors;var r=b.u_(),t=r.x;r=r.y;var u=this.X7a(n,f.p1,f.p2);for(f=0;f<q.length;f++){var w=
[],y=[];for(n=0;n<q[f].length;n+=3){var A=q[f];a.set(A[n],A[n+1],A[n+2]);a.applyMatrix4(u);A=a.x/h;var x=a.y/k;w.push(A*t);y.push(x*r)}0!==w.length&&0!==y.length&&(l.push(w),m.push(y))}h={coordinates:{x:l,y:m},fillstyle:e.fillstyle};if(g&&Array.isArray(p)&&0<p.length){e=d.ta().colorprovider;g=[];for(k=0;k<l.length;++k)m=new rf(e.rb(p[k])),g.push(m);h.fillstyle=g}else h.fillstyle=Array(l.length).fill(e.fillstyle);return this.Sj(h,b,d)};c.prototype.Kea=function(b,d,e){var f=this.uJa(b,d);if(null==f.p1)return hb("geotoolkit3d.util.intersection.PlaneIntersection: cannot get bounding box."),
[];var g=e.preservecolor,h=f.p1.distanceTo(f.p3),k=f.p1.distanceTo(f.p2),l=[],m=[],n=this.dma(b.n_(),d);var p=this.$Zb(n,d,g);var q=p.coordinates;var r=p.colors;var t=b.u_(),u=t.x,w=t.y;t=Math.abs(n.normal.z)<V.Qb;n=this.X7a(n,f.p1,f.p2);for(f=0;f<q.length;f++){var y=q[f];a.set(y[0],y[1],y[2]);a.applyMatrix4(n);y=a.x/h;var A=a.y/k;l.push(y*u);m.push(A*w)}e={coordinates:{x:l,y:m},fillstyle:e.fillstyle,linewidth:e.linewidth};if(g&&void 0!==p.colors){g=[];for(p=0;p<l.length;p++)g.push([(l[p]-l[0])/(l[l.length-
1]-l[0]),r[p]]);e.fillstyle=this.S7a(g)}return this.nm(e,b,d,t)};c.prototype.uJa=function(b,d){if("function"===typeof b.getBoundingBox)var e=b.getBoundingBox();else if(b.geometry)b.geometry.computeBoundingBox(),e=b.geometry.boundingBox.clone();else return{};var f=new Lp(e.min.x,e.max.y,e.max.z);f=b.localToWorld(f);var g=b.localToWorld(e.min);b=b.localToWorld(e.max);d.worldToLocal(f);d.worldToLocal(g);d.worldToLocal(b);return{p1:f,p2:g,p3:b}};return c}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJkcmF3UmVzZXJ2b2lySW50ZXJzZWN0aW9uIjoiSmVhIiwiZHJhd1N1cmZhY2VJbnRlcnNlY3Rpb24iOiJLZWEiLCJ0cmFuc2Zvcm1Cb3VuZGluZ0JveENvb3JkaW5hdGUiOiJ1SmEifX19");var vB=/*#__PURE__*/va(/*#__PURE__*/function(){function c(a){a=xb(a,{width:1,height:1,widthsegments:1,heightsegments:1});mz.call(this);this.Ad=new $t(new dv(a.width,a.height,a.widthsegments,a.heightsegments),new rB(a));this.Ad.geometry.computeBoundingBox();this.add(this.Ad);this.type="Plane"}D(c,mz);L(c,"geotoolkit3d.scene.plane.Plane");c.prototype.setOptions=function(a){if(null==a)return this;this.Ad.geometry.computeBoundingBox();this.Ad.material.setOptions(a);this.Xf();return this};c.prototype.kud=function(){return this.Ad.material&&
this.Ad.material.map?this.Ad.material.map:null};c.prototype.Jz=function(){return this.Ad.material.Jz()};c.prototype.sAb=function(a){this.setOptions({overlay:a})};c.prototype.u_=function(){return this.Ad.material.u_()};c.prototype.getBoundingBox=function(){return this.Ad.geometry.boundingBox.clone()};c.prototype.n_=function(){return this.Ad};c.prototype.Jfa=function(){var a=this.Ad.geometry.boundingBox.clone();this.localToWorld(a.min);this.localToWorld(a.max);return a};return c}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRUZXh0dXJlIjoia3VkIiwiZ2V0T3ZlcmxheSI6Ikp6IiwiZ2V0VGV4dHVyZURpbWVuc2lvbiI6InVfIiwiZ2V0TWVzaCI6Im5fIiwiZ2V0V29ybGRCb3VuZGluZ0JveCI6IkpmYSJ9fX0g");sA.jzb(vB.Oa(),uB);var wB=/*#__PURE__*/va(/*#__PURE__*/function(){function c(a){this.uniforms={};eu.call(this);this.vertexColors=!0;this.side=ms;this.jjc=new Wx(!1);this.Uic=new Wx(new Lp(1,1,1));var b=this;this.vertexShader=this.VERTEX_SHADER;this.fragmentShader=this.FRAGMENT_SHADER;this.onBeforeCompile=function(d){d.vertexShader=b.VERTEX_SHADER;d.fragmentShader=b.FRAGMENT_SHADER;d.uniforms.isSizeInDevice=b.jjc;d.uniforms.inversePlotScale=b.Uic;b.uniforms=G(d.uniforms,b.uniforms)};this.hb={transparent:!1,sizeindevice:!1,opacity:1};this.setOptions(a)}D(c,eu);L(c,"geotoolkit3d.scene.pointset.PointsetMaterial");c.gec=.001115;c.prototype.setOptions=function(a){a||(a={});this.hb=G(a,this.hb);this.OVb=!this.hb.transparent;this.gsb=this.hb.transparent;this.opacity=this.hb.opacity;this.jjc.value=this.hb.sizeindevice};c.prototype.lQc=function(a){this.Uic.value=a};c.prototype.ta=function(){return G(this.hb,{})};c.prototype.VERTEX_SHADER=["uniform bool isSizeInDevice;\nuniform vec3 inversePlotScale;\nattribute vec3 aPointCenter;\nattribute float aPointSize;\nattribute vec4 aPointColor;\nattribute float aVisible;\nvarying float vOpacity;\nvarying float vVisible;\n#define LAMBERT\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n    varying vec3 vLightBack;\n    varying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\nvarying vec3 vColor;\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n    #include <uv_vertex>\n    #include <uv2_vertex>\n    #include <color_vertex>\n    vec3 geometryPositions = position;\n    vColor = aPointColor.rgb;\n    vOpacity = aPointColor.a;\n    vVisible = aVisible;\n    #include <beginnormal_vertex>\n    #include <morphnormal_vertex>\n    #include <skinbase_vertex>\n    #include <skinnormal_vertex>\n    objectNormal /= inversePlotScale;\n    #include <defaultnormal_vertex>\n    #include <begin_vertex>\n    #include <morphtarget_vertex>\n    #include <skinning_vertex>\n    #include <project_vertex>\n    float shaderPointSize = aPointSize;\n    if(isSizeInDevice){\n        vec4 projectedPoint = projectionMatrix * modelViewMatrix * vec4( (aPointCenter), 1.0 );",
"        shaderPointSize *= "+c.gec+" * projectedPoint.w;","    }\n    vec4 tmpPosition = vec4(inversePlotScale * geometryPositions * shaderPointSize + aPointCenter, 1.);\n    mvPosition = modelViewMatrix * tmpPosition;\n    gl_Position = projectionMatrix * mvPosition;\n    #include <logdepthbuf_vertex>\n    #include <clipping_planes_vertex>\n    #include <worldpos_vertex>\n    #include <envmap_vertex>\n    #include <lights_lambert_vertex>\n    #include <shadowmap_vertex>\n    #include <fog_vertex>\n}"].join("\n");
c.prototype.FRAGMENT_SHADER="uniform vec3 diffuse;\nuniform vec3 emissive;\nvarying float vOpacity;\nvarying float vVisible;\nuniform float opacity;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n#ifdef DOUBLE_SIDED\n    varying vec3 vLightBack;\n    varying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n    if(vVisible < 0.5) discard;\n    #include <clipping_planes_fragment>\n    vec4 diffuseColor = vec4( diffuse, opacity * vOpacity );\n    ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n    vec3 totalEmissiveRadiance = emissive;\n    #include <logdepthbuf_fragment>\n    #include <map_fragment>\n    #include <color_fragment>\n    #include <alphamap_fragment>\n    #include <alphatest_fragment>\n    #include <specularmap_fragment>\n    #include <emissivemap_fragment>\n    #ifdef DOUBLE_SIDED\n        reflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n    #else\n        reflectedLight.indirectDiffuse += vIndirectFront;\n    #endif\n    #include <lightmap_fragment>\n    reflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n    #ifdef DOUBLE_SIDED\n        reflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n    #else\n        reflectedLight.directDiffuse = vLightFront;\n    #endif\n    reflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n    #include <aomap_fragment>\n    vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n    #include <envmap_fragment>\n    gl_FragColor = vec4( outgoingLight, diffuseColor.a );\n    #include <tonemapping_fragment>\n    #include <encodings_fragment>\n    #include <fog_fragment>\n    #include <premultiplied_alpha_fragment>\n    #include <dithering_fragment>\n}";
return c}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJzZXRJbnZlcnNlUGxvdFNjYWxlIjoibFFjIn19fSAg");vz.sv(wB.Oa(),kA);var xB=null;function yB(c){if(null==xB||xB.Osa!==c)xB=new Zw(1,Math.max(1.5*c,3),Math.max(c,2)),xB.Osa=c;return xB}var zB=null;function rja(c){if(null==zB||zB.Osa!==c)zB=new Fs(1,Math.max(Math.floor(c/3),0)),zB.Osa=c;return zB}var AB=null;function BB(){null==AB&&(AB=new xq(1,1,1,1,1,1));return AB}var CB=null;function DB(){null==CB&&(CB=new Uq(1,1,4,1),CB.rotateX(Math.PI/2));return CB}function EB(c){return c&&null!=c.length}var FB=/*#__PURE__*/va(/*#__PURE__*/{Sphere:yB,H_c:rja,oDb:BB,Ndc:DB},2,"eyJJY29zYWhlZHJvbiI6IkhfYyIsIkN1YmUiOiJvRGIiLCJQeXJhbWlkIjoiTmRjIn0g"),GB=/*#__PURE__*/va(/*#__PURE__*/{spa:yB,Eea:BB,M3b:DB},2,"eyJzcGhlcmUiOiJzcGEiLCJjdWJlIjoiRWVhIiwicHlyYW1pZCI6Ik0zYiJ9"),HB=/*#__PURE__*/va(/*#__PURE__*/function(){function c(f,g){f.setAttribute("position",g.attributes.position);f.setAttribute("normal",g.attributes.normal);f.setAttribute("uv",g.attributes.uv);f.index=g.index}function a(f){f.data&&EB(f.data.x)&&EB(f.data.y)&&EB(f.data.z)?(mz.call(this),f=G(f,{opacity:1,colorprovider:"red",symbol:FB.Sphere,symbolminsize:1,symbolmaxsize:6,symbolsizeisindevice:!1,inverseplot:!0}),null==f.precision&&(f.precision=!0===f.symbolsizeisindevice?
f.symbolmaxsize+1:10),this.CE=0,this.R1=1,this.Iia=this.mca=null,this.X6=new Mp(1,0,0,1),this.hLb=new Lp(1,1,1),this.Nmc=new Lp(1,1,1),this.Gb=null,this.Gp={M_:null,aXa:null,tl:null,visible:null},this.vpb=this.eob=this.xia=this.mOb=null,this.hnc=!1,this.fM=f.symbolminsize,this.TO=f.symbolmaxsize,this.Osa=f.precision,this.gH=f.colorprovider,this.iA=f.opacity,this.hib=!1,this.SPb=f.symbolsizeisindevice,this.kpc=f.inverseplot,this.Lc=this.ms=this.Zra=null,this.GU=new wB,this.Zc=null,this.H3a=-1,this.Omc=
new Yt,this.ARb=this.xlb=!0,this.Hh=new uq,this.ekc=new uq,this.setOptions(f)):hb("options['data'] is not defined or complete, cannot create PointSet without point data!")}var b="POINT",d=new Mp,e=new Mp;D(a,mz);L(a,"geotoolkit3d.scene.pointset.PointSet");a.prototype.setOptions=function(f){var g=!1,h=!1,k=!1,l=!1,m=!1,n=!1;null!=f.data&&(null!=f.data.x&&null!=f.data.y&&null!=f.data.z&&(g=!0,f.data.x.length!==this.CE&&(n=k=h=!0,this.CE=f.data.x.length)),null!=f.data.values&&(this.Gb=EB(f.data.values)?
Float32Array.from(f.data.values):f.data.values,h=!0),null!=f.data.sizes&&(this.R1=EB(f.data.sizes)?Float32Array.from(f.data.sizes):f.data.sizes,k=!0),null!=f.data.visible&&(l=!0),null!=f.data.sizemin&&(this.mca=f.data.sizemin,k=!0),null!=f.data.sizemax&&(this.Iia=f.data.sizemax,k=!0));f.colorprovider&&(this.gH=f.colorprovider,h=!0);null!=f.symbolminsize&&this.fM!==f.symbolminsize&&(this.fM=f.symbolminsize,k=!0);null!=f.symbolmaxsize&&this.TO!==f.symbolmaxsize&&(this.TO=f.symbolmaxsize,this.ARb=k=
!0);if(null!=f.symbol){var p=f.symbol;"function"!==typeof p&&(p=this.lnd(p));p!==this.Zc&&(this.Zc=p,m=!0)}null!=f.precision&&this.Osa!==f.precision&&(this.Osa=f.precision,this.Zc===a.Fec.Sphere&&(m=!0));m&&this.Zg();n&&this.uFd();h&&this.Z9b();g&&this.EJa(f.data.x,f.data.y,f.data.z);k&&this.WQd();l&&this.gRd(null!=f.data.visible?f.data.visible:!0);this.ms&&(g||k||l||n)&&(h=this.H3a,this.H3a=-1,this.b0b(h));null!=f.opacity&&(this.iA=f.opacity);this.hnc=this.hib||1>this.iA;null!=f.symbolsizeisindevice&&
(this.SPb=f.symbolsizeisindevice);f={transparent:this.hnc,sizeindevice:this.SPb,opacity:this.iA};this.GU.setOptions(f);this.Zra||(this.Zra=new $t(this.Lc,this.GU),this.Zra.frustumCulled=!1,this.Zra.name=b,this.clear(),this.add(this.Zra));this.Xf();if(g||k||l||n)this.hWc(),this.KWc();return this};a.prototype.uFd=function(){this.Lc.instanceCount=this.CE;this.Gp.tl=new Float32Array(4*this.CE);this.xia=new Ls(this.Gp.tl,4);this.Lc.setAttribute("aPointColor",this.xia);this.Gp.M_=new Float32Array(3*this.CE);
this.mOb=new Ls(this.Gp.M_,3);this.Lc.setAttribute("aPointCenter",this.mOb);this.Gp.aXa=new Float32Array(this.CE);this.eob=new Ls(this.Gp.aXa,1);this.Lc.setAttribute("aPointSize",this.eob);this.Gp.visible=(new Float32Array(this.CE)).fill(1);this.vpb=new Ls(this.Gp.visible,1);this.Lc.setAttribute("aVisible",this.vpb);this.Gp.index=new Float32Array(this.CE);this.Kic=new Ls(this.Gp.index,1);this.Lc.setAttribute("cgpointindex",this.Kic);for(var f=0;f<this.CE;f++)this.Gp.index[f]=f/this.CE;this.Kic.needsUpdate=
!0};a.prototype.setColor=function(f,g){f*=4;null!=g&&Number.isFinite(g)&&this.gH instanceof Oo?(g=this.gH.rb(g),d.set(g.lk(),g.kk(),g.ik(),g.Ek()),d.divideScalar(255)):d.copy(this.X6);.9>d.w&&(this.hib=!0);this.Gp.tl[f]=d.x;this.Gp.tl[f+1]=d.y;this.Gp.tl[f+2]=d.z;this.Gp.tl[f+3]=d.w};a.prototype.Z9b=function(){this.hib=!1;var f=EB(this.Gb)&&this.CE===this.Gb.length,g=this.gH instanceof Oo,h=!f&&Number.isFinite(this.Gb)?this.Gb:0;this.gH instanceof Pq?(h=this.gH,this.X6.set(h.r,h.g,h.b,1)):(h=g?this.gH.rb(h):
Pd.Sg(this.gH),this.X6.set(h.lk(),h.kk(),h.ik(),h.Ek()),this.X6.divideScalar(255));1>this.X6.w&&(this.hib=!0);for(h=0;h<this.CE;h++)f&&g?this.setColor(h,this.Gb[h]):this.setColor(h,null);this.xia.needsUpdate=!0};a.prototype.EJa=function(f,g,h){for(var k=0;k<this.CE;k++){var l=3*k;this.Gp.M_[l]=f[k];this.Gp.M_[l+1]=g[k];this.Gp.M_[l+2]=h[k]}this.xlb=!0;this.mOb.needsUpdate=!0};a.prototype.WQd=function(){var f=this.R1;EB(this.R1)||(f=[this.R1]);if(null==this.mca||null==this.Iia){null==this.mca&&(this.mca=
Number.POSITIVE_INFINITY);null==this.Iia&&(this.Iia=Number.NEGATIVE_INFINITY);for(var g=0;g<f.length;g++)isNaN(f[g])||(this.mca=Math.min(this.mca,f[g]),this.Iia=Math.max(this.Iia,f[g]))}f=bz.L$(f,0,1,this.mca,this.Iia);f=bz.L$(f,this.fM,this.TO);g=f.length===this.CE;var h;for(h=0;h<this.CE;h++)this.Gp.aXa[h]=g?f[h]:f[0];this.eob.needsUpdate=!0};a.prototype.Zg=function(){var f=this.Zc(this.Osa);null==this.Lc?(this.Lc=new Ms,this.Lc.copy(f)):c(this.Lc,f);this.ms&&c(this.ms.geometry,f);f.dispose()};
a.prototype.gRd=function(f){var g=!0===f||!1===f||EB(f)&&1===f.length,h=EB(f)?f[0]:f;g||EB(f)&&f.length===this.CE||(h=g=!0,hb("Invalid argument: Option 'data.visible' must be either a simple boolean, or a boolean array of size equal to number of points."));if(g)for(f=[],g=0;g<this.CE;g++)f[g]=h;for(g=0;g<this.CE;g++)this.Gp.visible[g]=+f[g];this.vpb.needsUpdate=!0};a.Fec=FB;a.Symbol=GB;a.prototype.ta=function(){return{opacity:this.iA,colorprovider:this.gH,symbolminsize:this.fM,symbolmaxsize:this.TO}};
a.prototype.rMd=function(f,g){this.xAb(f,{visible:g});return this};a.prototype.xAb=function(f,g){if(!this.UP(f))return this;null!=g.visible&&(this.Gp.visible[f]=+g.visible,this.vpb.needsUpdate=!0);if(null!=g.size){if(!EB(this.R1)){var h=this.R1;this.R1=(new Float32Array(this.CE)).fill(h)}this.R1[f]=g.size;this.mca===this.Iia||this.TO===this.fM?h=(this.TO+this.fM)/2:(h=(g.size-this.mca)/(this.Iia-this.mca),h=this.fM+(this.TO-this.fM)*h);this.Gp.aXa[f]=h;this.eob.needsUpdate=!0}null!=g.value&&(this.Gb[f]=
g.value,this.setColor(f,g.value),this.xia.needsUpdate=!0);return this};a.prototype.USa=function(f){if(!this.UP(f))return null;var g=3*f,h=this.Gp.M_,k=1;this.Gb&&(k=EB(this.Gb)?this.Gb[f]:this.Gb);return{visible:!!this.Gp.visible[f],size:EB(this.R1)?this.R1[f]:this.R1,value:k,position:[h[g],h[g+1],h[g+2]]}};a.prototype.ai=function(f,g,h,k){mz.prototype.ai.call(this,f,g,h,k);this.visible&&(this.kpc&&(f=h.iR().scale,this.Nmc.equals(f)||(this.Nmc.copy(f),this.hLb.set(1,1,1).divide(f),this.GU.lQc(this.hLb))),
this.ms&&this.ms.visible&&(f=this.ms.Sbd,this.ms.scale.set(f,f,f),this.kpc&&this.ms.scale.multiply(this.hLb),this.SPb&&(f=this.ms.position,e.set(f.x,f.y,f.z,1),e.applyMatrix4(this.matrixWorld),e.applyMatrix4(g.matrixWorldInverse),e.applyMatrix4(g.projectionMatrix),g=wB.gec*e.w,this.ms.scale.multiplyScalar(g))),this.xlb&&this.hWc(),this.xlb||this.ARb||!this.matrixWorld.equals(this.Omc))&&(this.KWc(),this.Omc.copy(this.matrixWorld),this.ARb=this.xlb=!1)};a.prototype.btd=function(){return this.ms};a.prototype.b0b=
function(f){this.ms||(this.ms=new $t(this.Zc(this.Osa)),this.ms.Qr=function(){return!1},this.ms.material.opacity=0,this.ms.visible=!1,this.add(this.ms));if(!this.UP(f))this.ms.visible=!1,this.H3a=-1;else if(f!==this.H3a){var g=this.USa(f),h=this.Gp.aXa[f];this.ms.position.set(g.position[0],g.position[1],g.position[2]);this.ms.scale.set(h,h,h);this.ms.Sbd=h;this.ms.visible=g.visible;this.H3a=f}};a.prototype.KWc=function(){this.Hh.copy(this.ekc);this.localToWorld(this.Hh.min);this.localToWorld(this.Hh.max);
this.Hh.min.subScalar(this.TO);this.Hh.max.addScalar(this.TO);this.Lc.boundingBox||(this.Lc.boundingBox=new uq);this.Lc.boundingBox.copy(this.Hh)};a.prototype.hWc=function(){for(var f=this.ekc.makeEmpty(),g=this.Gp.M_,h=0;h<this.CE;h++){var k=3*h,l=g[k],m=g[k+1];k=g[k+2];f.min.x=Math.min(f.min.x,l);f.min.y=Math.min(f.min.y,m);f.min.z=Math.min(f.min.z,k);f.max.x=Math.max(f.max.x,l);f.max.y=Math.max(f.max.y,m);f.max.z=Math.max(f.max.z,k)}};a.prototype.Jfa=function(){return this.Hh};a.prototype.dispose=
function(){this.Lc=null;this.Zra&&oz.dispose(this.Zra);this.Zra=null;this.ms&&(this.ms.geometry=null,oz.dispose(this.ms));this.Gb=this.R1=this.ms=null;this.Gp.M_=null;this.Gp.aXa=null;this.Gp.tl=null;this.gH=this.Gp.visible=null;this.clear();mz.prototype.dispose.call(this)};a.prototype.lnd=function(f){var g=FB,h=Nz;f=f.name||"default";switch(f){case h.Eea.name:case h.UWa.name:return g.oDb;case h.NBb.name:return g.Ndc;default:return g.Sphere}};a.prototype.UP=function(f){return Number.isFinite(f)&&
0<=f&&f<this.CE};return a}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoidGEiLCJzZXRQb2ludFZpc2libGUiOiJyTWQiLCJzZXRQb2ludE9wdGlvbnMiOiJ4QWIiLCJnZXRQb2ludE9wdGlvbnMiOiJVU2EiLCJiZWZvcmVSZW5kZXIiOiJhaSIsImhpZ2h0bGlnaHRTaGFwZSI6ImIwYiIsImdldFdvcmxkQm91bmRpbmdCb3giOiJKZmEiLCJpc1ZhbGlkSW5kZXgiOiJVUCJ9fX0g");AA.ig().Bbb(HB.Oa(),function(c){return c.btd()});var JB=/*#__PURE__*/function(){function c(b,d){hb("geotoolkit3d.scene.ShapeGeometry was deprecated since 3.3, use THREE.ShapeGeometry instead");Pw.call(this,b,d);this.type="ShapeGeometry";this.parameters={dBb:b,curveSegments:d}}function a(b,d){d.dBb=[];if(Array.isArray(b))for(var e=0,f=b.length;e<f;e++){var g=b[e];d.dBb.push(g.uuid)}else d.dBb.push(b.uuid);return d}D(c,Pw);L(c,"geotoolkit3d.scene.ShapeGeometry");c.prototype.toJSON=function(){var b=Pw.prototype.toJSON.call(this),d=this.parameters.dBb;return a(d,
b)};return c}();var KB=/*#__PURE__*/va(/*#__PURE__*/function(){function c(a){a=xb(a,{majorstep:100,minorincrement:3});this.Ev=null;this.eMb=a.majorstep;this.QMb=a.minorincrement}L(c,"geotoolkit3d.scene.surface.contour.MajorMinorStrategy");c.prototype.setOptions=function(a){if(null==a)return this;a.contour&&(this.Ev=a.contour);a.majorstep&&this.KQc(a.majorstep);a.minorincrement&&this.XQc(a.minorincrement);return this};c.prototype.ta=function(){return{contour:this.Ev,majorstep:this.eMb,minorincrement:this.QMb}};c.prototype.fa=function(a){return this.setOptions(a)};
c.prototype.ia=function(){return this.ta()};c.prototype.KQc=function(a){this.eMb=a;return this};c.prototype.XQc=function(a){this.QMb=a;return this};c.prototype.equals=function(a){if(null==a||!(a instanceof c))return!1;a=a.ta();return a.majorstep===this.eMb&&a.minorincrement===this.QMb};c.prototype.stringify=function(){var a=this.ta();return JSON.stringify(a)};c.prototype.clone=function(){var a=this.ta();return new c({majorstep:a.majorstep,minorincrement:a.minorincrement})};return c}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoidGEiLCJzZXRQcm9wZXJ0aWVzIjoiZmEiLCJnZXRQcm9wZXJ0aWVzIjoiaWEiLCJzZXRNYWpvclN0ZXAiOiJLUWMiLCJzZXRNaW5vckluY3JlbWVudCI6IlhRYyJ9fX0g");var LB=/*#__PURE__*/va(/*#__PURE__*/function(){function c(a,b,d,e,f){this.Fj=[0,0,0];this.qka=this.Aja=this.Bl=this.sw=this.Ok=this.AH=this.gj=null;this.Rkb=!1;this.Pkb=this.Ukb=null;a&&b&&d&&e&&this.fa(a,b,d,e,f)}L(c,"geotoolkit3d.scene.surface.contour.Triangle");c.prototype.fa=function(a,b,d,e,f){f=!0===f?!0:!1;this.Fj[2]=e;if(this.Ukb=this.Gdd(a,b,d))if(this.BOd(a,b,d,f),this.Pkb=e<this.Ok[2]&&e>this.Bl[2]){a=[this.sw[0]-this.Ok[0],this.sw[1]-this.Ok[1],this.sw[2]-this.Ok[2]];b=[this.Bl[0]-this.Ok[0],this.Bl[1]-this.Ok[1],
this.Bl[2]-this.Ok[2]];d=[this.Bl[0]-this.sw[0],this.Bl[1]-this.sw[1],this.Bl[2]-this.sw[2]];f=this.cxb(a);var g=this.cxb(b),h=this.cxb(d);this.AH=this.cxb(bz.nUb(a,b));if(this.Bl[2]===this.sw[2]===this.Ok[2])this.Fj[0]=(this.Ok[0]+this.sw[0]+this.Bl[0])/3,this.Fj[1]=(this.Ok[1]+this.sw[1]+this.Bl[1])/3,this.gj=(this.length(a)+this.length(b)+this.length(d))/3;else{this.Rkb=!0;if(e===this.sw[2]){if(e===this.Ok[2]){this.Fj[0]=(this.Ok[0]+this.sw[0])/2;this.Fj[1]=(this.Ok[1]+this.sw[1])/2;this.gj=this.length(a);
this.Aja=this.sw;this.qka=this.Ok;return}if(e===this.Bl[2]){this.Fj[0]=(this.sw[0]+this.Bl[0])/2;this.Fj[1]=(this.sw[1]+this.Bl[1])/2;this.gj=this.length(d);this.Aja=this.sw;this.qka=this.Bl;return}}if(e<=this.Ok[2]&&this.sw[2]<=e){h=(e-this.Ok[2])/f[2];var k=(e-this.Ok[2])/g[2];e=[f[0]*h,f[1]*h,f[2]*h];h=[g[0]*k,g[1]*k,g[2]*k];e=[this.Ok[0]+e[0],this.Ok[1]+e[1],this.Ok[2]+e[2]];h=[this.Ok[0]+h[0],this.Ok[1]+h[1],this.Ok[2]+h[2]]}else{k=(e-this.Bl[2])/h[2];var l=(e-this.Bl[2])/g[2];e=[h[0]*k,h[1]*
k,h[2]*k];h=[g[0]*l,g[1]*l,g[2]*l];e=[this.Bl[0]+e[0],this.Bl[1]+e[1],this.Bl[2]+e[2]];h=[this.Bl[0]+h[0],this.Bl[1]+h[1],this.Bl[2]+h[2]]}this.Aja=e;this.qka=h;this.Fj[0]=(e[0]+h[0])/2;this.Fj[1]=(e[1]+h[1])/2;this.gj=Math.sqrt((h[0]-e[0])*(h[0]-e[0])+(h[1]-e[1])*(h[1]-e[1]));!Number.isFinite(this.gj)&&(1-Math.abs(this.AH[2])<=V.Qb||1-Math.abs(bz.WUb(f,g))<=V.Qb)&&(this.Fj[0]=(this.Ok[0]+this.sw[0]+this.Bl[0])/3,this.Fj[1]=(this.Ok[1]+this.sw[1]+this.Bl[1])/3,this.gj=(this.length(a)+this.length(b)+
this.length(d))/3,this.Rkb=!1)}}};c.prototype.Iyd=function(){return this.Ukb};c.prototype.R0b=function(){return this.Pkb};c.prototype.qwb=function(){return this.Rkb};c.prototype.qtd=function(){var a=(new Lp).fromArray(this.Ok),b=(new Lp).fromArray(this.sw),d=(new Lp).fromArray(this.Bl);return[a,b,d]};c.prototype.getPoint=function(){return new Lp(this.Fj[0],this.Fj[1],this.Fj[2])};c.prototype.O6c=function(){return this.Fj};c.prototype.getNormal=function(){return new Lp(this.AH[0],this.AH[1],this.AH[2])};
c.prototype.N6c=function(){return this.AH};c.prototype.JAc=function(){return this.gj};c.prototype.qYb=function(){if(null==this.Aja)return null;var a=this.Aja[0],b=this.Aja[1],d=this.Aja[2];return new Lp(a,b,d)};c.prototype.IZb=function(){if(null==this.qka)return null;var a=this.qka[0],b=this.qka[1],d=this.qka[2];return new Lp(a,b,d)};c.prototype.$Ac=function(){return this.Aja};c.prototype.XCc=function(){return this.qka};c.prototype.BOd=function(a,b,d,e){e?(this.Bl=a,this.sw=b,this.Ok=d):a[2]>=b[2]?
a[2]>=d[2]?(this.Ok=a,b[2]>=d[2]?(this.sw=b,this.Bl=d):(this.sw=d,this.Bl=b)):(this.Ok=d,this.sw=a,this.Bl=b):b[2]>=d[2]?(this.Ok=b,a[2]>=d[2]?(this.sw=a,this.Bl=d):(this.sw=d,this.Bl=a)):(this.Ok=d,this.sw=b,this.Bl=a)};c.prototype.Gdd=function(a,b,d){a=Number.isFinite(a[0])&&Number.isFinite(a[1])&&Number.isFinite(a[2]);b=Number.isFinite(b[0])&&Number.isFinite(b[1])&&Number.isFinite(b[2]);d=Number.isFinite(d[0])&&Number.isFinite(d[1])&&Number.isFinite(d[2]);return a&&b&&d};c.prototype.length=function(a){var b=
a[0],d=a[1];a=a[2];return Math.sqrt(b*b+d*d+a*a)};c.prototype.cxb=function(a){var b=a[0],d=a[1];a=a[2];var e=Math.sqrt(b*b+d*d+a*a);return[b/e,d/e,a/e]};c.prototype.reset=function(){this.Fj=[0,0,0];this.qka=this.Aja=this.Bl=this.sw=this.Ok=this.AH=this.gj=null;this.Rkb=!1;this.Pkb=this.Ukb=null};return c}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJzZXRQcm9wZXJ0aWVzIjoiZmEiLCJpc1ZlcnRpY2VzVmFsaWQiOiJJeWQiLCJpc0ludGVyc2VjdEVsZXZhdGlvbiI6IlIwYiIsImlzTGluZUludGVyc2VjdGlvbiI6InF3YiIsImdldFNvcnRlZFZlcnRpY2VzIjoicXRkIiwiZ2V0SW50ZXJzZWN0ZWRMZW5ndGgiOiJKQWMiLCJnZXRMZWZ0SW50ZXJzZWN0aW9uUG9pbnQiOiJxWWIiLCJnZXRSaWdodEludGVyc2VjdGlvblBvaW50IjoiSVpiIiwiZ2V0TGVmdEludGVyc2VjdGlvbiI6IiRBYyIsImdldFJpZ2h0SW50ZXJzZWN0aW9uIjoiWENjIn19fSAg");var MB=/*#__PURE__*/va(/*#__PURE__*/function(){function c(d){Aq.call(this);this.type="ContourGeometry";d=G(d,{});var e=d.data.surface.getAttributes();this.Gd=e.position;this.$ra=e.interleaved;this.pz=e.nullvalue;this.ZR=e.zmin;this.YR=e.zmax;this.ZPa=[];this.hkc=d.label.major;this.Hkc=d.label.minor;this.xja=d.label.formatter;this.g2a=d.isoline.majorminorstrategy;this.setAttribute("position",this.Gd);this.setIndex(e.index);null!=e.normal?this.setAttribute("normal",e.normal):this.computeVertexNormals();e.values&&(e.values instanceof
zq||e.values instanceof Xs?this.setAttribute(Zy.bm,e.values):e.values instanceof Float32Array?this.setAttribute(Zy.bm,new zq(e.values,1)):this.setAttribute(Zy.bm,new zq(new Float32Array(e.values),1)));if(null!=e.xmin&&e.xmax&&null!=e.ymin&&e.ymax&&null!=e.zmin&&e.zmax){var f=new Lp(e.xmin,e.ymin,e.zmin);e=new Lp(e.xmax,e.ymax,e.zmax);this.boundingBox=new uq(f,e)}else this.computeBoundingBox();this.setOptions(d)}function a(d,e){if(d[0][2]>=d[1][2])if(d[0][2]>=d[2][2]){var f=0;if(d[1][2]>=d[2][2]){d=
1;var g=2}else d=2,g=1}else f=2,d=0,g=1;else d[1][2]>=d[2][2]?(f=1,d[0][2]>=d[2][2]?(d=0,g=2):(d=2,g=0)):(f=2,d=1,g=0);e[0]=g;e[1]=d;e[2]=f}var b=new LB;D(c,Aq);L(c,"geotoolkit3d.scene.surface.contour.ContourGeometry");c.prototype.setOptions=function(d){if(null==d.data)return this;(Array.isArray(d.data.values)||d.data.values instanceof Float32Array)&&this.y$b(d.data.values);null!=d.label&&(this.hkc=xb(d.label.major,this.hkc),this.Hkc=xb(d.label.minor,this.Hkc));return this};c.prototype.ta=function(){var d=
this.getAttribute(Zy.bm);if(null==d)return{};for(var e=new Float32Array(d.count),f=0;f<d.count;f++)e[f]=d.getX(f);return{data:{values:e}}};c.prototype.computeBoundingBox=function(){var d=this.getAttribute("position");this.boundingBox=(new uq).setFromBufferAttribute(d)};c.prototype.computeBoundingSphere=function(){null==this.boundingBox&&this.computeBoundingBox();this.boundingSphere=new Xw;this.boundingBox.getBoundingSphere(this.boundingSphere)};c.prototype.y$b=function(d){var e=this.getAttribute("position").count;
d.length!==e&&rb("Given values array does not match vertices count: "+e+"="+e+", actual="+d.length);var f=this.getAttribute(Zy.bm);null==f&&(f=new zq(new Float32Array(e),1),this.setAttribute(Zy.bm,f));for(e=0;e<f.count;e++)f.setX(e,d[e])};c.prototype.computeVertexNormals=function(){var d=this.getAttribute("position");if(d){var e=this.getAttribute("normal");void 0===e&&(e=new zq(new Float32Array(d.count*d.itemSize),3),this.setAttribute("normal",e));Tz.hrb(this.getIndex(),d,e);this.setAttribute("normal",
e)}};c.prototype.zKc=function(d){this.ZPa=[];if(!(0>=d.length)){var e=this.Gd,f=e.array,g=[];if(this.$ra){var h=e.data.stride,k=e.offset;e=e.itemSize;for(var l=0;l<f.length;l++)l%h<k||l%h>=k+e||g.push(f[l])}else g=f;for(f=0;f<d.length;f++)h=Object.keys(d[f])[0],this.ZPa.push([h,[],0]);f=this.index.array;d=d.map(function(A){return Object.values(A)[0]}).sort(function(A,x){return A-x});h=d[0];k=d[d.length-1];e=[[0,0,0],[0,0,0],[0,0,0]];l=[0,1,2];for(var m=0;m<f.length;m+=3){var n=3*f[m+0],p=3*f[m+1],
q=3*f[m+2];e[0][0]=g[n];e[0][1]=g[n+1];e[0][2]=g[n+2];e[1][0]=g[p];e[1][1]=g[p+1];e[1][2]=g[p+2];e[2][0]=g[q];e[2][1]=g[q+1];e[2][2]=g[q+2];if(!(isNaN(e[0][2])||isNaN(e[1][2])||isNaN(e[2][2])||(a(e,l),n=e[l[0]][2],p=e[l[2]][2],n>k||p<h)))for(q=0;q<d.length;q++){var r=d[q];if(n<=r&&r<=p){if(b.reset(),b.fa(e[l[0]],e[l[1]],e[l[2]],r,!0),b.qwb()){r=b.O6c();var t=b.N6c(),u=b.JAc(),w=b.$Ac(),y=b.XCc();this.ZPa[q][1].push([r,t,u,w,y]);this.ZPa[q][2]+=u}}else if(r>p)break}}}};c.prototype.v_b=function(){return this.ZPa};
return c}(),1,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJwcmVwYXJlVHJpYW5nbGVzIjoiektjIiwiZ2V0VHJpYW5nbGVzQnlMZXZlbCI6InZfYiJ9fX0g");var NB=/*#__PURE__*/function(){function c(f){f.defines.hasOwnProperty("addedContourShaders")||(f.defines.addedContourShaders=!0,f.uniforms[b.Dza]=new Wx(!1),f.uniforms[b.eqa]=new Wx(1),f.uniforms[e]=new Wx(f.wireframe),f.uniforms[d]={value:-999.25},f.uniforms.enableSurface={value:!0},f.uniforms.preserveSurfaceColor={value:!0},f.uniforms.enableLine={value:!1},f.uniforms.useStrategy={value:!1},f.uniforms.count={value:10},f.uniforms.zmin={value:-1E3},f.uniforms.zmax={value:1E3},f.uniforms.minorIncrement={value:3},
f.uniforms.localScale={value:1},f.uniforms.worldScale={value:1},f.uniforms.widthMajor={value:1},f.uniforms.lineColorMajor={value:new Pq("black")},f.uniforms.visibleMajor={value:!0},f.uniforms.widthMinor={value:.05},f.uniforms.lineColorMinor={value:new Pq("black")},f.uniforms.visibleMinor={value:!0})}function a(){this.g2a=null}var b=Vz,d=Zy.bm+"NullValue",e="wireframeEnabled";L(a,"geotoolkit3d.util.shaders.Contour");a.bYc=["#define LAMBERT",b.wfb,"varying vec3 vLightFront;\nvarying vec3 vIndirectFront;\nvarying float vcgdeadCell;\nuniform float cgcolormapValueNullValue;\n#ifdef DOUBLE_SIDED\n    varying vec3 vLightBack;\n    varying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef CG_USE_COLOR_MAP\n    attribute float cgcolormapValue;\n    varying float vcgcolormapValue;\n    uniform vec4 cgcolormapParams;\n    uniform int cgcolormapLogValue;\n    float Shaders_norm(float value, float srcmin, float srcmax, float dstmin, float dstmax) {\n        float norm = dstmin + (dstmax - dstmin) * (clamp(value, srcmin, srcmax) - srcmin)  / (srcmax - srcmin);\n        if (norm < 0.0 || norm >= 0.0) {\n            return norm;\n        }\n        return 0.0;\n    }\n    float normValueForColorMap(float value) {\n        if( cgcolormapLogValue == 1) {\n            value = log2(value)/log2(10.0);\n        }\n        return Shaders_norm(value - cgcolormapParams.x, 0.0, cgcolormapParams.y, 0.0, 1.0);\n    }\n#endif\nbool _isnan( float val ) {\n    return ( val < 0.0 || 0.0 < val || val == 0.0 ) ? false : true;\n}\nvoid main() {\n    #ifdef CG_USE_COLOR_MAP\n        vcgdeadCell = _isnan(cgcolormapValue) || abs( cgcolormapValue - cgcolormapValueNullValue ) < 0.00001 ? 1.0 : 0.0 ;\n    #endif\n    #include <uv_vertex>\n    #include <uv2_vertex>\n    #include <color_vertex>\n    #ifdef CG_USE_COLOR_MAP\n        vcgcolormapValue = normValueForColorMap(cgcolormapValue);\n    #endif\n    #include <beginnormal_vertex>\n    #include <morphnormal_vertex>\n    #include <skinbase_vertex>\n    #include <skinnormal_vertex>\n    // normalize normal vector\n    objectNormal = normalize(objectNormal);\n    #include <defaultnormal_vertex>\n    #include <begin_vertex>\n    #include <morphtarget_vertex>\n    #include <skinning_vertex>\n    #include <project_vertex>\n    #include <logdepthbuf_vertex>\n    #include <clipping_planes_vertex>\n    #include <worldpos_vertex>\n    #include <envmap_vertex>\n    #include <lights_lambert_vertex>\n    #include <shadowmap_vertex>\n    #include <fog_vertex>",
b.bcc,"}"].join("\n");a.aYc=["uniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;","uniform bool "+e+";",b.wfb,"uniform int useDiffuseAsColor;\nuniform bool enableSurface;\nuniform bool enableLine;\nuniform bool preserveSurfaceColor;\nuniform bool useStrategy;\nuniform int count;\nuniform float zmin;\nuniform float zmax;\nuniform float localScale;\nuniform float worldScale;\nuniform int minorIncrement;\nuniform float widthMajor;\nuniform float widthMinor;\nuniform vec3 lineColorMajor;\nuniform vec3 lineColorMinor;\nuniform bool visibleMajor;\nuniform bool visibleMinor;\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\nvarying float vcgdeadCell;\n#ifdef DOUBLE_SIDED\n    varying vec3 vLightBack;\n    varying vec3 vIndirectBack;\n#endif\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n#ifdef CG_USE_COLOR_MAP\n    varying float vcgcolormapValue;\n    uniform sampler2D cgcolormapTexture;\n    vec4 getColorFromColorMap(float normValue) {\n        return texture2D(cgcolormapTexture, vec2(normValue, 0.5));\n    }\n#endif\n// integer modular not implemented in glsl es100\nint intMod(int x, int y) {\n    return x - y * (x / y);\n}\nfloat astep(float edge, float x) {\n    return x < edge ? 0.0 : 1.0;\n}\nvoid main() {\n    if(vcgdeadCell != 0.0) discard;\n    #include <clipping_planes_fragment>\n    vec4 diffuseColor = vec4( diffuse, opacity );\n    ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n    vec3 totalEmissiveRadiance = emissive;\n    #include <logdepthbuf_fragment>\n    #include <map_fragment>\n    #include <color_fragment>\n    #ifdef CG_USE_COLOR_MAP\n        diffuseColor *= getColorFromColorMap(vcgcolormapValue);\n    #endif\n    #include <alphamap_fragment>\n    #include <alphatest_fragment>\n    #include <specularmap_fragment>\n    #include <emissivemap_fragment>\n    reflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );",
"    vec3 "+b.Pya+" = vLightFront;","    vec3 "+b.kYa+" = vLightBack;","    vec3 "+b.dza+" = vIndirectFront;","    vec3 "+b.JYa+" = vIndirectBack;",b.acc,"    #ifdef DOUBLE_SIDED","        reflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? "+b.dza+" : "+b.JYa+";","    #else","        reflectedLight.indirectDiffuse += "+b.dza+";","    #endif\n    #include <lightmap_fragment>\n    reflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n    #ifdef DOUBLE_SIDED","        reflectedLight.directDiffuse = ( gl_FrontFacing ) ? "+
b.Pya+" : "+b.kYa+";","    #else","        reflectedLight.directDiffuse = "+b.Pya+";","    #endif\n    reflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n    #include <aomap_fragment>\n    vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n    #include <envmap_fragment>\n    float elevationFactor = 0.003 * ( zmax - zmin );\n    elevationFactor /= sqrt( log2( localScale + 1.0 ));\n    vec4 finalColor, tmpColor;",
"    if(useDiffuseAsColor == 1 || "+e+") {","        finalColor = diffuseColor;\n    } else {\n        finalColor = vec4( outgoingLight, diffuseColor.a );\n    };\n    if (!enableSurface) {\n        tmpColor = finalColor;\n        finalColor = vec4( 0., 0., 0., .0 );\n    };\n        gl_FragColor = finalColor;\n    #include <tonemapping_fragment>\n    #include <encodings_fragment>\n    #include <fog_fragment>\n    #include <premultiplied_alpha_fragment>\n    #include <dithering_fragment>\n}"].join("\n");
a.SLd=function(f,g){if(null!=g){c(f);g.hasOwnProperty("data")&&g.data.hasOwnProperty("nullvalue")&&(f.uniforms[d].value=g.data.nullvalue,f.uniforms[d].needsUpdate=!0);g.hasOwnProperty("surface");g.hasOwnProperty("usestrategy")&&(f.uniforms.useStrategy.value=g.usestrategy,f.uniforms.useStrategy.needsUpdate=!0);if(g.hasOwnProperty("isoline")){null!=g.isoline.enabled&&(f.uniforms.enableLine.value=!1,f.uniforms.enableLine.needsUpdate=!0);null!=g.isoline.zmin&&(f.uniforms.zmin.value=g.isoline.zmin,f.uniforms.zmin.needsUpdate=
!0);null!=g.isoline.zmax&&(f.uniforms.zmax.value=g.isoline.zmax,f.uniforms.zmax.needsUpdate=!0);null!=g.isoline.count&&(f.uniforms.count.value=g.isoline.count,f.uniforms.count.needsUpdate=!0);if(null!=g.isoline.majorminorstrategy){this.g2a=g.isoline.majorminorstrategy;var h=this.g2a.ta();h=h.minorincrement;f.uniforms.minorIncrement.value=h;f.uniforms.minorIncrement.needsUpdate=!0}g.isoline.hasOwnProperty("major")&&(null!=g.isoline.major.width&&(f.uniforms.widthMajor.value=g.isoline.major.width,f.uniforms.widthMajor.needsUpdate=
!0),null!=g.isoline.major.color&&(f.uniforms.lineColorMajor.value=new Pq(g.isoline.major.color||"black"),f.uniforms.lineColorMajor.needsUpdate=!0),null!=g.isoline.major.visible&&(f.uniforms.visibleMajor.value=g.isoline.major.visible,f.uniforms.visibleMajor.needsUpdate=!0));g.isoline.hasOwnProperty("minor")&&(null!=g.isoline.minor.width&&(f.uniforms.widthMinor.value=g.isoline.minor.width,f.uniforms.widthMinor.needsUpdate=!0),null!=g.isoline.minor.color&&(f.uniforms.lineColorMinor.value=new Pq(g.isoline.minor.color||
"darkgrey"),f.uniforms.lineColorMinor.needsUpdate=!0),null!=g.isoline.minor.visible&&(f.uniforms.visibleMinor.value=g.isoline.minor.visible,f.uniforms.visibleMinor.needsUpdate=!0))}g.hasOwnProperty("wireframe")&&(f.uniforms[e].value=g.wireframe);g.hasOwnProperty("smoothshadingfactor")&&(f.uniforms[b.eqa].value=g.smoothshadingfactor,f.uniforms[b.Dza].value=1!==f.uniforms[b.eqa].value)}};a.Sqd=function(f){f=f.uniforms;f={data:{nullvalue:f[d].value},opacity:f.opacity.value,isoline:{zmin:f.zmin.value,
zmax:f.zmax.value,count:f.count.value,major:{visible:f.visibleMajor.value,color:f.lineColorMajor.value,width:f.widthMajor.value},minor:{visible:f.visibleMinor.value,color:f.lineColorMinor.value,width:f.widthMinor.value}}};null!=this.g2a&&(f.isoline.majorminorstrategy=this.g2a.ta());return f};a.YNd=function(f,g,h){null!=g&&(f.uniforms.widthMajor.value=g);null!=h&&(f.uniforms.widthMinor.value=h)};a.eLd=function(f,g){f.uniforms.localScale.value=g};a.$Nd=function(f,g){f.uniforms.worldScale.value=g};return a}();var OB=/*#__PURE__*/va(/*#__PURE__*/function(){function c(b){Xz.call(this,{});this.type="ContourMaterial";this.vertexShader=a.bYc;this.fragmentShader=a.aYc;this.extensions={derivatives:!0,fragDepth:!1,drawBuffers:!1,shaderTextureLOD:!1};this.transparent=!0;this.opacity=b.opacity;this.setOptions(b)}var a=NB;D(c,Xz);L(c,"geotoolkit3d.scene.surface.contour.ContourMaterial");c.$3c=Zy.bm+"NullValue";c.b6=Xz.b6;c.prototype.setOptions=function(b){Xz.prototype.setOptions.call(this,b);b.hasOwnProperty("isoline")&&(null!=b.isoline.roundedzmin&&
null==b.isoline.zmin&&(b.isoline.zmin=b.isoline.roundedzmin),null!=b.isoline.roundedzmax&&null==b.isoline.zmax&&(b.isoline.zmax=b.isoline.roundedzmax));a.SLd(this,b);return this};c.prototype.ta=function(){var b=xb(a.Sqd(this),Xz.prototype.ta.call(this));return b};c.prototype.Jwe=function(b,d){a.YNd(this,b,d)};c.prototype.KQd=function(b){a.eLd(this,b)};c.prototype.Kwe=function(b){a.$Nd(this,b)};return c}(),1,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoidGEifX19");vz.sv(OB.Oa(),tz);var PB=/*#__PURE__*/function(){function c(a){a=xb(a,{formatter:function(b,d){return 10*Math.floor(Math.abs(b*d)/10)},surfacescale:new Lp(1,1,1)});oB.call(this,a);this.tu=a.formatter;this.LPb=a.surfacescale;this.Eb(a.text||this.tu(this.qq.z,this.LPb.z));this.name="contourlabel"}D(c,oB);L(c,"geotoolkit3d.scene.surface.contour.ContourLabel");c.prototype.setOptions=function(a){a=a||{};var b=!1;null!=a.formatter&&(this.tu=a.formatter,b=!0);oB.prototype.setOptions.call(this,a);null!=a.surfacescale&&(this.LPb=a.surfacescale,
this.Eb(this.tu(this.qq.z,this.LPb.z)),b=!0);b&&this.I0();return this};return c}();var QB=/*#__PURE__*/va(/*#__PURE__*/function(){function c(E,H){E=E.userData.Mnb;H=H.userData.Mnb;if(E.r1b.distanceTo(H.r1b)>E.OGc+H.OGc)return!1;for(var F=E.usc+H.usc,I=0;I<E.Aea.length;I++)for(var J=0;J<H.Aea.length;J++)if(E.Aea[I].distanceTo(H.Aea[J])<F)return!0;return!1}function a(E,H){for(var F=0;F<H.length;F++){var I=H[F];t.copy(I.position);I.parent.localToWorld(t);t.sub(E.position);I.userData.nhc=t.length()}}function b(E,H){for(var F=0;F<E.length;F++){var I=E[F];x.copy(I.userData.Mmb);x.divide(H).normalize();t.copy(I.userData.Mmb);
t.z=0;I.userData.dlc=d(x,t)}}function d(E,H){var F=l.angleTo(E);0>H.dot(E)&&(F*=-1);return F}function e(E){sB.call(this);if(!E.data||!E.data.surface)throw Error("Contour has no Data, parameter options.data.surface is mandatory");this.type="Contour";var H=null;null!=E.data.values&&(H=E.data.values,E.data.values=null);this.hb=xb(E,{opacity:1,surface:{enabled:!0},isoline:{useglline:!1,count:10,majorminorstrategy:new KB,major:{visible:!0,color:"black",width:2},minor:{visible:!0,color:"darkgrey",width:1}},
label:{major:{visible:!1,style:new Ki({font:"10px Arial",color:"rgba(0, 0, 0, 1.0)"})},minor:{visible:!1,style:new Ki({font:"10px Arial",color:"rgba(0, 0, 0, 1.0)"})},labelmaxglobalvisibleangle:70*Math.PI/180,labelmaxverticalvisibleangle:15*Math.PI/180,labelmaxverticalrotationangle:60*Math.PI/180,formatter:function(K,N){return 10*Math.floor(Math.abs(K*N)/10)},density:2}});null!=H&&(this.hb.data.values=H,E.data.values=H);if(!this.hb.data.surface)throw Error("contour has no Data");E=E.data.surface.getAttributes();
this.ZR=this.hb.isoline.roundedzmin=g(E.zmin);this.YR=this.hb.isoline.roundedzmax=g(E.zmax,!0);if("string"===typeof this.hb.colorprovider)this.hb.color=new Pq(this.hb.colorprovider),this.hb.colorprovider=null,this.hb.vertexcolors=this.hb.vertexcolors||!1;else if(this.hb.colorprovider instanceof Pq)this.hb.color=this.hb.colorprovider,this.hb.colorprovider=null,this.hb.vertexcolors=this.hb.vertexcolors||!1;else if(this.hb.colorprovider instanceof Ro&&null==this.hb.data.values&&null==E.values){H=E.position;
for(var F=H.count,I=new Float32Array(F),J=0;J<F;J++)I[J]=H.getZ(J);this.hb.data.values=I;this.hb.colorprovider.iQ(E.zmin,E.zmax)}this.hb.label.density=V.clamp(this.hb.label.density,1,5);this.Ad=new $t(new MB(this.hb),new OB(this.hb));this.add(this.Ad);this.hjb=[];this.Od=new Lp;this.Uk=this.Ad.geometry.boundingBox.clone();this.Uk.getCenter(this.Od);this.rNb=new Np;this.rib=new zs;this.ULa=new au;this.ULa.depthTest=!0;this.ULa.depthWrite=!0;this.ULa.colorWrite=!1;this.ULa.transparent=!1;this.ULa.side=
Gr;this.m5c=new $t(this.Ad.geometry,this.ULa);this.rib.add(this.m5c);this.rib.matrixAutoUpdate=!1;this.rNb.add(this.rib);this.clb=new zs;this.C1a=new oy(1,1,{minFilter:ru,magFilter:ru,format:mw,depthBuffer:!0});this.tNa=new au;this.tNa.depthTest=!0;this.tNa.depthWrite=!1;this.tNa.transparent=!0;this.tNa.side=ms;this.xjc=new dv(2*n,2*n);this.rNb.add(this.clb);this.T1a=this.hb.isoline.count||10;this.kpb=this.hb.isoline.useglline;this.fta=null;this.aRb=!1;this.TMb=this.cMb=this.Rlb=this.Clb=this.UMb=
this.dMb=null;this.bMb=new zs;this.SMb=new zs;this.add(this.bMb);this.add(this.SMb);this.hZ=!1;this.z1a=this.wjc=null;this.JBa=new zs;this.XBa=new zs;this.JBa.renderOrder=1;this.XBa.renderOrder=1;this.RMb=this.aMb=this.z2a=this.f2a=null;this.U8=this.jmb=!1;this.yjc=["label"].labelmaxglobalvisibleangle;this.zLb=["label"].labelmaxverticalvisibleangle;this.yLb=["label"].labelmaxverticalrotationangle;this.add(this.JBa);this.add(this.XBa);this.Ys=this.scale.clone();this.Pjc=new Lp;this.I1a=new Lp;this.J1a=
new Yt;this.fgc=new Pq;this.setOptions(this.hb);this.hb.data.surface=null;this.name="CONTOUR"}function f(E,H){if(null==H||E.length!==H.length)return!1;for(var F=0;F<E.length;F++)if(Object.keys(E[F])[0]!==Object.keys(H[F])[0]||Object.values(E[F])[0]!==Object.values(H[F])[0])return!1;return!0}function g(E,H){H=H||!1;var F=Math.abs(Math.floor(E)).toString().length;F=2<F?Math.pow(10,F-2):1;var I=Math.floor(E/F)*F;if(!H)return I;for(;I<E;)I+=F;return I}var h=new Lp(1,0,0),k=new Lp(0,1,0),l=new Lp(0,0,
1),m=.001,n=1.25,p=new Pq(0),q=new Yt,r=new gy,t=new Lp,u=new Lp,w=new Lp,y=new Lp,A=new tv;D(e,sB);L(e,"geotoolkit3d.scene.surface.contour.Contour");e.prototype.setOptions=function(E){if(null==E)return this;sB.prototype.setOptions.call(this,E);E=E||{};var H=!1,F=!1,I=!1,J=!1;"string"===typeof E.colorprovider?(E.color=new Pq(E.colorprovider),E.colorprovider=null,E.vertexcolors=E.vertexcolors||!1):E.colorprovider instanceof Pq&&(E.color=E.colorprovider,E.colorprovider=null,E.vertexcolors=E.vertexcolors||
!1);E.hasOwnProperty("surface")&&(this.k6c=E.surface.enabled,this.Ad.visible=this.k6c);if(E.hasOwnProperty("isoline")){var K=E.isoline;K.hasOwnProperty("useglline")&&K.useglline!==this.kpb&&(this.kpb=K.useglline,H=F=!0);K.hasOwnProperty("zmin")&&K.zmin!==this.ZR&&(this.ZR=K.zmin,K.roundedzmin=null,I=J=H=F=!0);K.hasOwnProperty("zmax")&&K.zmax!==this.YR&&(this.YR=K.zmax,K.roundedzmax=null,I=J=H=F=!0);K.hasOwnProperty("count")&&K.count!==this.T1a&&null==K.majorminorstrategy&&(this.T1a=K.count,this.aRb=
!1,H=F=!0);if(K.hasOwnProperty("majorminorstrategy")){var N=K.majorminorstrategy;N instanceof KB&&!N.equals(this.fta)&&(this.fta=N,I=J=H=F=this.aRb=!0)}if(H||F)N=this.Hcd(),f(N,this.hjb)||(this.Ad.geometry.zKc(N),this.hjb=N);K.hasOwnProperty("major")&&(N=K.major,N.width&&N.width!==this.dMb&&(this.dMb=N.width,H=!0),!N.color||null!=this.Clb&&(new Pq(N.color)).equals(this.Clb)||(this.Clb=new Pq(N.color),H=!0),null!=N.visible&&N.visible!==this.cMb&&(this.cMb=N.visible,H=!0));K.hasOwnProperty("minor")&&
(K=K.minor,K.width&&K.width!==this.UMb&&(this.UMb=K.width,F=!0),!K.color||null!=this.Rlb&&(new Pq(K.color)).equals(this.Rlb)||(this.Rlb=new Pq(K.color),F=!0),null!=K.visible&&K.visible!==this.TMb&&(this.TMb=K.visible,F=!0))}E.hasOwnProperty("label")&&(E.label.density!==this.wjc&&(this.wjc=E.label.density,I=J=!0),null!=E.label.major&&(K=E.label.major,null!=K.visible&&K.visible!==this.f2a&&(this.f2a=K.visible,I=!0),K.style&&K.style!==this.aMb&&(this.aMb=K.style,this.Q5("major"))),E.label.minor&&(K=
E.label.minor,null!=K.visible&&K.visible!==this.z2a&&(this.z2a=K.visible,J=!0),K.style&&K.style!==this.RMb&&(this.RMb=K.style,this.Q5("minor"))),null!=E.label.labelmaxglobalvisibleangle&&(this.yjc=E.label.labelmaxglobalvisibleangle,this.U8=!0),null!=E.label.labelmaxverticalvisibleangle&&(this.zLb=E.label.labelmaxverticalvisibleangle,this.U8=!0),null!=E.label.labelmaxverticalrotationangle&&(this.yLb=E.label.labelmaxverticalrotationangle,this.U8=!0));(H||F||null==this.z1a)&&(this.f2a||this.z2a)&&this.pfd();
this.Ad.material.setOptions(E);this.Ad.geometry.setOptions(E);E.data&&E.data.surface&&(E.data.surface=null);this.hb=xb(E,this.hb);H&&this.yqb("major");F&&this.yqb("minor");I&&this.PQa("major");J&&this.PQa("minor");this.Xf();return this};e.prototype.ta=function(){var E=xb(this.Ad.material.ta(),this.Ad.geometry.ta());E.name=this.name;E.isoline.useglline=this.kpb;E.isoline.minor.width=this.hb.isoline.minor.width;E.isoline.major.width=this.hb.isoline.major.width;E.label=this.hb.label;E.surface=this.hb.surface;
E.isoline.majorminorstrategy=this.rBc();E.zmin=this.ZR;E.zmax=this.YR;return xb(E,sB.prototype.ta.call(this))};e.prototype.fa=function(E){return this.setOptions(E)};e.prototype.ia=function(){return this.ta()};e.prototype.Ose=function(){this.yqb("major");this.yqb("minor");this.PQa("major");this.PQa("minor");this.Xf()};var x=new Lp,C=new Lp;e.prototype.TKd=function(E,H){var F=E.userData.dlc-this.yLb,I=E.userData.dlc+this.yLb;C.copy(E.position);this.localToWorld(C);C.negate().add(H);y.copy(C);y.projectOnPlane(E.userData.K7c);
t.copy(E.userData.Mmb);t.z=0;H=d(y,t);H+this.zLb<F||H-this.zLb>I?E.visible=!1:(H<F&&(H=F),H>I&&(H=I),F=Math.abs(H),F<m&&(H=m),F>Math.PI-m&&(H=Math.PI-m),y.copy(l),A.setFromAxisAngle(k,H),y.applyQuaternion(A),A.setFromAxisAngle(l,E.userData.MRb),y.applyQuaternion(A),F=C.angleTo(y),F>this.yjc?E.visible=!1:E.setOptions({normal:y}))};e.prototype.HQd=function(E,H,F,I){this.clb.clear();var J;for(J=0;J<E.length;J++){var K=E[J];if(K.visible){K.userData.n2a||(K.userData.n2a=new $t(this.xjc,this.tNa));I&&K.Xqb();
var N=K.xub();K.userData.n2a.position.copy(N.getCenter());K.userData.n2a.scale.copy(N.ifa());q.setFromMatrix3(N.Pva());K.userData.n2a.rotation.setFromRotationMatrix(q);this.clb.add(K.userData.n2a)}}this.rib.matrix.copy(this.matrixWorld);F.getSize(r);r.divideScalar(2);this.C1a.setSize(r.x,r.y);F.setRenderTarget(this.C1a);F.getClearColor(this.fgc);F.setClearColor(p);F.clearColor();F.render(this.rNb,H);F.setRenderTarget(null);F.setClearColor(this.fgc)};e.prototype.ai=function(E,H,F,I){sB.prototype.ai.call(this,
E,H,F,I);var J=!0;this.Ys.equals(this.scale)&&this.hZ||(this.Ys.copy(this.scale),this.hZ=!0,this.PQa("major"),this.PQa("minor"),this.Ad.material.KQd(this.scale.z),this.U8=!0);this.I1a.equals(H.position)&&this.J1a.equals(H.projectionMatrix)||(this.I1a.copy(H.position),this.J1a.copy(H.projectionMatrix),this.U8=!0);F=this.JBa.children.concat(this.XBa.children);w.setFromMatrixScale(this.matrixWorld);if(this.jmb||!w.equals(this.Pjc))this.Pjc.copy(w),b(F,w),this.U8=!0;if(this.U8){this.U8=!1;H.getWorldPosition(u);
for(J=0;J<F.length;J++)F[J].visible=!0,this.TKd(F[J],u),F[J].visible&&F[J].computeBoundingBox();J=!1;this.MUb(E,H,F)}this.jmb&&(this.jmb=!1,this.U8=!0);this.HQd(F,H,I,J)};e.prototype.Hcd=function(){var E=[],H=this.ZR,F=this.YR;if(null!=this.fta||this.aRb){var I=this.fta.ta();var J=I.majorstep;I=I.minorincrement;for(var K=J/I,N;H<=F;H+=J){for(N=1;N<I;N++)E.push({minor:H+N*K});E.push({major:H+J});if(H+2*J>F&&F-H-J>K)for(N=H+J;N<F;N+=K)E.push({minor:N+K})}this.T1a=E.length}else for(J=this.T1a,F=(F-H)/
(J+1),I=0;I<J;I++)E.push({major:H+(I+1)*F});return E};e.prototype.yqb=function(E){if("major"===E){var H=this.bMb;var F=this.Clb;var I=this.dMb;var J=this.cMb}else H=this.SMb,F=this.Rlb,I=this.UMb,J=this.TMb;H.children=[];if(J){J=this.Ad.geometry.v_b();for(var K=0;K<J.length;K++)if(0!==J[K][1].length){var N=J[K][0];if(N===E){N=J[K][1];var P,Q=[];if(this.kpb){for(P=0;P<N.length;P++){var R=N[P];var Y=(new Lp).fromArray(R[3]);R=(new Lp).fromArray(R[4]);Y&&R&&Q.push(Y,R)}N=(new Aq).setFromPoints(Q);P=
new tt({color:F,linewidth:I});N=new zt(N,P)}else{for(P=0;P<N.length;P++)Y=N[P][3],R=N[P][4],Y&&R&&Q.push(Y[0],Y[1],Y[2],R[0],R[1],R[2]);N=new lz({data:{positions:Q},color:F,linewidth:I,polygonoffset:!0,polygonoffsetfactor:1,mask:this.C1a.texture})}H.add(N)}}}};e.prototype.PQa=function(E){if(this.hZ&&null!=E&&(this.lvc(E),"major"!==E||this.f2a)&&("minor"!==E||this.z2a)){var H=this.Ad.geometry.v_b(),F=Math.pow(this.hb.label.density,5);w.setFromMatrixScale(this.matrixWorld);var I=(new Lp).copy(this.Ad.geometry.boundingBox.min).multiply(w),
J=(new Lp).copy(this.Ad.geometry.boundingBox.max).multiply(w);I=Math.min(J.x-I.x,J.y-I.y);I/=3*F;J=H.map(function(Bb){return Bb[2]});var K=Math.max.apply(null,J);if("major"===E){var N=this.hb.label.major;var P=this.JBa}else"minor"===E&&(N=this.hb.label.minor,P=this.XBa);N=xb(N,{formatter:this.hb.label.formatter,surfacescale:this.Ys,zmin:this.ZR,zmax:this.YR,renderside:ms});for(var Q=0;Q<H.length;Q++){var R=H[Q][0];if(E===R){var Y=J[Q];R=Math.floor(Y/K*F);var ca=H[Q][1];if(0!==ca.length){var ea=Y/
R;Y=0;ea*=.33;for(var ua=[],Ga=this.z1a[Q],Aa=null,Ba=null,La=0,Pa=0;La<ca.length&&Pa<R;La++){var Oa=ca[La];0>Oa[1][2]&&(Oa[1][0]*=-1,Oa[1][1]*=-1,Oa[1][2]*=-1);var Va=Oa[2],gb=null==Aa;Y+=Va;if(Y>=ea){gb?(N.canvas=Ga,N.origin=Oa[0],N.normal=Oa[1],Aa=new PB(N),Ba=Aa.getBoundingSphere().clone(),Ba.radius*=I):Ba.center.fromArray(Oa[0]);Va=!1;for(var $a=0;$a<ua.length;$a++)if(ua[$a].intersectsSphere(Ba)){Va=!0;break}Va||null==Aa||(gb||Aa.setOptions({origin:Oa[0],normal:Oa[1]}),Aa.userData.Mmb=(new Lp).fromArray(Oa[1]),
t.copy(Aa.userData.Mmb),t.z=0,t.normalize(),Aa.userData.MRb=h.angleTo(t),t.crossVectors(h,t),0>t.z&&(Aa.userData.MRb*=-1),Aa.userData.K7c=(new Lp(Oa[4][0]-Oa[3][0],Oa[4][1]-Oa[3][1],Oa[4][2]-Oa[3][2])).normalize(),Aa.setOptions({freeorientation:!0,facingoffset:1}),Pa++,ua.push(Ba),P.add(Aa),Ba=Aa=null)}}Aa&&Aa.dispose()}}}this.U8=this.jmb=!0}};e.prototype.Q5=function(E){if(this.hZ&&null!=E&&("major"!==E||this.f2a)&&("minor"!==E||this.z2a)){var H=[];if("major"===E){var F=this.aMb;H=this.JBa.children}else"minor"===
E&&(F=this.RMb,H=this.XBa.children);for(E=0;E<H.length;E++)H[E].setOptions({style:F,surfacescale:this.scale});this.U8=!0}};var z=new Lp,v=new Vd,B=new Lp;e.prototype.GQd=function(E,H,F){F=F.userData.plot.getSize(v);for(var I=0;I<E.length;I++){var J=E[I];if(J.visible){J.userData.Mnb||(J.userData.Mnb={r1b:new gy});var K=J.userData.Mnb;J=J.xub();var N=J.ifa(),P=J.getCenter(),Q=J.Pva(),R=N.y,Y=2*N.x,ca=Math.ceil(Y/(2*R)),ea=Y/ca;J=ea/R;z.set(R-Y/2,0,0);if(!K.Aea||K.Aea.length!==ca)for(K.Aea=[],R=0;R<
ca;R++)K.Aea.push(new gy);for(R=0;R<ca;R++)B.copy(z).applyMatrix3(Q).add(P),oz.LXa(B,H,F,B),K.Aea[R].set(B.x,B.y),z.x+=ea;ea=P.clone();t.copy(N).applyMatrix3(Q).add(P);oz.LXa(ea,H,F,ea);oz.LXa(t,H,F,t);ea.z=0;t.z=0;P=N=ea.distanceTo(t);2<ca&&(ca=K.Aea[0].distanceTo(K.Aea[1]),P=ca/J);K.r1b.set(ea.x,ea.y);K.OGc=N;K.usc=P}}};e.prototype.MUb=function(E,H,F){if(null!=E.userData.plot)for(a(H,F),F.sort(function(P,Q){return P.userData.nhc-Q.userData.nhc}),this.GQd(F,H,E),E=[],H=0;H<F.length;H++){var I=F[H];
if(I.visible&&null!=I.parent)if(0===E.length)E.push(I);else{for(var J=!1,K=0;K<E.length;K++){var N=E[K];if(c(I,N)){J=!0;I.visible=!1;break}}J||E.push(I)}}};e.prototype.pfd=function(){this.z1a=[];for(var E=0;E<this.hjb.length;E++){var H=wc(0,0,!0);this.z1a.push(H)}};e.prototype.dispose=function(){this.z1a=this.hb=null;this.lvc();this.C1a&&this.C1a.dispose();this.tNa.dispose();this.xjc.dispose();oz.dispose(this.clb);oz.dispose(this.bMb);oz.dispose(this.SMb);oz.dispose(this.Ad);mz.prototype.dispose.call(this)};
e.prototype.lvc=function(E){if("major"===E||null==E)this.JBa.children.forEach(function(H){H.dispose()}),this.JBa.children=[];if("minor"===E||null==E)this.XBa.children.forEach(function(H){H.dispose()}),this.XBa.children=[]};e.prototype.rBc=function(){return this.fta.clone()};e.prototype.ind=function(){return this.hjb};e.prototype.Fpd=function(){return this.T1a};e.prototype.n_=function(){return this.Ad};e.prototype.xea=function(){return!1};e.prototype.Lma=function(){return[this.Ad]};return e}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoidGEiLCJzZXRQcm9wZXJ0aWVzIjoiZmEiLCJnZXRQcm9wZXJ0aWVzIjoiaWEiLCJiZWZvcmVSZW5kZXIiOiJhaSIsImdldE1ham9yTWlub3JTdHJhdGVneSI6InJCYyIsImdldEVsZXZhdGlvbnMiOiJpbmQiLCJnZXRMaW5lQ291bnQiOiJGcGQiLCJnZXRNZXNoIjoibl8iLCJjYW5FZGdlc0JlSGlnaGxpZ2h0ZWQiOiJ4ZWEiLCJnZXRNZXNoZXNUb0hpZ2hsaWdodEVkZ2VzIjoiTG1hIn19fSAg");
AA.ig().Bbb(QB.Oa(),function(c){return c.children[0]});var RB=/*#__PURE__*/va(/*#__PURE__*/function(){function c(f,g,h){this.qq=f||new Lp;this.th=g||new Lp(0,1,0);this.n5c=h}var a=new Lp,b=new Lp,d=new Lp,e=new Lp;L(c,"geotoolkit3d.scene.surface.contour.Ray");c.prototype.set=function(f,g){this.qq.copy(f);this.th.copy(g);return this};c.prototype.clone=function(){return(new c).copy(this)};c.prototype.copy=function(f){this.qq.copy(f.p_());this.th.copy(f.vl());return this};c.prototype.at=function(f,g){null==g&&(g=new Lp);return g.copy(this.th).multiplyScalar(f).add(this.qq)};c.prototype.intersectTriangle=
function(f,g,h,k,l,m){null==m&&(m=new Lp);a.subVectors(g,f);b.subVectors(h,f);d.crossVectors(a,b);m.copy(d);g=this.th.dot(d);if(0<g){if(k)return null;k=1}else if(0>g)k=-1,g=-g;else return null;e.subVectors(this.qq,f);f=k*this.th.dot(b.crossVectors(e,b));if(0>f)return null;h=k*this.th.dot(a.cross(e));if(0>h||f+h>g)return null;f=-k*e.dot(d);return 0>f?null:this.at(f/g,l)};c.prototype.p_=function(){return this.qq};c.prototype.vl=function(){return this.th};c.prototype.Jld=function(){return this.n5c};
return c}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcmlnaW4iOiJwXyIsImdldERpcmVjdGlvbiI6InZsIiwiZ2V0Q29udG91ckxldmVsIjoiSmxkIn19fSAg");var SB=/*#__PURE__*/function(){function c(a){Yz.call(this,a);this.type="FaultMaterial";this.polygonOffset=this.transparent=!0;this.polygonOffsetFactor=.1}D(c,Yz);L(c,"geotoolkit3d.scene.surface.fault.FaultMaterial");return c}();vz.sv(SB.Oa(),tz);var TB=/*#__PURE__*/va(/*#__PURE__*/function(){function c(b){sB.call(this,b);this.type="Fault";b=G(b,{colorprovider:"#bbdefb",opacity:1,fault:!0,lines:!0,points:!0,linescolor:"red orange blue yellow cyan brown grey white".split(" "),pointscolor:"red orange blue yellow cyan brown grey white".split(" ")});if(null==b.data||null==b.data.surface)throw Error("Fault has no data");"string"===typeof b.colorprovider&&(b.colorprovider=new Pq(b.colorprovider));b.colorprovider instanceof Pq&&(b.color=b.colorprovider,b.colorprovider=null,
b.vertexcolors=b.vertexcolors||!1);this.Ad=new $t(new Uz(b),new SB(b));this.add(this.Ad);this.Hr=new Kp;this.add(this.Hr);this.Cc=new Kp;this.add(this.Cc);var d=this,e=b.data.surface;this.Xmb=this.tlb=null;this.position.copy(e.sp());this.setOptions(b);var f=this.tlb.Tp(),g=this.Xmb.Tp();e.wrd().forEach(function(h,k){var l=new Aq,m=new Float32Array(3*h.x.length);l.setAttribute("position",new zq(m,3));for(var n=0;n<h.x.length;n++){var p=new $t(new xq(10,10,10),new au({side:Gr,color:g[k%g.length].H5()}));
p.position.set(h.x[n],h.y[n],h.z[n]);p.userData.index=k;d.Hr.add(p);m[3*n]=h.x[n];m[3*n+1]=h.y[n];m[3*n+2]=h.z[n]}d.Cc.add(new rt(l,new tt({color:f[k%f.length].H5()})))})}function a(b){if(nc(b,Oo))return b;Array.isArray(b)||(b=[b]);for(var d=[],e=[],f=b.length,g=0;g<f;g++)d.push(g),e.push(b[g]instanceof Pq?b[g].getHexString():b[g]);return new To(d,e,f)}D(c,sB);L(c,"geotoolkit3d.scene.surface.fault.Fault");c.prototype.setOptions=function(b){if(null==b)return this;sB.prototype.setOptions.call(this,
b);this.Ad.material.setOptions(b);b.hasOwnProperty("fault")&&(this.Ad.visible=b.fault);b.hasOwnProperty("lines")&&(this.Cc.visible=b.lines);b.hasOwnProperty("points")&&(this.Hr.visible=b.points);if(b.hasOwnProperty("linescolor")){this.tlb=a(b.linescolor);var d=this.tlb.Tp();this.Cc.children.forEach(function(f,g){f.material.color.set(d[g%d.length].H5())})}if(b.hasOwnProperty("pointscolor")){this.Xmb=a(b.pointscolor);var e=this.Xmb.Tp();this.Hr.children.forEach(function(f){f.material.color.set(e[f.userData.index%
e.length].H5())})}return this};c.prototype.ta=function(){return xb(xb({fault:this.Ad.visible,lines:this.Cc.visible,points:this.Hr.visible,linescolor:this.tlb,pointscolor:this.Xmb},this.Ad.material.ta()),sB.prototype.ta.call(this))};c.prototype.xea=function(){return!0};c.prototype.Lma=function(){return[this.Ad]};return c}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoidGEiLCJjYW5FZGdlc0JlSGlnaGxpZ2h0ZWQiOiJ4ZWEiLCJnZXRNZXNoZXNUb0hpZ2hsaWdodEVkZ2VzIjoiTG1hIn19fSAg");var UB=/*#__PURE__*/va(/*#__PURE__*/function(){function c(l){sB.call(this);this.type="Surface";l=G(l,{maxlod:10,minlod:0,extent:oz.BTa(),maplimits:oz.BTa(),opacity:1,maximumrequests:10,tilewidth:256,tileheight:256});if(!l.data.surface)throw Error("Surface has no Data");var m=l.data.surface.getAttributes();if("string"===typeof l.colorprovider)l.color=new Pq(l.colorprovider),l.colorprovider=null,l.vertexcolors=l.vertexcolors||!1;else if(l.colorprovider instanceof Pq)l.color=l.colorprovider,l.colorprovider=null,l.vertexcolors=l.vertexcolors||
!1;else if(l.colorprovider instanceof Ro&&null==l.texture&&null==l.data.values&&null==m.values&&null==l.geometry){for(var n=[],p=m.position,q=p.count,r=0;r<q;r++)n.push(p.getZ(r));l.data.values=n;l.colorprovider.iQ(m.zmin,m.zmax)}n=l.data.surface.Psb().material;p=l.data.surface.Psb().geometry;this.Ad=new $t(new p(l),new n(l));this.add(this.Ad);this.Ys=(new Lp).copy(this.scale);this.Njc=this.Dtc(this.Ys);this.tx=new Cx;this.tx.crossOrigin="Anonymous";this.Tm=-1;this.Ck={};this.uz=[];this.cOb=0;this.ZQ=
{};this.pz=m.nullvalue;this.ZR=m.zmin;this.YR=m.zmax;this.setOptions(l);this.name="SURFACE"}var a=new Lp,b=new gy,d=new gy,e=new ns,f=new Yt,g=new uq,h=new Lp,k=new Lp;D(c,sB);L(c,"geotoolkit3d.scene.surface.Surface");c.prototype.setOptions=function(l){if(null==l)return this;sB.prototype.setOptions.call(this,l);var m=G(l,{});"string"===typeof m.colorprovider?(m.color=new Pq(m.colorprovider),m.colorprovider=null,m.vertexcolors=m.vertexcolors||!1):m.colorprovider instanceof Pq&&(m.color=m.colorprovider,
m.colorprovider=null,m.vertexcolors=m.vertexcolors||!1);if(null!=l.maplimits&&null!=l.extent){this.F2=l.maplimits;var n=new gy;this.F2.getCenter(n);var p=new gy;n=n.sub(l.extent.getCenter(p));p=new gy;var q=new gy;this.F2.getSize(p);l.extent.getSize(q);this.scale.set(p.x/q.x,p.y/q.y,1);this.position.set(n.x*this.scale.x,n.y*this.scale.y,0)}n=!1;null!=l.extent&&l.extent!==this.$I&&(this.$I=l.extent,n=!0);null!=l.maxlod&&l.maxlod!==this.HU&&(this.HU=l.maxlod,n=!0);null!=l.minlod&&l.minlod!==this.NU&&
(this.NU=l.minlod,n=!0);null==l.geometry||gc(l.geometry,this.ZQ.geometry)||(this.ZQ.geometry=G(l.geometry,this.ZQ.geometry),n=!0);null==l.material||gc(l.material,this.ZQ.material)||(this.ZQ.material=G(l.material,this.ZQ.material),n=!0);null!=l.tilewidth&&l.tilewidth!==this.iD&&(this.iD=l.tilewidth,n=!0);null!=l.tileheight&&l.tileheight!==this.hD&&(this.hD=l.tileheight,n=!0);n&&this.clear();null!=l.opacity&&l.opacity!==this.iA&&(n=l.opacity,p=1>n,this.iA=n,this.Ad.material.opacity=n,this.Ad.material.transparent=
p);this.CMb=l.maximumrequests||this.CMb;this.Ad.material.setOptions(m);this.Ad.geometry.setOptions(m);this.Xf();return this};c.prototype.ta=function(){var l=xb(this.Ad.material.ta(),this.Ad.geometry.ta());l.maplimits=this.F2;l.extent=this.$I;l.maxlod=this.HU;l.minlod=this.NU;l.geometry=this.ZQ.geometry;l.material=this.ZQ.material;l.tilewidth=this.iD;l.tileheight=this.hD;l.opacity=this.iA;l.maximumrequests=this.CMb;l.nullvalue=this.pz;l.zmin=this.ZR;l.zmax=this.YR;return xb(l,sB.prototype.ta.call(this))};
c.prototype.Dtc=function(l){var m=0;0>l.x&&m++;0>l.y&&m++;0>l.z&&m++;return m%2};c.prototype.Zg=function(){for(var l=this.Ad.geometry.index,m=Math.trunc(l.count/2),n=l.count-1,p=0;p<m;p++){var q=n-p,r=l.getX(p),t=l.getX(q);l.setX(q,r);l.setX(p,t)}l.needsUpdate=!0};c.prototype.clear=function(){for(var l in this.Ck)delete this.Ck[l];this.uz.length=0};c.prototype.CJa=function(l){if(!oc(this.ZQ)){var m=Math.abs(this.Ad.geometry.boundingBox.distanceToPoint(l.position));this.Ad.geometry.boundingBox.getSize(a);
m=Math.ceil(Math.max(a.x,a.y)/m);m=V.clamp(m,this.NU,this.HU);this.Tm!==m&&this.clear();this.Tm=m;this.F2.getSize(b);this.$I.getSize(d);var n=b.x/Math.pow(2,m),p=b.y/Math.pow(2,m),q=Math.floor((this.$I.min.x-this.F2.min.x)/n),r=Math.ceil((this.$I.max.x-this.F2.min.x)/n),t=Math.floor((this.$I.min.y-this.F2.min.y)/p),u=Math.ceil((this.$I.max.y-this.F2.min.y)/p),w=n*a.x/(this.iD*d.x),y=p*a.y/(this.hD*d.y);n=(Math.floor((this.$I.min.x-this.F2.min.x)/n)*n+this.F2.min.x-this.$I.min.x)*a.x/d.x;p=(Math.floor((this.$I.min.y-
this.F2.min.y)/p)*p+this.F2.min.y-this.$I.min.y)*a.y/d.y;l.updateMatrix();l.updateMatrixWorld();e.setFromProjectionMatrix(f.identity().multiplyMatrices(l.projectionMatrix,l.matrixWorldInverse));for(l=q;l<r;l++)for(var A=t;A<u;A++)if(!this.Ck[l+"x"+A]&&(h.set(this.Ad.geometry.boundingBox.min.x+n+this.iD*w*(l-q),this.Ad.geometry.boundingBox.min.y+p+this.hD*y*(A-t),this.Ad.geometry.boundingBox.min.z),k.set(this.Ad.geometry.boundingBox.min.x+n+this.iD*w*(l-q+1),this.Ad.geometry.boundingBox.min.y+p+this.hD*
y*(A-t+1),this.Ad.geometry.boundingBox.max.z),g.set(h,k),e.intersectsBox(this.Ad.geometry.boundingBox))){for(var x in this.ZQ)this.ZQ.hasOwnProperty(x)&&this.ZQ[x].server&&this.ZQ[x].formatterfunction&&this.uz.push({url:this.ZQ[x].server+this.ZQ[x].formatterfunction(m,A,l),offsetX:n+this.iD*w*(l-q),offsetY:p+this.hD*y*(A-t),EK:w,pN:y,fdd:x});this.Ck[l+"x"+A]=!0}this.stc()}};c.prototype.stc=function(){for(;0<this.uz.length&&this.cOb<this.CMb;){var l=this.uz.shift();this.Azd(l.url,l.offsetX,l.offsetY,
l.EK,l.pN,l.fdd);this.cOb++}};c.prototype.n_=function(){return this.Ad};c.prototype.Azd=function(l,m,n,p,q,r){this.tx.load(l,function(t){null!=this.Ad.material?(this.Ad.material.CJa(t,m,n,p,q,r),t.dispose(),this.cOb--,this.Xf(),this.stc()):t.dispose()}.bind(this))};c.prototype.ai=function(l,m,n,p){sB.prototype.ai.call(this,l,m,n,p);this.CJa(m);this.Ys.equals(this.scale)||(l=this.Dtc(this.scale),l!==this.Njc&&this.Zg(),this.Ys.copy(this.scale),this.Njc=l)};c.prototype.xea=function(){return!(this.Ad.geometry instanceof
cA)};c.prototype.Lma=function(){return this.xea()?[this.Ad]:[]};return c}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoidGEiLCJnZXRNZXNoIjoibl8iLCJiZWZvcmVSZW5kZXIiOiJhaSIsImNhbkVkZ2VzQmVIaWdobGlnaHRlZCI6InhlYSIsImdldE1lc2hlc1RvSGlnaGxpZ2h0RWRnZXMiOiJMbWEifX19");var VB=/*#__PURE__*/va(/*#__PURE__*/function(){function c(a){hf.call(this,a,new cf({id:function(b){return b.id},uuid:function(b){return b.uuid},name:function(b){return b.name},"class":function(b){return"function"===typeof b.Oa?b.Oa():b instanceof rt?"THREE.Line":b instanceof jv?"THREE.Points":b instanceof gx?"THREE.Sprite":b instanceof $t?"THREE.Mesh":b instanceof Kp?"THREE.Object3D":null},visible:function(b){return b.visible}}))}D(c,hf);L(c,"geotoolkit3d.selection.NodeQueryBuilder");c.prototype.Gj=function(a,b){for(var d=0;d<
a.children.length;d++)b(a.children[d],d,a,this)};return c}(),1,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJlbnVtZXJhdGVOb2RlcyI6IkdqIn19fSAg");function WB(c){return new VB(c)}var XB=/*#__PURE__*/va(/*#__PURE__*/{vza:"selected",Vu:"movestart",DKa:"move",Ao:"moveend"},2,"eyJTZWxlY3RlZCI6InZ6YSIsIlN0YXJ0IjoiVnUiLCJNb3ZlIjoiREthIiwiRW5kIjoiQW8ifSAg"),YB=/*#__PURE__*/va(/*#__PURE__*/function(){function c(a){a=G(a,{name:"AbstractMoveTool",enabled:!0,pickenabled:!0,armingkey:17});Vy.call(this,a);this.ap=[];this.dk=null}D(c,Vy);L(c,"geotoolkit3d.tool.AbstractMoveTool");c.prototype.setOptions=function(a){a=G(a,{plot:this.lc,enabled:this.If,pickenabled:this.BOa,object:void 0!==a.object?null:this.dk});this.dk!==a.object&&this.lP(c.k6.vza,a.object,null);this.dk=a.object;this.If=a.enabled;this.BOa=a.pickenabled;Vy.prototype.setOptions.call(this,
a);return this};c.prototype.ta=function(){var a=Vy.prototype.ta.call(this);a.object=this.dk;a.enabled=this.If;a.pickenabled=this.BOa;return a};c.prototype.Ym=Fb;c.prototype.move=Fb;c.prototype.gN=function(a){this.If&&this.BOa&&this.Ym(a)};c.prototype.lP=function(a,b,d){for(var e=0;e<this.ap.length;e++)this.ap[e](a,b,d)};c.k6=XB;c.prototype.uQa=function(a){-1===this.ap.indexOf(a)&&this.ap.push(a);return this};c.prototype.lGd=function(a){a=this.ap.indexOf(a);-1!==a&&this.ap.splice(a,1);return this};
c.prototype.fN=function(a){this.UQ&&a.keyCode===this.Rba&&this.lP(c.k6.Ao,this.dk,null)};c.prototype.LD=function(a){this.If&&(null==this.dk&&this.gN(a),null!=this.dk&&(this.iwe=this.dk.position.clone()),this.lP(c.k6.Vu,this.dk,null))};c.prototype.Rz=function(a){this.If&&(null!=this.dk?this.move(a,c.k6.DKa):this.lP(c.k6.DKa,this.dk,null))};c.prototype.KD=function(a){this.If&&(null!=this.dk?(this.move(a,c.k6.Ao),this.lc.getRoot().remove(this.ym),this.BOa&&this.setOptions({object:null})):this.lP(c.k6.Ao,
this.dk,null))};c.prototype.tI=Hb;c.prototype.BG=Hb;c.prototype.zK=Hb;c.prototype.eN=Hb;c.prototype.cF=Hb;c.prototype.zp=Hb;c.prototype.OD=Hb;c.prototype.ND=Hb;c.prototype.dF=Hb;c.prototype.eF=Hb;c.prototype.QD=Hb;c.prototype.lC=Hb;c.prototype.AK=Hb;c.prototype.BK=Hb;c.prototype.dispose=function(){this.dk=this.ap=null;Vy.prototype.dispose.call(this)};return c}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoidGEiLCJvblBpY2siOiJnTiIsImFkZE1vdmVMaXN0ZW5lciI6InVRYSIsInJlbW92ZVNlbGVjdGlvbkxpc3RlbmVyIjoibEdkIiwib25LZXlFbmQiOiJmTiIsIm9uRHJhZ1N0YXJ0IjoiTEQiLCJvbkRyYWciOiJSeiIsIm9uRHJhZ0VuZCI6IktEIiwib25UYXAiOiJ0SSIsIm9uQ3Vyc29yTW92ZSI6IkJHIiwib25LZXlTdGFydCI6InpLIiwib25LZXkiOiJlTiIsIm9uRG91YmxlVGFwIjoiY0YiLCJvbk1vdXNlV2hlZWwiOiJ6cCIsIm9uUGluY2hTdGFydCI6Ik9EIiwib25QaW5jaCI6Ik5EIiwib25QaW5jaEVuZCI6ImRGIiwib25TbGlkZVN0YXJ0IjoiZUYiLCJvblNsaWRlIjoiUUQiLCJvblNsaWRlRW5kIjoibEMiLCJvblZpc2liaWxpdHlHYWluZWQiOiJBSyIsIm9uVmlzaWJpbGl0eUxvc3QiOiJCSyJ9fX0g");var $B=/*#__PURE__*/va(/*#__PURE__*/function(){function c(){mz.call(this);this.ug(!1)}var a=new uq(new Lp(-Infinity,-Infinity,-Infinity),new Lp(Infinity,Infinity,Infinity));D(c,mz);L(c,"geotoolkit3d.tool.cursor.AbstractCursor");c.prototype.X_=Fb;c.prototype.Jfa=function(){return a};return c}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJzZXRDdXJzb3JQb3NpdGlvbiI6IlhfIn19fSAg");var aC=/*#__PURE__*/va(/*#__PURE__*/function(){function c(a){$B.call(this);a=G(a,{});for(var b=0;b<a.cursors.length;b++)this.add(a.cursors[b])}D(c,$B);L(c,"geotoolkit3d.tool.cursor.CompositeCursor");c.prototype.X_=function(a){for(var b=0;b<this.children.length;b++)this.children[b].X_(a);return this};return c}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJzZXRDdXJzb3JQb3NpdGlvbiI6IlhfIn19fSAg");var bC=/*#__PURE__*/va(/*#__PURE__*/function(){function c(a){$B.call(this);a=G(a,{linestyle:new X({color:"red"}),cursorsize:5});var b=new Aq;b.setAttribute("position",new zq(new Float32Array([-1,0,0,1,0,0,0,-1,0,0,1,0,0,0,-1,0,0,1]),3));b.setIndex(new zq(new Uint32Array([0,1,2,3,4,5]),1));this.add(new zt(b,null));this.setOptions(a)}D(c,$B);L(c,"geotoolkit3d.tool.cursor.CrossCursor");c.prototype.X_=function(a){this.position.copy(a);this.Xf();return this};c.prototype.setOptions=function(a){if(null==a)return this;$B.prototype.setOptions.call(this,
a);var b=this.children[0];if(null==b)return this;a=G(a,{cursorsize:b.dMa,linestyle:null!=b.material?b.material.userData.EW:null});b.material=Iz.LEa(a.linestyle);b.dMa=a.cursorsize;this.Xf();return this};c.prototype.ta=function(){var a={},b=this.children[0];null!=b&&(null!=b.material&&(a.linestyle=b.material.userData.EW),a.cursorsize=b.dMa);return xb(a,$B.prototype.ta.call(this))};c.prototype.ai=function(a,b,d,e){$B.prototype.ai.call(this,a,b,d,e);if(this.visible){for(d=0;d<this.children.length;d++)e=
this.children[d],e.scale.set(e.dMa,e.dMa,e.dMa);oz.HVc(this,b,a)}};return c}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJzZXRDdXJzb3JQb3NpdGlvbiI6IlhfIiwiZ2V0T3B0aW9ucyI6InRhIiwiYmVmb3JlUmVuZGVyIjoiYWkifX19");var cC=/*#__PURE__*/va(/*#__PURE__*/function(){function c(b){$B.call(this);b=G(b,{limits:null,linestyle:new X({color:"red"}),mode:MA.back});this.add(this.Dla("front",[-.5,0,0,.5,0,0],[0,0,-.5,0,0,.5]));this.add(this.Dla("back",[-.5,0,0,.5,0,0],[0,0,-.5,0,0,.5]));this.add(this.Dla("left",[0,-.5,0,0,.5,0],[0,0,-.5,0,0,.5]));this.add(this.Dla("right",[0,-.5,0,0,.5,0],[0,0,-.5,0,0,.5]));this.add(this.Dla("bottom",[-.5,0,0,.5,0,0],[0,-.5,0,0,.5,0]));this.add(this.Dla("top",[-.5,0,0,.5,0,0],[0,-.5,0,0,.5,0]));this.setOptions(b)}function a(b,
d,e){var f=new Lp;e.getCenter(f);var g=new Lp;e.getSize(g);b[0].position.copy(f);b[0].children[0].position.set(0,-g.y/2,d.z-f.z);b[0].children[1].position.set(d.x-f.x,-g.y/2,0);b[1].position.copy(f);b[1].children[0].position.set(0,g.y/2,d.z-f.z);b[1].children[1].position.set(d.x-f.x,g.y/2,0);b[2].position.copy(f);b[2].children[0].position.set(-g.x/2,0,d.z-f.z);b[2].children[1].position.set(-g.x/2,d.y-f.y,0);b[3].position.copy(f);b[3].children[0].position.set(g.x/2,0,d.z-f.z);b[3].children[1].position.set(g.x/
2,d.y-f.y,0);b[4].position.copy(f);b[4].children[1].position.set(d.x-f.x,0,-g.z/2);b[4].children[0].position.set(0,d.y-f.y,-g.z/2);b[5].position.copy(f);b[5].children[1].position.set(d.x-f.x,0,g.z/2);b[5].children[0].position.set(0,d.y-f.y,g.z/2)}D(c,$B);L(c,"geotoolkit3d.tool.cursor.CrossHair2DCursor");c.prototype.Dla=function(b,d,e){var f=new mz;f.userData.plane=b;f.add(this.rRa(d));f.add(this.rRa(e));return f};c.prototype.rRa=function(b,d){var e=new Aq;e.setAttribute("position",new zq(new Float32Array(b),
3));e.setIndex(new zq(new Uint32Array([0,1]),1));b=new zt(e,null);b.userData.plane=d;return b};c.prototype.X_=function(b){a(this.children,b,this.Ce);this.Xf();return this};c.prototype.setOptions=function(b){if(null==b)return this;$B.prototype.setOptions.call(this,b);var d=this.children[0];if(null==d)return this;d=G(b,{limits:this.Ce,cursorsize:d.dMa,linestyle:null!=d.material?d.material.userData.EW:null,mode:this.mode});this.mode=d.mode;this.Ce=d.limits;for(var e=0;e<this.children.length;e++)for(var f=
0;f<this.children[e].children.length;f++)this.Ce.getSize(this.children[e].children[f].scale),null!=b.linestyle&&(this.children[e].children[f].material=Iz.LEa(d.linestyle));this.Xf();return this};c.prototype.ta=function(){var b=this.children[0],d={};d.mode=this.mode;d.limits=this.Ce;null!=b&&null!=b.material&&(d.linestyle=b.material.userData.EW);return xb(d,$B.prototype.ta.call(this))};c.prototype.ai=function(b,d,e,f){$B.prototype.ai.call(this,b,d,e,f);if(this.visible)for(e=0;e<this.children.length;e++)this.children[e].scale.copy(this.children[e].children[0].scale),
this.children[e].updateMatrixWorld(),this.children[e].visible=this.mode(this.children[e],b,d),this.children[e].scale.set(1,1,1),this.children[e].updateMatrixWorld()};return c}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJzZXRDdXJzb3JQb3NpdGlvbiI6IlhfIiwiZ2V0T3B0aW9ucyI6InRhIn19fSAg");var dC=/*#__PURE__*/va(/*#__PURE__*/function(){function c(b){$B.call(this);var d=G(b,{visiblelinestyle:new X({color:"red"}),hiddenlinestyle:new X({color:"rgba(255,0,0,0.99)",pattern:wg.Jpa})});this.i0a=!1!==b.hiddenlinestyle;this.kY=new mz;this.add(this.kY);this.kY.add(this.rRa([-.5,0,0,.5,0,0]));this.kY.add(this.rRa([0,-.5,0,0,.5,0]));this.kY.add(this.rRa([0,0,-.5,0,0,.5]));this.setOptions(d)}function a(b,d){b[0].position.set(b[0].position.x,d.y,d.z);b[1].position.set(d.x,b[1].position.y,d.z);b[2].position.set(d.x,d.y,b[2].position.z)}D(c,$B);L(c,"geotoolkit3d.tool.cursor.CrossHairCursor");c.prototype.rRa=function(b){var d=new Aq;d.setAttribute("position",new zq(new Float32Array(b),3));d.setIndex(new zq(new Uint32Array([0,1]),1));return new zt(d,null)};c.prototype.X_=function(b){a(this.kY.children,b);this.Xf();return this};c.prototype.setOptions=function(b){if(null==b)return this;$B.prototype.setOptions.call(this,b);var d=this.kY.children[0];if(null==d||null==b)return this;d=G(b,{limits:this.Ce,"visiblelinestyle:":null!=d.material?
d.material.userData.EW:null});this.Ce=d.limits;b=(this.i0a=!1!==b.hiddenlinestyle)?d.hiddenlinestyle:d.visiblelinestyle;for(d=0;d<this.kY.children.length;d++)this.Ce.getSize(this.kY.children[d].scale),this.Ce.getCenter(this.kY.children[d].position),null!=b&&(this.kY.children[d].material=Iz.LEa(b),this.kY.children[d].renderOrder=this.i0a?1:0,this.kY.children[d].material.depthTest=this.i0a?!1:!0);this.Xf();return this};c.prototype.ta=function(){var b=this.kY.children[0],d={};d.limits=this.Ce;this.i0a&&
b&&b.material&&(d.hiddenlinestyle=b.material.userData.EW);b&&b.material&&(d.visiblelinestyle=b.material.userData.EW);return xb(d,$B.prototype.ta.call(this))};return c}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJzZXRDdXJzb3JQb3NpdGlvbiI6IlhfIiwiZ2V0T3B0aW9ucyI6InRhIn19fSAg");var eC=/*#__PURE__*/va(/*#__PURE__*/function(){function c(a){a=G(a,{name:"CursorTool",enabled:!0,cursor:new bC});Vy.call(this,a);this.ap=[]}D(c,Vy);L(c,"geotoolkit3d.tool.cursor.CursorTool");c.prototype.setOptions=function(a){a=G(a,{enabled:this.If,cursor:this.lq});this.If=a.enabled;a.cursor!==this.lq&&(oz.dispose(this.lq),this.lq=a.cursor);this.lq.visible=this.If;Vy.prototype.setOptions.call(this,a);return this};c.prototype.ta=function(){var a=Vy.prototype.ta.call(this);a.enabled=this.If;a.cursor=this.lq;return a};c.prototype.Ywb=
function(a){this.lq.visible=null!=a;null==this.lq.parent&&this.lc.getRoot().add(this.lq);null!=a&&this.lq.X_(a);this.lq.Xf()};c.prototype.lP=function(a,b){for(var d=0;d<this.ap.length;d++)this.ap[d](a,b);null!=this.lc&&null!=this.lq&&(a=0!==b.length?b[0].point:null,this.Ywb(a))};c.prototype.uQa=function(a){-1===this.ap.indexOf(a)&&this.ap.push(a);return this};c.prototype.fGd=function(a){a=this.ap.indexOf(a);-1!==a&&this.ap.splice(a,1);return this};c.prototype.fN=function(a){this.UQ&&a.keyCode===this.Rba&&
this.lP(a,[])};c.prototype.tI=function(a){if(this.If){var b=vz.Ym(this.lc,a.plotX,a.plotY,this.wc,this.wc);this.lP(a,b)}};c.prototype.BG=function(a){if(this.If){var b=vz.Ym(this.lc,a.plotX,a.plotY,this.wc,this.wc);this.lP(a,b)}};c.prototype.LD=Hb;c.prototype.Rz=Hb;c.prototype.KD=Hb;c.prototype.zK=Hb;c.prototype.eN=Hb;c.prototype.cF=Hb;c.prototype.zp=Hb;c.prototype.OD=Hb;c.prototype.ND=Hb;c.prototype.dF=Hb;c.prototype.eF=Hb;c.prototype.QD=Hb;c.prototype.lC=Hb;c.prototype.AK=Hb;c.prototype.BK=Hb;c.prototype.dispose=
function(){this.dk=this.ap=null;Vy.prototype.dispose.call(this)};c.prototype.Uld=function(){return this.lq};return c}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoidGEiLCJtb3ZlQ3Vyc29yIjoiWXdiIiwiYWRkTW92ZUxpc3RlbmVyIjoidVFhIiwicmVtb3ZlTW92ZUxpc3RlbmVyIjoiZkdkIiwib25LZXlFbmQiOiJmTiIsIm9uVGFwIjoidEkiLCJvbkN1cnNvck1vdmUiOiJCRyIsIm9uRHJhZ1N0YXJ0IjoiTEQiLCJvbkRyYWciOiJSeiIsIm9uRHJhZ0VuZCI6IktEIiwib25LZXlTdGFydCI6InpLIiwib25LZXkiOiJlTiIsIm9uRG91YmxlVGFwIjoiY0YiLCJvbk1vdXNlV2hlZWwiOiJ6cCIsIm9uUGluY2hTdGFydCI6Ik9EIiwib25QaW5jaCI6Ik5EIiwib25QaW5jaEVuZCI6ImRGIiwib25TbGlkZVN0YXJ0IjoiZUYiLCJvblNsaWRlIjoiUUQiLCJvblNsaWRlRW5kIjoibEMiLCJvblZpc2liaWxpdHlHYWluZWQiOiJBSyIsIm9uVmlzaWJpbGl0eUxvc3QiOiJCSyIsImdldEN1cnNvciI6IlVsZCJ9fX0g");var fC=/*#__PURE__*/function(){function c(){}L(c,"geotoolkit3d.util.shaders.Scatter");c.VERTEX_SHADER="attribute float cgpointSize;\nattribute float cgpointVisible;\nvarying float vcgpointVisible;\nuniform float cgpixelScale;\n#include <common>\n#include <logdepthbuf_pars_vertex>\n#ifdef CG_USE_COLOR_MAP\n    attribute float cgcolormapValue;\n    varying float vcgcolormapValue;\n    uniform vec4 cgcolormapParams;\n    uniform int cgcolormapLogValue;\n    float Shaders_norm(float value, float srcmin, float srcmax, float dstmin, float dstmax) {\n        float norm = dstmin + (dstmax - dstmin) * (clamp(value, srcmin, srcmax) - srcmin)  / (srcmax - srcmin);\n        if (norm < 0.0 || norm >= 0.0) {\n            return norm;\n        }\n        return 0.0;\n    }\n    float normValueForColorMap(float value) {\n        if(cgcolormapLogValue == 1)\n        {\n            value = log2(value)/log2(10.0);\n        }\n        return Shaders_norm(value - cgcolormapParams.x, 0.0, cgcolormapParams.y, 0.0, 1.0);\n    }\n#endif\nvoid main() {\n    vec4 mvPosition = modelViewMatrix * vec4(position, 1.0);\n    #ifdef CG_USE_COLOR_MAP\n        vcgcolormapValue = normValueForColorMap(cgcolormapValue);\n    #endif\n    vcgpointVisible = cgpointVisible;\n    gl_PointSize = cgpointSize * cgpixelScale * 2.0;\n    gl_Position = projectionMatrix * mvPosition;\n    #include <logdepthbuf_vertex>\n}";c.FRAGMENT_SHADER=
"uniform sampler2D cgpointTexture;\nuniform vec3 cgpointColor;\nuniform float cgpointOpacity;\nuniform bool ishighlight;\n#include <logdepthbuf_pars_fragment>\n#ifdef CG_USE_COLOR_MAP\n    varying float vcgcolormapValue;\n    uniform sampler2D cgcolormapTexture;\n    vec4 getColorFromColorMap(float normValue) {\n        return texture2D(cgcolormapTexture, vec2(normValue, 0.5));\n    }\n#endif\nvarying float vcgpointVisible;\nvoid main() {\n    if(vcgpointVisible < 0.1) {\n        discard;\n    }\n    vec4 diffuseColor = vec4(cgpointColor, 1.0);\n    #ifdef CG_USE_COLOR_MAP\n        diffuseColor *= getColorFromColorMap(vcgcolormapValue);\n    #endif\n    vec4 finalColor = texture2D(cgpointTexture, gl_PointCoord);\n    if(finalColor.a < 0.5) {\n        discard;\n    }\n    gl_FragColor = diffuseColor * finalColor;\n    if (ishighlight == true) {\n        gl_FragColor.a = cgpointOpacity;\n    }\n    #include <logdepthbuf_fragment>\n}";
c.RZc="uniform sampler2D cgpointTexture;\nuniform vec3 cgpointColor;\nuniform float cgpointOpacity;\n#include <logdepthbuf_pars_fragment>\nvarying float vcgpointVisible;\nvoid main() {\n    if(vcgpointVisible < 0.1) {\n        discard;\n    }\n    vec4 diffuseColor = vec4(cgpointColor, 1.0);\n    vec4 finalColor = texture2D(cgpointTexture, gl_PointCoord);\n    if(finalColor.a < 0.5) {\n        discard;\n    }\n    gl_FragColor = diffuseColor * finalColor;\n    #include <logdepthbuf_fragment>\n}";
c.bMd=function(a,b){a.defines.hasOwnProperty("addedScatterShaders")||(a.defines.addedScatterShaders=!0,a.uniforms.cgpointTexture={type:"tv",value:null},a.uniforms.cgpointColor={type:"c",value:new Pq(1,1,1)},a.uniforms.cgpointOpacity={type:"f",value:1},a.uniforms.cgpixelScale={type:"f",value:ac()},a.uniforms.ishighlight={type:"bool",value:!1});b.hasOwnProperty("colorprovider")?"string"===typeof b.colorprovider?a.uniforms.cgpointColor.value=new Pq(b.colorprovider):b.colorprovider instanceof Pq&&(a.uniforms.cgpointColor.value=
b.colorprovider):b.hasOwnProperty("color")&&("string"===typeof b.color?a.uniforms.cgpointColor.value=new Pq(b.color):b.color instanceof Pq&&(a.uniforms.cgpointColor.value=b.color));b.hasOwnProperty("symbol")&&(b.symbol.wrapS=pw,b.symbol.wrapT=pw,a.uniforms.cgpointTexture.value=b.symbol);b.hasOwnProperty("opacity")&&(a.uniforms.cgpointOpacity.value=b.opacity)};c.aMd=function(a,b){a.defines.hasOwnProperty("addedProjectionShaders")||(a.defines.addedProjectionShaders=!0,a.uniforms.cgpointTexture={type:"tv",
value:null},a.uniforms.cgpointColor={type:"c",value:new Pq(1,1,1)},a.uniforms.cgpointOpacity={type:"f",value:1},a.uniforms.cgpixelScale={type:"f",value:ac()});b.hasOwnProperty("color")&&("string"===typeof b.color?a.uniforms.cgpointColor.value=new Pq(b.color):b.color instanceof Pq&&(a.uniforms.cgpointColor.value=b.color));b.hasOwnProperty("symbol")&&(b.symbol.wrapS=pw,b.symbol.wrapT=pw,a.uniforms.cgpointTexture.value=b.symbol);b.hasOwnProperty("opacity")&&(a.uniforms.cgpointOpacity.value=b.opacity)};
c.brd=function(a){return{symbol:a.uniforms.cgpointTexture.value,color:a.uniforms.cgpointColor.value,opacity:a.uniforms.cgpointOpacity.value,alphatest:a.uniforms.cgalphaTest.value,pixelscale:a.uniforms.cgpixelScale.value}};c.ard=function(a){return{projection_color:a.uniforms.cgpointColor.value,projection_opacity:a.uniforms.cgpointOpacity.value}};return c}();var gC=/*#__PURE__*/va(/*#__PURE__*/function(){function c(d){mz.call(this);this.ug(!1);this.hb=G(d,{multiplier:1.7,opacity:.4});this.Lc=new Aq;this.AU=null}var a=new uq,b=new Lp;D(c,mz);L(c,"geotoolkit3d.tool.Highlighter");c.prototype.setOptions=function(d){if(null==d)return this;mz.prototype.setOptions.call(this,d);this.hb=G(d,this.hb);return this};c.prototype.X_=function(){};c.prototype.CRc=function(d,e){null!=d&&(d instanceof jv?this.qMd(d,e):d instanceof $t&&this.pMd(d))};c.prototype.qMd=function(d,e){null==this.AU&&(e=d.parent.rZb(d.name,
e),this.Lc.setAttribute("position",e.position),this.Lc.setAttribute("cgpointVisible",e.cgpointVisible),this.Lc.setAttribute("cgpointSize",e.cgpointSize),this.Lc.setAttribute("cgcolormapValue",e.cgcolormapValue),this.GU=new Lw({vertexShader:fC.VERTEX_SHADER,fragmentShader:fC.FRAGMENT_SHADER,transparent:!0,uniforms:{cgpointTexture:d.material.uniforms.cgpointTexture,cgpointColor:d.material.uniforms.cgpointColor,cgpixelScale:d.material.uniforms.cgpixelScale,cgpointOpacity:{type:"f",value:this.hb.opacity},
ishighlight:{type:"bool",value:!0}}}),Zy.lRc(this.GU,{colorprovider:d.material.userData.yM}),this.AU=new jv(this.Lc,this.GU),this.AU.frustumCulled=!1,d=this.Lc.getAttribute("cgpointSize"),d.array[4]*=this.hb.multiplier,this.add(this.AU))};c.prototype.pMd=function(d){if(null==this.AU&&null!=d.geometry&&null!=d.material){this.AU=d.clone();a.makeEmpty();a.expandByObject(d);var e=a.getCenter(b);d=d.position;this.AU.position.subVectors(d,e).multiplyScalar(this.hb.multiplier).addVectors(this.AU.position,
e);this.AU.scale.multiplyScalar(this.hb.multiplier);this.AU.userData={};this.add(this.AU)}};c.prototype.dispose=function(){null!=this.AU&&(oz.dispose(this.AU),this.AU=null)};return c}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJzZXRQaWNrZWRPYmplY3QiOiJDUmMifX19");var hC=/*#__PURE__*/va(/*#__PURE__*/{gfb:"DistanceChanged"},2,"eyJEaXN0YW5jZUNoYW5nZWQiOiJnZmIifSAg"),iC=/*#__PURE__*/va(/*#__PURE__*/function(){function c(a){function b(){return!1}a=G(a,{name:"measuretool",enabled:!0,armingkey:17});Vy.call(this,a);this.ap=[];this.c2=new Lp(0,0,0);this.hDa=new Lp(0,0,0);a=new xq(10,10,10);var d=new au({color:65280});this.yjb=new $t(a,d);this.Onb=new $t(a,d);this.yjb.Qr=b;this.Onb.Qr=b;a=new tt({color:255});d=new Aq;var e=[];e.push(this.c2);e.push(this.hDa);d.setFromPoints(e);this.RNa=new rt(d,a);this.RNa.frustumCulled=!1;this.RNa.Qr=b;this.re=!0}D(c,Vy);L(c,"geotoolkit3d.tool.MeasuringTool");
c.Ja=hC;c.prototype.oJd=function(a){this.yjb.visible=a;this.Onb.visible=a;this.RNa.visible=a;return this};c.prototype.setOptions=function(a){a=G(a,{plot:this.lc,enabled:this.If});this.lc=a.plot;null!=this.lc&&(this.lc.getRoot().add(this.yjb),this.lc.getRoot().add(this.Onb),this.lc.getRoot().add(this.RNa));this.If=a.enabled;Vy.prototype.setOptions.call(this,a);return this};c.prototype.ta=function(){var a=Vy.prototype.ta.call(this);a.enabled=this.If;return a};c.prototype.BG=function(a){this.UQ&&this.TQd(vz.Ym(this.lc,
a.plotX,a.plotY,this.wc,this.wc),a,!0)};c.prototype.tI=function(a){};c.prototype.Oc=function(a){Vy.prototype.Oc.call(this,a);this.UQ&&(this.re=!this.re)};c.prototype.Uf=function(){return this.c2.distanceTo(this.hDa)};c.prototype.TQd=function(a){0<a.length&&(this.re?(this.c2=a[0].point.clone(),this.yjb.position.set(this.c2.x,this.c2.y,this.c2.z)):(this.hDa=a[0].point.clone(),this.Onb.position.set(this.hDa.x,this.hDa.y,this.hDa.z)),a=[],a.push(this.c2),a.push(this.hDa),this.RNa.geometry.setFromPoints(a),
this.lc.Xf(),this.RNa.geometry.yRd=!0,this.notify("DistanceChanged",this,this.Uf()))};c.prototype.zK=Hb;c.prototype.eN=Hb;c.prototype.fN=Hb;c.prototype.cF=Hb;c.prototype.zp=Hb;c.prototype.OD=Hb;c.prototype.ND=Hb;c.prototype.dF=Hb;c.prototype.LD=Hb;c.prototype.Rz=Hb;c.prototype.KD=Hb;c.prototype.eF=Hb;c.prototype.QD=Hb;c.prototype.lC=Hb;c.prototype.AK=Hb;c.prototype.BK=Hb;return c}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJzZXRDaGlsZHJlblZpc2liaWxpdHkiOiJvSmQiLCJnZXRPcHRpb25zIjoidGEiLCJvbkN1cnNvck1vdmUiOiJCRyIsIm9uVGFwIjoidEkiLCJvbk1vdXNlVXAiOiJPYyIsImdldERpc3RhbmNlIjoiVWYiLCJvbktleVN0YXJ0IjoieksiLCJvbktleSI6ImVOIiwib25LZXlFbmQiOiJmTiIsIm9uRG91YmxlVGFwIjoiY0YiLCJvbk1vdXNlV2hlZWwiOiJ6cCIsIm9uUGluY2hTdGFydCI6Ik9EIiwib25QaW5jaCI6Ik5EIiwib25QaW5jaEVuZCI6ImRGIiwib25EcmFnU3RhcnQiOiJMRCIsIm9uRHJhZyI6IlJ6Iiwib25EcmFnRW5kIjoiS0QiLCJvblNsaWRlU3RhcnQiOiJlRiIsIm9uU2xpZGUiOiJRRCIsIm9uU2xpZGVFbmQiOiJsQyIsIm9uVmlzaWJpbGl0eUdhaW5lZCI6IkFLIiwib25WaXNpYmlsaXR5TG9zdCI6IkJLIn19fSAg");var kC=/*#__PURE__*/va(/*#__PURE__*/function(){function c(a){mz.call(this,a);this.type="MeshNormalsHelper";var b=G(a,{showsmoothnormals:!0,smoothnormalsscale:10,smoothnormalscolor:"red",showflatnormals:!1,flatnormalsscale:10,flatnormalscolor:"green"});a=a.geometry;if(b.showsmoothnormals){var d=c.Utc(a.index,a.attributes.position,a.attributes.normal,b.smoothnormalsscale);d=c.Z6a(b.smoothnormalscolor,d);this.add(d)}b.showflatnormals&&(a=c.Ttc(a.index,a.attributes.position,b.flatnormalsscale),b=c.Z6a(b.flatnormalscolor,a),this.add(b))}D(c,mz);L(c,"geotoolkit3d.tool.MeshNormalsHelper");c.Z6a=function(a,b){return new lz({data:{positions:b},color:a,linewidth:1})};c.Utc=function(a,b,d,e){for(var f=[],g,h,k,l,m,n,p,q,r=new Lp(0,0,0),t=new Lp(0,0,0),u=0;u<a.count;u+=3)n=a.getX(u),p=a.getY(u),q=a.getZ(u),g=d.getX(n),h=d.getY(n),k=d.getZ(n),g+=d.getX(p),h+=d.getY(p),k+=d.getZ(p),g+=d.getX(q),h+=d.getY(q),k+=d.getZ(q),Number.isFinite(g)&&Number.isFinite(h)&&Number.isFinite(k)&&(l=b.getX(n),m=b.getY(n),n=b.getZ(n),l+=b.getX(p),m+=b.getY(p),
n+=b.getZ(p),l+=b.getX(q),m+=b.getY(q),n+=b.getZ(q),Number.isFinite(l)&&Number.isFinite(m)&&Number.isFinite(n)&&(r.set(l/3,m/3,n/3),t.set(g,h,k),t.normalize(),t.multiplyScalar(e),f.push(r.x,r.y,r.z,r.x+t.x,r.y+t.y,r.z+t.z)));return f};c.Ttc=function(a,b,d){for(var e=[],f,g,h,k,l,m,n,p,q,r=new Lp(0,0,0),t=new Lp(0,0,0),u=new Lp(0,0,0),w=0;w<a.count;w+=3)n=a.getX(w),p=a.getY(w),q=a.getZ(w),f=b.getX(n),g=b.getX(p),h=b.getX(q),k=b.getY(n),l=b.getY(p),m=b.getY(q),n=b.getZ(n),p=b.getZ(p),q=b.getZ(q),u.set((f+
g+h)/3,(k+l+m)/3,(n+p+q)/3),Number.isFinite(u.x)&&Number.isFinite(u.y)&&Number.isFinite(u.z)&&(r.set(g-f,l-k,p-n),t.set(h-f,m-k,q-n),r.cross(t),r.normalize(),r.multiplyScalar(d),e.push(u.x,u.y,u.z,u.x+r.x,u.y+r.y,u.z+r.z));return e};return c}(),2,"eyJjcmVhdGVMaW5lc0Zyb21TbW9vdGhzaGFkaW5nTm9ybWFscyI6IlV0YyIsImNyZWF0ZUxpbmVzRnJvbUZsYXRzaGFkaW5nTm9ybWFscyI6IlR0YyJ9");var lC=/*#__PURE__*/va(/*#__PURE__*/function(){function c(a){a=G(a,{name:"planarmovetool",filter:null});YB.call(this,a);this.uf=a.filter;this.wqa=null}D(c,YB);L(c,"geotoolkit3d.tool.PlanarMoveTool");c.prototype.bCb=function(){var a=this.GOa;null==a&&(a=this.dk.localToWorld(this.dk.geometry.boundingBox.getCenter(this.ym.position)));this.ym.position.copy(a);a=this.lc.Yua();var b=this.lc.bSa();b.sub(a).negate().add(this.ym.position);this.ym.lookAt(b)};c.prototype.setOptions=function(a){a=G(a,{plot:this.lc,enabled:this.If,pickenabled:this.BOa,
object:void 0!==a.object?null:this.dk,pickingplanecenter:void 0!==a.pickingplanecenter?null:this.GOa,filter:a.filter});this.uf=a.filter;this.dk!==a.object&&this.lP(XB.vza,a.object,null);this.dk=a.object;this.GOa=null;null==this.lc&&null!=a.plot&&(this.lc=a.plot,this.ym=new $t(new dv(2E6,2E6,2,2),new au({color:"white",opacity:.3,transparent:!0})),this.ym.name="PICKING_PLANE",this.ym.material.visible=!1);null!=this.ym&&null!=this.dk&&null!=this.lc&&(this.lc.getRoot().add(this.ym),this.dk.geometry.computeBoundingBox(),
this.GOa=a.pickingplanecenter,this.bCb());this.If=a.enabled;this.BOa=a.pickenabled;null==this.lc||null!=this.dk&&!1!==this.If||this.lc.getRoot().remove(this.ym);YB.prototype.setOptions.call(this,a);return this};c.prototype.ta=function(){var a=YB.prototype.ta.call(this);a.filter=this.uf;a.pickingplanecenter=this.GOa;return a};c.prototype.Ym=function(a){a=vz.Ym(this.lc,a.plotX,a.plotY,this.wc,this.wc,this.uf);var b=0<a.length?a[0]:null;null!=b&&b.object===this.ym&&(b=1<a.length?a[1]:null);this.setOptions({object:null!=
b?b.object:null,pickingplanecenter:null!=b?b.point:null})};c.prototype.move=function(a,b){if(null!=this.ym.parent){a=pA.m3b(this.lc,a.plotX,a.plotY,this.ym);for(var d=null,e=0;e<a.length;e++)if(a[e].object===this.ym){d=a[e].point;break}null==d?this.lP(b,this.dk,new Lp):(d=this.dk.parent.worldToLocal(d.clone()).sub(this.dk.parent.worldToLocal(this.GOa.clone())),this.GOa=a[e].point.clone(),null!=this.wqa&&this.wqa(this.dk,d),1E-5<d.length()&&this.dk.position.add(d),this.lP(b,this.dk,d),this.bCb(),null!=
this.dk.Xf?this.dk.Xf():mz.prototype.Xf.call(this.dk),b===XB.Ao&&this.setOptions({object:null}))}};c.prototype.MId=function(a){this.wqa=a;return this};return c}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoidGEiLCJzZXRBZGp1c3RGdW5jdGlvbiI6Ik1JZCJ9fX0g");var mC=/*#__PURE__*/va(/*#__PURE__*/function(){function c(a){a=G(a,{name:"SliderMoveTool"});YB.call(this,a);this.wqa=null}D(c,YB);L(c,"geotoolkit3d.tool.SliderMoveTool");c.prototype.setOptions=function(a){a=G(a,{});this.mNa=a.initialpoint;YB.prototype.setOptions.call(this,a);return this};c.prototype.ta=function(){var a=YB.prototype.ta.call(this);a.initialpoint=this.mNa;return a};c.prototype.Ym=function(a){var b=vz.Ym(this.lc,a.plotX,a.plotY,this.wc,this.wc);this.setOptions({object:0<b.length?b[0].object:null,initialpoint:new gy(a.plotX,
a.plotY)});return this};c.prototype.move=function(a,b){if(null==this.mNa)return this;var d=new gy(a.plotX-this.mNa.x,a.plotY-this.mNa.y);null!=this.wqa&&(!0===this.wqa(this.dk,d,this.mNa.clone())&&this.mNa.set(a.plotX,a.plotY),null!=this.dk.Xf?this.dk.Xf():mz.prototype.Xf.call(this.dk));this.lP(b,this.dk,d);return this};c.prototype.bRc=function(a){this.wqa=a;return this};c.prototype.dispose=function(){this.wqa=null;YB.prototype.dispose.call(this)};return c}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoidGEiLCJzZXRNb3ZlRnVuY3Rpb24iOiJiUmMifX19");var nC=/*#__PURE__*/va(/*#__PURE__*/function(){function c(a){a=G(a,{name:"tooltip",enabled:!0,cursor:new gC,opacity:1,innerHTML:function(e){return e.object.type}});Vy.call(this,a);this.hb=a;this.ap=[];this.Be=null;null!=a.divelement&&(this.Qka="string"===typeof a.divelement?Za.document.getElementById(a.divelement):a.divelement);var b=null,d=this;this.uQa(function(e,f){var g=d.Qka.style;if(0===f.length||f[0].pointindex!==b||f[0].object.uuid!==b)g.display="none",b=null,null!=d.lq&&d.lq.dispose();if(0!==f.length){b=f[0].pointindex||
f[0].object.uuid;d.lq instanceof gC&&d.lq.CRc(f[0].object,f[0].pointindex);g.display="block";g.opacity=d.hb.opacity;d.Qka.innerHTML=d.hb.innerHTML(f[0]);f=d.Qka.offsetWidth;var h=d.Qka.offsetHeight;g.left=e.clientX-f/2+"px";g.top=e.clientY-h-15+"px"}})}D(c,Vy);L(c,"geotoolkit3d.tool.ToolTip");c.prototype.setOptions=function(a){this.hb=G(a,this.hb);this.If=this.hb.enabled;this.lq=this.hb.cursor;Vy.prototype.setOptions.call(this,this.hb);null!=this.lc&&null==this.Be&&(this.Be=this.lc.SV(),null==this.Qka&&
(this.Qka=Za.document.createElement("div"),a=this.Qka.style,a.position="fixed",a["min-width"]="40px",a["text-align"]="left",a.padding="5px 10px 5px 10px",a["background-color"]="#000000",a.display="none",a.opacity="0",a.color="#ffffff",a["border-radius"]="6px",a["z-index"]="999"),this.Be.appendChild(this.Qka));return this};c.prototype.ta=function(){var a=Vy.prototype.ta.call(this);return a=xb(a,this.hb)};c.prototype.vXb=function(){return this.Qka};c.prototype.Ywb=function(a){this.lq.visible=null!=
a;null==this.lq.parent&&this.lc.getRoot().add(this.lq);null!=a&&this.lq.X_(a);this.lq.Xf()};c.prototype.lP=function(a,b){for(var d=0;d<this.ap.length;d++)this.ap[d](a,b);null!=this.lc&&null!=this.lq&&(a=0!==b.length?b[0].point:null,this.Ywb(a))};c.prototype.uQa=function(a){-1===this.ap.indexOf(a)&&this.ap.push(a)};c.prototype.BG=function(a){if(this.If){var b=vz.Ym(this.lc,a.plotX,a.plotY,this.wc,this.wc);this.lP(a,b)}};c.prototype.tI=function(a){if(this.If){var b=vz.Ym(this.lc,a.plotX,a.plotY,this.wc,
this.wc);this.lP(a,b)}};c.prototype.fN=Hb;c.prototype.LD=Hb;c.prototype.Rz=Hb;c.prototype.KD=Hb;c.prototype.zK=Hb;c.prototype.eN=Hb;c.prototype.cF=Hb;c.prototype.zp=Hb;c.prototype.OD=Hb;c.prototype.ND=Hb;c.prototype.dF=Hb;c.prototype.eF=Hb;c.prototype.QD=Hb;c.prototype.lC=Hb;c.prototype.AK=Hb;c.prototype.BK=Hb;c.prototype.dispose=function(){this.ap=null;Vy.prototype.dispose.call(this)};return c}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoidGEiLCJnZXREaXZFbGVtZW50IjoidlhiIiwiYWRkTW92ZUxpc3RlbmVyIjoidVFhIiwib25DdXJzb3JNb3ZlIjoiQkciLCJvblRhcCI6InRJIiwib25LZXlFbmQiOiJmTiIsIm9uRHJhZ1N0YXJ0IjoiTEQiLCJvbkRyYWciOiJSeiIsIm9uRHJhZ0VuZCI6IktEIiwib25LZXlTdGFydCI6InpLIiwib25LZXkiOiJlTiIsIm9uRG91YmxlVGFwIjoiY0YiLCJvbk1vdXNlV2hlZWwiOiJ6cCIsIm9uUGluY2hTdGFydCI6Ik9EIiwib25QaW5jaCI6Ik5EIiwib25QaW5jaEVuZCI6ImRGIiwib25TbGlkZVN0YXJ0IjoiZUYiLCJvblNsaWRlIjoiUUQiLCJvblNsaWRlRW5kIjoibEMiLCJvblZpc2liaWxpdHlHYWluZWQiOiJBSyIsIm9uVmlzaWJpbGl0eUxvc3QiOiJCSyJ9fX0g");var pC=/*#__PURE__*/va(/*#__PURE__*/function(){function c(){KA.call(this);this.LRb=this.FRb=this.kPa=1}D(c,KA);L(c,"geotoolkit3d.transformation.IndexCoordinates");c.prototype.validate=function(a){KA.prototype.validate.call(this);null==this.kPa&&(this.kPa=1);null==this.jea&&(this.jea=this.LJ+(null!=a?this.kPa*(a-1):0))};c.prototype.zj=function(){return this.kPa};c.prototype.Rtb=function(){return this.FRb};c.prototype.Ytb=function(){return this.LRb};c.prototype.Noe=function(){var a=this.fua();a.min.z=0;a.max.z=(this.jea-this.LJ)/
this.kPa;return a};c.prototype.Kjd=function(a){this.PH=a.i0;this.HJ=a.j0;this.QH=a.i0+(a.icount-1)*a.istep;this.IJ=a.j0;this.RH=a.i0+(a.icount-1)*a.istep;this.JJ=a.j0+(a.jcount-1)*a.jstep;this.VR=this.ZO=null;this.LJ=null!=a.z0?a.z0:0;this.jea=null!=a.z1?a.z1:null;this.kPa=a.samplerate;this.FRb=a.istep;this.LRb=a.jstep;this.validate(a.samplecount);return this};return c}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRTYW1wbGVSYXRlIjoiemoiLCJnZXRJU3RlcCI6IlJ0YiIsImdldEpTdGVwIjoiWXRiIiwiZnJvbUpTT05JbmRleCI6IktqZCJ9fX0g");var qC=/*#__PURE__*/va(/*#__PURE__*/function(){function c(a,b){this.re=a;this.G3=b}L(c,"geotoolkit3d.transformation.IndexToXY");c.prototype.FQa=function(a){var b=this.re.zXb(),d=this.re.AXb(),e=[new Lp(this.re.rfa().x,this.re.rfa().y,b),new Lp(this.re.Jva().x,this.re.Jva().y,b),new Lp(this.re.sfa().x,this.re.sfa().y,d),new Lp(this.re.Kva().x,this.re.Kva().y,b)];b=[new Lp(this.G3.rfa().x,this.G3.rfa().y,b),new Lp(this.G3.Jva().x,this.G3.Jva().y,b),new Lp(this.G3.sfa().x,this.G3.sfa().y,d),new Lp(this.G3.Kva().x,this.G3.Kva().y,
b)];a.updateMatrix();a.applyMatrix4(bz.T4b(e,b))};return c}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJhcHBseVRvTWVzaCI6IkZRYSJ9fX0g");var rC=/*#__PURE__*/va(/*#__PURE__*/function(){function c(){}var a=1,b=null,d=null,e=null,f=null;L(c,"geotoolkit3d.util.Detector");c.canvas=function(){hb("geotoolkit3d.util.Detector was deprecated since 3.4, use geotoolkit3d.util.WebGLConstants instead");null==f&&(f=Za.CanvasRenderingContext2D&&!0);return f};c.mve=function(g){hb("geotoolkit3d.util.Detector was deprecated since 3.4, use geotoolkit3d.util.WebGLConstants instead");if(null==b||null==d)if(b=!1,d=g.capabilities.isWebGL2,g=g.getContext(),sd.M0b()){var h=g.getParameter(g.RENDERER);
b=0<=h.indexOf("Intel")}else if(h=g.getExtension("WEBGL_debug_renderer_info"),!h||0<=g.getParameter(h.UNMASKED_RENDERER_WEBGL).indexOf("Intel"))b=!0};c.sCb=function(){hb("geotoolkit3d.util.Detector was deprecated since 3.4, use geotoolkit3d.util.WebGLConstants instead");if(null==e)try{e=Za.WebGLRenderingContext&&wc(a,a).getContext("experimental-webgl")&&!0}catch(g){e=!1}return e};c.$$a=function(){hb("geotoolkit3d.util.Detector was deprecated since 3.4, use geotoolkit3d.util.WebGLConstants instead");
return null==b?(hb("Detector.isIntelGPU: cannot determine the type of GPU"),null):b};c.isWebGL2=function(){hb("geotoolkit3d.util.Detector was deprecated since 3.4, use geotoolkit3d.util.WebGLConstants instead");return d};return c}(),2,"eyJ3ZWJnbCI6InNDYiIsImlzSW50ZWxHUFUiOiIkJGEifSAg");var sC=/*#__PURE__*/va(/*#__PURE__*/function(){function c(){this.iIb={};this.UQb={};this.Fpc=[]}var a=null;L(c,"geotoolkit3d.util.factories.SimpleFactory");c.prototype.Vy=function(b,d){null!=b&&null!=d&&(this.iIb[b]=d)};c.prototype.QNd=function(b,d){null!=b&&null!=d&&(this.UQb[b]=d)};c.prototype.createElement=function(b,d){if(null==this.iIb[d.name])return-1===this.Fpc.indexOf(d.name)&&(hb("Component ("+d.name+") not registered with Factory"),this.Fpc.push(d.name)),null;b=this.iIb[d.name](b,d);d.id=b.id;b.parameters=JSON.stringify(d);
return b};c.prototype.BQd=function(b,d,e){if(null==this.UQb[d.name])return this.createElement(b,d);this.UQb[d.name](b,d,e);e.parameters=JSON.stringify(d);return null};c.ya=function(){a||(a=new c);return a};return c}(),2,"eyJnZXRJbnN0YW5jZSI6InlhIiwicHJvdG90eXBlIjp7InMiOjAsImMiOnsic2V0RmFjdG9yeSI6IlZ5Iiwic2V0VXBkYXRlRmFjdG9yeSI6IlFOZCJ9fX0g");var tC=/*#__PURE__*/function(){function c(){}L(c,"geotoolkit3d.util.interpolators.AbstractInterpolator");c.prototype.interpolate=Fb;return c}();var uC=/*#__PURE__*/function(){function c(){}var a=new Lp,b=new Lp,d=new Lp;D(c,tC);L(c,"geotoolkit3d.util.interpolators.InverseDistanceWeighting");c.prototype.interpolate=function(e,f,g,h,k,l){var m=g[0]instanceof Mp,n=new Float32Array(f.x*f.y*f.z),p=0;d.subVectors(e.max,e.min).set(d.x/f.x,d.y/f.y,d.z/f.z);for(var q=.5;q<f.x;q++)for(var r=.5;r<f.y;r++)for(var t=.5;t<f.z;t++){var u=!1;a.copy(e.min).set(a.x+d.x*q,a.y+d.y*r,a.z+d.z*t);for(var w=0,y=0,A=0;A<g.length;A++){m?b.set(g[A].x,g[A].y,g[A].z):b.set(g[A],
h[A],k[A]);var x=1/b.distanceTo(a);if(Number.isFinite(x))w=m?w+x*g[A].w:w+x*l[A],y+=x;else{n[p]=m?g[A].w:l[A];u=!0;break}}u||(n[p]=w/y);p++}return n};return c}();var vC=/*#__PURE__*/va(/*#__PURE__*/function(){function c(){tB.call(this)}L(c,"geotoolkit3d.util.intersection.AbstractSeismicIntersection");D(c,tB);c.prototype.uJa=function(a,b){var d=new Lp,e=new Lp,f=new Lp,g=a.geometry,h=g.getAttribute("position"),k=g.getIndex();g=k.getX(0);var l=k.getY(0);k=k.getZ(0);d.set(h.getX(g),h.getY(g),h.getZ(g));e.set(h.getX(l),h.getY(l),h.getZ(l));f.set(h.getX(k),h.getY(k),h.getZ(k));a.localToWorld(d);a.localToWorld(e);a.localToWorld(f);b.worldToLocal(d);b.worldToLocal(e);b.worldToLocal(f);return{p1:d,
p2:e,p3:f}};return c}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJ0cmFuc2Zvcm1Cb3VuZGluZ0JveENvb3JkaW5hdGUiOiJ1SmEifX19");var wC=/*#__PURE__*/va(/*#__PURE__*/function(){function c(){vC.call(this)}var a=new Lp;L(c,"geotoolkit3d.util.intersection.FenceIntersection");D(c,vC);c.prototype.Jea=function(b,d,e){var f=this.uJa(b.n_(),d);if(null==f.p1)return hb("geotoolkit3d.util.intersection.FenceIntersection: cannot get bounding box."),null;var g=e.preservecolor,h=f.p1.distanceTo(f.p3),k=f.p1.distanceTo(f.p2),l=[],m=[],n=this.dma(b.n_(),d);var p=this.DZb(n,d,g);var q=p.coordinates;p=p.colors;var r=b.u_(),t=r.ca(),u=r.da(),w=this.X7a(n,f.p1,f.p2);for(f=
0;f<q.length;f++){var y=[],A=[];for(n=0;n<q[f].length;n+=3){var x=q[f];a.set(x[n],x[n+1],x[n+2]);a.applyMatrix4(w);x=a.x/h;var C=a.y/k;y.push(x*t+r.getX());A.push(C*u+r.getY())}0!==y.length&&0!==A.length&&(l.push(y),m.push(A))}h={coordinates:{x:l,y:m},fillstyle:e.fillstyle};if(g&&Array.isArray(p)&&0<p.length){e=d.ta().colorprovider;g=[];for(k=0;k<l.length;++k)m=new rf(e.rb(p[k])),g.push(m);h.fillstyle=g}else h.fillstyle=Array(l.length).fill(e.fillstyle);return this.Sj(h,b,d)};c.prototype.Kea=function(b,
d,e){var f=this.uJa(b.n_(),d);if(null==f.p1)return hb("geotoolkit3d.util.intersection.FenceIntersection: cannot get bounding box."),[];var g=e.preservecolor,h=f.p1.distanceTo(f.p3),k=f.p1.distanceTo(f.p2),l=[],m=[],n=this.dma(b.n_(),d);var p=this.$Zb(n,d,g);var q=p.coordinates;var r=p.colors;var t=b.u_(),u=t.ca(),w=t.da();f=this.X7a(n,f.p1,f.p2);for(n=0;n<q.length;n++){var y=q[n];a.set(y[0],y[1],y[2]);a.applyMatrix4(f);y=a.x/h;var A=a.y/k;l.push(y*u+t.getX());m.push(A*w+t.getY())}e={coordinates:{x:l,
y:m},fillstyle:e.fillstyle,linewidth:e.linewidth};if(g&&void 0!==p.colors){g=[];for(p=0;p<l.length;p++)g.push([(l[p]-l[0])/(l[l.length-1]-l[0]),r[p]]);e.fillstyle=this.S7a(g)}return this.nm(e,b,d)};return c}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJkcmF3UmVzZXJ2b2lySW50ZXJzZWN0aW9uIjoiSmVhIiwiZHJhd1N1cmZhY2VJbnRlcnNlY3Rpb24iOiJLZWEifX19");var xC=/*#__PURE__*/va(/*#__PURE__*/function(){function c(){vC.call(this)}var a=new Lp,b=new Yt;L(c,"geotoolkit3d.util.intersection.SeismicIntersection");D(c,vC);c.prototype.Jea=function(d,e,f){var g=f.preservecolor,h=d.iTa(),k=h.hasOwnProperty("z"),l=d.children[0];null==l.geometry.boundingBox&&l.geometry.computeBoundingBox();var m=l.geometry.boundingBox.clone(),n=l.localToWorld(m.min.clone()),p=l.localToWorld(m.max.clone());e.worldToLocal(n);e.worldToLocal(p);var q=d.ta().data.limits;h=[];var r=[];var t=this.dma(l,e);t=this.DZb(t,
e,g);var u=t.coordinates;t=t.colors;var w=q.ca();q=q.da();if(k)for(b.copy(l.matrixWorld).invert(),k=0;k<u.length;++k){var y=[];var A=[];for(l=0;l<u[k].length;l+=3){var x=u[k];a.set(x[l],x[l+1],x[l+2]);a.applyMatrix4(e.matrixWorld);a.applyMatrix4(b);n=a.x/(m.max.x-m.min.x)-m.min.x;p=a.y/(m.max.y-m.min.y)-m.min.y;y.push(n*w);A.push((1-p)*q)}h.push(y);r.push(A)}else for(w=(m=Math.abs(p.x-n.x)>Math.abs(p.y-n.y))?w/(p.x-n.x):w/(p.y-n.y),q=q/(p.z-n.z)/d.XV().zj(),k=0;k<u.length;++k){y=[];A=[];for(l=0;l<
u[k].length;l+=3)x=u[k],y.push((m?x[l+0]-n.x:x[l+1]-n.y)*w),A.push((p.z-x[l+2])*q);h.push(y);r.push(A)}r={coordinates:{x:h,y:r},fillstyle:f.fillstyle};if(g&&Array.isArray(t)&&0<t.length){f=e.ta().colorprovider;g=[];for(u=0;u<h.length;++u)n=new rf(f.rb(t[u])),g.push(n);r.fillstyle=g}else r.fillstyle=Array(h.length).fill(f.fillstyle);return this.Sj(r,d,e)};c.prototype.Kea=function(d,e,f){var g=f.preservecolor,h=d.iTa(),k=h.hasOwnProperty("z"),l=d.children[0];null==l.geometry.boundingBox&&l.geometry.computeBoundingBox();
var m=l.geometry.boundingBox.clone(),n=l.localToWorld(m.min.clone()),p=l.localToWorld(m.max.clone());e.worldToLocal(n);e.worldToLocal(p);var q=d.ta().data.limits,r=[],t=[];if(k){var u=new Lp,w=new Lp;var y=l.geometry;var A=y.getAttribute("position");y=y.getIndex().getX(0);l.localToWorld(u.set(A.getX(y),A.getY(y),A.getZ(y)));y=e.ta();if(Number.isFinite(y.zmin)&&Number.isFinite(y.zmax)&&(A=e.localToWorld(new Lp(0,0,y.zmin)).z,y=e.localToWorld(new Lp(0,0,y.zmax)).z,u.z<A||u.z>y))return[];y=this.YVb(u.z,
e,g);var x=y.coordinates;A=y.colors;for(h=0;h<x.length;h++)w.set(x[h].x,x[h].y,u.z),l.worldToLocal(w),n=w.x/(m.max.x-m.min.x)-m.min.x,p=w.y/(m.max.y-m.min.y)-m.min.y,r.push(n*q.width),t.push((1-p)*q.height)}else{A=this.dma(l,e);y=this.$Zb(A,e,g);x=y.coordinates;A=y.colors;m=q.ca();var C=q.da();q=d.parent.parent.ta().displaymode;m=(l=Math.abs(p.x-n.x)>Math.abs(p.y-n.y))?m/(p.x-n.x):m/(p.y-n.y);C=C/(p.z-n.z)/d.XV().zj();for(var z=0;z<x.length;z++){var v=x[z];r.push((l?v[0]-n.x:v[1]-n.y)*m);t.push((p.z-
v[2])*C)}h.hasOwnProperty("j")&&q===Cy.f0b&&r.reverse();q=[];for(x=0;x<r.length;x++)l=[r[x],t[x]],g&&l.push(A[x]),q.push(l);q.sort(function(B,E){return B[0]-E[0]});r=[];t=[];A=[];for(x=0;x<q.length;x++)u!==q[x][0]&&w!==q[x][1]&&(r.push(q[x][0]),t.push(q[x][1]),g&&A.push(q[x][2]),u=q[x][0],w=q[x][1])}f={coordinates:{x:r,y:t},fillstyle:f.fillstyle,linewidth:f.linewidth};if(g&&void 0!==y.colors){g=[];for(t=0;t<r.length;t++)g.push([(r[t]-r[0])/(r[r.length-1]-r[0]),A[t]]);f.fillstyle=this.S7a(g)}return this.nm(f,
d,e,!k)};c.prototype.YVb=function(d,e,f){var g=[],h=e.ta().colorprovider,k,l=e.ta().data;null!=l&&null!=l.values?k=l.values:f=!1;var m=e.children[0].geometry,n=m.attributes.position,p=n.array;l=[];if(n instanceof Xs){var q=n.data.stride,r=n.offset;n=n.itemSize;for(var t=0;t<p.length;t++)t%q<r||t%q>=r+n||l.push(p[t])}else l=p;p=[];q=m.index.array;m=m.getIndex();for(r=0;r<q.length;r+=3){t=3*q[r];var u=3*q[r+1];n=3*q[r+2];t=new Lp(l[t],l[t+1],l[t+2]);u=new Lp(l[u],l[u+1],l[u+2]);n=new Lp(l[n],l[n+1],
l[n+2]);e.localToWorld(t);e.localToWorld(u);e.localToWorld(n);n=new LB([t.x,t.y,t.z],[u.x,u.y,u.z],[n.x,n.y,n.z],d);n.R0b()&&n.qwb()&&(p.push(n.qYb(),n.IZb()),f&&(n=m.getX(r),n=h.rb(k[n]),n=n.Nl(),g.push(n,n)))}return d={coordinates:p,colors:g}};return c}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJkcmF3UmVzZXJ2b2lySW50ZXJzZWN0aW9uIjoiSmVhIiwiZHJhd1N1cmZhY2VJbnRlcnNlY3Rpb24iOiJLZWEifX19");var yC=/*#__PURE__*/function(){function c(){}L(c,"geotoolkit3d.util.shaders.BoundingBox");c.VERTEX_SHADER="#version 300 es\nlayout(std140, column_major) uniform;\nlayout(location=0) in vec4 position;\nuniform mat4 uModel;\nuniform mat4 uViewProj;\nvoid main() {\n    gl_Position = uViewProj * uModel * position;\n}";c.FRAGMENT_SHADER="#version 300 es\nprecision highp float;\nlayout(std140, column_major) uniform;\nout vec4 fragColor;\nvoid main() {\n    fragColor = vec4(1.0, 1.0, 1.0, 1.0);\n}";return c}();var zC=/*#__PURE__*/va(/*#__PURE__*/function(){function c(){this.name="AbstractOcclusionManager";this.U2a=wc(1,1,!0);b=this.U2a.getContext("webgl2");if(!b)return hb("WebGL 2 not available in current browser. Occlusion cannot be enabled!"),null;var n=b.createShader(b.VERTEX_SHADER);b.shaderSource(n,d.VERTEX_SHADER);b.compileShader(n);b.getShaderParameter(n,b.COMPILE_STATUS)||hb(b.getShaderInfoLog(n));var p=b.createShader(b.FRAGMENT_SHADER);b.shaderSource(p,d.FRAGMENT_SHADER);b.compileShader(p);b.getShaderParameter(p,b.COMPILE_STATUS)||
hb(b.getShaderInfoLog(p));var q=b.createProgram();b.attachShader(q,n);b.attachShader(q,p);b.linkProgram(q);b.useProgram(q);b.getProgramParameter(q,b.LINK_STATUS)||hb(b.getProgramInfoLog(q));e=b.getUniformLocation(q,"uModel");f=b.getUniformLocation(q,"uViewProj");this.Cb=1;this.pNb=0;this.ek=[];this.qpb=!1;this.If=!0;return this}function a(n,p){k.copy(n.userData.bboxCenter);l.copy(p.userData.bboxCenter);m.copy(g).multiply(n.matrixWorld);k.applyMatrix4(m);m.copy(g).multiply(p.matrixWorld);l.applyMatrix4(m);
return l.z-k.z}var b,d=yC,e,f,g,h,k=new Lp,l=new Lp,m=new Yt;L(c,"geotoolkit3d.util.occlusion.AbstractOcclusionManager");c.prototype.pAb=Fb;c.prototype.oTc=function(n){this.If=n;return this};c.prototype.DEd=function(){if(!(1>this.ek.length)){for(var n=[],p=0;p<this.ek.length;p++){var q=this.ek[p];null==q.geometry.boundingBox&&q.geometry.computeBoundingBox();var r=q.geometry.boundingBox.clone(),t=new Lp,u=oz.Ysc(r,this.Cb);n.push(u);q.userData.query=b.createQuery();q.userData.queryInProgress=!1;q.userData.occluded=
!1;q.userData.bboxNumVertices=u.length;q.userData.bboxCenter=r.getCenter(t);q.userData.isvalid=!0}this.ccd(n.flat())}};c.prototype.render=function(n,p){if(this.If){if(!this.qpb){if(!b||1>=this.ek.length)return;this.DEd();this.qpb=!0}var q=this.ek;p=p.getSize();this.resize(p.ca(),p.da());b.clearColor(0,0,0,1);b.enable(b.DEPTH_TEST);b.colorMask(!0,!0,!0,!0);b.depthMask(!0);b.clear(b.COLOR_BUFFER_BIT|b.DEPTH_BUFFER_BIT);g=n.matrixWorldInverse.clone();h=n.projectionMatrix.clone();n=h.multiply(g);q.sort(a);
b.colorMask(!1,!1,!1,!1);b.depthMask(!1);for(var r=p=0;r<q.length;r++){var t=q[r].userData;b.uniformMatrix4fv(e,!1,q[r].matrixWorld.elements);b.uniformMatrix4fv(f,!1,n.elements);t.S3b&&b.getQueryParameter(t.query,b.QUERY_RESULT_AVAILABLE)&&(t.g2b=!b.getQueryParameter(t.query,b.QUERY_RESULT),t.S3b=!1,t.g2b&&p++);var u=!0;t.hasOwnProperty("isvalid")&&!t.isvalid&&(u=!1,t.g2b=!1);!t.S3b&&u&&(u=t.pse*t.Vbd/3,b.beginQuery(b.ANY_SAMPLES_PASSED_CONSERVATIVE,t.query),b.drawArrays(b.TRIANGLES,u,t.Vbd/3),b.endQuery(b.ANY_SAMPLES_PASSED_CONSERVATIVE),
t.S3b=!0);t.g2b?q[r].visible=!1:(q[r].visible=!0,b.colorMask(!0,!0,!0,!0),b.depthMask(!0))}b.flush();this.pNb!==p&&(this.pNb=p)}else this.qpb&&(this.ek.forEach(function(w){w.visible=!0}),this.qpb=!1)};c.prototype.ccd=function(n){var p;Array.isArray(n)&&(p=new Float32Array(n));n=b.createVertexArray();b.bindVertexArray(n);n=b.createBuffer();b.bindBuffer(b.ARRAY_BUFFER,n);b.bufferData(b.ARRAY_BUFFER,p,b.STATIC_DRAW);b.vertexAttribPointer(0,3,b.FLOAT,!1,0,0);b.enableVertexAttribArray(0)};c.prototype.resize=
function(n,p){if(this.U2a.width!==n||this.U2a.height!==p)this.U2a.width=n,this.U2a.height=p,b.viewport(0,0,n,p)};c.prototype.Lqd=function(){return this.pNb};return c}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJzZXRPYmplY3RzIjoicEFiIiwic2V0VXNhYmlsaXR5Ijoib1RjIiwiZ2V0TnVtYmVyT2ZPY2NsdWRlZE9iamVjdHMiOiJMcWQifX19");var AC=/*#__PURE__*/va(/*#__PURE__*/function(){function c(){zC.call(this);this.name="ReservoirOcclusionManager";this.Cb=1;return this}L(c,"geotoolkit3d.util.occlusion.ReservoirOcclusionManager");D(c,zC);c.prototype.pAb=function(a){this.ek=a=a?a.children:[]};c.prototype.No=function(a){this.Cb=a};return c}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJzZXRPYmplY3RzIjoicEFiIiwic2V0T2Zmc2V0IjoiTm8ifX19");var BC=/*#__PURE__*/function(){function c(l){l.defines.hasOwnProperty("addedCurveShaders")||(l.defines.addedCurveShaders=!0,l.uniforms[e]={type:"f",value:0},l.uniforms[f]={type:"f",value:0},l.uniforms[k]={type:"f",value:0},l.uniforms[b.Oha]={type:"f",value:0},l.uniforms[g]={type:"f",value:0},l.uniforms[h]={type:"f",value:0})}function a(l){l.defines.hasOwnProperty("addedNormScaleShaders")||(l.defines.addedNormScaleShaders=!0,l.uniforms[b.c1]={type:"m3",value:new Xt})}function b(){}var d={};L(b,"geotoolkit3d.util.shaders.WellShaders");
var e="cgwellRadius",f="cgcurveOffset",g="cgcurveMin",h="cgcurveMax",k="cgoffsetMode";b.Oha="cgopacity";b.c1="cgnormalScaleMat";b.mza="cgprevDirection";b.iza="cgnextDirection";b.aia="cgnormVal";b.Bac=["uniform float "+e+";","uniform float "+f+";","uniform float "+g+";","uniform float "+h+";","uniform float "+k+";","","attribute vec3 "+b.mza+";","attribute vec3 "+b.iza+";","attribute float "+b.aia+";","#ifdef USE_COLOR\n\tvarying vec3 vertexColor;\n#endif"].join("\n");b.Cac=["\t#ifdef USE_COLOR\n\t\tvertexColor = color;\n\t#endif\n\tvec4 pos = modelViewMatrix * vec4(position, 1.0);\n\t",
"\tvec3 v0 = mat3(modelViewMatrix) * "+b.mza+"; ","\tvec3 v1 = mat3(modelViewMatrix) * "+b.iza+"; ","\t\n\tvec2 n0 = normalize(vec2(-v0.y, v0.x));\n\tvec2 n2 = normalize(vec2(-v1.y, v1.x));\n\tvec2 n1 = normalize(n0 + n2);\n\t","\tfloat curveValue = ("+b.aia+" - min("+g+", "+h+")) / abs("+h+" - "+g+");","\tcurveValue = clamp(curveValue, 0.0, 1.0);","\tif("+k+" == 0.0){ ","\t\tcurveValue = "+f+" > 0.0 ? curveValue : 1.0 - curveValue;","\t}","\tcurveValue = "+h+" > "+g+" ? curveValue : 1.0 - curveValue;",
"\tcurveValue -= 0.5;","\tpos.xyz = pos.xyz + ((curveValue + "+f+") * "+e+") * -vec3(n1, 0.0);","\tgl_Position = projectionMatrix * pos;"].join("\n");b.Tcc="#ifdef DOUBLE_SIDED\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\t#else\n\t\treflectedLight.directDiffuse = vLightFront;\n\t#endif";b.Dac="reflectedLight.directDiffuse += (abs(vLightFront) + abs(vLightBack));";b.lTc=function(l,m){m&&(a(l),m.hasOwnProperty("normscale")&&(l.uniforms[b.c1].value=m.normscale))};
b.vTa=function(l){a(l);d.normscale=l.uniforms[b.c1].value;return d};b.mRc=function(l,m){m&&(c(l),m.hasOwnProperty("radius")&&(l.uniforms[e].value=m.radius),m.hasOwnProperty("offset")&&(l.uniforms[f].value=m.offset),m.hasOwnProperty("offsetmode")&&(l.uniforms[k].value=m.offsetmode),m.hasOwnProperty("opacity")&&(l.uniforms[b.Oha].value=m.opacity),m.hasOwnProperty("normalizedcurvemin")&&(l.uniforms[g].value=m.normalizedcurvemin),m.hasOwnProperty("normalizedcurvemax")&&(l.uniforms[h].value=m.normalizedcurvemax))};
b.iCc=function(l){c(l);return{radius:l.uniforms[e].value,offset:l.uniforms[f].value,offsetmode:l.uniforms[k].value,normalizedcurvemin:l.uniforms[g].value,normalizedcurvemax:l.uniforms[h].value,opacity:l.uniforms[b.Oha].value}};return b}();var CC=/*#__PURE__*/function(){function c(f){f.defines.hasOwnProperty("addedCylinderLogShaders")||(f.defines.addedCylinderLogShaders=!0,f.uniforms.cgradiusNorm={type:"v2",value:new gy(0,1)},f.uniforms.cgradiusRange={type:"v2",value:new gy(5,10)})}function a(){}var b=Yy;L(a,"geotoolkit3d.util.shaders.CylinderLog");var d=["\tvec4 pos = (modelViewMatrix * vec4(position, 1.0)); ","\tvec3 v0 = mat3(modelViewMatrix) * "+BC.mza+"; ","\tvec3 v1 = mat3(modelViewMatrix) * "+BC.iza+"; ","\n\tvec2 n0 = normalize(vec2(-v0.y, v0.x)); \n\tvec2 n2 = normalize(vec2(-v1.y, v1.x)); \n\tvec2 n1 = normalize(n0 + n2); \n\n\tvec2 d = vec2(1.0 / length(v0), 1.0 / length(v1)); \n\n\td = min(vec0dot5, 0.125 * d); \n\tvec3 trajectoryPos = pos.xyz;\n\tpos.xyz += cgweight.z * d.y * v1 - cgweight.x * d.x * v0; \n\tvec2 smoothedNorm = normalize(cgweight.x * n0 + cgweight.y * n1 + cgweight.z * n2); \n\tfloat vRadius; float vmin; float vmax; float radiusScale;\n\tif(cgradiusNorm.x > cgradiusNorm.y) {",
"\t\tvRadius = 1.0 - "+BC.aia+";","\t\tvmin = cgradiusNorm.y;\n\t\tvmax = cgradiusNorm.x;\n\t} else {","\t\tvRadius = "+BC.aia+";","\t\tvmin = cgradiusNorm.x;\n\t\tvmax = cgradiusNorm.y;\n\t}\n\tradiusScale = clamp(vRadius, vmin, vmax);\n\tvRadius = (radiusScale-vmin) / (vmax - vmin);\n\tif(vmax == vmin) vRadius = 0.5;\n\tfloat transform = ((cgradiusRange.y - cgradiusRange.x) * vRadius + cgradiusRange.x);\n\tvec3 bezierNormal = normalize(cross(v0 + v1, vec3(smoothedNorm, 0.0)));\n\tpos.xyz = pos.xyz + transform * (cgangle.x * vec3(smoothedNorm, 0.0) + cgangle.y * bezierNormal); \n\n\tgl_Position = projectionMatrix * pos; \n\n\tvec4 mvPosition = pos;\n\tvec3 normal = normalize(pos.xyz - trajectoryPos);\n\ttransformedNormal = normal;"].join("\n"),
e=["uniform mat3 "+BC.c1+";","uniform vec2 cgradiusNorm;\nuniform vec2 cgradiusRange;\nattribute vec2 cgangle;","attribute vec3 "+BC.mza+";","attribute vec3 "+BC.iza+";","attribute float "+BC.aia+";","attribute vec3 cgweight;\nconst vec2 vec0dot5 = vec2(0.5, 0.5);"].join("\n");a.tha=Jw.meshlambert_frag;a.Jya=Jw.meshlambert_vert;a.Jya=b.ot(a.Jya,Zy.Iec,d,!0);a.Jya=b.ot(a.Jya,Zy.Lgb,Zy.dYa,!1,!1);a.Jya=b.ot(a.Jya,Zy.kE,[Zy.eYa,e].join("\n"),!1,!0);a.tha=b.ot(a.tha,Zy.kE,Zy.cYa,!1,!0);a.tha=b.ot(a.tha,
Zy.TFb,Zy.bYa,!1,!1);a.tha=b.ot(a.tha,BC.Tcc,BC.Dac,!0);a.tha=b.ot(a.tha,"default_vertex",d,!0);a.TLd=function(f,g){g&&(c(f),g.hasOwnProperty("radiusmin")&&(f.uniforms.cgradiusRange.value.setX(g.radiusmin),f.uniforms.cgradiusRange.needsUpdate=!0),g.hasOwnProperty("radiusmax")&&(f.uniforms.cgradiusRange.value.setY(g.radiusmax),f.uniforms.cgradiusRange.needsUpdate=!0),g.hasOwnProperty("radiuslogmin")&&(f.uniforms.cgradiusNorm.value.setX(g.radiuslogmin),f.uniforms.cgradiusNorm.needsUpdate=!0),g.hasOwnProperty("radiuslogmax")&&
(f.uniforms.cgradiusNorm.value.setY(g.radiuslogmax),f.uniforms.cgradiusNorm.needsUpdate=!0))};a.Tqd=function(f){c(f);return{radiusmin:f.uniforms.cgradiusRange.value.width,radiusmax:f.uniforms.cgradiusRange.value.height,radiuslogmin:f.uniforms.cgradiusNorm.value.width,radiuslogmax:f.uniforms.cgradiusNorm.value.height}};return a}();var DC=/*#__PURE__*/function(){function c(){}var a=100;L(c,"geotoolkit3d.util.shaders.InstancedReservoir");c.VERTEX_SHADER=["attribute vec3 barycentric;\nattribute vec3 positionA;\nattribute vec3 positionB;\nattribute vec3 positionC;\nattribute vec3 positionD;\nattribute vec3 positionE;\nattribute vec3 positionF;\nattribute vec3 positionG;\nattribute vec3 positionH;\nvarying vec3 vBarycentric;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef CG_USE_COLOR_MAP\n    attribute float cgcolormapValue;\n    varying float vcgcolormapValue;\n    uniform vec4 cgcolormapParams;\n    uniform int cgcolormapLogValue;\n    float Shaders_norm(float value, float srcmin, float srcmax, float dstmin, float dstmax) {\n        float norm = dstmin + (dstmax - dstmin) * (clamp(value, srcmin, srcmax) - srcmin)  / (srcmax - srcmin);\n        return (norm < 0.0 || norm >= 0.0) ? norm : 0.0;\n    }\n    float normValueForColorMap(float value) {\n        if (cgcolormapLogValue == 1) value = log2(value)/log2(10.0);\n        return Shaders_norm(value - cgcolormapParams.x, 0.0, cgcolormapParams.y, 0.0, 1.0);\n    }\n#endif\nvoid main() {\n    #include <uv_vertex>\n    #include <uv2_vertex>\n    #include <color_vertex>\n    #include <skinbase_vertex>","    #ifndef "+
Jy.Abe,"        vBarycentric = barycentric;\n        #ifdef CG_USE_COLOR_MAP\n            vcgcolormapValue = normValueForColorMap(cgcolormapValue);\n        #endif\n    #endif\n    #ifdef USE_ENVMAP\n        #include <beginnormal_vertex>\n        #include <morphnormal_vertex>\n        #include <skinnormal_vertex>\n        #include <defaultnormal_vertex>\n    #endif\n    vec3 transformed = positionA;\n    transformed = position == vec3(1., 0., 1.) ? positionB : transformed;\n    transformed = position == vec3(0., 1., 1.) ? positionC : transformed;\n    transformed = position == vec3(1., 1., 1.) ? positionD : transformed;\n    transformed = position == vec3(0., 0., 0.) ? positionE : transformed;\n    transformed = position == vec3(1., 0., 0.) ? positionF : transformed;\n    transformed = position == vec3(0., 1., 0.) ? positionG : transformed;\n    transformed = position == vec3(1., 1., 0.) ? positionH : transformed;\n    #include <morphtarget_vertex>\n    #include <skinning_vertex>\n    #include <project_vertex>\n    #include <logdepthbuf_vertex>\n    #include <clipping_planes_vertex>\n    #include <worldpos_vertex>\n    #include <envmap_vertex>\n    #include <fog_vertex>\n}"].join("\n");
c.FRAGMENT_SHADER="uniform float lineWidth;\nuniform float opacity;\nuniform int useDiffuseAsColor;\nuniform bool seeThrough;\nuniform bool hideSkeleton;\nuniform vec3 diffuse;\nuniform vec3 outlineColor;\nvarying vec3 vBarycentric;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n#ifdef CG_USE_COLOR_MAP\n    varying float vcgcolormapValue;\n    uniform sampler2D cgcolormapTexture;\n    vec4 getColorFromColorMap(float normValue) {\n        return texture2D(cgcolormapTexture, vec2(normValue, 0.5));\n    }\n#endif\nfloat aastep (float threshold, float dist) {\n    float afwidth = fwidth(dist) * 0.5;\n    return smoothstep(threshold - afwidth, threshold + afwidth, dist);\n}\nvec4 getStyledOutline (vec3 barycentric, vec4 diffusecolor) {\n    float d = min( min( barycentric.x, barycentric.y ), barycentric.z );\n    float edge = 1.0 - aastep(lineWidth, d);\n    vec4 outColor;\n    if (seeThrough) {\n        if (edge == 0.0) {\n            discard;\n        }\n        outColor = vec4(outlineColor, edge);\n    } else {\n        vec3 stroke = mix(diffusecolor.rgb, outlineColor, edge);\n        outColor = vec4(stroke, diffusecolor.a);\n    }\n    return outColor;\n}\nvoid main() {\n    if( hideSkeleton && seeThrough ) discard;\n    #include <clipping_planes_fragment>\n    vec4 diffuseColor = vec4( diffuse, opacity );\n    ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n    #include <logdepthbuf_fragment>\n    #include <map_fragment>\n    #include <color_fragment>\n    #ifdef CG_USE_COLOR_MAP\n        diffuseColor *= getColorFromColorMap(vcgcolormapValue);\n    #endif\n    #include <alphamap_fragment>\n    #include <alphatest_fragment>\n    #include <specularmap_fragment>\n    #ifdef USE_LIGHTMAP\n        vec4 lightMapTexel= texture2D( lightMap, vUv2 );\n        reflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n    #else\n        reflectedLight.indirectDiffuse += vec3( 1.0 );\n    #endif\n    #include <aomap_fragment>\n    reflectedLight.indirectDiffuse *= diffuseColor.rgb;\n    vec3 outgoingLight = reflectedLight.indirectDiffuse;\n    #include <envmap_fragment>\n    if (!hideSkeleton) {\n        gl_FragColor = getStyledOutline( vBarycentric, diffuseColor );\n    } else {\n        gl_FragColor = vec4( outgoingLight, diffuseColor.a );\n    };\n    #include <premultiplied_alpha_fragment>\n    #include <tonemapping_fragment>\n    #include <encodings_fragment>\n    #include <fog_fragment>\n}";
c.x7b=function(b,d){null!=b&&null!=d&&(d.hasOwnProperty("skeleton")&&(b.uniforms.outlineColor="string"===typeof d.skeleton.color?{value:new Pq(d.skeleton.color)}:d.skeleton.color instanceof Pq?{value:d.skeleton.color}:{value:new Pq("darkgrey")},b.uniforms.lineWidth={value:d.skeleton.linewidth/a||.005}),d.hasOwnProperty("mode")&&(b.uniforms.seeThrough={value:!d.mode[0]},b.uniforms.hideSkeleton={value:!d.mode[1]}))};c.N8b=function(b,d){null==d||isNaN(d)||(b.uniforms.lineWidth.value=d/a)};return c}();var EC=/*#__PURE__*/va(/*#__PURE__*/{gGb:0,me:1,b4c:2},2,"eyJVcE5vcnRoIjoiZ0diIiwiTm9ydGgiOiJtZSIsIlVwIjoiYjRjIn0g"),FC=/*#__PURE__*/function(){function c(){}L(c,"geotoolkit3d.util.well.logarray.LogArrayUtil");c.C2c=EC;return c}();var HC=/*#__PURE__*/function(){function c(y){y.defines.hasOwnProperty("addedLogArrayShaders")||(y.defines.addedLogArrayShaders=!0,y.uniforms[m]={type:"f",value:1},y.uniforms[n]={type:"f",value:1},y.uniforms[k]={type:"f",value:1},y.uniforms[l]={type:"f",value:1},y.uniforms[p]={type:"f",value:1},y.uniforms[q]={type:"f",value:1},y.uniforms[r]={type:"i",value:EC.gGb})}function a(){}var b=Yy;L(a,"geotoolkit3d.util.shaders.LogArray");var d="#include <begin_vertex>",e="#include <defaultnormal_vertex>",f="cgwellPosition",
g="cgwellPathVector",h="cgarray";a.KEb=f;a.JEb=g;a.IEb=h;var k="cgradiusMin",l="cgradiusDelta",m="cgarrayMin",n="cgarrayMax",p="cgarrayNullValue",q="cgcolorNullValue",r="cgReferenceMode",t=["attribute vec3 "+f+";","attribute vec3 "+g+";","attribute float "+h+";","uniform mat3 "+BC.c1+";","uniform float "+m+";","uniform float "+n+";","uniform float "+k+";","uniform float "+l+";","uniform float "+p+";","uniform float "+q+";","uniform int "+r+";","varying float "+Zy.b6+";"].join("\n");g=["\tfloat normValue = ("+
h+" - min("+m+", "+n+")) / abs("+n+" - "+m+");","\tnormValue = clamp(normValue, 0.0, 1.0);","\tvec3 path = "+g+";","\tvec3 scale = vec3("+k+" + normValue * "+l+", "+k+" + normValue * "+l+", 1.0);","\tvec3 valuedPosition = position * vec3(2.0, 2.0, 1.0) * scale;\n\tvec3 target = vec3(path.x, path.y, path.z);","\tvec3 targetScale = vec3(1.0, 1.0, 1.0) * "+BC.c1+";","\ttarget = vec3(target.x / targetScale.x, target.y / targetScale.y, target.z / targetScale.z);"].join("\n");f=["\tvec3 zzz = normalize(-target);\n\tif(length(zzz) == 0.0) {\n\t\tzzz.z = 1.0;\n\t}\n\tvec3 xxx = normalize(cross(up, zzz));\n\tif(length(xxx) == 0.0) {\n\t\tzzz.x = zzz.x + 0.0001;\n\t\txxx = normalize(cross(up, zzz));\n\t}\n\tvec3 yyy = cross(zzz, xxx);\n\tmat3 rotationMatrix = mat3(xxx, yyy, zzz);\n\tvec3 rotatedPos = rotationMatrix * valuedPosition;",
"\tvec3 finalPos = (rotatedPos * "+BC.c1+") + "+f+";"].join("\n");h=["#ifdef "+Zy.Iya,"\t"+Zy.b6+" = "+Zy.bm+" == "+q+" ? 1.0 : 0.0;","#else","\t"+Zy.b6+" = 0.0;","#endif","\t"+Zy.b6+" = "+h+" == "+p+" ? 1.0 : "+Zy.b6+";"].join("\n");var u=["varying float "+Zy.b6+";"].join("\n"),w=[" if("+Zy.b6+" > 0.0) discard;"].join("\n");a.Jha=Zy.Rpa;a.VYa=Zy.qba;a.Jha=b.ot(a.Jha,Zy.kE,[t,Zy.kE,g,"\tvec3 up = vec3(0.0, 0.0, 1.0);","if( "+r+" == 0) { ","\tfloat angle = atan((path.x * path.x + path.y * path.y), (path.z * path.z));\n\tif(angle > 0.1745 ) up = vec3(0.0, 0.0, 1.0);\n\telse up = vec3(0.0, 1.0, 0.0);",
"} else if( "+r+" == 1) { ","\tup = vec3(0.0, 1.0, 0.0);\n}",f].join("\n"),!0);a.Jha=b.ot(a.Jha,Zy.y3c,h,!1,!1);a.Jha=b.ot(a.Jha,d,"\nvec3 transformed = vec3( finalPos );\n",!0);a.Jha=b.ot(a.Jha,e,"   vec3 transformedNormal = normalMatrix * normalize(rotatedPos * "+BC.c1+");",!0);a.VYa=b.ot(a.VYa,Zy.kE,[u,Zy.kE,w].join("\n"),!0);a.VYa=b.ot(a.VYa,BC.Tcc,BC.Dac,!0);a.WLd=function(y,A){A&&(c(y),A.hasOwnProperty("logarraymin")&&(y.uniforms[m].value=A.logarraymin),A.hasOwnProperty("logarraymax")&&(y.uniforms[n].value=
A.logarraymax),A.hasOwnProperty("radiusmin")&&(y.uniforms[k].value=A.radiusmin),A.hasOwnProperty("radiusdelta")&&(y.uniforms[l].value=A.radiusdelta),A.hasOwnProperty("logarraynullvalue")&&(y.uniforms[p].value=A.logarraynullvalue),A.hasOwnProperty("valuesnullvalue")&&(y.uniforms[q].value=A.valuesnullvalue),A.hasOwnProperty("referencemode")&&(y.uniforms[r].value=A.referencemode))};a.Xqd=function(y){c(y);return{logarraymin:y.uniforms[m].value,logarraymax:y.uniforms[n].value,radiusmin:y.uniforms[k].value,
radiusdelta:y.uniforms[l].value,logarraynullvalue:y.uniforms[p].value,valuesnullvalue:y.uniforms[q].value,referencemode:y.uniforms[r].value}};return a}();var IC=/*#__PURE__*/function(){function c(d){d.defines.hasOwnProperty("addedLogCurve2DShaders")||(d.defines.addedLogCurve2DShaders=!0,d.uniforms[b]={type:"c",value:new Pq})}function a(){}L(a,"geotoolkit3d.util.shaders.LogCurve2D");var b="cgdiffuse";a.C0c=["#include <common>\n#include <logdepthbuf_pars_vertex>",BC.Bac,"varying float cginvalid;",Zy.kE,BC.Cac,"#include <logdepthbuf_vertex>","\tcginvalid = "+BC.aia+" == "+Zy.ggb+" ? -1.0 : 0.0;","}"].join("\n");a.B0c=["uniform vec3 "+b+";","uniform float "+BC.Oha+
";","varying vec3 vertexColor;\nvarying float cginvalid;\n#include <logdepthbuf_pars_fragment>",Zy.kE,"\t#ifdef USE_COLOR","\t\tgl_FragColor = vec4(vertexColor.rgb, "+BC.Oha+");","\t#else","\t\tgl_FragColor = vec4("+b+", "+BC.Oha+");","\t#endif\n\tif (cginvalid < 0.0) discard;\n#include <logdepthbuf_fragment>\n}"].join("\n");a.VLd=function(d,e){e&&(c(d),e.hasOwnProperty("color")&&(e.color===jy&&(hb("THREE.VertexColors was deprecated since 3.3, use null for options.color in LogCurve2D.setOptions"),
e.color=null),e.color instanceof Pq?(d.vertexColors=!1,d.uniforms[b].value=e.color):d.vertexColors=!0))};a.Wqd=function(d){c(d);return{color:d.vertexColors?null:d.uniforms[b].value}};return a}();var JC=/*#__PURE__*/function(){function c(e){e.defines.hasOwnProperty("addedLogFill2DShaders")||(e.defines.addedLogFill2DShaders=!0,e.uniforms[b]={type:"c",value:new Pq("red")},e.uniforms[d]={type:"c",value:new Pq("red")})}function a(){}var b="cgpositiveColor",d="cgnegativeColor";a.fza="cgposnegFlag";a.A0c=["#include <common>\n#include <logdepthbuf_pars_vertex>",BC.Bac,"attribute float "+a.fza+";","varying float v"+a.fza+";","",Zy.kE,BC.Cac,"\tv"+a.fza+" = "+a.fza+";","#include <logdepthbuf_vertex>\n}"].join("\n");
a.z0c=["uniform vec3 "+b+";","uniform vec3 "+d+";","uniform float "+BC.Oha+";","#include <logdepthbuf_pars_fragment>\nvarying vec3 vertexColor;","varying float v"+a.fza+";",Zy.kE,"\t#ifdef USE_COLOR","\t\tgl_FragColor = vec4(vertexColor.rgb, "+BC.Oha+");","\t#else","\t\tgl_FragColor = vec4(v"+a.fza+" >= 0.0 ? "+b+" : "+d+", "+BC.Oha+");","\t#endif\n#include <logdepthbuf_fragment>\n}"].join("\n");a.XLd=function(e,f){f&&(c(e),f.hasOwnProperty("positivecolor")&&(e.uniforms[b].value=new Pq(f.positivecolor)),
f.hasOwnProperty("negativecolor")&&(e.uniforms[d].value=new Pq(f.negativecolor)))};a.Yqd=function(e){c(e);return{positivecolor:e.vertexColors?null:e.uniforms[b].value,negativecolor:e.vertexColors?null:e.uniforms[d].value}};return a}();var KC=/*#__PURE__*/function(){function c(k){k.defines.hasOwnProperty("addedPipeShaders")||(k.defines.addedPipeShaders=!0,k.uniforms[e]={type:"f",value:1},k.uniforms[f]={type:"f",value:0},k.uniforms[g]={type:"f",value:0})}function a(){}var b=Yy;L(a,"geotoolkit3d.util.shaders.Pipe");var d="cgRadius";a.P1c=d;var e="cgScale",f="cgUseGlobalRadius",g="cgGlobalRadius",h=["\tattribute float "+d+";","uniform mat3 "+BC.c1+";","uniform float "+e+";","uniform float "+f+";","uniform float "+g+";"].join("\n");d=["vec3 vecPos = (modelMatrix * vec4(position, 1.0)).xyz;",
"vec3 vecNormal = normalize(normal * "+BC.c1+");","float localscale = "+e+";","if("+f+" > 0.0) {","\tlocalscale *= "+g+";","} else {","\tlocalscale *= "+d+";","}\ngl_Position = projectionMatrix * viewMatrix * vec4(vecPos + (vecNormal * localscale), 1.0);"].join("\n");a.hZa=Zy.Rpa;a.O1c=Zy.qba;a.hZa=b.ot(a.hZa,Zy.kE,h,!1,!0);a.hZa=b.ot(a.hZa,Zy.Hec,d,!1,!0);a.ZLd=function(k,l){l&&(c(k),l.hasOwnProperty("radiusscale")&&(k.uniforms[e].value=l.radiusscale),l.hasOwnProperty("globalradius")&&(0===l.globalradius?
(k.uniforms[g].value=l.globalradius,k.uniforms[f].value=0):(k.uniforms[g].value=l.globalradius,k.uniforms[f].value=1)))};a.Zqd=function(k){c(k);return{radiusscale:k.uniforms[e].value,globalradius:k.uniforms[g].value}};return a}();var LC=/*#__PURE__*/function(){function c(b){b.defines.hasOwnProperty("addedProjectionWidgetShaders")||(b.uniforms.tDiffuse={type:"tv",value:null},b.defines.addedProjectionWidgetShader=!0)}function a(){}L(a,"geotoolkit3d.util.shaders.ProjectionWidget");a.VERTEX_SHADER="varying vec2 vUv;\n#include <common>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n    vUv = uv;\n    #include <uv2_vertex>\n    #include <color_vertex>\n    #include <skinbase_vertex>\n    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n    #include <logdepthbuf_vertex>\n    #include <clipping_planes_vertex>\n    #include <envmap_vertex>\n    #include <fog_vertex>\n}";a.FRAGMENT_SHADER=
"varying vec2 vUv;\n\nuniform sampler2D tDiffuse;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main () {\n    #include <clipping_planes_fragment>\n    #include <logdepthbuf_fragment>\n    #include <color_fragment>\n    #include <alphamap_fragment>\n    #include <alphatest_fragment>\n    #include <specularmap_fragment>\n    #include <aomap_fragment>\n    #include <envmap_fragment>\n    #ifndef textureLoaded\n        gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);\n    #else\n        gl_FragColor = vec4(0.5, 0.5, 0.5, texture2D(tDiffuse, vUv).a * 0.5);\n    #endif\n    #include <tonemapping_fragment>\n    #include <encodings_fragment>\n    #include <fog_fragment>\n    #include <premultiplied_alpha_fragment>\n    #include <dithering_fragment>\n}";
a.setTexture=function(b,d){c(b);b.defines.textureLoaded=!0;b.uniforms.tDiffuse.value=d};return a}();var MC=/*#__PURE__*/function(){function c(){}L(c,"geotoolkit3d.util.shaders.Reservoir");c.VERTEX_SHADER="varying float vcgdeadCell;\nuniform float cgcolormapValueNullValue;\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef CG_USE_COLOR_MAP\n    attribute float cgcolormapValue;\n    varying float vcgcolormapValue;\n    uniform vec4 cgcolormapParams;\n    uniform int cgcolormapLogValue;\n    float Shaders_norm(float value, float srcmin, float srcmax, float dstmin, float dstmax) {\n        float norm = dstmin + (dstmax - dstmin) * (clamp(value, srcmin, srcmax) - srcmin)  / (srcmax - srcmin);\n        if (norm < 0.0 || norm >= 0.0) {\n            return norm;\n        }\n        return 0.0;\n    }\n    float normValueForColorMap(float value) {\n        if( cgcolormapLogValue == 1)\n        {\n            value = log2(value)/log2(10.0);\n        }\n        return Shaders_norm(value - cgcolormapParams.x, 0.0, cgcolormapParams.y, 0.0, 1.0);\n    }\n#endif\nvoid main() {\n    vcgdeadCell = 0.0;\n    #include <uv_vertex>\n    #include <uv2_vertex>\n    #include <color_vertex>\n    #include <skinbase_vertex>\n    #ifdef CG_USE_COLOR_MAP\n        vcgcolormapValue = normValueForColorMap(cgcolormapValue);\n        if(cgcolormapValue == cgcolormapValueNullValue) {\n            vcgdeadCell = 1.0;\n            return;\n        }\n    #endif\n    #ifdef USE_ENVMAP\n        #include <beginnormal_vertex>\n        #include <morphnormal_vertex>\n        #include <skinnormal_vertex>\n        #include <defaultnormal_vertex>\n    #endif\n    #include <begin_vertex>\n    #include <morphtarget_vertex>\n    #include <skinning_vertex>\n    #include <project_vertex>\n    #include <logdepthbuf_vertex>\n    #include <clipping_planes_vertex>\n    #include <worldpos_vertex>\n    #include <envmap_vertex>\n    #include <fog_vertex>\n}";c.FRAGMENT_SHADER=
"uniform float opacity;\nuniform int useDiffuseAsColor;\nuniform vec3 diffuse;\nvarying float vcgdeadCell;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n#ifdef CG_USE_COLOR_MAP\n    varying float vcgcolormapValue;\n    uniform sampler2D cgcolormapTexture;\n    vec4 getColorFromColorMap(float normValue) {\n        return texture2D(cgcolormapTexture, vec2(normValue, 0.5));\n    }\n#endif\nvoid main() {\n    if( vcgdeadCell == 1.0 ) discard;\n    #include <clipping_planes_fragment>\n    vec4 diffuseColor = vec4( diffuse, opacity );\n    ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n    #include <logdepthbuf_fragment>\n    #include <map_fragment>\n    #include <color_fragment>\n    #ifdef CG_USE_COLOR_MAP\n        diffuseColor *= getColorFromColorMap(vcgcolormapValue);\n    #endif\n    #include <alphamap_fragment>\n    #include <alphatest_fragment>\n    #include <specularmap_fragment>\n    #ifdef USE_LIGHTMAP\n        vec4 lightMapTexel= texture2D( lightMap, vUv2 );\n        reflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n    #else\n        reflectedLight.indirectDiffuse += vec3( 1.0 );\n    #endif\n    #include <aomap_fragment>\n    reflectedLight.indirectDiffuse *= diffuseColor.rgb;\n    vec3 outgoingLight = reflectedLight.indirectDiffuse;\n    #include <envmap_fragment>\n    gl_FragColor = vec4( outgoingLight, diffuseColor.a );\n    #include <premultiplied_alpha_fragment>\n    #include <tonemapping_fragment>\n    #include <encodings_fragment>\n    #include <fog_fragment>\n}";
c.x7b=function(a,b){};return c}();var NC=/*#__PURE__*/function(){function c(g){g.defines.hasOwnProperty("addedTrajectoryTubeShaders")||(g.defines.addedTrajectoryTubeShaders=!0,g.uniforms[d]={type:"f",value:1})}function a(){}var b=Yy;L(a,"geotoolkit3d.util.shaders.TrajectoryTube");var d="cgtubeSize",e=["uniform float "+d+";","uniform mat3 "+BC.c1+";"].join("\n"),f=["vec3 vecPos = (modelMatrix * vec4(position, 1.0)).xyz;","vec3 vecNormal = normalize(normal * "+BC.c1+");","gl_Position = projectionMatrix * viewMatrix * vec4(vecPos + (vecNormal * vec3("+
d+", "+d+", "+d+")), 1.0);"].join("\n");a.WKa=Zy.Rpa;a.Jec=Zy.qba;a.WKa=b.ot(a.WKa,Zy.kE,e,!1,!0);a.WKa=b.ot(a.WKa,Zy.Hec,f,!1,!0);a.pRc=function(g,h){h&&(c(g),null!=g.uniforms[d]&&h.size&&(g.uniforms[d].value=h.size,g.userData.size=h.size))};a.kCc=function(g){c(g);return{size:g.uniforms[d].value}};return a}();var OC=/*#__PURE__*/function(){function c(q){q.defines.hasOwnProperty("addedRenderingVolumeShaders")||(q.defines.addedRenderingVolumeShaders=!0,q.uniforms=Yx.merge([Xx.ambient,Xx.lights,{tex:{type:"t",value:void 0},alphaCorrection:{type:"1f",value:void 0},sizeInScene:{type:"v3",value:void 0},sizeData:{type:"v3",value:void 0},dataTex:{type:"tv",value:void 0},textureSize:{type:"1i",value:qA.MFa()},textureArea:{type:"1i",value:qA.MFa()*qA.MFa()},minData:{type:"1f",value:void 0},maxData:{type:"1f",value:void 0},flipZ:{type:"b",
value:!1},switchLights:{type:"b",value:!1},scale:{type:"v3",value:new Lp(1,1,1)},transfertTex:{type:"t",value:void 0},delta:{type:"1f",value:void 0},maxStep:{type:"1i",value:4096}}]))}function a(){}var b={},d="tex alphaCorrection sizeInScene sizeData dataTex textureSize textureArea minData maxData flipZ switchLights scale transfertTex delta maxStep".split(" "),e="varying vec3 localCubeCoords;\nvarying vec4 projectedCoords;\nvarying mat4 mMatrix;",f="uniform sampler2D tex;\nuniform float alphaCorrection;\nuniform int textureSize;\nuniform int textureArea;\nuniform float minData;\nuniform float maxData;\nuniform vec3 sizeData;\nuniform vec3 sizeInScene;\nuniform vec3 scale;\nuniform sampler2D transfertTex;\nuniform sampler2D dataTex[12];\nuniform bool flipZ;  \nuniform bool switchLights;\nuniform float delta;\nuniform int maxStep;\nconst int MAX_STEPS = 4096;",
g="vec3 floorSpecial(vec3 a){\n\treturn max(min(floor(a), sizeData -0.5) , 0.);\n}",h="float getIntensity(vec3 pos) {\n       pos.z = flipZ ? pos.z : sizeData.z - pos.z;\n       vec3 position_1 = floorSpecial(pos);\n       float intensity = 0.0;\n       int textureIndex = 0;\n       int sizeDataX = int(sizeData.x);\n       int sizeDataZ = int(sizeData.z);\n       int pos1Y = int(position_1.y);\n\n       textureIndex += (sizeDataZ * sizeDataX / textureSize) * pos1Y / textureSize;\n       int ypart = sizeDataZ * sizeDataX * pos1Y - textureIndex * textureArea;\n       int xpart =  sizeDataZ * int(position_1.x);\n       int totalCoord = int(position_1.z) + xpart + ypart;\n\n       int textureIndex2 = totalCoord / textureArea;\n       totalCoord = totalCoord - (textureIndex2 * (textureArea));\n       textureIndex += textureIndex2;\n       int Ycomp = totalCoord / textureSize;\n       int Xcomp = totalCoord - Ycomp * textureSize;\n\n       float coordX = float(Xcomp) / float(textureSize);\n       float coordY = float(Ycomp) / float(textureSize);\n\n       if(textureIndex == 0)\n           intensity = float(texture2D(dataTex[0], vec2(coordX, coordY)).r);\n       else if(textureIndex == 1)\n           intensity = float(texture2D(dataTex[1], vec2(coordX, coordY)).r);\n       else if(textureIndex == 2)\n           intensity = float(texture2D(dataTex[2], vec2(coordX, coordY)).r);\n       else if(textureIndex == 3)\n           intensity = float(texture2D(dataTex[3], vec2(coordX, coordY)).r);\n       else if(textureIndex == 4)\n           intensity = float(texture2D(dataTex[4], vec2(coordX, coordY)).r);\n       else if(textureIndex == 5)\n           intensity = float(texture2D(dataTex[5], vec2(coordX, coordY)).r);\n       else if(textureIndex == 6)\n           intensity = float(texture2D(dataTex[6], vec2(coordX, coordY)).r);\n       else if(textureIndex == 7)\n           intensity = float(texture2D(dataTex[7], vec2(coordX, coordY)).r);\n       else if(textureIndex == 8)\n           intensity = float(texture2D(dataTex[8], vec2(coordX, coordY)).r);\n       else if(textureIndex == 9)\n           intensity = float(texture2D(dataTex[9], vec2(coordX, coordY)).r);\n       else if(textureIndex == 10)\n           intensity = float(texture2D(dataTex[10], vec2(coordX, coordY)).r);\n       else if(textureIndex == 11)\n           intensity = float(texture2D(dataTex[11], vec2(coordX, coordY)).r);\n       else\n           intensity = 0.0;\n       return intensity;\n}",
k="vec3 transfromCoordinates(vec3 position_2) {\n\treturn (((position_2)/ sizeInScene + 0.5) * (sizeData));\n}",l="void neighbor(in vec3 pos, out vec3 inf, out vec3 supp){\n\tif (pos.x == 0. ) {\n\t\tinf.x = getIntensity(vec3(pos.x,pos.y,pos.z));\n\t\tsupp.x = getIntensity(vec3(pos.x +1.,pos.y,pos.z));\n\t} else if (pos.x == sizeData.x -1.) {\n\t\tinf.x = getIntensity(vec3(pos.x - 1.,pos.y,pos.z));\n\t\tsupp.x = getIntensity(vec3(pos.x,pos.y,pos.z));\n\t} else {\n\t\tinf.x = getIntensity(vec3(pos.x -1.,pos.y,pos.z));\n\t\tsupp.x = getIntensity(vec3(pos.x +1.,pos.y,pos.z));\n\t}\n\tif (pos.y == 0. ) {\n\t\tinf.y = getIntensity(vec3(pos.x,pos.y,pos.z));\n\t\tsupp.y = getIntensity(vec3(pos.x,pos.y +1.,pos.z));\n\t} else if (pos.y == sizeData.y -1.) {\n\t\tinf.y = getIntensity(vec3(pos.x,pos.y - 1.,pos.z));\n\t\tsupp.y = getIntensity(vec3(pos.x,pos.y,pos.z));\n\t} else {\n\t\tinf.y = getIntensity(vec3(pos.x,pos.y -1.,pos.z));\n\t\tsupp.y = getIntensity(vec3(pos.x,pos.y +1.,pos.z));\n\t}\n\tif (pos.z == 0. ) {\n\t\tinf.z = getIntensity(vec3(pos.x,pos.y,pos.z));\n\t\tsupp.z = getIntensity(vec3(pos.x,pos.y,pos.z +1.));\n\t} else if (pos.z == sizeData.z -1.) {\n\t\tinf.z = getIntensity(vec3(pos.x,pos.y,pos.z - 1.));\n\t\tsupp.z = getIntensity(vec3(pos.x,pos.y,pos.z));\n\t} else {\n\t\tinf.z = getIntensity(vec3(pos.x,pos.y,pos.z -1.));\n\t\tsupp.z = getIntensity(vec3(pos.x,pos.y,pos.z +1.));\n\t}\n}",
m="\t\t\t\tvec3 inf;\n\t\t\t\tvec3 supp;\n\t\t\t\tneighbor(currentPositionTransformed,inf,supp);\n\t\t\t\tvec4 addedLights = vec4(0.0,0.0,0.0, 0.0);\n\t\t\t\tfor(int l = 0; l < NUM_POINT_LIGHTS; l++) {\n\t\t\t\t\tPointLight pointLight = pointLights[ l ];\n\t\t\t\t\tvec3 lightDirection = normalize((mMatrix*vec4(currentPosition,1.) - mMatrix*vec4(pointLight.position,1.) ).xyz);\n\t\t\t\t\taddedLights.rgb += clamp(-dot(-lightDirection, -normalize(supp-inf)), 0.0, 1.0) * pointLight.color;\n\t\t\t\t\taddedLights.rgb += clamp(-dot(-normalize(currentPosition - frontPos), -normalize(supp-inf)), 0.0, 1.0) * addedLights.rgb;\n\t\t\t\t}\n\t\t\t\tcolorSample = vec4(mix(colorSample, addedLights, addedLights).rgb,colorSample.a);",
n="vec4 transform(float intensity){\n\treturn texture2D(transfertTex,vec2(intensity,0.5));\n}",p="vec4 transform(float intensity){\n\treturn texture2D(transfertTex,vec2((intensity-minData)/(maxData-minData),0.5));\n}";f=[e,f,"#include <common>\n#include <packing>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>"].join("\n");g=[g,h,k,l,"void main() {\n\tvec2 texc = ((projectedCoords.xy / projectedCoords.ww) + 1.0) / 2.0;\n\tvec3 backPos = texture2D(tex, texc).xyz;\n\tvec3 frontPos = localCubeCoords;\n\tvec3 dir = backPos - frontPos;\n\tvec3 deltaDirection = dir * delta;\n\tvec3 dirTransformed = transfromCoordinates(backPos) - transfromCoordinates(frontPos);\n\tvec3 deltaDirectionTransformed = dirTransformed * delta;\n\tvec3 currentPosition = frontPos;\n\tvec3 currentPositionTransformed = transfromCoordinates(currentPosition);\n\tvec3 accumulatedColor = vec3(0.0);\n\tfloat accumulatedAlpha = 0.0;\n\tvec4 colorSample;\n\tfloat alphaSample;\n\tfor (int i = 0; i < MAX_STEPS; i++) {\n\t\tcolorSample = transform(getIntensity(currentPositionTransformed));\n\t\tif (switchLights) {\n\t\t\tif (colorSample.a > 0.2 && switchLights) {",
m,"\t\t\t}\n\t\t\tcurrentPosition += deltaDirection;\n\t\t}\n\t\tif (colorSample.a > 0.0) {\n\t\t\talphaSample = colorSample.a * alphaCorrection;\n\t\t\talphaSample *= (1.0 - accumulatedAlpha);\n\t\t\taccumulatedColor += colorSample.rgb * alphaSample;\n\t\t\taccumulatedAlpha += alphaSample ;\n\t\t\tif(accumulatedAlpha >= 0.9999) {\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tif(i >= maxStep) {\n\t\t\tbreak;\n\t\t}\n\t\tcurrentPositionTransformed += deltaDirectionTransformed;\n\t}\n\tgl_FragColor = vec4(accumulatedColor,accumulatedAlpha);\n}"].join("\n");
L(a,"geotoolkit3d.util.shaders.Volumetric");a.Kfe="varying vec3 localCubeCoords;\nvoid main() {\n\tlocalCubeCoords = (modelMatrix * vec4(position , 0.0)).xyz ;\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n}";a.Hfe="varying vec3 localCubeCoords;\nvoid main() {\n\tgl_FragColor = vec4(localCubeCoords.x , localCubeCoords.y, localCubeCoords.z, 1);\n}";a.Lfe=[e,"void main() {\n\tlocalCubeCoords = (modelMatrix * vec4(position , 0.0)).xyz;\n\tmMatrix = modelMatrix;\n\tprojectedCoords = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n\tgl_Position = projectedCoords;\n}"].join("\n");
a.Jfe=[f,n,g].join("\n");a.Ife=[f,p,g].join("\n");a.Ove=function(q,r){if(!r)return!1;c(q);var t=!1;d.forEach(function(u){if(null!=r[u]&&q.uniforms[u].value!==r[u]){if("dataTex"===u&&q.uniforms.dataTex.value)for(var w in q.uniforms.dataTex.value){var y=q.uniforms.dataTex.value[w];null!=y&&(delete y.image.data,y.dispose())}q.uniforms[u].value=r[u];t=!0}});return t};a.Kre=function(q){c(q);for(var r in b)delete b[r];if(!q.defines.hasOwnProperty("addedRenderingVolumeShaders"))return b;d.forEach(function(t){b[t]=
q.uniforms[t].value});return b};return a}();var PC=/*#__PURE__*/va(/*#__PURE__*/function(){function c(a,b,d,e,f,g){ue.call(this);if(!a||1>a.length||!b||1>b.length||a.length!==b.length)throw Error();this.Vc=a;this.zd=b;this.Tm=d;this.rg=f;this.P7=a[0];this.I7=a[0];this.Q7=b[0];this.J7=b[0];this.x2a=d[0];this.p2a=d[0];var h;if(null==this.rg||this.rg.length<this.Vc.length)for(this.rg=[0],f=1,h=a.length;f<h;f++){var k=a[f-1]-a[f],l=b[f-1]-b[f],m=d[f-1]-d[f];this.rg.push(this.rg[f-1]+Math.sqrt(k*k+l*l+m*m))}k=!1;null!=e?(this.qq=e.clone(),k=!0):0<a.length?(this.qq=new Lp(a[0],
b[0],d[0]),this.Vc[0]-=this.qq.x,this.zd[0]-=this.qq.y,this.Tm[0]-=this.qq.z):this.qq=new Lp(0,0,0);this.Zq=this.rg[0];this.Fr=this.rg[0];this.Gb=null!=g?g:[];this.bWb(k);f=1;for(h=a.length;f<h;f++)k||(this.Vc[f]-=this.qq.x,this.zd[f]-=this.qq.y,this.Tm[f]-=this.qq.z)}L(c,"geotoolkit3d.geodata.Trajectory3d");D(c,ue);c.prototype.bWb=function(){for(var a=this.Vc,b=this.zd,d=this.Tm,e=1,f=a.length;e<f;e++)a[e]<this.P7?this.P7=a[e]:a[e]>this.I7&&(this.I7=a[e]),b[e]<this.Q7?this.Q7=b[e]:b[e]>this.J7&&
(this.J7=b[e]),d[e]<this.x2a?this.x2a=d[e]:d[e]>this.p2a&&(this.p2a=d[e]),d[e]<this.x2a?this.x2a=d[e]:d[e]>this.p2a&&(this.p2a=d[e]),this.rg[e]<this.Zq?this.Zq=this.rg[e]:this.rg[e]>this.Fr&&(this.Fr=this.rg[e])};c.prototype.getX=function(a){return this.Vc[a]};c.prototype.getY=function(a){return this.zd[a]};c.prototype.getZ=function(a){return this.Tm[a]};c.prototype.Sb=function(a){return this.rg[a]};c.prototype.count=function(){return this.Vc?this.Vc.length:0};c.prototype.Of=function(){return this.Zq};
c.prototype.Nf=function(){return this.Fr};c.prototype.Nma=function(){return this.P7};c.prototype.Oma=function(){return this.Q7};c.prototype.Ima=function(){return this.I7};c.prototype.Jma=function(){return this.J7};c.prototype.oqd=function(){return this.x2a};c.prototype.aqd=function(){return this.p2a};c.prototype.yf=function(){return this.Zq};c.prototype.ng=function(){return this.Fr};c.prototype.p_=function(){return this.qq};c.prototype.Eyc=function(a,b,d){var e=0,f=this.Vc.length-1;if(a>b){var g=
a;a=b;b=g}for(;this.rg[e]<a||this.rg[f]>b;){if(this.rg[e]<a&&(e++,e>=this.Vc.length))throw Error("Depth outside of range");if(this.rg[f]>b&&(f--,0>f))throw Error("Depth outside of range");}g={x:this.Vc.slice(e,f+1),y:this.zd.slice(e,f+1),z:this.Tm.slice(e,f+1)};if(null!=d){for(var h=!0,k=1;k<d.length;k++)if(d[k].depth<d[k-1].depth){h=!1;break}if(d[0].depth===a&&d[d.length-1].depth===b&&h){g.widths=[];k=h=0;for(var l=e;l<f+1;l++){for(;this.rg[l]>d[h].depth;){var m=this.Dyc(d[h].depth);g.x.splice(k,
0,m.x);g.y.splice(k,0,m.y);g.z.splice(k,0,m.z);g.widths.push(d[h].radius);k++;h++}k++;if(this.rg[l]===d[h].depth)g.widths.push(d[h].radius),h++;else{m=d[h].radius;var n=d[h].depth,p=d[h+1].radius,q=d[h+1].depth;g.widths.push(m+Math.sign(p-m)*Math.abs(m-p)*(this.rg[l]-n)/(q-n))}}}else hb("Wrong depths of radii! It must be sorted interval from start depth to end depth."),d=null}if(null!=a&&this.rg[e]!==a){var r=this.rg[e-1];k=(a-r)/(this.rg[e]-r);a=(this.Vc[e]-this.Vc[e-1])*k;h=(this.zd[e]-this.zd[e-
1])*k;k*=this.Tm[e]-this.Tm[e-1];r={x:a+this.Vc[e-1],y:h+this.zd[e-1],z:k+this.Tm[e-1]};null!=d&&(r.widths=d[0].radius)}if(null!=b&&this.rg[f]!==b){var t=this.rg[f];k=(b-t)/(this.rg[f+1]-t);a=(this.Vc[f+1]-this.Vc[f])*k;h=(this.zd[f+1]-this.zd[f])*k;k*=this.Tm[f+1]-this.Tm[f];t={x:a+this.Vc[f],y:h+this.zd[f],z:k+this.Tm[f]};null!=d&&(t.widths=d[d.length-1].radius)}null!=r&&(g.x.unshift(r.x),g.y.unshift(r.y),g.z.unshift(r.z),null!=d&&g.widths.unshift(r.widths));null!=t&&(g.x.push(t.x),g.y.push(t.y),
g.z.push(t.z),null!=d&&g.widths.push(t.widths));g.origin=this.qq.clone();null!=d&&(g.heights=g.widths);return g};c.prototype.Qmd=function(a,b){if(null==a)return null;null==b&&(b=!0);for(var d=0;this.rg[d]<a;)if(this.rg[d]<a&&(d++,d>=this.Vc.length))throw Error("Depth outside of range");if(this.rg[d]!==a){a=d-1;var e=d}else a=b?d:d-1,e=b?d+1:d;e>=this.rg.length&&(e=this.rg.length-1,a=e-1);0>a&&(a=0,e=1);b=this.Vc[e]-this.Vc[a];d=this.zd[e]-this.zd[a];a=this.Tm[e]-this.Tm[a];return(new Lp(b,d,a)).normalize()};
c.prototype.Dyc=function(a){for(var b=0;this.rg[b]<a;)if(this.rg[b]<a&&(b++,b>=this.Vc.length))throw Error("Depth outside of range");var d=new Lp(this.Vc[b],this.zd[b],this.Tm[b]);if(null!=a&&this.rg[b]!==a){d=this.rg[b-1];var e=(a-d)/(this.rg[b]-d);a=(this.Vc[b]-this.Vc[b-1])*e;d=(this.zd[b]-this.zd[b-1])*e;e*=this.Tm[b]-this.Tm[b-1];d=new Lp(a+this.Vc[b-1],d+this.zd[b-1],e+this.Tm[b-1])}return d};c.prototype.FEc=function(a,b,d,e){for(var f,g=0;g<this.Gb.length;g++)if(this.Gb[g].Da()===a){f=this.Gb[g];
break}if(null==f)return null;g=0;a=this.Vc.length-1;if(b>d){var h=b;b=d;d=h}for(;this.rg[g]<b&&this.rg[a]>d;){if(this.rg[g]<b&&(g++,g>=this.Vc.length))throw Error("Depth outside of range");if(this.rg[a]>d&&(a++,0>a))throw Error("Depth outside of range");}f=f.lg();if(null!=b&&this.rg[g]!==b&&this.rg[g]>b){var k=this.rg[g-1];h=(b-k)/(this.rg[g]-k);h*=f[g]-f[g-1];k=h+f[g]}if(null!=d&&this.rg[a]!==d&&this.rg[a]<d){var l=this.rg[a];h=(d-l)/(this.rg[a+1]-l);h*=f[a+1]-f[a];l=h+f[a]}h=f.slice(g,a);if(null!=
e){for(var m=!0,n=1;n<e.length;n++)if(e[n].depth<e[n-1].depth){m=!1;break}if(e[0].depth===b&&e[e.length-1].depth===d&&m)for(d=b=0;g<a+1;g++){for(this.rg[g]===e[b].depth&&b++;this.rg[g]>e[b].depth;){m=f[d];n=f[d+1];var p=e[b].depth,q=e[b+1].depth;m+=Math.sign(n-m)*Math.abs(m-n)*(this.rg[g]-p)/(q-p);h.splice(d,0,m);b++;d++}d++}else hb("Wrong depths of radii! It must be sorted interval from start depth to end depth.")}null!=k&&h.unshift(k);null!=l&&h.push(l);return h};c.prototype.Evd=function(){return this.Tm};
return c}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXREZXB0aCI6IlNiIiwibWluRGVwdGgiOiJPZiIsIm1heERlcHRoIjoiTmYiLCJnZXRNaW5YIjoiTm1hIiwiZ2V0TWluWSI6Ik9tYSIsImdldE1heFgiOiJJbWEiLCJnZXRNYXhZIjoiSm1hIiwiZ2V0TWluWiI6Im9xZCIsImdldE1heFoiOiJhcWQiLCJnZXRNaW5EZXB0aCI6InlmIiwiZ2V0TWF4RGVwdGgiOiJuZyIsImdldE9yaWdpbiI6InBfIiwiZ2V0Q29vcmRpbmF0ZXNGb3JEZXB0aHMiOiJFeWMiLCJnZXREaXJlY3Rpb25BdERlcHRoIjoiUW1kIiwiZ2V0Q29vcmRpbmF0ZUZvckRlcHRoIjoiRHljIiwiZ2V0VmFsdWVzRm9yRGVwdGhzIjoiRkVjIn19fSAg");var QC=/*#__PURE__*/va(/*#__PURE__*/function(){function c(a,b){this.fc=a;this.Gb=b}L(c,"geotoolkit3d.geodata.TrajectoryValue");c.prototype.Da=function(){return this.fc};c.prototype.lg=function(){return this.Gb};return c}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXROYW1lIjoiRGEiLCJnZXRWYWx1ZXMiOiJsZyJ9fX0g");var RC=/*#__PURE__*/va(/*#__PURE__*/function(){function c(a){this.o1=this.m1=this.TI=Number.NaN;this.setOptions(a)}L(c,"geotoolkit3d.scene.reservoir.IJKIndex");c.prototype.fromArray=function(a){this.TI=a[0];this.m1=a[1];this.o1=a[2];return this};c.prototype.toArray=function(){return[this.TI,this.m1,this.o1]};c.prototype.UVb=function(a){a=G(a,{I:this.TI,J:this.m1,K:this.o1},!0);this.TI=a.i;this.m1=a.j;this.o1=a.k;return this};c.prototype.toJSON=function(){return{I:this.TI,J:this.m1,K:this.o1}};c.prototype.set=function(a,b,d){this.TI=
a;this.m1=b;this.o1=d;return this};c.prototype.setOptions=function(a,b,d){a instanceof Array?this.fromArray(a):"object"===typeof a?this.UVb(a):"number"===typeof a&&this.set(a,b,d);return this};c.prototype.ta=function(){return{i:this.TI,j:this.m1,k:this.o1}};c.prototype.Nod=function(){return this.TI};c.prototype.hpd=function(){return this.m1};c.prototype.ipd=function(){return this.o1};c.prototype.add=function(a){a=a.ta();this.TI+=a.i;this.m1+=a.j;this.o1+=a.k;return this};c.prototype.sub=function(a){a=
a.ta();this.TI-=a.i;this.m1-=a.j;this.o1-=a.k;return this};return c}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJmcm9tSnNvbiI6IlVWYiIsImdldE9wdGlvbnMiOiJ0YSIsImdldEkiOiJOb2QiLCJnZXRKIjoiaHBkIiwiZ2V0SyI6ImlwZCJ9fX0g");var SC=/*#__PURE__*/va(/*#__PURE__*/function(){function c(a){lA.call(this,a);this.type="MultiGridData";this.eOa=new RC([0,0,0]);this.B_a=this.WMa=0;this.Sc=Number.POSITIVE_INFINITY;this.ld=Number.NEGATIVE_INFINITY;this.xH=Number.POSITIVE_INFINITY;this.vH=Number.NEGATIVE_INFINITY;this.yH=Number.POSITIVE_INFINITY;this.wH=Number.NEGATIVE_INFINITY;this.N7=Number.POSITIVE_INFINITY;this.H7=Number.NEGATIVE_INFINITY;this.yob=[];this.Uk=null;this.S7c=a.levels;this.jcb(a.cells,a.values)}D(c,lA);L(c,"geotoolkit3d.data.reservoir.hexahedral.MultiGridData");
c.prototype.reset=function(){this.eOa=new RC(-1,-1,-1);this.B_a=this.WMa=0;this.Sc=Number.POSITIVE_INFINITY;this.ld=Number.NEGATIVE_INFINITY;this.xH=Number.POSITIVE_INFINITY;this.vH=Number.NEGATIVE_INFINITY;this.yH=Number.POSITIVE_INFINITY;this.wH=Number.NEGATIVE_INFINITY;this.N7=Number.POSITIVE_INFINITY;this.H7=Number.NEGATIVE_INFINITY;this.yob=[];return this};c.prototype.getAttributes=function(){return{grids:this.yob,boundingbox:this.Uk,cellcount:this.B_a,gridcount:this.WMa,minvalue:this.Sc,maxvalue:this.ld,
mini:this.xH,maxi:this.vH,minj:this.yH,maxj:this.wH,mink:this.N7,maxk:this.H7,levels:this.S7c}};c.prototype.iod=function(a){return 0>a||a>=this.WMa?(hb("Grid does not exist at index "+a),null):this.yob[a]};c.prototype.jcb=function(a,b){if(null==a||0===a.length)return this;this.WMa=a.length;for(var d=0;d<this.WMa;d++){var e=a[d].length,f=8*e;f={gridindex:d,cellcount:e,positions:new zq(new Float32Array(3*f),3),ijk:new zq(new Float32Array(3*f),3),normals:new zq(new Float32Array(3*f),3),values:new zq(new Float32Array(3*
f),3),numijk:new RC([-1,-1,-1]),boundingbox:null,minvalue:Number.POSITIVE_INFINITY,maxvalue:Number.NEGATIVE_INFINITY,mini:Number.POSITIVE_INFINITY,maxi:Number.NEGATIVE_INFINITY,minj:Number.POSITIVE_INFINITY,maxj:Number.NEGATIVE_INFINITY,mink:Number.POSITIVE_INFINITY,maxk:Number.NEGATIVE_INFINITY};for(var g=0;g<e;g++)this.H5b(a[d][g],g,f),null!=b&&null!=b[d]&&this.H5b(b[d][g],g,f);this.B_a+=e;this.xH=Math.min(this.xH,f.mini);this.vH=Math.max(this.vH,f.maxi);this.yH=Math.min(this.yH,f.minj);this.wH=
Math.max(this.wH,f.maxj);this.N7=Math.min(this.N7,f.mink);this.H7=Math.max(this.H7,f.maxk);this.Sc=Math.min(this.Sc,f.minvalue);this.ld=Math.max(this.ld,f.maxvalue);this.eOa.add(f.numijk);this.yob.push(f);e=(new uq).setFromBufferAttribute(f.positions);f.boundingbox=e.clone();null==this.Uk?this.Uk=e:this.Uk.union(e)}return this};c.prototype.H5b=function(){var a=new RC([-1,-1,-1]);return function(b,d,e){if(null!=b&&null!=b.ijk){var f=b.ijk;f instanceof RC||(f=a.setOptions(f));var g=f.ta(),h=e.positions,
k=e.ijk,l=e.normals;f=e.values;var m=e.numijk,n=e.mini,p=e.maxi,q=e.minj,r=e.maxj,t=e.mink,u=e.maxk;d*=8;var w=b.x,y=b.y,A=b.z,x=[],C=[],z=[],v=[],B=[],E=[];null!=w&&null!=y&&null!=A&&(h.setXYZ(d+0,w[0],y[0],A[0]),h.setXYZ(d+1,w[1],y[1],A[1]),h.setXYZ(d+2,w[2],y[2],A[2]),h.setXYZ(d+3,w[3],y[3],A[3]),h.setXYZ(d+4,w[4],y[4],A[4]),h.setXYZ(d+5,w[5],y[5],A[5]),h.setXYZ(d+6,w[6],y[6],A[6]),h.setXYZ(d+7,w[7],y[7],A[7]),k.setXYZ(d+0,g.i,g.j,g.k),k.setXYZ(d+1,g.i,g.j,g.k),k.setXYZ(d+2,g.i,g.j,g.k),k.setXYZ(d+
3,g.i,g.j,g.k),k.setXYZ(d+4,g.i,g.j,g.k),k.setXYZ(d+5,g.i,g.j,g.k),k.setXYZ(d+6,g.i,g.j,g.k),k.setXYZ(d+7,g.i,g.j,g.k),n=Math.min(g.i,n),p=Math.max(g.i,p),q=Math.min(g.j,q),r=Math.max(g.j,r),t=Math.min(g.k,t),u=Math.max(g.k,u),bz.Xwa(h,d+1,d+0,d+3,x),bz.Xwa(h,d+4,d+5,d+6,C),bz.Xwa(h,d+3,d+2,d+6,z),bz.Xwa(h,d+0,d+5,d+4,v),bz.Xwa(h,d+2,d+6,d+0,B),bz.Xwa(h,d+7,d+3,d+5,E),this.Xxa(l,d+0,x,B,v),this.Xxa(l,d+1,x,E,v),this.Xxa(l,d+2,x,B,z),this.Xxa(l,d+3,x,E,z),this.Xxa(l,d+4,C,B,v),this.Xxa(l,d+5,C,E,v),
this.Xxa(l,d+6,C,B,z),this.Xxa(l,d+7,C,E,z),m.set(p-n+1,r-q+1,u-t+1),e.mini=n,e.maxi=p,e.minj=q,e.maxj=r,e.mink=t,e.maxk=u,e.numijk=m);b=b.value;null!=b&&(f.setX(d+0,b),f.setX(d+1,b),f.setX(d+2,b),f.setX(d+3,b),f.setX(d+4,b),f.setX(d+5,b),f.setX(d+6,b),f.setX(d+7,b),e.minvalue=Math.min(b,e.minvalue),e.maxvalue=Math.max(b,e.maxvalue))}}}();c.prototype.Xxa=function(a,b,d,e,f){a.setX(b,(d[0]+e[0]+f[0])/3);a.setY(b,(d[1]+e[1]+f[1])/3);a.setZ(b,(d[2]+e[2]+f[2])/3)};c.prototype.OSa=function(){return this.B_a};
c.prototype.u9a=function(){return this.WMa};return c}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRHcmlkQXR0cmlidXRlcyI6ImlvZCIsInNldENlbGxzT3B0aW9ucyI6ImpjYiIsInNldENlbGwiOiJINWIiLCJnZXROdW1iZXJPZkNlbGxzIjoiT1NhIiwiZ2V0TnVtYmVyT2ZHcmlkcyI6InU5YSJ9fX0g");var TC=/*#__PURE__*/va(/*#__PURE__*/function(){function c(e){lA.call(this);this.type="ReservoirData";this.eOa=new RC(-1,-1,-1);this.R2=0;this.iAa=this.Gb=this.skb=this.Gd=null;this.pz=null!=e.nullvalue?e.nullvalue:-999.25;this.ZZa=[];this.K2=null;this.Sc=Number.POSITIVE_INFINITY;this.ld=Number.NEGATIVE_INFINITY;this.xH=Number.POSITIVE_INFINITY;this.vH=Number.NEGATIVE_INFINITY;this.yH=Number.POSITIVE_INFINITY;this.wH=Number.NEGATIVE_INFINITY;this.N7=Number.POSITIVE_INFINITY;this.H7=Number.NEGATIVE_INFINITY;this.ZN={};this.K2a=
0;this.jcb(e.cells,e.values);e.computecellsvolume&&this.Vqb()}var a=new RC,b=8,d=bz;D(c,lA);L(c,"geotoolkit3d.data.reservoir.hexahedral.ReservoirData");c.prototype.getAttributes=function(){return{position:this.Gd,positions:this.Gd,values:this.Gb,volume:this.iAa,ijk:this.skb,boundingbox:this.Uk,cellcount:this.R2,minvalue:this.Sc,maxvalue:this.ld,mini:this.xH,maxi:this.vH,minj:this.yH,maxj:this.wH,mink:this.N7,maxk:this.H7,numijk:this.eOa,cellmap:this.ZN,octree:this.K2,additionaldata:this.ZZa}};c.prototype.sva=
function(e,f,g){return null!=this.ZN[e]&&null!=this.ZN[e][f]&&null!=this.ZN[e][f][g]?this.ZN[e][f][g]:null};c.prototype.J6c=function(e,f,g){if(null!=this.ZN[e]){if(null!=this.ZN[e][f])return null!=this.ZN[e][f][g]?this.ZN[e][f][g]:this.ZN[e][f][g]=this.K2a++;this.ZN[e][f]={};return this.ZN[e][f][g]=this.K2a++}this.ZN[e]={};this.ZN[e][f]={};return this.ZN[e][f][g]=this.K2a++};c.prototype.reset=function(){this.R2=0;this.ZZa=this.iAa=this.Gb=this.skb=this.Gd=null;this.Sc=Number.POSITIVE_INFINITY;this.ld=
Number.NEGATIVE_INFINITY;this.xH=Number.POSITIVE_INFINITY;this.vH=Number.NEGATIVE_INFINITY;this.yH=Number.POSITIVE_INFINITY;this.wH=Number.NEGATIVE_INFINITY;this.N7=Number.POSITIVE_INFINITY;this.H7=Number.NEGATIVE_INFINITY;this.ZN={};this.K2=null;this.K2a=0;return this};c.prototype.jcb=function(e,f){if(null!=e){this.xH=Number.POSITIVE_INFINITY;this.vH=Number.NEGATIVE_INFINITY;this.yH=Number.POSITIVE_INFINITY;this.wH=Number.NEGATIVE_INFINITY;this.N7=Number.POSITIVE_INFINITY;this.H7=Number.NEGATIVE_INFINITY;
if(0===this.R2&&Array.isArray(e)){this.R2=e.length;var g=8*this.R2;this.Gd=new zq(new Float32Array(3*g),3);this.skb=new zq(new Int16Array(3*this.R2),3);this.Gb=new zq(new Float32Array(this.R2),1)}for(g=0;g<e.length;g++)this.lJd(e[g]);this.Uk=(new uq).setFromBufferAttribute(this.Gd);this.K2=new jA(0,this.Uk);var h=function(l){for(var m=Number.POSITIVE_INFINITY,n=Number.POSITIVE_INFINITY,p=Number.POSITIVE_INFINITY,q=Number.NEGATIVE_INFINITY,r=Number.NEGATIVE_INFINITY,t=Number.NEGATIVE_INFINITY,u=0;8>
u;u++)m=Math.min(m,l.x[u]),n=Math.min(n,l.y[u]),p=Math.min(p,l.z[u]),q=Math.max(q,l.x[u]),r=Math.max(r,l.y[u]),t=Math.max(t,l.z[u]);return[m,n,p,q,r,t,l.ijk]};for(g=0;g<e.length;g++)if(e[g].x&&e[g].y&&e[g].z){var k=h(e[g]);this.K2.Jn(k)}this.K2.fLc()}if(null!=f)for(this.Sc=Number.POSITIVE_INFINITY,this.ld=Number.NEGATIVE_INFINITY,e=0;e<f.length;e++)this.setValues(f[e]);return this};c.prototype.lJd=function(){var e=new RC([-1,-1,-1]);return function(f){if(null!=f){var g=f.ijk;if(null!=g){g instanceof
RC||(g=e.setOptions(g));var h=g.ta();g=this.K2a<this.R2?this.J6c(h.i,h.j,h.k):this.sva(h.i,h.j,h.k);var k=8*g,l=f.x,m=f.y;f=f.z;null!=l&&null!=m&&null!=f&&(this.Gd.setXYZ(k+0,l[0],m[0],f[0]),this.Gd.setXYZ(k+1,l[1],m[1],f[1]),this.Gd.setXYZ(k+2,l[2],m[2],f[2]),this.Gd.setXYZ(k+3,l[3],m[3],f[3]),this.Gd.setXYZ(k+4,l[4],m[4],f[4]),this.Gd.setXYZ(k+5,l[5],m[5],f[5]),this.Gd.setXYZ(k+6,l[6],m[6],f[6]),this.Gd.setXYZ(k+7,l[7],m[7],f[7]),this.skb.setXYZ(g,h.i,h.j,h.k),this.xH=Math.min(h.i,this.xH),this.vH=
Math.max(h.i,this.vH),this.yH=Math.min(h.j,this.yH),this.wH=Math.max(h.j,this.wH),this.N7=Math.min(h.k,this.N7),this.H7=Math.max(h.k,this.H7),this.eOa.set(this.vH-this.xH+1,this.wH-this.yH+1,this.H7-this.N7+1))}}}}();c.prototype.setValues=function(e){if(null!=e){var f=e.ijk,g=e.value;null!=f&&null!=g&&(f=this.sva(f[0],f[1],f[2]),isNaN(g)||g===this.pz||(this.Sc=Math.min(g,this.Sc),this.ld=Math.max(g,this.ld)),this.Gb.setX(f,g),null!=e.additionaldata&&(this.ZZa[f]=e.additionaldata))}};c.prototype.OSa=
function(){return this.R2};c.prototype.byc=function(e,f){if(0>e||e>this.R2-1)return null;for(var g=Array(8),h=Array(8),k=Array(8),l=Number.POSITIVE_INFINITY,m=Number.POSITIVE_INFINITY,n=Number.POSITIVE_INFINITY,p=Number.NEGATIVE_INFINITY,q=Number.NEGATIVE_INFINITY,r=Number.NEGATIVE_INFINITY,t=this.Gd.array,u=0;8>u;++u)g[u]=t[24*e+3*u],h[u]=t[24*e+3*u+1],k[u]=t[24*e+3*u+2],l=Math.min(l,g[u]),m=Math.min(m,h[u]),n=Math.min(n,k[u]),p=Math.max(p,g[u]),q=Math.max(q,h[u]),r=Math.max(r,k[u]);f.min.set(l,
m,n);f.max.set(p,q,r);return{x:g,y:h,z:k,value:null!=this.Gb?this.Gb.getX(e):null}};c.prototype.u9a=function(){return null==this.K2?1:this.K2.$Bc()};c.prototype.$xc=function(e){var f=Array.isArray(e)?{i:e[0],j:e[1],k:e[2]}:e.ta();f=this.sva(f.i,f.j,f.k);if(null==f)return null;for(var g=Array(8),h=Array(8),k=Array(8),l=Number.POSITIVE_INFINITY,m=Number.POSITIVE_INFINITY,n=Number.POSITIVE_INFINITY,p=Number.NEGATIVE_INFINITY,q=Number.NEGATIVE_INFINITY,r=Number.NEGATIVE_INFINITY,t=this.Gd.array,u=0;8>
u;++u)g[u]=t[24*f+3*u],h[u]=t[24*f+3*u+1],k[u]=t[24*f+3*u+2],l=Math.min(l,g[u]),m=Math.min(m,h[u]),n=Math.min(n,k[u]),p=Math.max(p,g[u]),q=Math.max(q,h[u]),r=Math.max(r,k[u]);return{index:e,x:g,y:h,z:k,value:null!=this.Gb?this.Gb.getX(f):null,volume:this.iAa?this.iAa[f]:null,bound:[l,m,n,p,q,r],additionalData:this.ZZa[f]}};c.prototype.Ood=function(){return this.eOa};c.prototype.eZb=function(){return this.K2};c.prototype.SBc=function(){if(null==this.K2)return[];for(var e=this.K2.V4b(),f=[],g=0;g<e.length;g++){var h=
e[g],k=h.length,l=8*h.length;l=new zq(new Float32Array(3*l),3);var m=new zq(new Float32Array(3*k),3);k=new zq(new Float32Array(k),1);for(var n=[],p=Number.POSITIVE_INFINITY,q=Number.POSITIVE_INFINITY,r=Number.POSITIVE_INFINITY,t=Number.NEGATIVE_INFINITY,u=Number.NEGATIVE_INFINITY,w=Number.NEGATIVE_INFINITY,y=0;y<h.length;y++){var A=h[y];a.fromArray(A);var x=this.$xc(a),C=8*y,z=x.x,v=x.y,B=x.z;l.setXYZ(C+0,z[0],v[0],B[0]);l.setXYZ(C+1,z[1],v[1],B[1]);l.setXYZ(C+2,z[2],v[2],B[2]);l.setXYZ(C+3,z[3],
v[3],B[3]);l.setXYZ(C+4,z[4],v[4],B[4]);l.setXYZ(C+5,z[5],v[5],B[5]);l.setXYZ(C+6,z[6],v[6],B[6]);l.setXYZ(C+7,z[7],v[7],B[7]);p=Math.min(p,A[0]);q=Math.min(q,A[1]);r=Math.min(r,A[2]);t=Math.max(t,A[0]);u=Math.max(u,A[1]);w=Math.max(w,A[2]);m.setXYZ(y,A[0],A[1],A[2]);k.setX(y,x.value);n.push(this.ZZa[y])}f.push({positions:l,ijk:m,values:k,cellcount:h.length,mini:p,maxi:t,minj:q,maxj:u,mink:r,maxk:w,additionalData:n})}return f};c.prototype.TBc=function(){if(null==this.K2||null==this.Gb)return[];for(var e=
this.K2.V4b(),f=[],g=0;g<e.length;g++){var h=e[g],k=h.length;k=new zq(new Float32Array(k),1);for(var l=0;l<h.length;l++){var m=h[l];m=this.sva(m[0],m[1],m[2]);null!=m&&(m=this.Gb.getX(m),k.setX(l,m))}f.push(k)}return f};c.prototype.cld=function(e,f){e*=b;for(var g=0;g<b;g++)f[g][0]=this.Gd.getX(e+g),f[g][1]=this.Gd.getY(e+g),f[g][2]=this.Gd.getZ(e+g)};c.prototype.Vqb=function(){if(!this.iAa){this.iAa=new Float32Array(this.R2);for(var e=Array(b).fill().map(function(){return Array(3).fill(0)}),f=0;f<
this.R2;f++)this.cld(f,e),this.iAa[f]=d.Zsc(e)}};c.prototype.dispose=function(){this.reset()};return c}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRJbmRleEZvckNlbGwiOiJzdmEiLCJzZXRDZWxsc09wdGlvbnMiOiJqY2IiLCJnZXROdW1iZXJPZkNlbGxzIjoiT1NhIiwiZ2V0TnVtYmVyT2ZHcmlkcyI6InU5YSIsImdldENlbGxEYXRhIjoiJHhjIiwiZ2V0SUpLQ291bnQiOiJPb2QiLCJnZXRPY3RyZWUiOiJlWmIiLCJnZXROb2RlRGF0YSI6IlNCYyIsImdldE5vZGVWYWx1ZXMiOiJUQmMiLCJjb21wdXRlQ2VsbHNWb2x1bWUiOiJWcWIifX19");var UC=/*#__PURE__*/function(){function c(a){Aq.call(this,a);this.PF=a.horizonk;this.type="HorizonGeometry"}D(c,Aq);L(c,"geotoolkit3d.scene.reservoir.AbstractHorizonGeometry");return c}();var VC=/*#__PURE__*/function(){function c(a){Aq.call(this);this.type="ReservoirGeometry"}D(c,Aq);L(c,"geotoolkit3d.scene.reservoir.AbstractReservoirGeometry");return c}();var WC=/*#__PURE__*/va(/*#__PURE__*/function(){function c(){this.Xm=[];this.stack=0;this.lJa=!1;this.notify=function(b,d,e){var f;++this.stack;var g=this.Xm.length;for(f=0;f<g;f++)null!=this.Xm[f]&&this.Xm[f].call(this.Xm[f],b,d,e);--this.stack;if(0===this.stack&&this.lJa){for(f=this.Xm.length-1;-1<f;--f)null==this.Xm[f]&&this.Xm.splice(f,1);this.lJa=!1}};this.clone=function(){for(var b=new c,d=0;d<this.Xm.length;d++)b.Xm[d]=this.Xm[d];return b}}function a(){this.oIb=this.WIb=null;this.BU=this.DOb=this.kmb=!1;this.KL=0}L(a,"geotoolkit3d.scene.reservoir.EventDispatcher");
a.prototype.dispose=function(){this.FU=null;this.KL=0;this.BU=!0};a.prototype.MTa=function(){return 0<this.KL};a.prototype.on=function(b,d){this.WIb||(this.WIb=new a);null==this.FU&&(this.FU={});var e=this.FU[b];e||(e=new c,this.FU[b]=e);b=e.Xm.indexOf(d);-1===b?(this.KL++,e.Xm.push(d)):hb("EventDispatcher.on callback function is already in the list of event listeners for this target. It is ignored!")};a.prototype.hasEventListener=function(b,d){return this.WIb&&null!=this.FU?(b=this.FU[b])?-1!==b.Xm.indexOf(d):
!1:!1};a.prototype.za=function(b,d){if(null!=this.FU)if("string"===typeof b){if(b=this.FU[b])"function"===typeof d?(d=b.Xm.indexOf(d),-1!==d&&(--this.KL,0<b.stack?(b.Xm[d]=null,b.lJa=!0):b.Xm.splice(d,1))):(this.KL-=b.Xm.length,b.Xm=[],b.stack=0)}else this.FU=null,this.KL=0};a.prototype.notify=function(b,d,e){if(null!=this.FU&&!0!==this.nPb){var f=this.FU[b];f&&f.notify.call(f,b,d,e);this.oIb=b;this.kmb&&b===fz.NXa&&(this.DOb=!0,null!=d.f4b&&d.f4b(),this.Mid());this.kmb||b!==fz.NXa||(this.DOb=!1,
null!=d.tAc&&null!=d.tAc()&&d.tAc().Ave(!1))}};a.prototype.hve=function(){this.kmb=!0};a.prototype.Mid=function(){this.kmb=!1};a.prototype.Yse=function(){return this.DOb};a.prototype.ko=function(){return this.nPb};a.prototype.oe=function(b){this.nPb!==b&&(this.nPb=b)};a.prototype.ge=function(){return this.BU};a.prototype.Tld=function(){return this.oIb};a.prototype.lpe=function(){this.oIb=null};return a}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJvZmYiOiJ6YSIsInNldFNpbGVudCI6Im9lIiwiaXNEaXNwb3NlZCI6ImdlIiwiZ2V0Q3VycmVudEV2ZW50IjoiVGxkIn19fSAg");var XC=/*#__PURE__*/va(/*#__PURE__*/function(){function c(a){mz.call(this,a);this.type="AbstractReservoirGrid";this.rL=new WC}D(c,mz);L(c,"geotoolkit3d.scene.reservoir.AbstractReservoirGrid");c.prototype.on=function(a,b){this.rL.on(a,b)};c.prototype.za=function(a,b){this.rL.za(a,b)};return c}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJvZmYiOiJ6YSJ9fX0g");var YC=/*#__PURE__*/va(/*#__PURE__*/{Xbc:[!0,!0,!0],Ccc:[!0,!0,!1],I_c:[!1,!0,!0],J_c:[!0,!1,!0],pgb:[!1,!0,!1],Mesh:[!0,!1,!1],B_c:[!1,!1,!0],y1c:[!1,!1,!1]},2,"eyJGdWxsIjoiWGJjIiwiSWdub3JlSG9yaXpvbnMiOiJDY2MiLCJJZ25vcmVNZXNoIjoiSV9jIiwiSWdub3JlUHJvcGVydHkiOiJKX2MiLCJQcm9wZXJ0eSI6InBnYiIsIkhvcml6b25zIjoiQl9jIiwiTm90aGluZyI6InkxYyJ9");var ZC=/*#__PURE__*/va(/*#__PURE__*/function(){function c(a){VC.call(this,a);var b=a.data.getAttributes();this.setAttribute("position",b.position);null!=b.values&&this.setAttribute("cgcolormapValue",b.values);null!=b.ijk&&this.setAttribute("ijk",b.ijk);b[!0]?this.boundingBox=b.boundingbox:this.computeBoundingBox();this.PRa(a);this.type="CellGeometry"}D(c,VC);L(c,"geotoolkit3d.scene.reservoir.hexahedral.CellGeometry");c.prototype.setOptions=function(a){};c.prototype.PRa=function(a){a=a.data.OSa();var b=new Uint32Array(36*a);this.setIndex(new zq(b,
1));for(var d=0;d<a;++d){var e=36*d,f=8*d;b[e+0]=f+0;b[e+1]=f+1;b[e+2]=f+2;b[e+3]=f+1;b[e+4]=f+3;b[e+5]=f+2;b[e+6]=f+2;b[e+7]=f+3;b[e+8]=f+6;b[e+9]=f+3;b[e+10]=f+7;b[e+11]=f+6;b[e+12]=f+5;b[e+13]=f+4;b[e+14]=f+7;b[e+15]=f+4;b[e+16]=f+6;b[e+17]=f+7;b[e+18]=f+0;b[e+19]=f+4;b[e+20]=f+1;b[e+21]=f+4;b[e+22]=f+5;b[e+23]=f+1;b[e+24]=f+0;b[e+25]=f+2;b[e+26]=f+4;b[e+27]=f+2;b[e+28]=f+6;b[e+29]=f+4;b[e+30]=f+1;b[e+31]=f+5;b[e+32]=f+3;b[e+33]=f+5;b[e+34]=f+7;b[e+35]=f+3}};return c}(),1,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZW5lcmF0ZUluZGljaWVzIjoiUFJhIn19fSAg");var $C=/*#__PURE__*/function(){function c(d){Xz.call(this,d);this.type="CellMaterial";d=G(d,{nullvalue:b,side:ms},!0);this.vertexShader=a.VERTEX_SHADER;this.fragmentShader=a.FRAGMENT_SHADER;this.transparent=this.extensions.derivatives=!0;this.setOptions(d)}var a=MC,b=Zy.ggb;D(c,Xz);L(c,"geotoolkit3d.scene.reservoir.hexahedral.CellMaterial");c.prototype.setOptions=function(d){Xz.prototype.setOptions.call(this,d);d.hasOwnProperty("opacity")&&(this.opacity=d.opacity);a.x7b(this,d);return this};c.prototype.ta=function(){return xb(a.Lre(this),
Xz.prototype.ta.call(this))};return c}();var aD=/*#__PURE__*/function(){function c(a){UC.call(this,a);this.type="HorizonGeometry";var b=a.data.getAttributes();this.setAttribute("position",b.position);this.computeBoundingBox(b.position.array);null!=b.values&&this.setAttribute(Zy.bm,b.values);this.PRa(a)}D(c,UC);L(c,"geotoolkit3d.scene.reservoir.hexahedral.HorizonGeometry");c.prototype.PRa=function(a){for(var b=a.data.getAttributes(),d=[],e=this.PF===b.maxk+1?this.PF-1:this.PF,f=this.PF===b.maxk+1,g=b.mini;g<=b.maxi;++g)for(var h=b.minj;h<=b.maxj;++h){var k=
a.data.sva(g,h,e);null!=k&&(k*=8,f&&(k+=4),Array.prototype.push.apply(d,[k+0,k+1,k+1,k+3,k+3,k+2,k+2,k+0]))}a=new Uint32Array(d);this.setIndex(new zq(a,1))};c.prototype.computeBoundingBox=function(a){this.boundingBox=(new uq).setFromArray(a)};return c}();var bD=/*#__PURE__*/va(/*#__PURE__*/{Wbc:"frontface",Ueb:"cell",Bc:"none"},2,"eyJGcm9udEZhY2UiOiJXYmMiLCJDZWxsIjoiVWViIiwiTm9uZSI6IkJjIn0g");var cD=/*#__PURE__*/function(){function c(d){var e=G(d,{side:ms,unlit:1,seethrough:!1,nullvalue:b,skeleton:{color:"grey",linewidth:.6},excludemode:!1,minbound:new Mp(Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY),maxbound:new Mp(Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY)},!0);IA.call(this,{side:d.side});this.hb=e;this.type="ReservoirMaterial";this.vertexShader=a.VERTEX_SHADER;this.fragmentShader=a.FRAGMENT_SHADER;
this.extensions.derivatives=!0;this.transparent=!1;this.OVb=!0;this.setOptions(e)}var a=DC,b=Zy.ggb;D(c,IA);L(c,"geotoolkit3d.scene.reservoir.instanced.ReservoirMaterial");c.prototype.setOptions=function(d){IA.prototype.setOptions.call(this,d);d.mode&&!d.mode[0]&&d.mode[1]&&(d.side=Gr);a.x7b(this,d);this.hb=xb(d,this.hb)};c.prototype.N8b=function(d){a.N8b(this,d)};c.prototype.ta=function(){return xb(this.hb,IA.prototype.ta.call(this))};return c}();vz.sv(cD.Oa(),nA);var dD=/*#__PURE__*/function(){function c(a,b){mz.call(this);this.type="HorizonCluster";this.loe=0;if(null!=a)for(var d=0;d<a.length;++d){var e=a[d],f=new Pq("black");null!=e.color&&(f=Pd.Sg(e.color),f=new Pq(f.lk()/255,f.kk()/255,f.ik()/255));e=null!=e.width?e.width:1;e=new zt(b[d],new tt({color:f,linewidth:e}));e.material.polygonOffset=!0;e.material.polygonOffsetUnits=0;e.material.polygonOffsetFactor=0;this.add(e)}}L(c,"geotoolkit3d.scene.reservoir.HorizonCluster");D(c,mz);return c}();var eD=/*#__PURE__*/va(/*#__PURE__*/function(){function c(d){XC.call(this);this.type="ReservoirGrid";if(null==d.data)hb("Reservoir data not found.");else{this.hb=xb(d,{mode:YC.Ccc,skeleton:{color:"grey",linewidth:1},highlightmode:bD.Wbc});oz.brb(this.hb);this.zy=this.hb.skeleton.linewidth;this.S2a=!1;this.ML=[];this.gJ=new zs;this.n7=new zs;this.ja=this.hb.data;d=this.ja.getAttributes();var e=[],f=xb(this.hb,{});this.S2a?e=this.hb.data.SBc():e.push(this.hb.data);null!=d.boundingbox&&(this.boundingBox=d.boundingbox);for(var g=
0;g<e.length;g++){f.data=e[g];var h=new mA(f);h.H0b()&&(f.side=mq);var k=new cD(f);k=new $t(h,k);k.userData.gridindex=g;k.frustumCulled=!1;this.n7.add(k);this.ML.push(k.material)}this.Lc=h;this.WJb=d.mini;this.XJb=d.minj;this.YJb=d.mink;this.TJb=d.maxi;this.UJb=d.maxj;this.VJb=d.maxk;this.XAa=d.minvalue;this.WAa=d.maxvalue;this.uf=null;this.hh=!1;this.uE=null;this.smb=new AC(this);this.smb.pAb(this.n7);this.boundingBox.getCenter(a);this.add(this.n7);this.setOptions(this.hb)}}var a=new Lp,b=null;L(c,
"geotoolkit3d.scene.reservoir.hexahedral.ReservoirGrid");D(c,XC);c.prototype.Qr=function(){null===b&&((b=!1===qA.$$a())||hb("Detected Intel Graphics - Reservoir Grid picking and cell highlight are disabled for performances and compatibility reasons."));return b};c.prototype.setOptions=function(d){if(null==d)return this;XC.prototype.setOptions.call(this,d);this.hb=xb(d,this.hb);var e=this.n7.children;null!=d.colorprovider&&oz.brb(d);if(null!=d.data&&this.hh){var f=[];var g=d.data.getAttributes();this.XAa=
g.minvalue;this.WAa=g.maxvalue;var h={minvalue:this.XAa,maxvalue:this.WAa};g.hasOwnProperty("nullvalue")&&(h.nullvalue=g.nullvalue);this.S2a?f=d.data.TBc():f.push(d.data.getAttributes().values);for(g=0;g<e.length;g++)e[g].geometry.setValues(f[g].array),e[g].geometry.o6b(h,!0)}d.computecellsvolume&&this.ja.Vqb();if(null!=d.mode)if(0<this.gJ.children.length)this.gJ.visible=d.mode[2];else if(d.mode[2]&&null!=d.skeleton&&null!=d.skeleton.horizons){for(g=0;g<this.n7.children.length;g++){f=[];for(h=0;h<
d.skeleton.horizons.length;h++)d.horizonk=d.skeleton.horizons[h].horizonk,f[h]=new aD(d);f=new dD(d.skeleton.horizons,f);this.gJ.add(f)}this.add(this.gJ)}null!=d.highlightmode&&(this.l7c=d.highlightmode);d.occlusionculled&&(this.S2a=d.occlusionculled);if(d.mini||d.minj||d.mink||d.maxi||d.maxj||d.maxk||d.filter)for(this.WJb=null!=d.mini?d.mini:this.WJb,this.XJb=null!=d.minj?d.minj:this.XJb,this.YJb=null!=d.mink?d.mink:this.YJb,this.TJb=null!=d.maxi?d.maxi:this.TJb,this.UJb=null!=d.maxj?d.maxj:this.UJb,
this.VJb=null!=d.maxk?d.maxk:this.VJb,this.uf=void 0!==d.filter?d.filter:this.uf,g=0;g<e.length;g++)e[g].userData.isvalid=null==this.uf&&e[g].geometry.lGc(d);if(d.minvalue||d.maxvalue)this.XAa=null!=d.minvalue?d.minvalue:this.XAa,this.WAa=null!=d.maxvalue?d.maxvalue:this.WAa;!0===d.excludemode&&(this.S2a=!1);for(g=0;g<e.length;g++)e[g].material.setOptions(d),e[g].geometry.o6b(d);this.smb.oTc(this.S2a);this.hh=!0;this.yLc();this.Xf();return this};c.prototype.ta=function(){var d=this.ML[0];return xb(xb(this.hb,
d.ta()),XC.prototype.ta.call(this))};c.prototype.getBoundingBox=function(){return this.boundingBox.clone()};c.prototype.getData=function(){return this.hb.data};c.prototype.Atb=function(){for(var d=0,e=this.n7.children,f=0;f<e.length;f++)e[f]&&e[f].geometry&&(d+=e[f].geometry.Atb());return d};c.prototype.ztb=function(){for(var d=0,e=this.n7.children,f=0;f<e.length;f++)e[f]&&e[f].geometry&&(d+=e[f].geometry.ztb());return d};c.prototype.dbd=function(d){d=d.position.clone();d=this.parent.localToWorld(d).negate();
var e=a.clone().multiply(this.scale);d=e.distanceTo(d);null==this.Nic&&(this.Nic=d);d=Math.min(1,d/this.Nic);for(e=0;e<this.ML.length;e++)this.ML[e].N8b(this.zy*d)};c.prototype.ai=function(d,e,f,g){XC.prototype.ai.call(this,d,e,f,g);this.dbd(e)};c.prototype.K3=function(d,e,f,g){this.smb.render(e,f);this.rL.notify(fz.NXa,this)};c.prototype.iwd=function(d,e){this.uE&&this.uE.userData.cellIndex===e.index||(null!=this.uE?(d.VVc(e,this.uE.geometry),this.uE.userData.cellIndex=e.index,this.uE.userData.ijk=
e.ijk):("frontface"===this.l7c&&(this.uE=d.Ujd(e)),null!=this.uE&&(this.uE.name="ReservoirHelperShape",this.uE.userData.cellIndex=e.index,this.uE.userData.ijk=e.ijk,this.uE.updateMatrixWorld(!0),this.add(this.uE))))};c.prototype.yLc=function(){null!=this.uE&&(oz.dispose(this.uE),this.remove(this.uE),this.uE=null)};c.prototype.A$b=function(){return!0};c.prototype.RZb=function(){return this.uE};c.prototype.atd=function(){var d=new RC([0,0,0]);if(null!=this.uE&&this.uE.userData.ijk){var e=this.uE.userData.ijk;
d.UVb(e)}return d};c.prototype.Wxd=function(d){d instanceof RC&&(d=d.toArray());var e=d[0],f=d[1];d=d[2];return this.WJb<=e&&e<=this.TJb&&this.XJb<=f&&f<=this.UJb&&this.YJb<=d&&d<=this.VJb};c.prototype.Hyd=function(d){return isNaN(this.XAa)||isNaN(this.WAa)||!isFinite(this.XAa)||!isFinite(this.WAa)?!0:this.XAa<=d&&d<=this.WAa};c.prototype.SV=function(){return this.n7};c.prototype.Pqd=function(){return this.smb};c.prototype.aGc=function(d){return this.Lc.Kxd(d)};c.prototype.dispose=function(){oz.dispose(this.gJ.children);
oz.dispose(this.n7.children);this.hb=this.n7=this.gJ=null;XC.prototype.dispose.call(this)};c.prototype.Pf=function(){for(var d=this.n7.children,e=0;e<d.length;e++)d[e].geometry.Pf();return this};return c}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJpc1NlbGVjdGFibGUiOiJRciIsImdldE9wdGlvbnMiOiJ0YSIsImdldEZpbHRlcmVkQ2VsbHNWb2x1bWUiOiJBdGIiLCJnZXRGaWx0ZXJlZENlbGxzQ291bnQiOiJ6dGIiLCJiZWZvcmVSZW5kZXIiOiJhaSIsImFmdGVyUmVuZGVyIjoiSzMiLCJ1c2VPd25IaWdobGlnaHQiOiJBJGIiLCJnZXRTZWxlY3RlZENlbGwiOiJSWmIiLCJnZXRTZWxlY3RlZElKS0luZGV4IjoiYXRkIiwiaXNJSktWYWxpZEluRmlsdGVyIjoiV3hkIiwiaXNWYWx1ZVZhbGlkSW5GaWx0ZXIiOiJIeWQiLCJnZXRDb250YWluZXIiOiJTViIsImdldE9jY2x1c2lvbk1hbmFnZXIiOiJQcWQiLCJyZWJ1aWxkIjoiUGYifX19");AA.ig().Bbb(eD.Oa(),function(c){return c.RZb()});var fD=/*#__PURE__*/va(/*#__PURE__*/function(){function c(b){XC.call(this);this.type="ReservoirSubgrid";this.hb=G(b,{mode:YC.Xbc,skeleton:{color:"grey",linewidth:1}});this.zy=this.hb.skeleton.linewidth;this.b7c=this.hb.data.gridindex;this.geometry=new mA(this.hb);this.geometry.H0b()&&(this.hb.side=mq);this.material=new cD(this.hb);this.jta=new $t(this.geometry,this.material);this.jta.frustumCulled=!1;this.add(this.jta);this.boundingBox=this.jta.geometry.boundingBox.clone();this.jta.geometry.boundingBox.clone().getCenter(a);if(null!=
this.hb.skeleton&&null!=this.hb.skeleton.horizons){b=[];for(var d=0;d<this.hb.skeleton.horizons.length;++d)this.hb.horizonk=this.hb.skeleton.horizons[d].horizonk,b[d]=new aD(this.hb);this.jkb=new dD(this.hb.skeleton.horizons,b);this.jkb.visible=this.hb.mode[2];this.add(this.jkb)}}var a=new Lp;L(c,"geotoolkit3d.scene.reservoir.hexahedral.ReservoirSubgrid");D(c,XC);c.prototype.setOptions=function(b){if(null==b)return this;XC.prototype.setOptions.call(this,b);var d=G(b,this.hb);null!=d.colorprovider&&
oz.brb(d);null!=d.mode&&null!=this.jkb&&(this.jkb.visible=d.mode[2]);null!=this.jta&&(this.jta.material.setOptions(b),this.jta.geometry.setOptions(b));this.Xf();return this};c.prototype.ta=function(){return xb(xb(this.hb,this.jta.material.ta()),XC.prototype.ta.call(this))};c.prototype.getBoundingBox=function(){return this.boundingBox.clone()};c.prototype.getData=function(){return this.hb.data};c.prototype.jod=function(){return this.b7c};return c}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoidGEiLCJnZXRHcmlkSW5kZXgiOiJqb2QifX19");var gD=/*#__PURE__*/va(/*#__PURE__*/function(){function c(a){this.ja=[];this.I7c=!1;null==a.data||0===a.data.length?hb("There is no data in options['data']"):a.data[0].hasOwnProperty("radii")?(this.I7c=!0,this.ja=a.data):a.data.forEach(function(b){return this.tqc(b)}.bind(this))}L(c,"geotoolkit3d.data.well.MultiLateralWellData");c.prototype.J_b=function(){return this.ja};c.prototype.ta=function(){var a=[],b=[],d=[],e=[],f=[],g=[];this.ja.forEach(function(k){f.push(a.length);Array.prototype.push.apply(a,k.x);Array.prototype.push.apply(b,
k.y);Array.prototype.push.apply(d,k.z);Array.prototype.push.apply(e,k.values);g.push(a.length-1)});var h={x:a,y:b,z:d,values:e,tops:f,bots:g,num:this.ja.length};return h};c.prototype.tqc=function(a){if(null==a||null==a.x||null==a.y||null==a.z)return hb("The data in options['data'] is incomplete"),this;var b={x:a.x,y:a.y,z:a.z};null!=a.values?b.values=a.values:(a=Array.apply(null,Array(a.x.length)).map(function(){return NaN}),b.values=a);this.ja.push(b);return this};c.prototype.I_b=function(a){return a>
this.ja.length-1||0>a?(hb("The index is invalid"),null):this.ja[a]};c.prototype.uGd=function(a){if(a>this.ja.length-1||0>a)return hb("The index is invalid"),null;this.ja.splice(a,1);return this};return c}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRXZWxsQXJyYXkiOiJKX2IiLCJnZXRPcHRpb25zIjoidGEiLCJhZGRXZWxsIjoidHFjIiwiZ2V0V2VsbCI6IklfYiIsInJlbW92ZVdlbGwiOiJ1R2QifX19");var hD=/*#__PURE__*/va(/*#__PURE__*/function(){function c(){}L(c,"geotoolkit3d.util.well.CylinderLog");c.le=function(){c.Hpa=new Float32Array(c.Nha*c.sba*2);c.Hya=new Float32Array(c.Nha*c.sba*3);var a,b,d;for(b=a=0;b<c.Nha;++b)for(c.Hpa[a++]=1,c.Hpa[a++]=0,d=1;d<c.sba;d++)c.Hpa[a++]=Math.cos(2*d*Math.PI/c.sba),c.Hpa[a++]=Math.sin(2*d*Math.PI/c.sba);for(b=a=0;b<c.Nha;++b){var e=b/(c.Nha-1);d=(1-e)*(1-e);var f=2*e*(1-e),g=e*e;for(e=0;e<c.sba;e++)c.Hya[a++]=d,c.Hya[a++]=f,c.Hya[a++]=g}};c.sba=-1;c.Nha=-1;c.Hpa=null;c.Hya=null;c.KOc=
function(a,b){if(3>a)throw Error("cornerCount must be at least 3");if(2>b)throw Error("diskCount must be at least 2");c.Hpa=null;c.Hya=null;c.sba=a;c.Nha=b};c.Zkd=function(){null==c.Hpa&&c.le();return c.Hpa};c.Ekd=function(){null==c.Hya&&c.le();return c.Hya};c.KOc(12,3);return c}(),2,"eyJzZXRDeWxpbmRlclByZWNpc2lvbiI6IktPYyJ9");var iD=/*#__PURE__*/va(/*#__PURE__*/function(){function c(a){Aq.call(this);this.type="CylinderGeometry";a=xb(a,{data:{values:[1],valuesnullvalue:-999.25,radiusnullvalue:-999.25}});this.U$c=function(){var b=hD.sba,d=hD.Nha,e=this.getAttribute("position").count,f=e/(d*b),g=this.zlb;if(null!=g){e=new Float32Array(e);var h,k,l,m=0;for(h=0;h<f;++h)for(k=0;k<d;++k)for(l=0;l<b;l++)e[m++]=g[h%g.length];this.setAttribute(Zy.bm,new zq(e,1))}}.bind(this);this.Qua(a);this.setOptions(a)}D(c,Aq);L(c,"geotoolkit3d.scene.well.CylinderLogGeometry");
c.prototype.Qua=function(a){var b=hD.sba,d=hD.Nha,e=a.data.x,f=a.data.y,g=a.data.z;a=g.length;var h=a*d*b,k=new Float32Array(3*h),l=new Float32Array(2*h),m=new Float32Array(3*h),n=new Float32Array(3*h);h=new Float32Array(3*h);var p,q,r,t;for(q=p=0;q<a;++q)for(r=0;r<d;++r)for(t=0;t<b;t++)k[p++]=e[q],k[p++]=f[q],k[p++]=g[q];r=hD.Zkd();for(q=p=0;q<a;++q)l.set(r,p),p+=r.length;p=0;var u=e[1]-e[0],w=f[1]-f[0],y=g[1]-g[0];for(r=0;r<d;++r)for(t=0;t<b;t++)m[p++]=u,m[p++]=w,m[p++]=y;for(q=1;q<a;++q)for(u=
e[q]-e[q-1],w=f[q]-f[q-1],y=g[q]-g[q-1],r=0;r<d;++r)for(t=0;t<b;t++)m[p++]=u,m[p++]=w,m[p++]=y;for(q=p=0;q<a-1;++q)for(r=0;r<d;++r)for(t=0;t<b;t++)n[p++]=e[q+1]-e[q],n[p++]=f[q+1]-f[q],n[p++]=g[q+1]-g[q];for(r=0;r<d;++r)for(t=0;t<b;t++)n[p++]=e[a-1]-e[a-2],n[p++]=f[a-1]-f[a-2],n[p++]=g[a-1]-g[a-2];for(r=p=0;r<d;++r)for(t=0;t<b;t++)h[p++]=0,h[p++]=1,h[p++]=0;e=hD.Ekd();for(q=1;q<a-1;++q)h.set(e,p),p+=e.length;for(r=0;r<d;++r)for(t=0;t<b;t++)h[p++]=0,h[p++]=1,h[p++]=0;this.setAttribute("position",new zq(k,
3));this.setAttribute("cgangle",new zq(l,2));this.setAttribute(BC.mza,new zq(m,3));this.setAttribute(BC.iza,new zq(n,3));this.setAttribute("cgweight",new zq(h,3))};c.prototype.Wjd=function(a){var b=hD.sba,d=hD.Nha,e=a.data.radius,f=a.data.radiusdatamin,g=a.data.radiusdatamax,h=a.data.radiusnullvalue,k=a.data.values;var l=a.data.valuesnullvalue;var m=0,n=-1,p=[],q=[];for(a=0;a<e.length;a++){var r=k[a%k.length]!==l&&!isNaN(k[a%k.length]),t=e[a]!==h&&!isNaN(e[a]);t&&r?(0===m&&(n=a),m++):(1<m&&(q.push(m),
p.push(n)),m=0)}1<m&&(q.push(m),p.push(n));k=[];for(n=0;n<p.length;n++)for(r=(q[n]-2)*d+2,m=p[n]*b*d+(d-1)*b,a=0;a<r-1;){t=a+1;for(l=0;l<b-1;l++)k.push(m+b*a+l),k.push(m+b*t+l),k.push(m+b*a+l+1),k.push(m+b*a+l+1),k.push(m+b*t+l+1),k.push(m+b*t+l);k.push(m+b*a+l);k.push(m+b*t+l);k.push(m+b*a);k.push(m+b*a);k.push(m+b*t);k.push(m+b*t+l);a=t}a=this.getAttribute("position").count;p=a/(d*b);e=bz.L$(e,null,null,f,g,h,0);f=new Float32Array(a);for(a=m=0;a<p;++a)for(l=0;l<d;++l)for(g=0;g<b;g++)f[m++]=e[a];
this.setIndex(new zq(new Uint32Array(k),1));this.setAttribute(BC.aia,new zq(f,1))};c.prototype.setOptions=function(a){var b=!1,d=!1;a.data=G(a.data,{values:this.zlb,valuesnullvalue:this.gRb,radius:this.wc,radiusnullvalue:this.AOb});var e=G(a,{});null==a.data?a.data={}:b=(d=null!=a.data.x&&null!=a.data.y&&null!=a.data.z)||this.zlb!==e.data.values||this.gRb!==e.data.valuesnullvalue||this.wc!==e.data.radius||this.AOb!==e.data.radiusnullvalue;this.zlb=e.data.values;this.gRb=e.data.valuesnullvalue;this.wc=
e.data.radius;this.AOb=e.data.radiusnullvalue;d&&this.Qua(e);b&&(this.Wjd(e),this.U$c());return this};c.prototype.ta=function(){return{data:{values:this.zlb,valuesnullvalue:this.gRb,radius:this.wc,radiusnullvalue:this.AOb}}};return c}(),1,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoidGEifX19");var jD=/*#__PURE__*/va(/*#__PURE__*/function(){function c(b){Xz.call(this,b);this.vertexShader=a.Jya;this.fragmentShader=a.tha;this.type="CylinderLogMaterial";this.lights=!0;this.setOptions(b)}var a=CC;D(c,Xz);L(c,"geotoolkit3d.scene.well.CylinderLogMaterial");c.prototype.setOptions=function(b){Xz.prototype.setOptions.call(this,b);a.TLd(this,b);return this};c.prototype.ta=function(){return xb(a.Tqd(this),Zy.hCc(this))};return c}(),1,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoidGEifX19");
vz.sv(jD.Oa(),tz);var kD=/*#__PURE__*/va(/*#__PURE__*/function(){function c(b){mz.call(this);b=G(b,{radiusmin:5,radiusmax:10});"string"===typeof b.colorprovider?(b.color=new Pq(b.colorprovider),b.colorprovider=null,b.vertexcolors=b.vertexcolors||!1):b.colorprovider instanceof Pq&&(b.color=b.colorprovider,b.colorprovider=null,b.vertexcolors=b.vertexcolors||!1);this.kca=new $t(new iD(b),new jD(b));this.add(this.kca);this.Ys=new Lp;this.setOptions(b)}function a(b,d){var e=Number.MAX_VALUE,f=-Number.MAX_VALUE,g;for(g=0;g<b.length;g++)isNaN(b[g])||
null==b[g]||b[g]===d||(e=Math.min(e,b[g]),f=Math.max(f,b[g]));return{min:e,max:f}}D(c,mz);L(c,"geotoolkit3d.scene.well.CylinderLog");c.prototype.setOptions=function(b){if(null==b)return this;mz.prototype.setOptions.call(this,b);var d=G(b,{radiuslogmin:this.zOb,radiuslogmax:this.yOb});if(null!=b.data&&null!=b.data.radius){var e=b.data.radius;b=b.data.radiusnullvalue;e=a(e,b);this.lL=e.max;this.tB=e.min}if(isNaN(+d.radiuslogmin)||null==d.radiuslogmin)d.radiuslogmin=this.tB;if(isNaN(+d.radiuslogmax)||
null==d.radiuslogmax)d.radiuslogmax=this.lL;this.zOb=+d.radiuslogmin;this.yOb=+d.radiuslogmax;b=this.lL-this.tB;0===b?(e=0,b=1):(e=(this.zOb-this.tB)/b,b=(this.yOb-this.tB)/b);d.radiuslogmin=e;d.radiuslogmax=b;"string"===typeof d.colorprovider?(d.color=new Pq(d.colorprovider),d.colorprovider=null):d.colorprovider instanceof Pq?(d.color=d.colorprovider,d.colorprovider=null):null==d.color&&null!=d.colorprovider&&(d.color=new Pq(16777215));this.kca.geometry.setOptions(d);this.kca.material.setOptions(d);
this.Xf();return this};c.prototype.ta=function(){var b=xb(this.kca.geometry.ta(),this.kca.material.ta());b.radiuslogmin=this.zOb;b.radiuslogmax=this.yOb;return xb(b,mz.prototype.ta.call(this))};c.prototype.ai=function(b,d,e,f){mz.prototype.ai.call(this,b,d,e,f);b=e.iR().scale;this.Ys.equals(b)||BC.vTa(this.kca.material).normscale.set(1/b.x,0,0,0,1/b.y,0,0,0,1/b.z);this.Ys.copy(b)};return c}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoidGEiLCJiZWZvcmVSZW5kZXIiOiJhaSJ9fX0g");var lD=/*#__PURE__*/va(/*#__PURE__*/{YEb:0,mw:1},2,"eyJNaXJyb3IiOiJZRWIiLCJSZWd1bGFyIjoibXcifSAg"),mD=/*#__PURE__*/va(/*#__PURE__*/function(){function c(e,f,g){for(;;){for(;e<f.length&&(b(f[e])||b(g[e%g.length]));)e++;if(e<f.length)if(e<f.length-1)if(b(f[e+1])||b(g[(e+1)%g.length]))e++;else break;else{e++;break}else break}return e}function a(e,f,g){return e[f-1]+(e[f]-e[f-1])*g}function b(e){return isNaN(e)||!isFinite(e)}function d(){}d.C1c=lD;d.FBc=function(e,f){if(null==e)return{min:0,max:1};if(!Array.isArray(e))return{min:Math.min(e,f),max:Math.max(e,f)};for(var g=Number.POSITIVE_INFINITY,h=Number.NEGATIVE_INFINITY,
k=0;k<e.length;k++)g=Math.min(g,e[k],f[k]),h=Math.max(h,e[k],f[k]);return{min:g,max:h}};d.FTb=function(e,f,g,h,k,l){Array.isArray(e)||(e=null==e?[1]:[e]);Array.isArray(f)||(f=null==f?e:[f]);e=d.OAd(e,f,g,h,k,l);return{w:e.lCb,h:e.mCb}};d.UTb=function(e,f,g,h,k,l){e=f.length/3+h;for(f=0;f<l;f++){h=f+e-l;k=(f+1)%l+e-l;var m=f+e-2*l,n=(f+1)%l+e-2*l;g.push(m,h,k);g.push(m,k,n)}};d.OAd=function(e,f,g,h,k,l){var m=0;if(null==k||null==l){k=Number.MAX_VALUE;for(l=-Number.MAX_VALUE;m<e.length;m++)k=Math.min(k,
e[m]),l=Math.max(l,e[m]),k=Math.min(k,f[m]),l=Math.max(l,f[m]);if(l===k)return{lCb:[h],mCb:[h]}}e=e.slice();f=f.slice();for(m=0;m<e.length;m++)e[m]=g+(e[m]-k)/(l-k)*(h-g),f[m]=g+(f[m]-k)/(l-k)*(h-g);return{lCb:e,mCb:f}};d.WTb=function(e){var f=new Nw;f.moveTo(0,0);var g=Xg.wFa(0,0,1,1),h=g[0];f.moveTo(h.mna(),h.pna());for(var k=0;k<g.length;++k)h=g[k],f.bezierCurveTo(h.nna(),h.qna(),h.ona(),h.rna(),h.Kfa(),h.Lfa());f.closePath();return f.extractPoints(e).shape};d.tHd=function(){var e=new gy,f=new gy,
g=new gy,h=new gy,k=.001;return function(l,m,n,p,q,r,t,u,w,y,A){l=bz.L$(l,0,1,p,q,t);m=bz.L$(m,0,1,p,q,u);t=V.sign(m[0]-l[0]);p=n.length===w.length;q=.5;for(r=0;r<l.length;r++){var x=m[r],C=l[r];b(C)||b(x)||b(n[r%n.length])?(null!=t&&(t=null,p&&n.splice(r,0,a(n,r,k)),w.splice(r,0,a(w,r,k)),y.splice(r,0,a(y,r,k)),A.splice(r,0,a(A,r,k)),m.splice(r,0,q),l.splice(r,0,q),r++),u=c(r+1,l,n),x=c(r+1,m,n),u=Math.max(u,x),u<l.length&&(w.splice(u,0,a(w,u+1,-k)),y.splice(u,0,a(y,u+1,-k)),A.splice(u,0,a(A,u+1,
-k)),l.splice(u,0,q),m.splice(u,0,q),p&&n.splice(r,0,a(n,u+1,-k))),w.splice(r,u-r),y.splice(r,u-r),A.splice(r,u-r),l.splice(r,u-r),m.splice(r,u-r),p&&n.splice(r,u-r)):null==t?t=V.sign(x-C):(u=V.sign(x-C),u!==t&&0!==u&&0!==t&&(e.set(l[r-1],A[r-1]),f.set(C,A[r]),g.set(m[r-1],A[r-1]),h.set(x,A[r]),t=bz.intersect(e,f,g,h),x=e.distanceTo(t)/f.distanceTo(e),p&&n.splice(r,0,n[r-1]+(n[r]-n[r-1])*x),w.splice(r,0,w[r-1]+(w[r]-w[r-1])*x),y.splice(r,0,y[r-1]+(y[r]-y[r-1])*x),A.splice(r,0,A[r-1]+(A[r]-A[r-1])*
x),m.splice(r,0,t.x),l.splice(r,0,t.x)),t=u)}return{lCb:l,mCb:m}}}();d.tMc=function(){var e=new gy,f=new gy,g=new gy,h=new gy,k=.001;return function(l,m,n,p,q,r,t,u,w,y){l=p<=q?bz.L$(l,0,1,p,q,t):bz.L$(l,1,0,q,p,t);p=n.length===u.length;t=null;for(q=0;q<l.length;q++){var A=l[q];b(A)||b(n[q%n.length])?(null!=t&&(t=null,l[q-1]!==m&&(p&&n.splice(q,0,a(n,q,k)),u.splice(q,0,a(u,q,k)),w.splice(q,0,a(w,q,k)),y.splice(q,0,a(y,q,k)),l.splice(q,0,m),q++)),r=c(q+1,l,n),r<l.length&&l[r]!==m&&(u.splice(r,0,a(u,
r+1,-k)),w.splice(r,0,a(w,r+1,-k)),y.splice(r,0,a(y,r+1,-k)),l.splice(r,0,m),p&&n.splice(q,0,a(n,r+1,-k))),u.splice(q,r-q),w.splice(q,r-q),y.splice(q,r-q),l.splice(q,r-q),p&&n.splice(q,r-q)):null==t?t=V.sign(m-A):(r=V.sign(m-A),r!==t&&0!==r&&0!==t&&(e.set(l[q-1],y[q-1]),f.set(A,y[q]),g.set(m,y[q-1]),h.set(m,y[q]),t=bz.intersect(e,f,g,h),A=e.distanceTo(t)/f.distanceTo(e),u.splice(q,0,a(u,q,A)),w.splice(q,0,a(w,q,A)),y.splice(q,0,a(y,q,A)),l.splice(q,0,t.x),p&&n.splice(q,0,a(n,q,A))),t=r)}return l}}();
d.ctc=function(e,f,g,h,k,l){for(l=l?l:0;l<h.length-1&&!(h[l]<=e&&e<=h[l+1]);++l);var m=h[l];h=h[l+1];h=(e-m)/(h-m);f=(1-h)*f[l]+h*f[l+1];g=(1-h)*g[l]+h*g[l+1];k=(1-h)*k[l]+h*k[l+1];return(new Mp).set(f,g,k,e)};d.sHd=function(e,f,g,h,k,l){var m=[],n=[],p=[],q=[],r=[],t=0,u=0;if(e[e.length-1]>=k[0]){for(;t<e.length&&e[t]<k[0];)++t;for(;k[u]<e[t];)p.push(g[u]),q.push(h[u]),n.push(l[u]),m.push(k[u]),r.push(Number.NaN),++u;for(var w=k[k.length-1],y;t<e.length&&e[t]<=w;++t)y=e[t],null==k[u]||isNaN(k[u])||
null==y||isNaN(y)||(y<=k[u]?(y=d.ctc(y,g,h,k,l,u-1),p.push(y.x),q.push(y.y),n.push(y.z),m.push(y.w),r.push(f[t])):(++u,--t));for(;u<k.length;++u)p.push(g[u]),q.push(h[u]),n.push(l[u]),m.push(k[u]),r.push(Number.NaN)}m.length!==r.length&&rb("Re-sampling Error!");return{x:p,y:q,tvds:n,mds:m,values:r}};return d}(),2,"eyJjb21wdXRlTGluZWFySW50ZXJwb2xhdGlvblRyYWplY3RvcnlQb2ludCI6ImN0YyIsInJlc2FtcGxlTGluZWFyIjoic0hkIn0g");var oD=/*#__PURE__*/va(/*#__PURE__*/function(){function c(b){Aq.call(this);this.type="DynamicTubeGeometry";b=G(b,{radiusmin:0,radiusmax:1,tubeprecision:3,openended:!1,startbuffersize:1E3,bufferresizefactor:.1});this.DLa=b.startbuffersize;this.ja={};this.ja.Nm=[];this.ja.Xx=[];this.ja.Bi=[];this.ja.values=[];this.ja.az=[];this.ja.CD=[];this.ja.DK=[];this.O6=0;this.setOptions(b)}var a=new Yt;D(c,Aq);L(c,"geotoolkit3d.scene.well.DynamicTubeGeometry");c.prototype.setOptions=function(b){b=G(b,{radiusmin:this.wJ,radiusmax:this.GO,
axismin:this.shb,axismax:this.rhb,tubeprecision:this.lD,openended:this.DE,bufferresizefactor:this.Ehb});this.Ehb=b.bufferresizefactor;var d=b.radiusmin!==this.wJ||this.GO!==b.radiusmax||this.lD!==b.tubeprecision||this.DE!==b.openended||this.shb!==b.axismin||this.rhb!==b.axismax;if(!d)return this;this.wJ=b.radiusmin;this.GO=b.radiusmax;this.shb=b.axismin;this.rhb=b.axismax;this.lD!==b.tubeprecision&&(this.lD=b.tubeprecision,this.Wmb=mD.WTb(this.lD));this.DE=b.openended;this.O6=0;this.T5a([],[],[]);
return this};c.prototype.ta=function(){return{radiusmin:this.wJ,radiusmax:this.GO,axismin:this.shb,axismax:this.rhb,tubeprecision:this.lD,openended:this.DE,bufferresizefactor:this.Ehb}};c.prototype.Lyb=function(){this.jNa.fill(0);this.s7.needsUpdate=!0;this.ja.Nm=[];this.ja.Xx=[];this.ja.Bi=[];this.ja.values=[];this.ja.az=[];this.ja.CD=[];this.ja.DK=[];this.O6=0;return this};c.prototype.getData=function(){var b={};b.xs=this.ja.Nm.slice();b.ys=this.ja.Xx.slice();b.zs=this.ja.Bi.slice();b.values=this.ja.values.slice();
b.widths=this.ja.az.slice();b.heights=this.ja.CD.slice();b.rolls=this.ja.DK.slice();return b};c.prototype.huc=function(){var b=this.Wmb.length-1,d=this.DLa*b+(this.DE?0:2),e=(this.DLa-1)*b*2+(this.DE?0:2*b);if(null==this.UDa)this.UDa=new Float32Array(3*d),this.jNa=new Uint32Array(3*e),this.n5a=new Float32Array(d),this.O2a=new Float32Array(3*d),this.nRb=(new zq(this.UDa,3)).setUsage(Lr),this.s7=(new zq(this.jNa,1)).setUsage(Lr),this.cr=(new zq(this.O2a,3)).setUsage(Lr),this.THb=(new zq(this.n5a,1)).setUsage(Lr);
else{this.dispose();b=new Float32Array(3*d);e=new Uint32Array(3*e);var f=new Float32Array(d);d=new Float32Array(3*d);b.set(this.UDa);e.set(this.jNa);f.set(this.n5a);d.set(this.O2a);this.UDa=b;this.jNa=e;this.n5a=f;this.O2a=d;this.nRb.Axa(this.UDa);this.s7.Axa(this.jNa);this.cr.Axa(this.O2a);this.THb.Axa(this.n5a)}};c.prototype.Ovd=function(b){null==this.UDa?(b>this.DLa&&(this.DLa=Math.floor(b*(1+this.Ehb))),this.huc(),this.setAttribute("position",this.nRb),this.setIndex(this.s7),this.setAttribute("normal",
this.cr),this.setAttribute(Zy.bm,this.THb)):(b<=this.DLa||(this.DLa=Math.floor(b*(1+this.Ehb)),this.huc()),this.nRb.needsUpdate=!0,this.s7.needsUpdate=!0,this.cr.needsUpdate=!0,this.THb.needsUpdate=!0)};c.prototype.T5a=function(b,d,e,f,g,h,k){if(null==b||null==d||null==e)return this;null==f&&(f=[]);null==g&&(g=[]);null==h&&(h=[]);null==k&&(k=[]);var l=b,m=d,n=e,p=f,q=g,r=h,t=k,u=null;0<this.O6&&(u=new Lp(this.ja.Nm[this.ja.Nm.length-1],this.ja.Xx[this.ja.Xx.length-1],this.ja.Bi[this.ja.Bi.length-
1]));this.O6!==this.ja.Nm.length&&(l=this.ja.Nm,m=this.ja.Xx,n=this.ja.Bi,p=this.ja.values,q=this.ja.az,r=this.ja.CD,t=this.ja.DK);for(var w=0;w<b.length;w++)this.ja.Nm.push(b[w]),this.ja.Xx.push(d[w]),this.ja.Bi.push(e[w]),null!=f&&this.ja.values.push(null!=f[w]?k[w]:Number.NaN),null!=g&&this.ja.az.push(g[w]),null!=h&&this.ja.CD.push(h[w]),null!=k&&this.ja.DK.push(null!=k[w]?k[w]:0);if(null==u&&2>l.length)return this;b=[];w=mD.FTb(q,r,this.wJ,this.GO,this.shb,this.rhb);f=w.w;g=w.h;for(w=0;w<l.length;w++)b.push(new Lp(l[w],
m[w],n[w]));l=[];m=[];n=[];q=[];h=this.Wmb.length;r=h-1;d=this.O6*r+(this.DE?0:1);e=(this.O6-1)*r*2+(this.DE?0:r);0===this.O6&&(e=d=0);k=new Lp(1,1,1);var y=0,A=new Lp(0,0,-1),x=new Lp,C=x.clone(),z=x.clone(),v=b.length;w=1;if(!this.DE&&0===this.O6){var B=0;l.push(b[0].x,b[0].y,b[0].z);var E=b[0].clone().sub(b[1]).normalize();m.push(E.x,E.y,E.z);E=null!=p?p[0]:Number.NaN;q.push(E);for(E=0;E<r;E++)n.push(B,w+E,w+(E+1)%r)}for(w=0;w<v;w++)if(!(0<w&&b[w].equals(b[w-1]))){k.x=2*f[w%f.length];k.y=2*g[w%
g.length];B=!1;0===k.x&&0===k.y&&(k.x=1,k.y=1,B=!0);null!=t[Math.min(w,v-1)]&&(y=t[Math.min(w,v-1)]);E=0<w?C.copy(b[w]).sub(b[w-1]).normalize():null!=u?C.copy(b[w]).sub(u).normalize():C.copy(b[w+1]).sub(b[w]).normalize();a.lookAt(x,E,z.set(-E.y,-E.z,0));for(E=1;E<h;E++){C.set(this.Wmb[E].x,this.Wmb[E].y,0);C.multiply(k);C.applyAxisAngle(A,y);C.applyMatrix4(a);C.add(b[w]);B?l.push(b[w].x,b[w].y,b[w].z):l.push(C.x,C.y,C.z);C.sub(b[w]).normalize();m.push(C.x,C.y,C.z);var H=p&&null!=p[w]?p[w]:Number.NaN;
q.push(H)}(0<w||null!=u)&&mD.UTb(this,l,n,d,v,r)}if(!this.DE)for(w=l.length/3-1+d,t=l.length/3+d,l.push(b[b.length-1].x,b[b.length-1].y,b[b.length-1].z),u=2>b.length?u:b[b.length-2],u=b[b.length-1].clone().sub(u).normalize(),m.push(u.x,u.y,u.z),p=p&&null!=p[w]?p[w]:Number.NaN,q.push(p),w-=r-1,E=0;E<r;E++)n.push(t,w+(E+1)%r,w+E);this.O6+=b.length;this.boundingSphere=this.boundingBox=null;this.Ovd(this.O6);this.UDa.set(l,3*d);this.jNa.set(n,3*e);this.O2a.set(m,3*d);this.n5a.set(q,d);this.computeBoundingBox();
return this};return c}(),1,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoidGEiLCJyZXNldERhdGEiOiJMeWIiLCJhZGRHZW9tZXRyeSI6IlQ1YSJ9fX0g");var pD=/*#__PURE__*/function(){function c(a){Xz.call(this,{});this.type="DynamicTubeMaterial";a=G(a,{opacity:.85,transparent:!0,color:new Pq("blue"),name:"well"},!0);this.setOptions(a)}D(c,Xz);L(c,"geotoolkit3d.scene.well.DynamicTubeMaterial");return c}();var qD=/*#__PURE__*/va(/*#__PURE__*/function(){function c(a){mz.call(this);this.Ad=new $t(new oD(a),new pD(a));this.add(this.Ad)}D(c,mz);L(c,"geotoolkit3d.scene.well.DynamicTube");c.prototype.setOptions=function(a){if(null==a)return this;mz.prototype.setOptions.call(this,a);this.Ad.geometry.setOptions(a);this.Ad.material.setOptions(a);return this};c.prototype.ta=function(){return xb(xb(this.Ad.geometry.ta(),this.Ad.material.ta()),mz.prototype.ta.call(this))};c.prototype.Lyb=function(){this.Ad.geometry.Lyb();return this};c.prototype.getData=
function(){return this.Ad.geometry.getData()};c.prototype.T5a=function(a,b,d,e,f,g,h){this.Ad.geometry.T5a(a,b,d,e,f,g,h);return this};return c}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoidGEiLCJyZXNldERhdGEiOiJMeWIiLCJhZGRHZW9tZXRyeSI6IlQ1YSJ9fX0g");var rD=/*#__PURE__*/function(){function c(d){Aq.call(this);this.type="LineGeometry";d=G(d,{colorprovider:"blue"});this.ja=d.data;this.ja.Nm=d.data.x;this.ja.Xx=d.data.y;this.ja.Bi=d.data.z;this.ja.values=d.data.values;Array.isArray(this.ja.values)||(this.ja.values=null==this.ja.values?[0]:[this.ja.values]);for(var e=Array(3*this.ja.Nm.length),f=0;f<this.ja.Nm.length;f++){var g=3*f;e[g]=this.ja.Nm[f];e[g+1]=this.ja.Xx[f];e[g+2]=this.ja.Bi[f]}this.xia=new zq(new Float32Array(3*this.ja.Nm.length),3);this.BQc(d.colorprovider);
this.setAttribute("color",this.xia);this.setAttribute("position",new zq(new Float32Array(e),3));e=d.data.values;d=Array.isArray(e)?bz.L$(e,0,1,this.tB,this.lL,d.data.nullvalue,Zy.ggb):[e];e=new Float32Array(3*this.ja.Nm.length);f=new Float32Array(3*this.ja.Nm.length);g=new Float32Array(this.ja.Nm.length);if(0<this.ja.Nm.length){var h=function(l,m){return new Lp(this.ja.Nm[l]-this.ja.Nm[m],this.ja.Xx[l]-this.ja.Xx[m],this.ja.Bi[l]-this.ja.Bi[m])}.bind(this);e.set(h(0,1).toArray(),0);f.set(h(0,1).toArray(),
0);g[0]=d[0];var k;for(k=1;k<this.ja.Nm.length-1;k++)e.set(h(k-1,k).toArray(),3*k),f.set(h(k,k+1).toArray(),3*k),g[k]=d[k%d.length];e.set(h(this.ja.Nm.length-2,this.ja.Nm.length-1).toArray(),3*(this.ja.Nm.length-1));f.set(h(this.ja.Nm.length-2,this.ja.Nm.length-1).toArray(),3*(this.ja.Nm.length-1));g[k]=d[d.length-1]}this.setAttribute(BC.mza,new zq(e,3));this.setAttribute(BC.iza,new zq(f,3));this.setAttribute(BC.aia,new zq(g,1))}var a=new Lp,b=new Lp;D(c,Aq);L(c,"geotoolkit3d.scene.well.LineGeometry");
c.prototype.BQc=function(d){var e=d instanceof Oo,f,g=this.xia.array;e||(f=(new Pq(d)).toArray());for(var h=0;h<this.ja.Nm.length;h++){var k=3*h;e&&(f=d.rb(this.ja.values[h%this.ja.values.length]),f=[f.lk()/255,f.kk()/255,f.ik()/255]);g[k]=f[0];g[k+1]=f[1];g[k+2]=f[2]}this.xia.needsUpdate=!0};c.prototype.setOptions=function(d){if(null==d)return this;d.hasOwnProperty("colorprovider")&&this.BQc(d.colorprovider);return this};c.prototype.vsb=function(d){this.aH||this.nT((this.ja.Bi[this.ja.Bi.length-
1]+this.ja.Bi[0])/2,d);return this.aH};c.prototype.nT=function(d,e){this.Pg||(this.Pg=e);this.Pg.equals(e)||this.Pg.copy(e);this.nu=this.nu||new Lp;this.aH=this.aH||new Vr;e=V.findIndex(d,this.ja.Bi,null,null,function(f,g){return g-f})||1;0>e&&(e=~e);a.set(this.ja.Nm[e-1],this.ja.Xx[e-1],this.ja.Bi[e-1]);b.set(this.ja.Nm[e],this.ja.Xx[e],this.ja.Bi[e]);d=(d-this.ja.Bi[e-1])/(this.ja.Bi[e]-this.ja.Bi[e-1]);this.nu.copy(b).sub(a).multiplyScalar(d).add(a);a.multiply(this.Pg);a.multiply(this.Pg);b.multiply(this.Pg);
b.multiply(this.Pg);b.sub(a).normalize();a.set(-1,0,0);a.crossVectors(b,a).normalize();this.aH=bz.p7a(a,b,this.aH);return this};c.prototype.Hx=function(d){this.nu||this.nT((this.ja.Bi[this.ja.Bi.length-1]+this.ja.Bi[0])/2,d);return this.nu};c.prototype.dispose=function(){this.xia=null;Aq.prototype.dispose.call(this)};return c}();var sD=/*#__PURE__*/va(/*#__PURE__*/function(){function c(e){Aq.call(this);this.type="LogArrayGeometry";var f=G(e,{});this.qPa=e.data.logarray[0].length;var g=b(this.qPa/4).slice(1,this.qPa+1);g=g.map(function(q,r,t){return t[(r+t.length/4)%t.length]});this.YNb=e.data.path.x.length;for(var h=[],k=[],l=0;l<this.YNb;l++){for(var m=0;m<this.qPa;m++)h.push(g[m].x,g[m].y,0);1<=l&&a(h,k,this.qPa)}g=new Float32Array(h);l=new Float32Array(h);m=new Float32Array(h);var n=new Float32Array(h.length),p=null;this.setAttribute("position",new zq(g,
3));this.setIndex(new zq(new Uint32Array(k),1));this.setAttribute(d.KEb,new zq(l,3));this.setAttribute(d.JEb,new zq(m,3));this.setAttribute(d.IEb,new zq(n,1));null!=e.data.values&&(p=new Float32Array(h.length),this.setAttribute(Zy.bm,new zq(p,1)));this.boundingBox=new uq;this.Zg(f)}function a(e,f,g){e=e.length/3;for(var h=0;h<g;h++){var k=h+e-g,l=(h+1)%g+e-g,m=h+e-2*g,n=(h+1)%g+e-2*g;f.push(m,k,l);f.push(m,l,n)}}function b(e){var f=new Nw;f.moveTo(0,0);var g=Xg.wFa(0,0,1,1),h=g[0];f.moveTo(h.mna(),
h.pna());for(var k=0;k<g.length;++k)h=g[k],f.bezierCurveTo(h.nna(),h.qna(),h.ona(),h.rna(),h.Kfa(),h.Lfa());f.closePath();return f.extractPoints(e).shape}var d=HC;D(c,Aq);L(c,"geotoolkit3d.scene.well.logarray.LogArrayGeometry");c.prototype.Zg=function(e){if(null!=e.data){e=e.data;var f=e.path,g=f.x,h=f.y;f=f.z;var k=new Lp;if(this.YNb!==g.length)throw Error("Changing sample count in LogArray is not supported.");var l=this.boundingBox.min,m=this.boundingBox.max;l.set(Number.MAX_VALUE,Number.MAX_VALUE,
Number.MAX_VALUE);m.set(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE);var n=this.getAttribute(d.KEb),p=this.getAttribute(d.JEb),q=this.getAttribute(d.IEb),r=null;null!=this.getAttribute(Zy.bm)&&(r=this.getAttribute(Zy.bm));for(var t=0;t<this.YNb;t++){var u=g[t],w=h[t],y=f[t];0<t?k.set(u-g[t-1],w-h[t-1],y-f[t-1]).normalize():k.set(g[t+1]-u,h[t+1]-w,f[t+1]-y).normalize();for(var A=0;A<this.qPa;A++){var x=t*this.qPa+A;n.setXYZ(x,u,w,y);p.setXYZ(x,k.x,k.y,k.z);q.setX(x,e.logarray[t][A]);null!=
r&&r.setX(x,e.values[t][A])}l.set(Math.min(l.x,u),Math.min(l.y,w),Math.min(l.z,y));m.set(Math.max(m.x,u),Math.max(m.y,w),Math.max(m.z,y))}this.boundingSphere=new Xw;this.boundingBox.getBoundingSphere(this.boundingSphere);this.getAttribute(d.KEb).needsUpdate=!0;this.getAttribute(d.JEb).needsUpdate=!0;this.getAttribute(d.IEb).needsUpdate=!0;null!=this.getAttribute(Zy.bm)&&(this.getAttribute(Zy.bm).needsUpdate=!0)}return this};return c}(),1,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJ1cGRhdGVHZW9tZXRyeSI6IlpnIn19fSAg");var tD=/*#__PURE__*/va(/*#__PURE__*/function(){function c(b){b=G(b,{side:Gr,referencemode:EC.gGb},!0);Xz.call(this,b);this.type="LogArrayMaterial";this.vertexShader=a.Jha;this.fragmentShader=a.VYa;this.setOptions(b)}var a=HC;D(c,Xz);L(c,"geotoolkit3d.scene.well.logarray.LogArrayMaterial");c.prototype.setOptions=function(b){Xz.prototype.setOptions.call(this,b);a.WLd(this,b);return this};c.prototype.ta=function(){return xb(a.Xqd(this),Xz.prototype.ta.call(this))};return c}(),1,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoidGEifX19");vz.sv(tD.Oa(),tz);var uD=/*#__PURE__*/va(/*#__PURE__*/function(){function c(a){mz.call(this);a=G(a,{colorprovider:new Pq("red"),radiusmin:10,radiusdelta:10,logarraynullvalue:-999.25,colornullvalue:-999.25});"string"===typeof a.colorprovider?(a.color=new Pq(a.colorprovider),a.colorprovider=null,a.vertexcolors=a.vertexcolors||!1):a.colorprovider instanceof Pq&&(a.color=a.colorprovider,a.colorprovider=null,a.vertexcolors=a.vertexcolors||!1);this.a2a=new $t(new sD(a),new tD(a));this.add(this.a2a);this.Ys=new Lp;this.setOptions(a)}D(c,mz);L(c,"geotoolkit3d.scene.well.logarray.LogArray");
c.prototype.setOptions=function(a){if(null==a)return this;mz.prototype.setOptions.call(this,a);a=G(a,{});"string"===typeof a.colorprovider?(a.color=new Pq(a.colorprovider),a.colorprovider=null,a.vertexcolors=a.vertexcolors||!1):null===a.color&&null!==a.colorprovider?(a.color=new Pq(16777215),a.vertexcolors=a.vertexcolors||!1):a.colorprovider instanceof Pq&&(a.color=a.colorprovider,a.colorprovider=null,a.vertexcolors=a.vertexcolors||!1);this.a2a.geometry.Zg(a);this.a2a.material.setOptions(a);this.Xf();
return this};c.prototype.ta=function(){return xb(this.a2a.material.ta(),mz.prototype.ta.call(this))};c.prototype.ai=function(a,b,d,e){mz.prototype.ai.call(this,a,b,d,e);a=d.iR().scale;this.Ys.equals(a)||BC.vTa(this.a2a.material).normscale.set(1/a.x,0,0,0,1/a.y,0,0,0,1/a.z);this.Ys.copy(a)};return c}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoidGEifX19");var vD=/*#__PURE__*/va(/*#__PURE__*/function(){function c(b){var d=b.data.values;d=Array.isArray(d)?V.Xt(d,void 0,b.data.nullvalue):[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY];b=G(b,{radius:1,opacity:1,offset:1,offsetmode:lD.YEb,curvemin:d[0],curvemax:d[1]});b.color===jy&&(hb("THREE.VertexColors was deprecated since 3.3, use null for options.color in LogCurve2D constructor"),b.color=null);Lw.call(this,{vertexColors:null==b.color,vertexShader:a.C0c,fragmentShader:a.B0c});this.tB=d[0];this.lL=d[1];isNaN(b.curvemin)&&(b.curvemin=
this.tB);isNaN(b.curvemax)&&(b.curvemax=this.lL);this.type="LogCurve2DMaterial";this.setOptions(b)}var a=IC;D(c,Lw);L(c,"geotoolkit3d.scene.well.LogCurve2DMaterial");c.prototype.setOptions=function(b){b=G(b,this.ta());b.normalizedcurvemin=this.WBc(b.curvemin);b.normalizedcurvemax=this.WBc(b.curvemax);BC.mRc(this,b);a.VLd(this,b);return this};c.prototype.ta=function(){var b=BC.iCc(this);b.curvemin=this.nxc(b.normalizedcurvemin);b.curvemax=this.nxc(b.normalizedcurvemax);return G(b,a.Wqd(this))};c.prototype.WBc=
function(b){return(b-this.tB)/(this.lL-this.tB)};c.prototype.nxc=function(b){return(b+this.tB)*(this.lL-this.tB)};return c}(),1,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoidGEifX19");vz.sv(vD.Oa(),tz);var wD=/*#__PURE__*/va(/*#__PURE__*/function(){function c(a){mz.call(this);this.type="LogCurve2D";a=G(a,{colorprovider:"red",color:a.colorprovider||"red",radius:1,offset:1});"string"===typeof a.color&&(a.color=new Pq(a.color));this.xj=new rt(new rD(a),new vD(a));this.add(this.xj)}D(c,mz);L(c,"geotoolkit3d.scene.well.LogCurve2D");c.prototype.setOptions=function(a){if(null==a)return this;mz.prototype.setOptions.call(this,a);a=G(a,{color:a.colorprovider});"string"===typeof a.color&&(a.color=new Pq(a.color));if(null!=a.data){var b=
this.xj.material;if(null!=a.data.x&&null!=a.data.y&&null!=a.data.z){this.xj.geometry.dispose();var d=new rD(a);null!=a.data.values&&(b=this.xj.material.ta(),oz.r7a(this.xj.material),b=new vD(G(a,b)));this.remove(this.xj);this.add(this.xj=new rt(d,b))}}this.xj.material.setOptions(a);this.Xf();return this};c.prototype.ta=function(){return xb(this.xj.material.ta(),mz.prototype.ta.call(this))};return c}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoidGEifX19");var xD=/*#__PURE__*/va(/*#__PURE__*/function(){function c(b){Aq.call(this);this.type="LogFill2DGeometry";this.gH=null;this.Gb=[]}var a=new Pq;D(c,Aq);L(c,"geotoolkit3d.scene.well.LogFill2DGeometry");c.prototype.Z9b=function(){var b=[],d=this.getAttribute("position");if(null!=d&&0!==this.Gb.length){d=this.getAttribute("position").count;var e=this.Gb,f,g;if(this.gH instanceof Oo)for(f=0;f<d;f++)(g=this.gH.rb(e[f%e.length]))?(g=a.setRGB(g.lk()/255,g.kk()/255,g.ik()/255).toArray(),b.push(g[0],g[1],g[2],g[0],g[1],g[2])):b.push(null,
null,null,null,null,null);else for(g=a.set(this.gH).toArray(),f=0;f<d;f++)b.push(g[0],g[1],g[2],g[0],g[1],g[2]);d=this.getAttribute("color");null==d?this.setAttribute("color",new zq(new Float32Array(b),3)):(d.array=new Float32Array(b),d.needsUpdate=!0)}};c.prototype.Qua=function(b){var d=b.x,e=b.y,f=b.z;if(!Array.isArray(d)||!Array.isArray(e)||!Array.isArray(f)||2>d.length||2>e.length||2>f.length)hb("LogFill2D: cannot be created due to insufficient data points");else{var g=b.colorvalues;Array.isArray(g)||
(g=null==g?[0]:[g]);this.Gb=g;g=[];for(var h=[],k=0;k<d.length;k++)if(g.push(d[k],e[k],f[k]),g.push(d[k],e[k],f[k]),1<=k){var l=2*k;h.push(l-2,l-1,l);h.push(l,l-1,l+1)}this.setAttribute("position",new zq(new Float32Array(g),3));this.setIndex(new zq(new Uint32Array(h),1));g=null!=b.curvevalues1?b.curvevalues1:0;b=null!=b.curvevalues2?b.curvevalues2:1;var m=Array.isArray(g)?g:[g],n=Array.isArray(b)?b:[b],p=[],q=[],r=[];b=[];var t=0<f[f.length-1]-f[0]?-1:1,u=function(y,A,x,C){var z=d[y]-d[A],v=e[y]-
e[A];y=Math.abs(f[y]-f[A])<V.Qb?t*V.Qb:f[y]-f[A];x.push(z,v,y);null!=C&&C.push(z,v,y)};g=function(y,A){var x=n[y%n.length],C=m[y%m.length],z=x>C?1:-1;x===C&&(y+=A,z=n[y%n.length]>m[y%m.length]?1:-1);return z};u(0,1,p,q);r.push(m[0]);b.push(g(0,-1));u(0,1,p,q);r.push(n[0]);b.push(g(0));h=function(y,A,x,C){u(y,A,p);u(A,x,q);r.push(C)};var w;for(w=1;w<d.length-1;w++)k=m[w%m.length],l=n[w%n.length],h(w-1,w,w+1,k),b.push(g(w,-1)),h(w-1,w,w+1,l),b.push(g(w,1));u(d.length-2,d.length-1,p,q);r.push(m[m.length-
1]);b.push(g(w,-1));u(d.length-2,d.length-1,p,q);r.push(n[n.length-1]);b.push(g(w,1));this.setAttribute(BC.aia,new zq(new Float32Array(r),1));this.setAttribute(BC.iza,new zq(new Float32Array(q),3));this.setAttribute(BC.mza,new zq(new Float32Array(p),3));this.setAttribute(JC.fza,new zq(new Float32Array(b),1))}};c.prototype.setOptions=function(b){if(null==b)return this;b.hasOwnProperty("data")&&this.Qua(b.data);b.hasOwnProperty("colorprovider")&&b.colorprovider!==this.gH&&(this.gH=b.colorprovider,this.Z9b());
return this};c.prototype.ta=function(){return{colorprovider:this.gH}};return c}(),1,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoidGEifX19");var yD=/*#__PURE__*/va(/*#__PURE__*/function(){function c(b){b=G(b,{});Lw.call(this,{vertexShader:a.A0c,fragmentShader:a.z0c});this.type="LogFill2DMaterial";this.side=Gr;this.setOptions(b)}var a=JC;D(c,Lw);L(c,"geotoolkit3d.scene.well.LogFill2DMaterial");c.prototype.ta=function(){return xb(a.Yqd(this),BC.iCc(this))};c.prototype.setOptions=function(b){b=G(b,{});b.positivecolor===jy&&(hb("THREE.VertexColors was deprecated since 3.3, use null for options.positivecolor in LogFill2D.setOptions"),b.positivecolor=null);b.negativecolor===
jy&&(hb("THREE.VertexColors was deprecated since 3.3, use null for options.negative in LogFill2D.setOptions"),b.negativecolor=null);this.vertexColors=null==b.positivecolor&&null==b.negativecolor;b.normalizedcurvemin=0;b.normalizedcurvemax=1;a.XLd(this,b);BC.mRc(this,b);return this};return c}(),1,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoidGEifX19");vz.sv(yD.Oa(),tz);var zD=/*#__PURE__*/va(/*#__PURE__*/function(){function c(a){mz.call(this);this.type="LogFill2D";a=G(a,{colorprovider:"blue",radius:1,opacity:1,offset:1,offsetmode:lD.YEb});this.Ipb=[];this.Lpb=[];this.Qpb=[];this.Zsa={};this.gib=[0];this.ica=1;this.U6=0;this.R2a=this.Q2a=this.pz=null;this.tB=Number.POSITIVE_INFINITY;this.lL=Number.NEGATIVE_INFINITY;this.Zqa=this.$qa=null;this.Wq=new $t(new xD(a),new yD(a));this.add(this.Wq);this.setOptions(a)}D(c,mz);L(c,"geotoolkit3d.scene.well.LogFill2D");c.prototype.setOptions=function(a){if(null==
a)return this;mz.prototype.setOptions.call(this,a);a=G(a,{});if(a.hasOwnProperty("data")){null!=a.data.values&&(hb("data.values for LogFill2D is deprecated in GeoToolkit 3.3. Use data.colorvalues instead."),a.data.colorvalues=a.data.values);null!=a.data.values1&&(hb("data.values1 for LogFill2D is deprecated in GeoToolkit 3.3. Use data.curvevalues1 instead."),a.data.curvevalues1=a.data.values1);null!=a.data.values2&&(hb("data.values2 for LogFill2D is deprecated in GeoToolkit 3.3. Use data.curvevalues2 instead."),
a.data.curvevalues2=a.data.values2);if(null!=a.data.colorvalues){var b=a.data.colorvalues;Array.isArray(b)?this.gib=b.slice(0):this.gib=[b]}this.Ipb=a.data.x?a.data.x:this.Ipb;this.Lpb=a.data.y?a.data.y:this.Lpb;this.Qpb=a.data.z?a.data.z:this.Qpb;this.ica=a.data.curvevalues1?a.data.curvevalues1:this.U6;this.U6=a.data.curvevalues2?a.data.curvevalues2:this.U6;this.pz=a.data.nullvalue?a.data.nullvalue:this.pz;this.Q2a=a.data.nullvalue1?a.data.nullvalue1:this.Q2a;this.R2a=a.data.nullvalue2?a.data.nullvalue2:
this.R2a;b=Array.isArray(this.ica)?V.Xt(this.ica,void 0,this.Q2a):[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY];var d=Array.isArray(this.U6)?V.Xt(this.U6,void 0,this.R2a):[Number.POSITIVE_INFINITY,Number.NEGATIVE_INFINITY];this.tB=b[0]<=d[0]?b[0]:d[0];this.lL=b[1]>=d[1]?b[1]:d[1]}if(null==this.$qa||null==this.Zqa||"number"===typeof a.curvemin&&"number"===typeof a.curvemax&&(this.$qa!==a.curvemin||this.Zqa!==a.curvemax)){this.$qa=null!=a.curvemin?a.curvemin:this.tB;this.Zqa=null!=a.curvemax?
a.curvemax:this.lL;b=this.Ipb.slice(0);d=this.Lpb.slice(0);var e=this.Qpb.slice(0),f=this.gib.slice(0);if(!Array.isArray(b)||!Array.isArray(d)||!Array.isArray(e)||2>b.length||2>d.length||2>e.length)return hb("LogFill2D: cannot be created due to insufficient data points"),this;if(Array.isArray(this.ica)&&Array.isArray(this.U6)){var g=this.$qa;var h=this.Zqa;this.$qa===this.tB&&this.Zqa===this.lL&&(h=g=null);h=mD.tHd(this.ica,this.U6,f,g,h,this.pz,this.Q2a,this.R2a,b,d,e);g=h.lCb;h=h.mCb}else Array.isArray(this.ica)?
(g=mD.tMc(this.ica,this.U6,f,this.$qa,this.Zqa,this.pz,this.Q2a,b,d,e),h=this.U6):(g=this.ica,h=mD.tMc(this.U6,this.ica,f,this.$qa,this.Zqa,this.pz,this.R2a,b,d,e));this.Zsa.x=b;this.Zsa.y=d;this.Zsa.z=e;this.Zsa.colorvalues=f;this.Zsa.curvevalues1=g;this.Zsa.curvevalues2=h}a.data=xb(this.Zsa,a.data);this.Wq.geometry.setOptions(a);this.Wq.material.setOptions(a);this.Xf();return this};c.prototype.ta=function(){var a=xb(this.Wq.material.ta(),this.Wq.geometry.ta());a.curvemin=this.$qa;a.curvemax=this.Zqa;
return xb(a,mz.prototype.ta.call(this))};c.prototype.dispose=function(){this.Zsa=this.gib=this.U6=this.ica=this.Qpb=this.Lpb=this.Ipb=null;oz.dispose(this.Wq);mz.prototype.dispose.call(this)};return c}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoidGEifX19");var AD=/*#__PURE__*/va(/*#__PURE__*/function(){function c(e){Aq.call(this);this.type="TubeGeometry";this.Ne=e.size;e=G(e,{radiusmin:0,radiusmax:1,tubeprecision:3,openended:!1,usefrenet:!0});this.ja={};this.setOptions(e);this.Pg=this.o8=this.p8=this.nu=this.hL=this.aH=null}function a(e,f){var g=1,h=e-g;e+=g;0>h&&(h=0);e>=f.length&&(e=f.length-1);h=f[h];f=f[e];f=f.clone().sub(h);return f.normalize()}var b=new Lp,d=new Lp;D(c,Aq);L(c,"geotoolkit3d.scene.well.TubeGeometry");c.prototype.setOptions=function(e){var f=G(e,{radiusmin:this.wJ,
radiusmax:this.GO,tubeprecision:this.lD,openended:this.DE,size:this.Ne,usefrenet:this.bRb}),g=f.radiusmin!==this.wJ||this.GO!==f.radiusmax||this.lD!==f.tubeprecision||this.DE!==f.openended||null!=f.data;if(!g)return this.Ne!==f.size&&(this.Ne=f.size,this.hL&&this.hL.set(2*this.Ne,2*this.Ne,1),this.computeBoundingBox()),this;null!=f.data&&(e=G(e.data,{x:this.ja.Nm,y:this.ja.Xx,z:this.ja.Bi,values:this.ja.values,widths:this.ja.az,heights:this.ja.CD,rolls:this.ja.DK}),this.ja.Nm=e.x,this.ja.Xx=e.y,this.ja.Bi=
e.z,this.ja.values=e.values,this.ja.az=e.widths,this.ja.CD=e.heights,this.ja.DK=e.rolls);this.bRb=f.usefrenet;this.wJ=f.radiusmin;this.GO=f.radiusmax;this.lD=f.tubeprecision;this.DE=f.openended;this.Ne=f.size;f=[];e=mD.FTb(this.ja.az,this.ja.CD,this.wJ,this.GO);g=Array.isArray(this.ja.DK)?this.ja.DK:null==this.ja.DK?[0]:[this.ja.DK];for(var h=0;h<this.ja.Nm.length;h++)f.push(new Lp(this.ja.Nm[h],this.ja.Xx[h],this.ja.Bi[h]));this.bRb?this.ZVb(f,e.w,e.h,g,this.lD,this.DE):this.Qua(f,e.w,e.h,g,this.lD,
this.DE);this.DJ=[];this.cr=[];this.ky=[];this.o8=this.p8=null;return this};c.prototype.ta=function(){return{radiusmin:this.wJ,radiusmax:this.GO,tubeprecision:this.lD,openended:this.DE,size:this.Ne,usefrenet:this.bRb,data:{x:this.ja.Nm,y:this.ja.Xx,z:this.ja.Bi,values:this.ja.values,widths:this.ja.az,heights:this.ja.CD,rolls:this.ja.DK}}};c.prototype.Qua=function(e,f,g,h,k,l){var m=[],n=[],p=[],q=[],r=mD.WTb(k),t=r.length;k=t-1;for(var u=new Lp(1,1,1),w=new Yt,y=0,A=new Lp(0,0,-1),x=new Lp,C=x.clone(),
z=x.clone(),v=e.length,B=0;B<v;B++)if(!(0<B&&e[B].equals(e[B-1]))){u.x=2*f[B%f.length];u.y=2*g[B%g.length];var E=!1;0===u.x&&0===u.y&&(u.x=1,u.y=1,E=!0);null!=h[Math.min(B,v-1)]&&(y=h[Math.min(B,v-1)]);var H=0<B?C.copy(e[B]).sub(e[B-1]).normalize():C.copy(e[B+1]).sub(e[B]).normalize();1===Math.abs(H.y)?z.set(0,0,-1):z.set(0,1,0);w.lookAt(x,H,z);for(H=1;H<t;H++)C.set(r[H].x,r[H].y,0),C.multiply(u),C.applyAxisAngle(A,y),C.applyMatrix4(w),C.add(e[B]),E?m.push(e[B].x,e[B].y,e[B].z):m.push(C.x,C.y,C.z),
C.sub(e[B]).normalize(),n.push(C.x,C.y,C.z),null==this.ja.values||isNaN(this.ja.values[B])?q.push(0):q.push(this.ja.values[B]);0<=m.length/3-2*k&&mD.UTb(this,m,p,0,v,k)}if(!l){H=m.length/3-1;f=m.length/3;g=m.length/3+1;m.push(e[0].x,e[0].y,e[0].z);m.push(e[e.length-1].x,e[e.length-1].y,e[e.length-1].z);h=e[0].clone().sub(e[1]).normalize();n.push(h.x,h.y,h.z);h=e[e.length-1].clone().sub(e[e.length-2]).normalize();n.push(h.x,h.y,h.z);null!=this.ja.values?(q.push(isNaN(this.ja.values[e.length-1])?0:
this.ja.values[e.length-1]),q.push(isNaN(this.ja.values[0])?0:this.ja.values[0])):(q.push(0),q.push(0));e=H-(k-1);for(H=0;H<k;H++)p.push(g,e+(H+1)%k,e+H);H=k;e=H-k;for(H=0;H<k;H++)p.push(f,e+H,e+(H+1)%k)}m=new Float32Array(m);p=new Uint32Array(p);q=new Float32Array(q);n=new Float32Array(n);this.setAttribute("position",new zq(m,3));this.setIndex(new zq(p,1));this.setAttribute("normal",new zq(n,3));this.setAttribute(Zy.bm,new zq(q,1));this.computeBoundingBox()};c.prototype.ZVb=function(e,f,g,h,k,l){function m(){for(v=
0;v<t;v++)n(v);q();p()}function n(Q){var R=e[Q],Y=B.cr[Q],ca=B.ky[Q],ea=0;null!=h[Math.min(Q,t-1)]&&(ea=h[Math.min(Q,t-1)]);for(var ua=0;ua<=k;ua++){var Ga=ua/k*Math.PI*2,Aa=ua/k*Math.PI*2+ea,Ba=Math.sin(Ga);Ga=-Math.cos(Ga);var La=Math.sin(Aa);Aa=-Math.cos(Aa);P.x=f[Q%f.length];P.y=g[Q%g.length];var Pa=P.lengthSq();0===Pa?(w.x=Ga*Y.x+Ba*ca.x,w.y=Ga*Y.y+Ba*ca.y,w.z=Ga*Y.z+Ba*ca.z,w.normalize(),I.push(w.x,w.y,w.z),E.x=R.x,E.y=R.y,E.z=R.z):(w.x=Aa*Y.x+La*ca.x,w.y=Aa*Y.y+La*ca.y,w.z=Aa*Y.z+La*ca.z,w.normalize(),
I.push(w.x,w.y,w.z),La=P.x*P.y,Ba=Math.pow(P.x,2)*Math.pow(Ba,2)+Math.pow(P.y,2)*Math.pow(Ga,2),N=La/Math.sqrt(Ba),E.x=R.x+w.x*N,E.y=R.y+w.y*N,E.z=R.z+w.z*N);F.push(E.x,E.y,E.z)}}function p(){for(var Q=1;Q<=t-1;Q++)for(v=1;v<=k;v++){var R=(k+1)*(Q-1)+(v-1),Y=(k+1)*Q+(v-1),ca=(k+1)*Q+v,ea=(k+1)*(Q-1)+v;K.push(R,Y,ea);K.push(Y,ca,ea)}if(!l)for(Q=F.length/3,R=Q-k-1,F.push(e[0].x,e[0].y,e[0].z),Y=(new Lp).subVectors(e[0],e[1]).normalize(),I.push(Y.x,Y.y,Y.z),J.push(0,.5),ca=e.length-1,F.push(e[ca].x,
e[ca].y,e[ca].z),Y.subVectors(e[ca],e[ca-1]).normalize(),I.push(Y.x,Y.y,Y.z),J.push(1,.5),v=0;v<=k-1;v++)K.push(Q,v,v+1),K.push(Q+1,R+v+1,R+v)}function q(){for(v=0;v<=t;v++)for(var Q=0;Q<=k;Q++)H.x=v/t,H.y=Q/k,J.push(H.x,H.y)}var r=[],t=e.length;if(!(2>t)){k*=4;null==this.DJ&&(this.DJ=[]);null==this.ky&&(this.ky=[]);null==this.cr&&(this.cr=[]);var u=new Lp,w=new Lp,y=new Yt;null==this.DJ[0]&&1<t&&(this.DJ[0]=a(0,e));if(null==this.cr[0]&&1<t){this.cr[0]=new Lp;var A=Number.MAX_VALUE,x=Math.abs(this.DJ[0].x),
C=Math.abs(this.DJ[0].y),z=Math.abs(this.DJ[0].z);x<=A&&(A=x,w.set(1,0,0));C<=A&&(A=C,w.set(0,1,0));z<=A&&w.set(0,0,1);u.crossVectors(this.DJ[0],w).normalize();this.cr[0].crossVectors(this.DJ[0],u)}null==this.ky[0]&&1<t&&(this.ky[0]=new Lp,this.ky[0].crossVectors(this.DJ[0],this.cr[0]));var v;for(v=1;v<=t;v++)this.cr[v]=this.cr[v-1].clone(),this.ky[v]=this.ky[v-1].clone(),null==this.DJ[v]&&(this.DJ[v]=a(v,e)),u.crossVectors(this.DJ[v-1],this.DJ[v]),u.length()>Number.EPSILON&&(u.normalize(),A=Math.acos(V.clamp(this.DJ[v-
1].dot(this.DJ[v]),-1,1)),this.cr[v].applyMatrix4(y.makeRotationAxis(u,A))),this.ky[v].crossVectors(this.DJ[v],this.cr[v]);var B=this,E=new Lp,H=new gy,F=[],I=[],J=[],K=[],N=0,P=new gy(1,1);m();for(v=0;v<=t;v++)for(u=0;u<=k;u++)null==this.ja.values||isNaN(this.ja.values[v])?r.push(0):r.push(this.ja.values[v]);l||(null!=this.ja.values?(r.push(isNaN(this.ja.values[0])?0:this.ja.values[0]),r.push(isNaN(this.ja.values[e.length-1])?0:this.ja.values[e.length-1])):(r.push(0),r.push(0)));u=new Float32Array(F);
y=new Uint32Array(K);r=new Float32Array(r);A=new Float32Array(I);this.setAttribute("position",new zq(u,3));this.setIndex(new zq(y,1));this.setAttribute("normal",new zq(A,3));this.setAttribute(Zy.bm,new zq(r,1));this.setAttribute("uv",new es(J,2));this.computeBoundingBox()}};c.prototype.computeBoundingBox=function(){Aq.prototype.computeBoundingBox.call(this);this.Ne&&this.boundingBox.expandByScalar(this.Ne)};c.prototype.Hx=function(e){this.nu||this.nT((this.ja.Bi[this.ja.Bi.length-1]+this.ja.Bi[0])/
2,e);return this.nu};c.prototype.pWb=function(e){this.hL||this.nT((this.ja.Bi[this.ja.Bi.length-1]+this.ja.Bi[0])/2,e);return this.hL};c.prototype.vsb=function(e){this.aH||this.nT((this.ja.Bi[this.ja.Bi.length-1]+this.ja.Bi[0])/2,e);return this.aH};c.prototype.nT=function(e,f){this.Pg||(this.Pg=f);this.Pg.equals(f)||this.Pg.copy(f);if(null==this.p8||null==this.o8)f=mD.FBc(this.ja.az,this.ja.CD),this.p8=(this.GO-this.wJ)/(f.max-f.min),this.o8=this.wJ-f.min;this.nu=this.nu||new Lp;this.hL=this.hL||
new Lp(0,0,1);this.aH=this.aH||new Vr;f=!0;for(var g=1;g<this.ja.Bi.length;g++){if(this.ja.Bi[g]>this.ja.Bi[g-1]){f=!1;break}if(this.ja.Bi[g]<this.ja.Bi[g-1])break}f=V.findIndex(e,this.ja.Bi,null,null,f?function(h,k){return k-h}:null);0>f&&(f=~f);f=f||1;b.set(this.ja.Nm[f-1],this.ja.Xx[f-1],this.ja.Bi[f-1]);d.set(this.ja.Nm[f],this.ja.Xx[f],this.ja.Bi[f]);g=(e-this.ja.Bi[f-1])/(this.ja.Bi[f]-this.ja.Bi[f-1]);this.nu.copy(d).sub(b).multiplyScalar(g).add(b);this.ja.az&&this.ja.CD?(e=2*((this.ja.az[f]-
this.ja.az[f-1])*g+this.ja.az[f-1]),f=2*((this.ja.CD[f]-this.ja.CD[f-1])*g+this.ja.CD[f-1]),e=e*this.p8+this.o8,f=f*this.p8+this.o8,this.hL.setX(e).setY(f)):this.hL.setX(2*this.Ne).setY(2*this.Ne);b.multiply(this.Pg);b.multiply(this.Pg);d.multiply(this.Pg);d.multiply(this.Pg);d.sub(b).normalize();b.set(-1,0,0);b.crossVectors(d,b).normalize();this.aH=bz.p7a(b,d,this.aH);return this};return c}(),1,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoidGEifX19");var BD=/*#__PURE__*/va(/*#__PURE__*/function(){function c(b){Xz.call(this,{});this.type="TrajectoryTubeMaterial";b=G(b,{size:100},!0);this.vertexShader=a.WKa;this.fragmentShader=a.Jec;this.setOptions(b)}var a=NC;D(c,Xz);L(c,"geotoolkit3d.scene.well.TrajectoryTubeMaterial");c.prototype.setOptions=function(b){Xz.prototype.setOptions.call(this,b);a.pRc(this,b);BC.lTc(this,b);return this};c.prototype.ta=function(){return xb(a.kCc(this),Xz.prototype.ta.call(this))};return c}(),1,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoidGEifX19");vz.sv(BD.Oa(),tz);var CD=/*#__PURE__*/va(/*#__PURE__*/function(){function c(e,f){for(var g=new gy,h=[],k=0;k<=e;k++)for(var l=0;l<=f;l++)g.x=k/e,g.y=l/f,h.push(g.x,g.y);return h}function a(e){Aq.call(this);this.type="MultiLateralTubeGeometry";this.Ne=e.size;e=G(e,{radiusmin:0,radiusmax:1,tubeprecision:3});this.ja={};this.setOptions(e);this.Pg=this.o8=this.p8=this.nu=this.hL=this.aH=null;this.Z$c=[]}var b=new Lp,d=new Lp;D(a,Aq);L(a,"geotoolkit3d.scene.well.MultiLateralTubeGeometry");a.prototype.setOptions=function(e){var f=G(e,{radiusmin:this.wJ,
radiusmax:this.GO,tubeprecision:this.lD,size:this.Ne}),g=f.radiusmin!==this.wJ||this.GO!==f.radiusmax||this.lD!==f.tubeprecision||null!=f.data;if(!g)return this.Ne!==f.size&&(this.Ne=f.size,this.hL&&this.hL.set(2*this.Ne,2*this.Ne,1),this.computeBoundingBox()),this;null!=f.data&&(e=G(e.data,{x:this.ja.Nm,y:this.ja.Xx,z:this.ja.Bi,values:this.ja.values,widths:this.ja.az,heights:this.ja.CD,rolls:this.ja.DK,bots:this.ja.xqb,tops:this.ja.Qdb}),this.ja.Nm=e.x,this.ja.Xx=e.y,this.ja.Bi=e.z,this.ja.values=
e.values,this.ja.az=e.widths,this.ja.CD=e.heights,this.ja.DK=e.rolls,this.ja.xqb=e.bots,this.ja.Qdb=e.tops);this.wJ=f.radiusmin;this.GO=f.radiusmax;this.lD=f.tubeprecision;this.Ne=f.size;f=[];e=mD.FTb(this.ja.az,this.ja.CD,this.wJ,this.GO);g=Array.isArray(this.ja.DK)?this.ja.DK:null==this.ja.DK?[0]:[this.ja.DK];for(var h=0;h<this.ja.Nm.length;h++)f.push(new Lp(this.ja.Nm[h],this.ja.Xx[h],this.ja.Bi[h]));this.Qua(f,e.w,e.h,g,this.lD);this.DJ=[];this.cr=[];this.ky=[];this.o8=this.p8=null;return this};
a.prototype.ta=function(){return{radiusmin:this.wJ,radiusmax:this.GO,tubeprecision:this.lD,size:this.Ne,uvs:this.Z$c,data:{x:this.ja.Nm,y:this.ja.Xx,z:this.ja.Bi,values:this.ja.values,widths:this.ja.az,heights:this.ja.CD,rolls:this.ja.DK,bots:this.ja.xqb,tops:this.ja.Qdb}}};a.prototype.Qua=function(e,f,g,h,k){var l=[],m=[],n=[],p=[];k=mD.WTb(k);for(var q=k.length,r=q-1,t=new Lp(1,1,1),u=new Yt,w=0,y=new Lp(0,0,-1),A=new Lp,x=A.clone(),C=A.clone(),z=e.length,v=0,B=[],E=[],H=0;H<z;H++)if(0<H&&e[H].equals(e[H-
1]))v+=1;else{-1<this.ja.xqb.indexOf(H)&&B.push(H-v);-1<this.ja.Qdb.indexOf(H)&&E.push(H-v);t.x=2*f[H%f.length];t.y=2*g[H%g.length];var F=!1;0===t.x&&0===t.y&&(t.x=1,t.y=1,F=!0);null!=h[Math.min(H,z-1)]&&(w=h[Math.min(H,z-1)]);var I=-1<this.ja.Qdb.indexOf(H)?x.copy(e[H+1]).sub(e[H]).normalize():x.copy(e[H]).sub(e[H-1]).normalize();1===Math.abs(I.y)?C.set(0,0,-1):C.set(0,1,0);u.lookAt(A,I,C);for(I=1;I<q;I++)x.set(k[I].x,k[I].y,0),x.multiply(t),x.applyAxisAngle(y,w),x.applyMatrix4(u),x.add(e[H]),F?
l.push(e[H].x,e[H].y,e[H].z):l.push(x.x,x.y,x.z),x.sub(e[H]).normalize(),m.push(x.x,x.y,x.z),null==this.ja.values||isNaN(this.ja.values[H])?p.push(0):p.push(this.ja.values[H]);-1===this.ja.Qdb.indexOf(H)&&0<=l.length/3-2*r&&mD.UTb(this,l,n,0,z,r)}f=new Float32Array(l);n=new Uint32Array(n);p=new Float32Array(p);m=new Float32Array(m);this.setAttribute("position",new zq(f,3));this.setIndex(new zq(n,1));this.setAttribute("normal",new zq(m,3));this.setAttribute(Zy.bm,new zq(p,1));this.computeBoundingBox();
c(e.length,this.lD)};a.prototype.computeBoundingBox=function(){Aq.prototype.computeBoundingBox.call(this);this.Ne&&this.boundingBox.expandByScalar(this.Ne)};a.prototype.Hx=function(e){this.nu||this.nT((this.ja.Bi[this.ja.Bi.length-1]+this.ja.Bi[0])/2,e);return this.nu};a.prototype.pWb=function(e){this.hL||this.nT((this.ja.Bi[this.ja.Bi.length-1]+this.ja.Bi[0])/2,e);return this.hL};a.prototype.vsb=function(e){this.aH||this.nT((this.ja.Bi[this.ja.xqb[0]]+this.ja.Bi[0])/2,e);return this.aH};a.prototype.nT=
function(e,f){this.Pg||(this.Pg=f);this.Pg.equals(f)||this.Pg.copy(f);if(null==this.p8||null==this.o8)f=mD.FBc(this.ja.az,this.ja.CD),this.p8=(this.GO-this.wJ)/(f.max-f.min),this.o8=this.wJ-f.min;this.nu=this.nu||new Lp;this.hL=this.hL||new Lp(0,0,1);this.aH=this.aH||new Vr;f=V.findIndex(e,this.ja.Bi,null,null,function(h,k){return k-h})||1;0>f&&(f=~f);b.set(this.ja.Nm[f-1],this.ja.Xx[f-1],this.ja.Bi[f-1]);d.set(this.ja.Nm[f],this.ja.Xx[f],this.ja.Bi[f]);var g=(e-this.ja.Bi[f-1])/(this.ja.Bi[f]-this.ja.Bi[f-
1]);this.nu.copy(d).sub(b).multiplyScalar(g).add(b);this.ja.az&&this.ja.CD?(e=2*((this.ja.az[f]-this.ja.az[f-1])*g+this.ja.az[f-1]),f=2*((this.ja.CD[f]-this.ja.CD[f-1])*g+this.ja.CD[f-1]),e=e*this.p8+this.o8,f=f*this.p8+this.o8,this.hL.setX(e).setY(f)):this.hL.setX(2*this.Ne).setY(2*this.Ne);b.multiply(this.Pg);b.multiply(this.Pg);d.multiply(this.Pg);d.multiply(this.Pg);d.sub(b).normalize();b.set(-1,0,0);b.crossVectors(d,b).normalize();this.aH=bz.p7a(b,d,this.aH);return this};return a}(),1,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoidGEifX19");var DD=/*#__PURE__*/va(/*#__PURE__*/function(){function c(b){Xz.call(this,{});this.type="MultiLateralTubeMaterial";b=G(b,{size:100},!0);this.vertexShader=a.WKa;this.fragmentShader=a.Jec;this.setOptions(b)}var a=NC;D(c,Xz);L(c,"geotoolkit3d.scene.well.MultiLateralTubeMaterial");c.prototype.setOptions=function(b){Xz.prototype.setOptions.call(this,b);a.pRc(this,b);BC.lTc(this,b);return this};c.prototype.ta=function(){return xb(a.kCc(this),Xz.prototype.ta.call(this))};return c}(),1,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoidGEifX19");vz.sv(DD.Oa(),tz);var ED=/*#__PURE__*/va(/*#__PURE__*/function(){function c(f){mz.call(this);this.Tkb=!1;f.data instanceof Array&&(f.data=new gD({data:f.data}));if(f.data instanceof gD)this.Tkb=!0,this.CAd(f);else{f=G(f,{size:100});this.ngc=this.Foc=this.YN=this.Ok=null;this.WPa=new Yt;this.BLa=new Yt;this.Ys=new Lp;f.width=f.width||0;f.radiusmin=f.radiusmin||0;f.radiusmax=f.radiusmax||0;if(f.closed){var g=new hB,h=new hB;this.Ok=new $t(g,new au({color:"white",side:Gr}));this.YN=new $t(h,new au({color:"white",side:Gr}));g=f.data.x;h=f.data.y;
var k=f.data.z,l=g.length-1;this.Ok.position.set(g[0],h[0],k[0]);this.YN.position.set(g[l],h[l],k[l]);this.Foc=new Lp(g[1],h[1],k[1]);this.ngc=new Lp(g[l-1],h[l-1],k[l-1]);this.add(this.Ok);this.add(this.YN)}f.hasOwnProperty("openended")||(f.openended=!0);"string"===typeof f.colorprovider?(f.color=new Pq(f.colorprovider),f.colorprovider=null,f.vertexcolors=f.vertexcolors||!1):f.colorprovider instanceof Pq&&(f.color=f.colorprovider,f.colorprovider=null,f.vertexcolors=f.vertexcolors||!1);this.cv=new $t(new AD(f),
new BD(f));this.add(this.cv);this.QDa=function(){var m=this.cv.material.userData.yM,n=this.cv.geometry.getAttribute(Zy.bm);this.Ok.material.color=Iz.$va(m.rb(n.getX(0))).color;this.YN.material.color=Iz.$va(m.rb(n.getX(n.count-1))).color;this.Xf()}.bind(this);this.setOptions(f);this.Oba=this.zk=null}}D(c,mz);L(c,"geotoolkit3d.scene.well.TrajectoryTube");c.prototype.CAd=function(f){f=G(f,{size:100});f.data=f.data.ta();var g=f.data;this.JH=[];this.eY=[];this.Hoc=[];this.ogc=[];this.WPa=new Yt;this.BLa=
new Yt;this.Ys=new Lp;f.width=f.width||0;f.radiusmin=f.radiusmin||0;f.radiusmax=f.radiusmax||0;this.V4c=function(q,r,t,u,w){var y=new hB,A=new hB;y=new $t(y,new au({color:"white",side:Gr}));this.JH.push(y);A=new $t(A,new au({color:"white",side:Gr}));this.eY.push(A);y.position.set(t[q],u[q],w[q]);A.position.set(t[r],u[r],w[r]);q=new Lp(t[q+1],u[q+1],w[q+1]);r=new Lp(t[r-1],u[r-1],w[r-1]);this.Hoc.push(q);this.ogc.push(r);this.add(y);this.add(A)}.bind(this);var h=g.x,k=g.y,l=g.z;if(f.closed)for(var m=
0;m<g.num;m++){var n=g.tops[m],p=g.bots[m];this.V4c(n,p,h,k,l)}"string"===typeof f.colorprovider?(f.color=new Pq(f.colorprovider),f.colorprovider=null,f.vertexcolors=f.vertexcolors||!1):f.colorprovider instanceof Pq&&(f.color=f.colorprovider,f.colorprovider=null,f.vertexcolors=f.vertexcolors||!1);this.cv=new $t(new CD(f),new DD(f));this.add(this.cv);this.QDa=function(){for(var q=this.cv.material.userData.yM,r=this.cv.geometry.getAttribute(Zy.bm),t=r.count/this.cv.geometry.ta().data.x.length,u=0;u<
this.JH.length;u++){var w=Math.round(this.cv.geometry.ta().data.tops[u]*t),y=Math.round(this.cv.geometry.ta().data.bots[u]*t);this.JH[u].material.color=Iz.$va(q.rb(r.getX(w))).color;this.eY[u].material.color=Iz.$va(q.rb(r.getX(y))).color}this.Xf()}.bind(this);this.setOptions(f);this.Oba=this.zk=null};c.prototype.setOptions=function(f){if(null==f)return this;mz.prototype.setOptions.call(this,f);if(this.Tkb)return this.YLd(f);if(null==f)return this;"string"===typeof f.colorprovider?(f.color=new Pq(f.colorprovider),
f.colorprovider=null,f.vertexcolors=f.vertexcolors||!1):null==f.color&&null!=f.colorprovider?(f.color=new Pq(16777215),f.vertexcolors=f.vertexcolors||!1):f.colorprovider instanceof Pq&&(f.color=f.colorprovider,f.colorprovider=null,f.vertexcolors=f.vertexcolors||!1);if(null!=this.Ok&&null!=this.YN){var g=this.cv.material.userData.yM;g instanceof Ro&&g.za(Qo.gb,this.QDa)}this.cv.geometry.setOptions(f);this.cv.material.setOptions(f);null!=this.Ok&&null!=this.YN&&(null==f.colorprovider&&null!=f.color?
(this.Ok.material.color=f.color,this.YN.material.color=f.color):f.colorprovider instanceof Ro&&(this.QDa(),f.colorprovider.on(Qo.gb,this.QDa)),null!=f.opacity&&(this.Ok.material.opacity=f.opacity,this.YN.material.opacity=f.opacity),null!=f.transparent&&(this.Ok.material.transparent=f.transparent,this.YN.material.transparent=f.transparent),null!=f.size&&(f=2*(Number(f.size)+1),this.Ok.scale.set(f,f,f),this.YN.scale.set(f,f,f),0!==this.Ys.x&&0!==this.Ys.y&&0!==this.Ys.z&&(this.Ok.scale.divide(this.Ys),
this.YN.scale.divide(this.Ys))));this.Xf();return this};c.prototype.YLd=function(f){if(null==f)return this;"string"===typeof f.colorprovider?(f.color=new Pq(f.colorprovider),f.colorprovider=null,f.vertexcolors=f.vertexcolors||!1):null==f.color&&null!=f.colorprovider?(f.color=new Pq(16777215),f.vertexcolors=f.vertexcolors||!1):f.colorprovider instanceof Pq&&(f.color=f.colorprovider,f.colorprovider=null,f.vertexcolors=f.vertexcolors||!1);if(0!==this.JH.length&&0!==this.eY.length){var g=this.cv.material.userData.yM;
g instanceof Ro&&g.za(Qo.gb,this.QDa)}this.cv.geometry.setOptions(f);this.cv.material.setOptions(f);if(0!==this.JH.length&&0!==this.eY.length){if(null==f.colorprovider&&null!=f.color)for(g=0;g<this.JH.length;g++)this.JH[g].material.color=f.color,this.eY[g].material.color=f.color;else f.colorprovider instanceof Ro&&(this.QDa(),f.colorprovider.on(Qo.gb,this.QDa));if(null!=f.opacity)for(g=0;g<this.JH.length;g++)this.JH[g].material.opacity=f.opacity,this.eY[g].material.opacity=f.opacity;if(null!=f.transparent)for(g=
0;g<this.JH.length;g++)this.JH[g].material.transparent=f.transparent,this.eY[g].material.transparent=f.transparent;if(null!=f.size)for(f=2*(Number(f.size)+1),g=0;g<this.JH.length;g++)this.JH[g].scale.set(f,f,f).divide(this.Ys),this.eY[g].scale.set(f,f,f).divide(this.Ys)}this.Xf();return this};c.prototype.ta=function(){return xb(xb(this.cv.geometry.ta(),this.cv.material.ta()),mz.prototype.ta.call(this))};var a=new Yt,b=new Lp,d=new Lp,e=new Lp(0,0,1);c.prototype.ai=function(f,g,h,k){mz.prototype.ai.call(this,
f,g,h,k);this.Tkb?this.Xbd(f,g,h,k):(f=h.iR().scale,this.zk&&(null!=this.Oba&&this.cv.geometry.nT(this.Oba,f),this.zk.OVa(this.cv.geometry.Hx(f)),this.zk.mcb(this.cv.geometry.pWb(f),this.cv.geometry.vsb(f))),this.Ys.equals(f)||(BC.vTa(this.cv.material).normscale.set(1/f.x,0,0,0,1/f.y,0,0,0,1/f.z),null!=this.Ok&&null!=this.YN&&(g=2*(this.cv.material.userData.size+1),this.Ok.scale.set(g,g,g).divide(f),this.YN.scale.set(g,g,g).divide(f),this.YN.geometry.applyMatrix4(a.copy(this.BLa).invert()),h.qC(b.copy(this.YN.position)),
h.qC(d.copy(this.ngc)),this.YN.geometry.applyMatrix4(this.BLa.identity().lookAt(b,d,e.set(0,0,1))),this.Ok.geometry.applyMatrix4(a.copy(this.WPa).invert()),h.qC(b.copy(this.Ok.position)),h.qC(d.copy(this.Foc)),this.Ok.geometry.applyMatrix4(this.WPa.identity().lookAt(b,d,e.set(0,0,1)))),this.Ys.copy(f)))};c.prototype.Xbd=function(f,g,h,k){f=h.iR().scale;this.zk&&(null!=this.Oba&&this.cv.geometry.nT(this.Oba,f),this.zk.OVa(this.cv.geometry.Hx(f)),this.zk.mcb(this.cv.geometry.pWb(f),this.cv.geometry.vsb(f)));
if(!this.Ys.equals(f)){BC.vTa(this.cv.material).normscale.set(1/f.x,0,0,0,1/f.y,0,0,0,1/f.z);if(0!==this.JH.length&&0!==this.eY.length)for(g=2*(this.cv.material.userData.size+1),k=0;k<this.JH.length;k++)this.JH[k].scale.set(g,g,g).divide(f),this.eY[k].scale.set(g,g,g).divide(f),this.eY[k].geometry.applyMatrix4(a.copy(this.BLa).invert()),h.qC(b.copy(this.eY[k].position)),h.qC(d.copy(this.ogc[k])),this.eY[k].geometry.applyMatrix4(this.BLa.identity().lookAt(b,d,e.set(0,0,1))),this.JH[k].geometry.applyMatrix4(a.copy(this.WPa).invert()),
h.qC(b.copy(this.JH[k].position)),h.qC(d.copy(this.Hoc[k])),this.JH[k].geometry.applyMatrix4(this.WPa.identity().lookAt(b,d,e.set(0,0,1))),this.WPa=new Yt,this.BLa=new Yt;this.Ys.copy(f)}};c.prototype.bb=function(){return this.zk};c.prototype.jX=function(f,g){null!=this.zk&&this.remove(this.zk);this.Oba=g;this.zk=f;this.add(this.zk);this.Xf();return this};return c}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoidGEiLCJiZWZvcmVSZW5kZXIiOiJhaSIsImdldEFubm90YXRpb24iOiJiYiIsInNldEFubm90YXRpb24iOiJqWCJ9fX0g");var FD=/*#__PURE__*/function(){function c(a){hb("geotoolkit3d.scene.well.MultiLateralTube is deprecated since 3.3 use geotoolkit3d.scene.well.TrajectoryTube instead");ED.call(this,a)}D(c,ED);L(c,"geotoolkit3d.scene.well.MultiLateralTube");return c}();var GD=/*#__PURE__*/va(/*#__PURE__*/function(){function c(d,e,f,g,h){for(d=0;d<=e;d++)for(var k=0;k<=f;k++)g.x=d/e,g.y=k/f,h.push(g.x,g.y);return d}function a(d){Aq.call(this);this.type="PipeGeometry";this.Ne=d.size;d=G(d,{tubeprecision:4,openended:!1,hardedges:!0});this.setOptions(d)}function b(d,e){var f=1,g=d-f;d+=f;0>g&&(g=0);d>=e.length&&(d=e.length-1);g=e[g];e=e[d];e=e.clone().sub(g);return e.normalize()}D(a,Aq);L(a,"geotoolkit3d.scene.well.PipeGeometry");a.prototype.setOptions=function(d){var e=G(d,{tubeprecision:this.lD,
openended:this.DE,size:this.Ne}),f=this.lD!==e.tubeprecision||this.DE!==e.openended||null!=e.data;if(!f)return this.Ne!==e.size&&(this.Ne=e.size,this.computeBoundingBox()),this;null!=e.data&&(d=G(d.data,{positions:this.Gd,tangents:this.gD,normals:this.cr,binormals:this.ky,values:this.Gb,radii:this.n8}),this.Gd=d.positions,this.cr=d.normals,this.gD=d.tangents,this.ky=d.binormals,this.Gb=d.values,this.n8=d.radii);this.oic=e.hardedges;this.lD=e.tubeprecision;this.DE=e.openended;this.ZVb();return this};
a.prototype.ta=function(){return{tubeprecision:this.lD,openended:this.DE,hardedges:this.oic,size:this.Ne,data:{positions:this.Gd,tangents:this.gD,normals:this.cr,binormals:this.ky,values:this.Gb,radii:this.n8}}};a.prototype.qed=function(){var d=this.Gd.length,e=new Yt,f=0,g=new Lp,h=new Lp;if(this.ky.length!==this.Gd.length||this.cr.length!==this.Gd.length){null==this.gD[0]&&(this.gD[0]=b(0,this.Gd));if(null==this.cr[0]){this.cr[0]=new Lp;f=Number.MAX_VALUE;var k=Math.abs(this.gD[0].x),l=Math.abs(this.gD[0].y),
m=Math.abs(this.gD[0].z);k<=f&&(f=k,h.set(1,0,0));l<=f&&(f=l,h.set(0,1,0));m<=f&&h.set(0,0,1);g.crossVectors(this.gD[0],h).normalize();this.cr[0].crossVectors(this.gD[0],g)}null==this.ky[0]&&(this.ky[0]=new Lp,this.ky[0].crossVectors(this.gD[0],this.cr[0]));for(f=1;f<=d;f++)this.cr[f]=this.cr[f-1].clone(),this.ky[f]=this.ky[f-1].clone(),null==this.gD[f]&&(this.gD[f]=b(f,this.Gd)),g.crossVectors(this.gD[f-1],this.gD[f]),g.length()>Number.EPSILON&&(g.normalize(),h=Math.acos(V.clamp(this.gD[f-1].dot(this.gD[f]),
-1,1)),this.cr[f].applyMatrix4(e.makeRotationAxis(g,h))),this.ky[f].crossVectors(this.gD[f],this.cr[f])}return f};a.prototype.kfd=function(){var d,e=this.n8[0];for(d=1;d<this.n8.length;d++)this.n8[d]!==e&&(this.Gd.splice(d,0,this.Gd[d-1].clone()),this.n8.splice(d,0,this.n8[d]),this.gD.length>d&&this.gD.splice(d,0,this.gD[d-1]),this.Gb.length>d&&this.Gb.splice(d,0,this.Gb[d-1]),this.cr.length>d&&this.cr.splice(d,0,this.cr[d-1]),this.ky.length>d&&this.ky.splice(d,0,this.ky[d-1]),e=this.n8[d]);return d};
a.prototype.PRa=function(d,e,f,g,h,k,l){for(var m=this,n=1;n<=d-1;n++)for(e=1;e<=f;e++){var p=(f+1)*(n-1)+(e-1),q=(f+1)*n+(e-1),r=(f+1)*n+e,t=(f+1)*(n-1)+e;g.push(p,q,t);g.push(q,r,t)}if(!m.DE){d=h.length/3;n=d-f-1;h.push(m.Gd[0].x,m.Gd[0].y,m.Gd[0].z);e=(new Lp).subVectors(m.Gd[0],m.Gd[1]).normalize();k.push(e.x,e.y,e.z);l.push(0,.5);p=m.Gd.length-1;h.push(m.Gd[p].x,m.Gd[p].y,m.Gd[p].z);e.subVectors(m.Gd[p],m.Gd[p-1]).normalize();k.push(e.x,e.y,e.z);l.push(1,.5);for(e=0;e<=f-1;e++)g.push(d,e,e+1);
for(e=0;e<=f-1;e++)g.push(d+1,n+e+1,n+e)}return e};a.prototype.ZVb=function(){function d(){for(h=0;h<k;h++)e(h);c(h,k,g,p,t);l.PRa(k,h,g,u,q,r,t)}function e(C){var z=l.Gd[C],v=l.cr[C],B=l.ky[C];C=l.n8[C];for(var E=0;E<=g;E++){var H=E/g*Math.PI*2,F=Math.sin(H);H=-Math.cos(H);n.x=H*v.x+F*B.x;n.y=H*v.y+F*B.y;n.z=H*v.z+F*B.z;n.normalize();r.push(n.x,n.y,n.z);m.x=z.x;m.y=z.y;m.z=z.z;null!=w&&w.push(C);q.push(m.x,m.y,m.z)}}var f=[],g=4*this.lD,h;null==this.gD&&(this.gD=[]);null==this.ky&&(this.ky=[]);null==
this.cr&&(this.cr=[]);null==this.n8?this.n8=[]:this.oic&&this.kfd();var k=this.Gd.length;this.qed();var l=this,m=new Lp,n=new Lp,p=new gy,q=[],r=[],t=[],u=[],w=[];d();for(h=0;h<k;h++)for(var y=0;y<=g;y++)null==this.Gb||isNaN(this.Gb[h])?f.push(0):f.push(this.Gb[h]);this.DE||(null!=this.Gb?(f.push(isNaN(this.Gb[0])?0:this.Gb[0]),f.push(isNaN(this.Gb[this.Gd.length-1])?0:this.Gb[this.Gd.length-1])):(f.push(0),f.push(0)),w.push(0),w.push(0));0<w.length&&(y=new Float32Array(w),this.setAttribute(KC.P1c,
new zq(y,1)));y=new Float32Array(q);var A=new Uint32Array(u);f=new Float32Array(f);var x=new Float32Array(r);this.setAttribute("position",new zq(y,3));this.setIndex(new zq(A,1));this.setAttribute("normal",new zq(x,3));this.setAttribute(Zy.bm,new zq(f,1));this.setAttribute("uv",new es(t,2));this.computeBoundingBox()};a.prototype.computeBoundingBox=function(){Aq.prototype.computeBoundingBox.call(this);this.Ne&&this.boundingBox.expandByScalar(this.Ne)};return a}(),1,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoidGEifX19");var HD=/*#__PURE__*/va(/*#__PURE__*/function(){function c(b){Xz.call(this,{});this.type="PipeMaterial";b=G(b,{size:100},!0);this.vertexShader=a.hZa;this.fragmentShader=a.O1c;this.setOptions(b)}var a=KC;D(c,Xz);L(c,"geotoolkit3d.scene.well.PipeMaterial");c.prototype.setOptions=function(b){Xz.prototype.setOptions.call(this,b);a.ZLd(this,b);return this};c.prototype.ta=function(){return xb(a.Zqd(this),Xz.prototype.ta.call(this))};return c}(),1,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoidGEifX19");
vz.sv(HD.Oa(),tz);var ID=/*#__PURE__*/va(/*#__PURE__*/function(){function c(a){a=a||{};if(!a.hasOwnProperty("data"))throw Error("geotoolkit3d.scene.well.Pipe has no data");mz.call(this);this.Ys=new Lp;this.DOa=[];this.Ad=[];this.Tkb=!1;a.data instanceof Array?this.DOa=a.data:a.data instanceof gD?(a.data=a.data.J_b(),this.DOa=a.data):this.DOa.push(a.data);for(var b=0;b<this.DOa.length;b++)a.data=this.DOa[b],this.Ad.push(new $t(new GD(a),new HD(a))),this.add(this.Ad[b]);a.data=this.DOa}D(c,mz);L(c,"geotoolkit3d.scene.well.Pipe");c.prototype.setOptions=
function(a,b){if(null==a)return this;mz.prototype.setOptions.call(this,a);b=b||0;if(b>this.Ad.length-1||0>b)return hb("The index is out of range."),this;this.Ad[b].geometry.setOptions(a);this.Ad[b].material.setOptions(a);return this};c.prototype.ta=function(a){a=a||0;if(a>this.Ad.length-1||0>a)throw Error("The index is out of range.");return xb(xb(this.Ad[a].geometry.ta(),this.Ad[a].material.ta()),mz.prototype.ta.call(this))};c.prototype.ai=function(a,b,d,e){mz.prototype.ai.call(this,a,b,d,e);a=d.iR().scale;
for(b=0;b<this.Ad.length;b++)this.Ys.equals(a)||BC.vTa(this.Ad[b].material).normscale.set(1/a.x,0,0,0,1/a.y,0,0,0,1/a.z);this.Ys.copy(a)};return c}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoidGEiLCJiZWZvcmVSZW5kZXIiOiJhaSJ9fX0g");var JD=/*#__PURE__*/va(/*#__PURE__*/function(){function c(){mz.call(this);this.ea={};this.ea.fillstyle=new rf({color:"gray"});this.Ad=this.zk=null}D(c,mz);L(c,"geotoolkit3d.scene.well.schematic.SchematicBase");c.prototype.bb=function(){return this.zk};c.prototype.jX=function(a){null!=this.zk&&this.remove(this.zk);this.zk=a;this.add(this.zk);return this};c.prototype.ta=function(){return xb(this.ea,mz.prototype.ta.call(this))};c.prototype.setOptions=function(a){if(null==a)return this;mz.prototype.setOptions.call(this,a);this.ea=
G(a,this.ea,!0);null!=this.Ad&&this.remove(this.Ad);this.Cla();return this};c.prototype.Cla=function(){};c.prototype.getBoundingBox=function(){return null};c.prototype.Vd=function(){return null};c.prototype.FSa=function(){return null!=this.ea.material?this.ea.material:Iz.hUb(this.ea.fillstyle)};return c}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRBbm5vdGF0aW9uIjoiYmIiLCJzZXRBbm5vdGF0aW9uIjoialgiLCJnZXRPcHRpb25zIjoidGEiLCJnZXRNYXRlcmlhbCI6IkZTYSJ9fX0g");var KD=/*#__PURE__*/va(/*#__PURE__*/function(){function c(a){JD.call(this);null==a&&(a={});a=G(a,{radiustop:0,radiusbottom:50,height:50,radiussegments:28,heightsegments:1,openended:!1});this.setOptions(a)}D(c,JD);L(c,"geotoolkit3d.scene.well.schematic.Cone");c.prototype.Cla=function(){var a=this.ta(),b=a.data;if(2===b.x.length){this.OLa=new pr(a.radiustop,a.radiusbottom,a.height,a.radiussegments,a.heightsegments,a.openended);var d=(new Yt).makeRotationAxis((new Lp(1,0,0)).normalize(),Math.PI/2);this.OLa.applyMatrix4(d);d=(new Yt).makeTranslation(0,
0,a.height/2);this.OLa.applyMatrix4(d);this.OLa.computeBoundingBox();this.OLa.computeVertexNormals();a=new Lp(b.x[1],b.y[1],b.z[1]);this.Ad=new $t(this.OLa,this.FSa());this.Ad.position.set(b.x[0],b.y[0],b.z[0]);this.Ad.lookAt(a);this.add(this.Ad)}};c.prototype.getBoundingBox=function(){return this.Ad.geometry.boundingBox.clone().applyMatrix4(this.Ad.matrix)};c.prototype.Vd=function(){return this.OLa};return c}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRHZW9tZXRyeSI6IlZkIn19fSAg");var LD=/*#__PURE__*/va(/*#__PURE__*/function(){function c(a){JD.call(this);null==a&&(a={});a=G(a,{width:50,widthsegments:1});this.setOptions(a)}D(c,JD);L(c,"geotoolkit3d.scene.well.schematic.Cube");c.prototype.Cla=function(){var a=this.ta(),b=a.data;if(2===b.x.length){this.yib=new xq(a.width,a.width,a.width,a.widthsegments,a.widthsegments,a.widthsegments);this.yib.computeBoundingBox();this.yib.computeVertexNormals();var d=new Lp(b.x[1],b.y[1],b.z[1]);this.Ad=new $t(this.yib,this.FSa());this.Ad.position.set(b.x[0],b.y[0],b.z[0]);
this.Ad.position.sub(d.clone().sub(this.Ad.position).setLength(-a.width/2));this.Ad.lookAt(d);this.add(this.Ad)}};c.prototype.getBoundingBox=function(){return this.Ad.geometry.boundingBox.clone().applyMatrix4(this.Ad.matrix)};c.prototype.Vd=function(){return this.yib};return c}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRHZW9tZXRyeSI6IlZkIn19fSAg");var MD=/*#__PURE__*/va(/*#__PURE__*/function(){function c(a){JD.call(this);null==a&&(a={});var b=a.data;a=G(a,{radius:null!=a.width?a.width:30,tubeprecision:8,depth:1<b.x.length?(new Lp(b.x[1],b.y[1],b.z[1])).distanceTo(new Lp(b.x[0],b.y[0],b.z[0])):1});this.setOptions(a)}D(c,JD);L(c,"geotoolkit3d.scene.well.schematic.Cylinder");c.prototype.Cla=function(){var a=this.ta(),b=a.data;if(!(2>b.x.length)){var d=a.radius;this.Voc=2===b.x.length?new AD({data:{x:[0,0],y:[0,0],z:[0,a.depth]},radiusmax:d,colorprovider:a.fillstyle.rb(),
tubeprecision:a.tubeprecision}):new AD({data:{x:b.x,y:b.y,z:b.z},radiusmax:d,colorprovider:a.fillstyle.rb(),tubeprecision:a.tubeprecision});this.Ad=new $t(this.Voc,this.FSa());2===b.x.length&&(this.Ad.position.copy(new Lp(b.x[0],b.y[0],b.z[0])),this.Ad.lookAt(new Lp(b.x[1],b.y[1],b.z[1])));this.add(this.Ad)}};c.prototype.getBoundingBox=function(){return this.Ad.geometry.boundingBox.clone().applyMatrix4(this.Ad.matrix)};c.prototype.Vd=function(){return this.Voc};return c}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRHZW9tZXRyeSI6IlZkIn19fSAg");var ND=/*#__PURE__*/va(/*#__PURE__*/function(){function c(a){JD.call(this);var b=a.data;a=G(a,{width:50,height:50,depth:1<b.x.length?(new Lp(b.x[1],b.y[1],b.z[1])).distanceTo(new Lp(b.x[0],b.y[0],b.z[0])):1,widthsegments:1,heightsegments:1,depthsegments:1});this.setOptions(a)}D(c,JD);L(c,"geotoolkit3d.scene.well.schematic.Parallelepiped");c.prototype.Cla=function(){var a=this.ta(),b=a.data;if(!(2>b.x.length)){if(2===b.x.length)this.q3a=new xq(a.width,a.height,a.depth,a.widthsegments,a.heightsegments,a.depthsegments);else{var d=
a.width<a.height?a.height/2:a.width/2;this.q3a=new AD({data:{x:b.x,y:b.y,z:b.z},radiusmax:d,colorprovider:a.fillstyle.rb(),tubeprecision:1,openended:!1})}this.q3a.computeBoundingBox();this.q3a.computeVertexNormals();this.Ad=new $t(this.q3a,this.FSa());2===b.x.length&&(d=new Lp(b.x[1],b.y[1],b.z[1]),this.Ad.position.set(b.x[0],b.y[0],b.z[0]),this.Ad.position.sub(d.clone().sub(this.Ad.position).setLength(-a.depth/2)),this.Ad.lookAt(d));this.add(this.Ad)}};c.prototype.getBoundingBox=function(){return this.Ad.geometry.boundingBox.clone().applyMatrix4(this.Ad.matrix)};
c.prototype.Vd=function(){return this.q3a};return c}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRHZW9tZXRyeSI6IlZkIn19fSAg");var OD=/*#__PURE__*/va(/*#__PURE__*/function(){function c(a){JD.call(this);null==a&&(a={});a=G(a,{radius:50,widthsegments:28,heightsegments:14,phistart:0,philength:2*Math.PI,thetastart:0,thetalength:Math.PI});this.setOptions(a)}D(c,JD);L(c,"geotoolkit3d.scene.well.schematic.Sphere");c.prototype.Cla=function(){var a=this.ta(),b=a.data;this.lob=new Zw(a.radius,a.widthsegments,a.heightsegments,a.phistart,a.philength,a.thetastart,a.thetalength);this.lob.computeBoundingBox();this.lob.computeVertexNormals();this.Ad=new $t(this.lob,
this.FSa());null!=b.x.length?(this.Ad.position.set(b.x[0],b.y[0],b.z[0]),1<b.x.length&&(a=new Lp(b.x[1],b.y[1],b.z[1]),this.Ad.lookAt(a))):null!=b.x&&this.Ad.position.set(b.x,b.y,b.z);this.add(this.Ad)};c.prototype.getBoundingBox=function(){return this.Ad.geometry.boundingBox.clone().applyMatrix4(this.Ad.matrix)};c.prototype.Vd=function(){return this.lob};return c}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRHZW9tZXRyeSI6IlZkIn19fSAg");var PD=/*#__PURE__*/va(/*#__PURE__*/function(){function c(b){mz.call(this);this.type="Ellipse";b=G(b,{visible:!0,size:120,colorprovider:"blue"});b.color instanceof Pq||("string"===typeof b.colorprovider?(b.color=new Pq(b.colorprovider),b.colorprovider=null):b.colorprovider instanceof Pq&&(b.color=b.colorprovider,b.colorprovider=null));b.vertexcolors=b.vertexcolors||!1;this.ez=b.color;this.ijb=new $t(new hB,new IA({color:this.ez,transparent:!0,side:Gr,opacity:b.opacity}));this.M$c=new Lp(0,1,0);this.fkc=new Lp;this.MOa=new Yt;
this.add(this.ijb);this.setOptions(b)}var a=2;D(c,mz);L(c,"geotoolkit3d.scene.well.top.Ellipse");c.prototype.ai=function(){var b=this.parent.matrixWorld;if(!this.MOa.equals(b)){this.MOa.copy(b);var d=(new Lp).setFromMatrixScale(b),e=this.fkc.clone().multiply(d),f=this.position.clone().multiply(d),g=new Yt;g.lookAt(e,f,0===d.lengthSq()?this.M$c:d);this.ijb.setRotationFromMatrix(g);d.setFromMatrixScale(b);this.scale.set(this.Ne*a/d.x,this.Ne*a/d.y,this.Ne*a/d.z)}};c.prototype.ZBb=function(b,d){this.position.copy(b);
this.fkc.copy(d)};c.prototype.setOptions=function(b){if(null==b)return this;mz.prototype.setOptions.call(this,b);b=G(b,{visible:!0,size:this.Ne,colorprovider:this.ez});this.ijb.visible=b.visible;b.color instanceof Pq||("string"===typeof b.colorprovider?(b.color=new Pq(b.colorprovider),b.colorprovider=null):b.colorprovider instanceof Pq&&(b.color=b.colorprovider,b.colorprovider=null));b.vertexcolors=b.vertexcolors||!1;null!=b.color&&b.color!==this.ez&&(this.ez=b.color);"number"!==typeof b.size||isNaN(b.size)||
b.size===this.size||(this.scale.set(b.size*a,b.size*a,b.size*a),this.Ne=b.size);this.ijb.material.setOptions(b);return this};return c}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJiZWZvcmVSZW5kZXIiOiJhaSIsInVwZGF0ZUxvY2F0aW9uIjoiWkJiIn19fSAg");var QD=/*#__PURE__*/va(/*#__PURE__*/function(){function c(a){mz.call(this);this.type="Sphere";a=G(a,{visible:!0,size:120,colorprovider:"blue",widthsegments:28,heightsegments:14,phistart:0,philength:2*Math.PI,thetastart:0,thetalength:Math.PI});a.color instanceof Pq||("string"===typeof a.colorprovider?(a.color=new Pq(a.colorprovider),a.colorprovider=null):a.colorprovider instanceof Pq&&(a.color=a.colorprovider,a.colorprovider=null));this.ez=a.color;a.vertexcolors=a.vertexcolors||!1;this.yPb=new $t(new Zw(1,a.widthsegments,a.heightsegments,
a.phistart,a.philength,a.thetastart,a.thetalength),new Xz({color:this.ez,transparent:!0,side:Gr,opacity:a.opacity}));this.add(this.yPb);this.MOa=new Yt;this.Xf();this.setOptions(a)}D(c,mz);L(c,"geotoolkit3d.scene.well.top.Sphere");c.prototype.ai=function(){this.parent.updateMatrixWorld(!0);var a=this.parent.matrixWorld;this.MOa.equals(a)||(this.MOa.copy(a),this.vWc())};c.prototype.ZBb=function(a){this.position.copy(a)};c.prototype.setOptions=function(a){if(null==a)return this;mz.prototype.setOptions.call(this,
a);a=G(a,{size:this.Ne,visible:!0,colorprovider:this.ez,widthsegments:28,heightsegments:14,phistart:0,philength:2*Math.PI,thetastart:0,thetalength:Math.PI});this.yPb.visible=a.visible;a.color instanceof Pq||("string"===typeof a.colorprovider?(a.color=new Pq(a.colorprovider),a.colorprovider=null):a.colorprovider instanceof Pq&&(a.color=a.colorprovider,a.colorprovider=null));a.vertexcolors=a.vertexcolors||!1;null!=a.color&&a.color!==this.ez&&(this.ez=a.color);null!=a.size&&a.size!==this.Ne&&(this.scale.set(a.size,
a.size,a.size),this.Ne=a.size,this.vWc());this.yPb.material.setOptions(a);return this};c.prototype.ta=function(){var a=xb({},this.material.ta());a.size=this.Ne;return xb(a,mz.prototype.ta.call(this))};c.prototype.vWc=function(){var a=(new Lp).setFromMatrixScale(this.MOa);this.scale.set(this.Ne/a.x,this.Ne/a.y,this.Ne/a.z)};return c}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJiZWZvcmVSZW5kZXIiOiJhaSIsInVwZGF0ZUxvY2F0aW9uIjoiWkJiIiwiZ2V0T3B0aW9ucyI6InRhIn19fSAg");var RD=/*#__PURE__*/va(/*#__PURE__*/function(){function c(a,b){mz.call(this);this.YO=a;this.DRb=this.YO.ta().data.x;this.JRb=this.YO.ta().data.y;this.EZ=this.YO.ta().data.z;this.Ir=new zs;this.Gd=[];this.fBa=[];a=G(b,{visible:!0,opacity:1,type:"disk",size:30,colorprovider:"blue",heights:[]});this.visible=a.visible;this.Ne=a.size;this.fBa=a.heights;this.ez=a.colorprovider||a.color;this.iA=a.opacity;this.add(this.Ir);this.setOptions(a)}D(c,mz);L(c,"geotoolkit3d.scene.well.top.TopSymbol");c.prototype.I_b=function(){return this.YO};
c.prototype.Tc=function(){hb("TopSymbol.getSymbol() is deprecated since 2022 (v 3.4), use getSymbols instead");return this.Ir.children};c.prototype.lTa=function(){return this.Ir.children};c.prototype.setOptions=function(a){if(null==a)return this;mz.prototype.setOptions.call(this,a);var b=G(a,{type:this.oj,size:this.Ne,colorprovider:this.ez,heights:this.fBa,opacity:this.iA});this.Ne=b.size;b.color instanceof Pq||("string"===typeof b.colorprovider?(b.color=new Pq(b.colorprovider),b.colorprovider=null):
b.colorprovider instanceof Pq&&(b.color=b.colorprovider,b.colorprovider=null),this.ez=b.color);"string"===typeof b.type&&b.type!==this.oj&&(this.oj=b.type,oz.dispose(this.Ir.children),a=b.heights||this.fBa,a.forEach(function(){var d="ball"===this.oj?new QD:new PD;this.Ir.add(d)}.bind(this)),this.Gd=[]);if(0===this.Gd.length||this.fBa!==b.heights)this.Gd=[],this.fBa.forEach(function(d){var e=Number.NaN,f=Number.NaN,g=Number.NaN;d<=this.EZ[0]&&d>=this.EZ[this.EZ.length-1]&&(g=V.findIndex(d,this.EZ,
null,null,function(h,k){return Math.abs(h-k)<=Math.Qb?0:h<k?1:-1}),0>g&&(g=~g),d=(d-this.EZ[g-1])/(this.EZ[g]-this.EZ[g-1]),e=this.DRb[g-1]*(1-d)+this.DRb[g]*d,f=this.JRb[g-1]*(1-d)+this.JRb[g]*d,g=this.EZ[g-1]*(1-d)+this.EZ[g]*d);isNaN(e)||isNaN(f)||isNaN(g)||this.Gd.push(new Lp(e,f,g))}.bind(this)),this.fBa=b.heights,this.R$c();this.Ir.children.forEach(function(d){null!=d&&d.setOptions(b)});this.Xf();return this};c.prototype.ta=function(){var a={};a.visible=this.visible;a.type=this.oj;a.size=this.Ne;
a.heights=this.fBa;a.colorprovider=this.ez;a.well=this.YO;a.positions=this.Gd;a.opacity=this.iA;return xb(a,mz.prototype.ta.call(this))};c.prototype.R$c=function(){if(1<this.EZ.length)for(var a=0;a<this.Ir.children.length;a++){var b=this.Ir.children[a],d=this.Gd[a],e=V.findIndex(d.z,this.EZ,null,null,function(f,g){return Math.abs(f-g)<=Math.Qb?0:f<g?1:-1});0>e?e=~e:e<this.EZ.length-1?++e:--e;b.ZBb(d,new Lp(this.DRb[e],this.JRb[e],this.EZ[e]))}};return c}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRXZWxsIjoiSV9iIiwiZ2V0U3ltYm9sIjoiVGMiLCJnZXRTeW1ib2xzIjoibFRhIiwiZ2V0T3B0aW9ucyI6InRhIn19fSAg");var SD=/*#__PURE__*/va(/*#__PURE__*/function(){function c(a){mz.call(this);this.olb=[];this.xj=[];this.Oba=this.zk=null;this.Ys=new Lp;a.data instanceof Array&&(a.data=new gD({data:a.data}));a.data instanceof gD?this.olb=a.data.J_b():this.olb.push(a.data);for(var b=0;b<this.olb.length;b++){a.data=this.olb[b];var d=new rD(a);this.xj[b]=new rt(d,new tt({vertexColors:!0}));this.add(this.xj[b])}}D(c,mz);L(c,"geotoolkit3d.scene.well.TrajectoryLine");c.prototype.MNd=function(a){if(a.hasOwnProperty("colorprovider"))for(var b=0;b<this.xj.length;b++)this.xj[b].geometry.setOptions(a)};
c.prototype.setOptions=function(a){if(null==a)return this;mz.prototype.setOptions.call(this,a);this.MNd(a);this.Xf();return this};c.prototype.ai=function(a,b,d,e){mz.prototype.ai.call(this,a,b,d,e);a=d.iR().scale;this.zk&&(null!=this.Oba&&this.xj[0].geometry.nT(this.Oba,a),this.zk.OVa(this.xj[0].geometry.Hx(a)));if(!this.Ys.equals(a)){for(b=0;b<this.xj.length;b++)this.xj[0].material.hasOwnProperty("defines")||(this.xj[0].material.defines={}),this.xj[0].material.hasOwnProperty("uniforms")||(this.xj[0].material.uniforms=
{}),BC.vTa(this.xj[0].material).normscale.set(1/a.x,0,0,0,1/a.y,0,0,0,1/a.z);this.Ys.copy(a)}};c.prototype.jX=function(a,b){null!=this.zk&&this.remove(this.zk);this.Oba=b;this.zk=a;this.add(this.zk);this.Xf();return this};return c}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJiZWZvcmVSZW5kZXIiOiJhaSIsInNldEFubm90YXRpb24iOiJqWCJ9fX0g");var TD=/*#__PURE__*/va(/*#__PURE__*/function(){function c(a){mz.call(this);var b=G(a,{radius:1});"string"===typeof b.colorprovider?b.color=new Pq(b.color):b.colorprovider instanceof Pq&&(b.color=b.colorprovider);if(a.data.start instanceof Lp&&a.data.end instanceof Lp){a=[];var d=[],e=[],f=[],g=(new Lp).subVectors(b.data.start,b.data.end),h=(new Lp).subVectors(b.data.end,b.data.start),k=b.radius,l=g.length();l<b.radius&&(k=l/2);g.normalize();g.multiplyScalar(k);a.push(0);d.push(0);e.push(0);f.push(b.radius);a.push(h.x+g.x);d.push(h.y+
g.y);e.push(h.z+g.z);f.push(b.radius);a.push(h.x+g.x);d.push(h.y+g.y);e.push(h.z+g.z);f.push(1.5*b.radius);a.push(h.x);d.push(h.y);e.push(h.z);f.push(0);b.data.x=a;b.data.y=d;b.data.z=e;b.data.widths=f;b.radiusmin=0;b.radiusmax=1.5*b.radius;this.position.set(b.data.start.x,b.data.start.y,b.data.start.z)}else rb("Invalid parameters for "+this.Oa());a=new eu({color:b.color,name:"well"});this.kca=new $t(new AD(b),a);this.add(this.kca);this.Ys=new Lp;this.setOptions(b)}D(c,mz);L(c,"geotoolkit3d.scene.well.Vector");
c.prototype.setOptions=function(a){if(null==a)return this;mz.prototype.setOptions.call(this,a);a=G(a,{});"string"===typeof a.color&&(a.color=new Pq(a.color));this.kca.material.color=a.color;this.Xf();return this};c.prototype.ta=function(){return xb(this.kca.material.ta(),mz.prototype.ta.call(this))};return c}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoidGEifX19");var UD=function(){function c(){}function a(e,f,g,h){e=Math.cos(f-e)-Math.sin(e)*Math.sin(f)*(1-Math.cos(g-h));return Math.acos(e)}function b(e,f,g,h,k,l,m){var n=a(g,h,k,l),p=2/n*Math.tan(n/2);n<m?d(e,f,g,h,k,l):(m=Math.sin(h),n=Math.sin(g),f/=2,e.Oh+=f*(n*Math.sin(k)+m*Math.sin(l))*p,e.Ch+=f*(n*Math.cos(k)+m*Math.cos(l))*p,e.Sla+=f*(Math.cos(g)+Math.cos(h))*p);return e}function d(e,f,g,h,k,l){g=(h+g)/2;k=(l+k)/2;e.Ch+=f*Math.sin(g)*Math.cos(k);e.Oh+=f*Math.sin(g)*Math.sin(k);e.Sla+=f*Math.cos(g);
return{Roe:g,Poe:k}}c.Hab=function(e,f,g){var h=e.md,k=e.inclination;e=e.azimuth;var l=f.x,m=f.y;f=f.tvd;var n={};n.Oh=l[0];n.Ch=m[0];n.Sla=f[0];for(var p=1;p<h.length;++p)n=b(n,h[p]-h[p-1],k[p-1],k[p],e[p-1],e[p],g),l[p]=n.Oh,m[p]=n.Ch,f[p]=n.Sla};c.Euc=function(e,f,g){var h=e.md,k=e.inclination;e=e.azimuth;var l=f.x,m=f.y;f=f.tvd;for(var n=1;n<h.length;n++){var p=h[n]-h[n-1];if(Math.abs(k[n]-k[n-1])<g||Math.abs(e[n]-e[n-1])<g)p=b({Oh:l[n-1],Ch:m[n-1],Sla:f[n-1]},p,k[n-1],k[n],e[n-1],e[n],g),l[n]=
p.Oh,m[n]=p.Ch,f[n]=p.Sla;else{p=(k[n]-k[n-1])*(e[n]-e[n-1]);var q=Math.cos(k[n-1]);m[n]=(h[n]-h[n-1])*(q-Math.cos(k[n]))*(Math.sin(e[n])-Math.sin(e[n-1]));m[n]/=p;m[n]+=m[n-1];l[n]=(h[n]-h[n-1])*(q-Math.cos(k[n]))*(Math.cos(e[n-1])-Math.cos(e[n]));l[n]/=p;l[n]+=l[n-1];f[n]=(h[n]-h[n-1])*(Math.sin(k[n])-Math.sin(k[n-1]));f[n]/=k[n]-k[n-1];f[n]+=f[n-1]}}};c.BSb=function(e,f){var g=e.md,h=e.inclination;e=e.azimuth;var k=f.x,l=f.y;f=f.tvd;var m={};m.Oh=k[0];m.Ch=l[0];m.Sla=f[0];for(var n=1;n<g.length;n++){var p=
g[n]-g[n-1];d(m,p,h[n-1],h[n],e[n-1],e[n]);k[n]=m.Oh;l[n]=m.Ch;f[n]=m.Sla}};c.DSb=function(e,f){var g=e.md,h=e.inclination;e=e.azimuth;var k=f.x,l=f.y;f=f.tvd;for(var m=1;m<g.length;m++){var n=(g[m]-g[m-1])/2;l[m]=l[m-1]+n*(Math.sin(h[m])*Math.cos(e[m])+Math.sin(h[m-1])*Math.cos(e[m-1]));k[m]=k[m-1]+n*(Math.sin(h[m])*Math.sin(e[m])+Math.sin(h[m-1])*Math.sin(e[m-1]));f[m]=f[m-1]+n*(Math.cos(h[m])+Math.cos(h[m-1]))}};return c}(),VD=/*#__PURE__*/va(/*#__PURE__*/{aZa:UD.Hab,pDb:UD.Euc,LCb:UD.BSb,NCb:UD.DSb},2,"eyJNaW5pbXVtQ3VydmF0dXJlIjoiYVphIiwiQ3VydmF0dXJlUmFkaXVzIjoicERiIiwiQXZlcmFnZUFuZ2xlIjoiTENiIiwiQmFsYW5jZWRUYW5nZW50aWFsIjoiTkNiIn0g"),WD=/*#__PURE__*/va(/*#__PURE__*/function(){function c(){}c.ked=function(a,b,d){null==d&&(d={});a=G(a,{mode:VD.aZa,tolerance:1E-10});d=G(d,{x:0,y:0,tvd:b.md[0]});d={x:[d.x],y:[d.y],tvd:[d.tvd]};b={inclination:b.inclination.map(bz.HUb),azimuth:b.azimuth.map(bz.HUb),md:b.md};a.mode(b,d,a.tolerance);return d};c.cPd=UD.cPd;c.DSb=UD.DSb;c.BSb=UD.BSb;c.jve=UD.Euc;c.Hab=UD.Hab;c.WEb=VD;return c}(),2,"eyJjb21wdXRlRGV2aWF0aW9uIjoia2VkIn0g");var YD=function(){function c(){}c.WFc=function(a,b){for(var d=1;d<a.x.length;d++){var e=a.y[d]-a.y[d-1],f=a.x[d]-a.x[d-1],g=a.tvd[d]-a.tvd[d-1],h=b.md[d-1],k=f*f,l=e*e,m=g*g;k=4*k+4*l+4*m;l=0;m=-1;m=Math.sqrt(l*l-4*k*m);k=(-l+m)/(2*k);g=Math.acos(2*g*k);f=2*f*k/Math.sin(g);e=2*e*k/Math.sin(g);e=Math.atan2(f,e);b.md.push(1/k/2+h);b.inclination.push(g);b.azimuth.push(e)}};c.B0b=function(a,b){for(var d=1;d<a.x.length;d++){var e=a.y[d]-a.y[d-1],f=a.x[d]-a.x[d-1],g=a.tvd[d]-a.tvd[d-1],h=b.inclination[d-
1],k=b.azimuth[d-1],l=b.md[d-1],m=Math.sin(h)*Math.sin(k);k=Math.sin(h)*Math.cos(k);h=Math.cos(h);var n=f*f,p=e*e,q=g*g,r=k*k,t=m*m,u=h*h;n=4*n+4*p+4*q;p=-(4*f*m+4*e*k+4*g*h);r=r+t+u-1;r=Math.sqrt(p*p-4*n*r);r=(-p+r)/(2*n);g=Math.acos(2*g*r-h);f=(2*f*r-m)/Math.sin(g);e=(2*e*r-k)/Math.sin(g);e=Math.atan2(f,e);b.md.push(1/r+l);b.inclination.push(g);b.azimuth.push(e)}};c.D0b=function(a,b,d){for(var e=1;e<a.x.length;e++){var f=a.y[e]-a.y[e-1],g=a.x[e]-a.x[e-1],h=a.tvd[e]-a.tvd[e-1],k=b.inclination[e-
1],l=b.azimuth[e-1],m=b.md[e-1],n=2*Math.atan2(g,f)-l,p=-(Math.cos(l)-Math.cos(n)),q=Math.sin(n)-Math.sin(l),r=q/(n-l),t=p/(n-l);if(Math.abs(n-l)<d){p=Math.sin(k)*Math.sin(l);n=Math.sin(k)*Math.cos(l);r=Math.cos(k);var u=g*g,w=f*f,y=h*h;q=n*n;t=p*p;var A=r*r;u=4*u+4*w+4*y;w=-(4*g*p+4*f*n+4*h*r);q=q+t+A-1;q=Math.sqrt(w*w-4*u*q);q=(-w+q)/(2*u);r=Math.acos(2*h*q-r);g=(2*g*q-p)/Math.sin(r);f=(2*f*q-n)/Math.sin(r);n=Math.atan2(g,f);f=Math.acos(Math.cos(r-k)-Math.sin(k)*Math.sin(r)*(1-Math.cos(n-l)));f=
2*Math.tan(f/2)/f;f=1/(q*f)}else r=-(2*Math.atan2(f-g,-h*(t+r)))-k,0>r&&(r+=2*Math.PI),r>2*Math.PI&&(r-=2*Math.PI),t=r-k,l=n-l,A=Math.sin(r)-Math.sin(k),k=-(Math.cos(k)-Math.cos(r)),f=(g+f+h)/(A/t+p*k/(l*t)-k*q/(l*t));b.md.push(f+m);b.inclination.push(r);b.azimuth.push(n)}};c.C0b=function(a,b){for(var d=1;d<a.x.length;d++){var e=a.y[d]-a.y[d-1],f=a.x[d]-a.x[d-1],g=a.tvd[d]-a.tvd[d-1],h=b.inclination[d-1],k=b.azimuth[d-1],l=b.md[d-1],m=Math.sin(h)*Math.sin(k),n=Math.sin(h)*Math.cos(k),p=Math.cos(h),
q=f*f,r=e*e,t=g*g,u=n*n,w=m*m,y=p*p;q=4*q+4*r+4*t;r=-(4*f*m+4*e*n+4*g*p);u=u+w+y-1;u=Math.sqrt(r*r-4*q*u);u=(-r+u)/(2*q);g=Math.acos(2*g*u-p);f=(2*f*u-m)/Math.sin(g);e=(2*e*u-n)/Math.sin(g);e=Math.atan2(f,e);h=Math.acos(Math.cos(g-h)-Math.sin(h)*Math.sin(g)*(1-Math.cos(e-k)));h=2*Math.tan(h/2)/h;b.md.push(1/(u*h)+l);b.inclination.push(g);b.azimuth.push(e)}};c.A0b=function(a,b){for(var d=1;d<a.x.length;d++){var e=a.y[d]-a.y[d-1],f=a.x[d]-a.x[d-1],g=a.tvd[d]-a.tvd[d-1],h=Math.sqrt(f*f+e*e+g*g),k=h+
b.md[d-1];e=2*Math.atan2(f,e);g=2*Math.acos(g/h);b.md.push(k);b.inclination.push(g-b.inclination[d-1]);b.azimuth.push(e-b.azimuth[d-1])}};return c}(),ZD=/*#__PURE__*/va(/*#__PURE__*/{aZa:YD.C0b,pDb:YD.D0b,LCb:YD.A0b,NCb:YD.B0b},2,"eyJNaW5pbXVtQ3VydmF0dXJlIjoiYVphIiwiQ3VydmF0dXJlUmFkaXVzIjoicERiIiwiQXZlcmFnZUFuZ2xlIjoiTENiIiwiQmFsYW5jZWRUYW5nZW50aWFsIjoiTkNiIn0g"),$D=/*#__PURE__*/va(/*#__PURE__*/function(){function c(){}c.led=function(a,b,d){null==d&&(d={});var e=G(a,{mode:ZD.aZa,tolerance:1E-10});d=G(d,{md:b.tvd[0],inclination:0,azimuth:0});d={md:[d.md],inclination:[d.inclination],azimuth:[d.azimuth]};a.mode(b,d,e.tolerance);d.inclination=d.inclination.map(bz.U3b);d.azimuth=d.azimuth.map(bz.U3b);
return d};c.WFc=YD.WFc;c.B0b=YD.B0b;c.D0b=YD.D0b;c.C0b=YD.C0b;c.A0b=YD.A0b;c.WEb=ZD;return c}(),2,"eyJjb21wdXRlRGlyZWN0aW9uIjoibGVkIn0g");var bE=/*#__PURE__*/va(/*#__PURE__*/function(){function c(p,q){var r=new gy;p.getSize(r);var t=(q.min.x-p.min.x)/r.x,u=(q.min.y-p.min.y)/r.y,w=(q.max.x-p.min.x)/r.x;p=(q.max.y-p.min.y)/r.y;return[[[new gy(t,p),new gy(t,u),new gy(w,p)],[new gy(t,u),new gy(w,u),new gy(w,p)]]]}function a(p){mz.call(this);this.I5c=new dv(1,1,1,1);this.Fr=p.maxlod;this.Zq=p.minlod;this.gMb=0;this.z0a=p.server.formatterfunction;this.Vhc=new ns;this.Dne=new Yt;this.tx=new Cx;this.tx.crossOrigin="Anonymous";this.$I=p.extent;this.cta=p.server.url;this.E$c=
oz.BTa();this.xpb=[];this.iA=1;this.YLb=new au({side:Gr,color:11184810});this.ms=new $t(new dv,new au);this.ms.geometry.setDrawRange(0,0);this.ms.parent=this;this.sVa()}D(a,mz);L(a,"geotoolkit3d.scene.map.MapTile");a.prototype.Bqd=function(){if(!1===Array.isArray(this.cta))return this.cta;this.gMb=(this.gMb+1)%this.cta.length;return this.cta[this.gMb]};a.prototype.vaa=function(p){if(this.iA!==p){var q=1>p,r=function(t){if(null!=t.material){var u=Array.isArray(t.material)?t.material:[t.material];u.forEach(function(w){w.opacity=
p;w.transparent=q})}null!=t.userData.vla&&t.userData.vla.forEach(r)};this.iA=p;r(this.Oj);this.YLb.opacity=p;this.YLb.transparent=q}};a.prototype.fK=function(){return this.iA};a.prototype.Dla=function(p){var q=p.muc,r=p.nuc,t=p.ouc,u=this.z0a(q,r,t),w=new Lp;if(bz.containsBox(this.$I,p.wK)){var y=new $t(this.I5c);p.wK.getCenter(y.position);y.position.z=0;p.wK.getSize(w);y.scale.set(w.x,w.y,1);y.userData.tFd=!0}else{y=new $t(new dv(1,1,1,1));var A=bz.Jtc(this.$I,p.wK);A.getCenter(y.position);y.position.z=
0;A.getSize(w);y.scale.set(w.x,w.y,1);y.geometry.nqe=c(p.wK,A);y.geometry.Mwe=!0}y.material=this.YLb;y.parent=this;var x=this.iA;q>=this.Zq&&this.tx.load(this.Bqd()+u,function(C){null!=y&&null!=y.parent?(this.material=new au({map:C,side:Gr,opacity:x,transparent:1>x}),ez.pea(this,C),-1!==this.parent.children.indexOf(this)&&mz.prototype.Xf.call(this)):C.dispose()}.bind(y),{});y.userData.wK=p.wK;y.userData.depth=q;y.userData.x=r;y.userData.y=t;return y};a.prototype.nvc=function(p){if(null!=p){if(null!=
p.userData.vla)for(var q=0;q<p.userData.vla.length;q++)this.nvc(p.userData.vla[q]);null!=p.parent&&p.parent.remove(p);p instanceof Kp&&(ez.pvc(p),oz.dispose(p.children));null!=p.dispose&&p.dispose();null!=p.geometry&&!0!==p.userData.tFd&&(p.geometry.dispose(),p.geometry=null);oz.r7a(p.material);p.material=null}};a.prototype.Afd=function(p){var q=[],r=p.userData.wK.clone(),t=new Lp;r.getCenter(t);var u=[Math.round(r.min.x),Math.round(t.x),Math.round(r.max.x)];r=[Math.round(r.max.y),Math.round(t.y),
Math.round(r.min.y)];for(t=0;2>t;t++)for(var w=0;2>w;w++){var y={wK:new tq(new gy(u[t],r[w+1]),new gy(u[t+1],r[w])),nuc:2*p.userData.x+w,ouc:2*p.userData.y+t,muc:p.userData.depth+1};bz.intersectBox(this.$I,y.wK)&&(y=this.Dla(y),q.push(y),y.userData.Pue=p)}return q};a.prototype.sVa=function(){if(null!=this.cta&&null!=this.z0a){this.nvc(this.Oj);var p={wK:this.E$c.clone(),nuc:0,ouc:0,muc:0};this.Oj=this.Dla(p);this.add(this.Oj);this.Xf();this.ms.scale.copy(this.Oj.scale);this.ms.rotation.copy(this.Oj.rotation);
this.ms.position.copy(this.Oj.position)}};a.prototype.bKd=function(p){p.equals(this.$I)||(this.$I=p,this.sVa());return this};a.prototype.und=function(){return this.$I};a.prototype.mLd=function(p){p!==this.Fr&&(this.Fr=p,this.sVa());return this};a.prototype.j9a=function(){return this.Fr};a.prototype.vLd=function(p){p!==this.Zq&&(this.Zq=p,this.sVa());return this};a.prototype.m9a=function(){return this.Zq};a.prototype.ZMd=function(p){p!==this.cta&&(this.cta=p,this.sVa());return this};a.prototype.ftd=
function(){return this.cta};a.prototype.jKd=function(p){p!==this.z0a&&(this.z0a=p,this.sVa());return this};a.prototype.Und=function(){return this.z0a};a.prototype.kRd=function(p){null==p.userData.vla&&p.userData.depth<this.Fr&&(p.userData.vla=this.Afd(p))};a.prototype.add=function(p){p instanceof Kp&&(void 0!==p.parent&&p.parent.remove(p),p.parent=this,this.children.push(p));return this};a.prototype.remove=function(p){var q=this.children.indexOf(p);-1!==q&&(p.parent=void 0,this.children.splice(q,
1))};var b=new Vd,d=new gy,e=new gy,f=new gy,g=new gy,h=new Lp(-.5,-.5,0),k=new Lp(-.5,.5,0),l=new Lp(.5,.5,0),m=new Lp(.5,-.5,0),n=new Yt;a.prototype.ai=function(p,q,r){function t(){w.kRd(y,!0);if(null!=y.userData.vla)for(var x=0;x<y.userData.vla.length;x++)u.push(y.userData.vla[x]);else w.xpb.push(y)}var u=[];null!=this.Oj&&u.push(this.Oj);this.xpb=[];q.matrixWorldInverse.copy(q.matrixWorld).invert();n.multiplyMatrices(q.projectionMatrix,q.matrixWorldInverse);this.Vhc.setFromProjectionMatrix(n);
var w=this;for(r.getSize(b);0<u.length;){var y=u.shift();if(y.userData.depth<this.Zq)t();else if(y.updateMatrixWorld(),this.Vhc.intersectsObject(y)){h.set(y.userData.wK.min.x,y.userData.wK.min.y,0);k.set(y.userData.wK.min.x,y.userData.wK.max.y,0);l.set(y.userData.wK.max.x,y.userData.wK.max.y,0);m.set(y.userData.wK.max.x,y.userData.wK.min.y,0);h=this.localToWorld(h);k=this.localToWorld(k);l=this.localToWorld(l);m=this.localToWorld(m);oz.Bpa(h,q,b,d);oz.Bpa(k,q,b,e);oz.Bpa(l,q,b,f);oz.Bpa(m,q,b,g);
p=e.distanceTo(f);r=d.distanceTo(g);p=(p+r)/2;r=d.distanceTo(e);var A=f.distanceTo(g);r=(r+A)/2;341<p||341<r?t():this.xpb.push(y)}}this.children=this.xpb.slice();this.children.push(this.ms)};a.prototype.xea=function(){return!0};a.prototype.Lma=function(){return[this.ms]};return a}(),1,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJjYW5FZGdlc0JlSGlnaGxpZ2h0ZWQiOiJ4ZWEiLCJnZXRNZXNoZXNUb0hpZ2hsaWdodEVkZ2VzIjoiTG1hIn19fSAg");var cE=/*#__PURE__*/va(/*#__PURE__*/function(){function c(a){mz.call(this);a=G(a,{maxlod:10,minlod:0,extent:oz.BTa(),maplimits:oz.BTa(),opacity:1});this.NY=new bE(a);this.add(this.NY);this.setOptions(a)}D(c,mz);L(c,"geotoolkit3d.scene.map.TiledMap");c.prototype.setOptions=function(a){if(null==a)return this;mz.prototype.setOptions.call(this,a);if(null!=a.maplimits&&null!=a.extent){this.Vq=a.maplimits;var b=new Lp;this.Vq.getCenter(b);var d=new Lp;b=b.sub(a.extent.getCenter(d));d=new Lp;var e=new Lp;this.Vq.getSize(d);a.extent.getSize(e);
this.scale.set(d.x/e.x,d.y/e.y,1);this.position.set(b.x*this.scale.x,b.y*this.scale.y,0)}null!=a.extent&&this.NY.bKd(a.extent);null!=a.maxlod&&this.NY.mLd(a.maxlod);null!=a.minlod&&this.NY.vLd(a.minlod);null!=a.server&&this.NY.ZMd(a.server);null!=a.formatterfunction&&this.NY.jKd(a.formatterfunction);null!=a.opacity&&this.NY.vaa(a.opacity);this.Xf();return this};c.prototype.ta=function(){return xb({maplimits:this.Vq,extent:this.NY.und(),minlod:this.NY.m9a(),maxlod:this.NY.j9a(),server:this.NY.ftd(),
formatterfunction:this.NY.Und(),opacity:this.NY.fK()},mz.prototype.ta.call(this))};c.prototype.Jfa=function(){return new uq(new Lp(this.Vq.min.x,this.Vq.min.y,-.5),new Lp(this.Vq.max.x,this.Vq.max.y,.5))};return c}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoidGEifX19");var HH=/*#__PURE__*/function(){function c(){mz.call(this)}D(c,mz);L(c,"geotoolkit3d.widgets.AbstractWidget");return c}();var IH=/*#__PURE__*/{nb:"top",xd:"bottom",kc:"left",$b:"right",vfb:"front",Heb:"back"};var JH=/*#__PURE__*/function(){function c(){Lw.call(this,{vertexShader:LC.VERTEX_SHADER,fragmentShader:LC.FRAGMENT_SHADER,side:Gr,transparent:!0});this.gsb=!0}D(c,Lw);L(c,"geotoolkit3d.widgets.ProjectionWidgetMaterial");c.prototype.setTexture=function(a){LC.setTexture(this,a);return this};return c}();vz.sv(JH.Oa(),tz);var KH=/*#__PURE__*/va(/*#__PURE__*/function(){function c(m){HH.call(this,m);this.ug(!1);this.Vq=new uq;this.sd=new NA({});this.kf={};this.Fja=[];this.emb=!0;this.add(this.sd);m=xb(m,{planes:{left:!0,right:!0,top:!0,bottom:!0,front:!0,back:!0}});this.setOptions(m)}var a=new Lp,b=new Lp,d=new Lp,e=new Lp,f=new Lp,g=new Qu(0,0,1,1),h=new Yt,k=new Vd,l=512;D(c,HH);L(c,"geotoolkit3d.widgets.ProjectionWidget");c.prototype.setOptions=function(m){if(null==m)return this;HH.prototype.setOptions.call(this,m);m.hasOwnProperty("grid")&&
this.sd.setOptions(m.grid);if(m.hasOwnProperty("planes"))for(var n in m.planes){var p=m.planes[n];null!==this.kf[n]?p&&(this.kf[n]=new $t(new dv,new JH),this.add(this.kf[n]),this.needsUpdate=!0,this.kf[n].userData.$wb=!0):(this.kf[n].visible=p,this.kf[n].userData.$wb=!0)}m.hasOwnProperty("meshes")&&(this.Fja=m.meshes,this.needsUpdate=!0);return this};c.prototype.ta=function(){var m={},n;for(n in IH)m[n]=null!=this.kf[n]&&this.kf[n].userData.$wb;return xb({grid:this.sd.ta(),planes:m,meshes:this.Fja},
HH.prototype.ta.call(this))};c.prototype.Jad=function(m){for(var n=0;n<this.Fja.length;n++)if(this.Fja[n]===m)return this;this.Fja.push(m);this.needsUpdate=!0;return this};c.prototype.eGd=function(m){for(var n=0;n<this.Fja.length;n++)if(this.Fja[n]===m){this.Fja.splice(n,1);this.needsUpdate=!0;break}return this};c.prototype.$pb=function(m){this.sd.$pb(m);this.needsUpdate=!0;return this};c.prototype.wX=function(){var m=this;this.Vq.makeEmpty();this.Fja.forEach(function(p){m.Vq.expandByObject(p)});
this.Vq.applyMatrix4(h.copy(this.parent.matrixWorld).invert());var n=this.sd.ta();(this.emb=n.start!==this.Vq.min||n.end!==this.Vq.max)&&this.sd.setOptions({start:this.Vq.min,end:this.Vq.max,modelstart:this.Vq.min,modelend:this.Vq.max});this.Vq.applyMatrix4(this.parent.matrixWorld)};c.prototype.SQd=function(m,n,p){var q;this.sd.visible=!1;for(q in this.kf)this.kf[q].userData.PHc=this.Hdd(q,n),this.kf[q].visible=!1;for(q in this.kf)this.bCb(m,p,q);for(q in this.kf)this.kf[q].visible=this.kf[q].userData.PHc&&
this.kf[q].userData.$wb;this.sd.visible=!0;this.emb=!1};c.prototype.bCb=function(m,n,p){var q=this.kf[p];if(this.emb){this.Vq.applyMatrix4(h.copy(this.parent.matrixWorld).invert());this.CVc(p);q.scale.set(k.ca(),k.da(),1);switch(p){case IH.nb:case IH.xd:q.rotation.set(0,0,0);break;case IH.kc:case IH.$b:q.rotation.set(0,.5*Math.PI,0);break;case IH.vfb:case IH.Heb:q.rotation.set(.5*Math.PI,0,0)}switch(p){case IH.nb:case IH.$b:case IH.vfb:q.position.copy(d).add(e).divideScalar(2);break;case IH.xd:case IH.kc:case IH.Heb:q.position.copy(a).add(b).divideScalar(2)}this.Vq.applyMatrix4(this.parent.matrixWorld)}if(q.userData.PHc&&
q.userData.$wb){var r=n.renderTarget||null,t=n.getClearAlpha();q.userData.renderTarget=q.userData.renderTarget||new oy(l,l);var u=q.userData.renderTarget;n.setClearAlpha(0);n.setRenderTarget(u);this.CVc(p);g.position.copy(a).add(b).divideScalar(2);f.copy(d).add(e).divideScalar(2);g.lookAt(f);g.left=.5*-k.ca();g.right=.5*k.ca();g.top=.5*-k.da();g.bottom=.5*k.da();g.updateProjectionMatrix();n.render(m,g);n.setRenderTarget(r);n.setClearAlpha(t);q.material.setTexture(u.texture)}};c.prototype.Hdd=function(m,
n){var p=this.Vq.min,q=this.Vq.max;switch(m){case IH.nb:a.set(p.x,p.y,q.z);b.set(q.x,q.y,q.z);d.set(p.x,p.y,p.z);e.set(q.x,q.y,p.z);break;case IH.xd:a.set(p.x,p.y,p.z);b.set(q.x,q.y,p.z);d.set(p.x,p.y,q.z);e.set(q.x,q.y,q.z);break;case IH.Heb:a.set(p.x,q.y,p.z);b.set(q.x,q.y,q.z);d.set(p.x,p.y,p.z);e.set(q.x,p.y,q.z);break;case IH.vfb:a.set(p.x,p.y,p.z);b.set(q.x,p.y,q.z);d.set(p.x,q.y,p.z);e.set(q.x,q.y,q.z);break;case IH.$b:a.set(q.x,p.y,p.z);b.set(q.x,q.y,q.z);d.set(p.x,p.y,p.z);e.set(p.x,q.y,
q.z);break;case IH.kc:a.set(p.x,p.y,p.z),b.set(p.x,q.y,q.z),d.set(q.x,p.y,p.z),e.set(q.x,q.y,q.z)}f.copy(a).add(b).multiplyScalar(.5);m=n.position.distanceTo(f);f.copy(d).add(e).multiplyScalar(.5);n=n.position.distanceTo(f);return m>n};c.prototype.CVc=function(m){var n=this.Vq.min,p=this.Vq.max;switch(m){case IH.nb:case IH.xd:g.up.set(0,-1,0);var q=p.x-n.x;var r=p.y-n.y;a.set(n.x,n.y,n.z);b.set(p.x,p.y,n.z);d.set(n.x,n.y,p.z);e.set(p.x,p.y,p.z);break;case IH.vfb:case IH.Heb:g.up.set(0,1,0);q=p.x-
n.x;r=p.z-n.z;a.set(n.x,p.y,n.z);b.set(p.x,p.y,p.z);d.set(n.x,n.y,n.z);e.set(p.x,n.y,p.z);break;case IH.$b:case IH.kc:g.up.set(0,-1,0),q=p.z-n.z,r=p.y-n.y,a.set(n.x,n.y,n.z),b.set(n.x,p.y,p.z),d.set(p.x,n.y,n.z),e.set(p.x,p.y,p.z)}k.setSize(q,r)};c.prototype.ai=function(m,n,p,q){HH.prototype.ai.call(this,m,n,p,q);this.needsUpdate&&(this.wX(),this.SQd(m,n,q))};c.prototype.dispose=function(){for(var m in this.kf){var n=this.kf[m];null!=n.material&&n.material.dispose();null!=n.userData.renderTarget&&
n.userData.renderTarget.dispose()}this.sd.dispose();HH.prototype.dispose.call(this)};return c}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoidGEiLCJhZGRNZXNoIjoiSmFkIiwicmVtb3ZlTWVzaCI6ImVHZCIsImFkZExlZ2VuZCI6IiRwYiIsImJlZm9yZVJlbmRlciI6ImFpIn19fSAg");var LH=/*#__PURE__*/function(){function c(b,d){Kz.call(this,{vertexShader:a.VERTEX_SHADER,fragmentShader:a.RZc,transparent:!0,color:b?b.color:void 0,colorprovider:b?b.colorprovider:void 0});this.type="ProjectionMaterial";switch(d.name){case "sphere":b.symbol=Nz.Z8b;break;case "cube":b.symbol=Nz.Eea;break;case "pyramid":b.symbol=Nz.NBb;break;case "triangle":b.symbol=Nz.NBb;break;default:b.symbol=Nz.Z8b}c.prototype.setOptions.call(this,b)}var a=fC;D(c,Kz);L(c,"geotoolkit3d.widgets.scatter.ProjectionMaterial");c.prototype.setOptions=
function(b){a.aMd(this,b);Kz.prototype.setOptions.call(this,b);return this};c.prototype.ta=function(){var b=Kz.prototype.ta.call(this);return xb(b,a.ard(this))};return c}();var MH=/*#__PURE__*/function(){function c(b){Kz.call(this,{vertexShader:a.VERTEX_SHADER,fragmentShader:a.FRAGMENT_SHADER,transparent:!0});this.type="ScatterMaterial";c.prototype.setOptions.call(this,b)}var a=fC;D(c,Kz);L(c,"geotoolkit3d.widgets.scatter.ScatterMaterial");c.prototype.setOptions=function(b){Kz.prototype.setOptions.call(this,b);a.bMd(this,b)};c.prototype.ta=function(){var b=Kz.prototype.ta.call(this);return xb(b,a.brd(this))};return c}();vz.sv(MH.Oa(),Lz);var NH=/*#__PURE__*/va(/*#__PURE__*/{spa:function(){var c=new Zw(1,12,8);c.name="sphere";return c}(),Eea:function(){var c=new xq(1,1,1,1,1,1);c.name="cube";return c}(),M3b:function(){var c=new Uq(1,1,4,1);c.rotateX(Math.PI/2);c.name="pyramid";return c}()},2,"eyJzcGhlcmUiOiJzcGEiLCJjdWJlIjoiRWVhIiwicHlyYW1pZCI6Ik0zYiJ9"),OH=/*#__PURE__*/va(/*#__PURE__*/function(){function c(b){HH.call(this);this.hb=G(b,{colorprovider:"red",symbol:"circle",opacity:1,projection:{enable:!0,sizefactor:.66,topbottom:{color:"lightgray"},leftright:{color:"lightgray"},frontback:{color:"lightgray"}}});this.Di=!0;this.sd=this.ifd(this.hb.gridoption);
this.add(this.sd);this.rq={};this.ek={};null!=this.hb.data&&this.setData("default",this.hb.symbol,this.hb.data,this.hb.projection)}var a=5;D(c,HH);L(c,"geotoolkit3d.widgets.scatter.ScatterPlot");c.prototype.setData=function(b,d,e,f){if(null==b||null==e||null==d)hb("Missing at least one input");else{this.hb.symbol=d;null!==f&&(this.hb.projection=G(f,this.hb.projection));if(e instanceof HG){var g=e.oh();f=e.Hz("x")?e.Hz("x").toArray():Array(g);var h=e.Hz("y")?e.Hz("y").toArray():Array(g);var k=e.Hz("z")?
e.Hz("z").toArray():Array(g);var l=e.Hz("size")?e.Hz("size").toArray():Array(g).fill(5);g=e.Hz("visible")?e.Hz("visible").toArray():Array(g).fill(1);e=e.Hz("value")?e.Hz("value").toArray():null}else g=e.x?e.x.length:e.y?e.y.length:e.z?e.z.length:0,f=e.x||Array(g),h=e.y||Array(g),k=e.z||Array(g),l=e.size||Array(g).fill(5),g=e.visible||Array(g).fill(1),e=e.value;var m=Nz;var n="ball soliddot circle cube sphere triangle".split(" ");d instanceof Bx||-1<n.indexOf(d)?(d instanceof Bx&&(d=d.name),n=function(p){this.Xf();
this.hb.data=null}.bind(this),d=m[d+"Loader"](n),this.B7b(b,d,f,h,k,l,g),this.hb.symbol=d,n=new MH(this.hb),m=new Aq,n=new jv(m,n),n.name=b,this.oNd(n,f,h,k,l,g,e),this.add(n),this.ek[b]=n,this.B7b(b,d,f,h,k,l,g),this.cCb()):(n=new zs,m=d,this.pNd(n,m,f,h,k,l,g,e),this.add(n),this.ek[b]=n,this.B7b(b,d,f,h,k,l,g),this.cCb(),this.Xf(),this.hb.data=null)}};c.prototype.oNd=function(b,d,e,f,g,h,k){var l=0,m=d.length;if(this.Di){var n=new Lp(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE);var p=new Lp(Number.MIN_VALUE,
Number.MIN_VALUE,Number.MIN_VALUE);this.Di=!1}else n=this.sd.PM(),p=this.sd.rS();var q=new Ws(new Float32Array(6*m),6),r=new Xs(q,3,0),t=new Xs(q,1,3),u=new Xs(q,1,4);q=new Xs(q,1,5);for(var w=0;w<m;w++)r.setXYZ(w,d[w],e[w],f[w]),n.x=Math.min(n.x,d[w]),n.y=Math.min(n.y,e[w]),n.z=Math.min(n.z,f[w]),p.x=Math.max(p.x,d[w]),p.y=Math.max(p.y,e[w]),p.z=Math.max(p.z,f[w]),u.setX(w,g[w]),t.setX(w,h[w]),null!=k&&q.setX(w,k[w]),l+=g[w];b.geometry.setAttribute("position",r);b.geometry.setAttribute("cgpointVisible",
t);b.geometry.setAttribute("cgpointSize",u);b.geometry.setAttribute("cgcolormapValue",q);a=l/m;n.subScalar(a);p.addScalar(a);this.hb.gridoption=G(this.hb.gridoption,{start:n,end:p,modelstart:n,modelend:p});this.sd.setOptions(this.hb.gridoption)};c.prototype.pNd=function(b,d,e,f,g,h,k,l){var m=0;if(this.Di){var n=new Lp(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE);var p=new Lp(Number.MIN_VALUE,Number.MIN_VALUE,Number.MIN_VALUE);this.Di=!1}else n=this.sd.PM(),p=this.sd.rS();for(var q=0;q<e.length;q++){n.x=
Math.min(n.x,e[q]);n.y=Math.min(n.y,f[q]);n.z=Math.min(n.z,g[q]);p.x=Math.max(p.x,e[q]);p.y=Math.max(p.y,f[q]);p.z=Math.max(p.z,g[q]);m+=h[q];var r=Iz.hUb(new rf);r=new $t(d,r);r.position.set(e[q],f[q],g[q]);r.scale.set(h[q],h[q],h[q]);r.visible=k[q];var t=this.hb.colorprovider.rb(l[q]);r.material.userData.Yla.setColor("rgba("+t.lk()+","+t.kk()+","+t.ik()+","+this.hb.opacity+")");Iz.kWc(r.material,r.material.userData.Yla);r.name="Point";b.add(r)}a=m/e.length;n.subScalar(a);p.addScalar(a);this.hb.gridoption=
G(this.hb.gridoption,{start:n,end:p,modelstart:n,modelend:p});this.sd.setOptions(this.hb.gridoption)};c.prototype.setOptions=function(b){if(null==b)return this;HH.prototype.setOptions.call(this,b);this.hb=xb(b,this.hb);b.gridoption&&(this.hb.gridoption=G(b.gridoption,this.hb.gridoption),this.sd.setOptions(b.gridoption));b.projection&&(this.hb.projection=G(b.projection,this.hb.projection),this.cCb(),b.projection.enable||this.SUb());this.Xf();return this};c.prototype.ta=function(){return xb(this.hb,
HH.prototype.ta.call(this))};c.prototype.rZb=function(b,d){if(null==d)return null;b=b||"default";b=this.ek[b].geometry;var e=b.getAttribute("position").array;b=e[6*d];var f=e[6*d+1],g=e[6*d+2],h=e[6*d+3],k=e[6*d+4];d=e[6*d+5];var l=new Ws(new Float32Array(6),6);e=new Xs(l,3,0);var m=new Xs(l,1,3),n=new Xs(l,1,4);l=new Xs(l,1,5);e.setXYZ(0,b,f,g);m.setX(0,h);n.setX(0,k);l.setX(0,d);return{position:e,cgpointVisible:m,cgpointSize:n,cgcolormapValue:l}};c.prototype.B7b=function(b,d,e,f,g,h,k){var l=this.hb.projection;
if(null!=l&&!1!==l.enable){var m=e.length;m=Array(m).fill(0);if(null!=l.topbottom){var n=new LH(l.topbottom,d);var p=new jv(new Aq,n);n=new jv(new Aq,n);this.QRa(p,e,f,m,h,k);this.QRa(n,e,f,m,h,k);this.add(p);this.add(n);p.visible=!1;n.visible=!1}if(null!=l.leftright){var q=new LH(l.leftright,d);var r=new jv(new Aq,q);q=new jv(new Aq,q);this.QRa(r,m,f,g,h,k);this.QRa(q,m,f,g,h,k);this.add(r);this.add(q);r.visible=!1;q.visible=!1}if(null!=l.frontback){d=new LH(l.frontback,d);var t=new jv(new Aq,d);
var u=new jv(new Aq,d);this.QRa(t,e,m,g,h,k);this.QRa(u,e,m,g,h,k);this.add(t);this.add(u);t.visible=!1;u.visible=!1}this.rq[b]={top:p,bottom:n,left:r,right:q,front:t,back:u}}};c.prototype.QRa=function(b,d,e,f,g,h){var k=this.hb.projection.sizefactor||.66,l=d.length,m=new Ws(new Float32Array(5*l),5),n=new Xs(m,3,0),p=new Xs(m,1,3);m=new Xs(m,1,4);for(var q=0;q<l;q++)n.setXYZ(q,d[q],e[q],f[q]),m.setX(q,g[q]*k),p.setX(q,h[q]);b.geometry.setAttribute("position",n);b.geometry.setAttribute("cgpointVisible",
p);b.geometry.setAttribute("cgpointSize",m)};c.prototype.cCb=function(){var b=this.sd.PM(),d=this.sd.rS(),e;for(e in this.rq)this.rq[e].top.position.setZ(d.z),this.rq[e].bottom.position.setZ(b.z),this.rq[e].left.position.setX(b.x),this.rq[e].right.position.setX(d.x),this.rq[e].front.position.setY(b.y),this.rq[e].back.position.setY(d.y)};c.prototype.ai=function(b,d,e,f){if(0!==Object.keys(this.rq).length&&null!=this.sd){f=this.sd.qp();var g=this.sd.qZb(),h;for(h in this.rq)null!=this.rq[h].top&&(e=
null!=this.rq[h].top.userData.enable?this.rq[h].top.userData.enable:!0,this.rq[h].top.visible=f(g.top,b,d)&&e,this.rq[h].bottom.visible=f(g.bottom,b,d)&&e),null!=this.rq[h].left&&(e=null!=this.rq[h].left.userData.enable?this.rq[h].left.userData.enable:!0,this.rq[h].left.visible=f(g.left,b,d)&&e,this.rq[h].right.visible=f(g.right,b,d)&&e),null!=this.rq[h].front&&(e=null!=this.rq[h].front.userData.enable?this.rq[h].front.userData.enable:!0,this.rq[h].front.visible=f(g.front,b,d)&&e,this.rq[h].back.visible=
f(g.back,b,d)&&e)}};c.prototype.zPd=function(b,d){if(0!==Object.keys(this.rq).length){for(var e in this.rq)switch(b){case "topbottom":this.rq[e].top.userData.enable=d;break;case "leftright":this.rq[e].left.userData.enable=d;break;case "frontback":this.rq[e].front.userData.enable=d}this.Xf()}};c.prototype.kod=function(){return new uq(this.sd.PM(),this.sd.rS())};c.prototype.nmd=function(){return Object.keys(this.ek)};c.prototype.SUb=function(b){if(null!=b){for(var d in this.rq[b])oz.dispose(this.rq[b][d]);
delete this.rq[b]}else{for(var e in this.rq)for(var f in this.rq[e])oz.dispose(this.rq[e][f]);this.rq={}}};c.prototype.dispose=function(b){if(null!=b)null!=this.ek[b]&&(this.SUb(b),oz.dispose(this.ek[b]),delete this.ek[b]);else{this.SUb();for(var d in this.ek)oz.dispose(this.ek[d]);this.ek={}}};c.prototype.ifd=function(b){b=xb(b,{start:new Lp(-1,-1,-1),end:new Lp(1,1,1),counts:new Lp(3,3,6),grid:{linestyles:{x:new X({color:"darkgrey",pattern:wg.zha}),y:new X({color:"darkgrey",pattern:wg.zha}),z:new X({color:"darkgrey",
pattern:wg.zha})}},axis:{linestyles:{x:new X({color:"black"}),y:new X({color:"black"}),z:new X({color:"black"})},textstyles:{x:new Ki({color:"black"}),y:new Ki({color:"black"}),z:new Ki({color:"black"})}},title:{textstyles:{x:new Ki({color:"black"}),y:new Ki({color:"black"}),z:new Ki({color:"black"})}}});return new NA(b)};c.v3c=NH;return c}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoidGEiLCJ1cGRhdGVQcm9qZWN0aW9uIjoiY0NiIiwiYmVmb3JlUmVuZGVyIjoiYWkiLCJ0b2dnbGVQcm9qZWN0aW9uIjoielBkIiwiZ2V0R3JpZExpbWl0Ijoia29kIiwiZ2V0RGF0YVNldE5hbWUiOiJubWQifX19");var JK=/*#__PURE__*/va(/*#__PURE__*/function(){function c(a){mz.call(this);a=G(a,{});var b=a.data,d=a.material,e=d.b$a();d=d.c$a();var f=b.path;b=b.index.fua();var g=f.i;f=f.j;for(var h=new dv(1,1,e,d),k=0;k<h.index.count;k+=3)h.addGroup(k,3,Math.floor(k/6));h.applyMatrix4((new Yt).makeTranslation(.5,.5,0));h.applyMatrix4((new Yt).makeRotationZ(Math.PI/2));h.applyMatrix4((new Yt).makeRotationY(Math.PI/2));k=new Lp;b.getSize(k);for(var l=h.getAttribute("position"),m=0;m<=d;m++)for(var n=0;n<=e;n++){var p=n+m*(e+1);l.setX(p,g[0]+
(g[1]-g[0])/e*n);l.setY(p,f[0]+(f[1]-f[0])/e*n);var q=l.getZ(n+m*(e+1));q=q*k.z+b.min.z;l.setZ(p,q)}this.GU=a.material;this.ym=new $t(h,this.GU.LFa());this.add(this.ym);this.setOptions(a)}D(c,mz);L(c,"geotoolkit3d.scene.seismic.FencePanel");c.prototype.setOptions=function(a){if(null==a)return this;mz.prototype.setOptions.call(this,a);this.GU.setOptions(a);this.Xf();return this};c.prototype.ta=function(){return xb(this.GU.ta(),mz.prototype.ta.call(this))};c.prototype.Jz=function(){return this.GU.Jz()};
c.prototype.sAb=function(a){this.setOptions({overlay:a})};c.prototype.zFa=function(){return this.GU};c.prototype.n_=function(){return this.ym};c.prototype.getBoundingBox=function(){null==this.ym.geometry.boundingBox&&this.ym.geometry.computeBoundingBox();return this.ym.geometry.boundingBox.clone()};c.prototype.u_=function(){return this.GU.u_()};c.prototype.ai=function(){var a=this.zFa(),b=a.ta();b.disposesurface&&a.LFa().forEach(function(d){d.userData.Z$&&(d.userData.Qbb=!1)})};c.prototype.K3=function(){var a=
this.zFa(),b=a.ta();b.disposesurface&&a.LFa().forEach(function(d){null!=d.userData.Qbb&&(d.map.image=null,delete d.userData.Z$,delete d.userData.Qbb)})};c.prototype.dispose=function(){oz.dispose(this.GU);mz.prototype.dispose.call(this)};return c}(),1,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoidGEiLCJnZXRGZW5jZU1hdGVyaWFsIjoiekZhIiwiZ2V0TWVzaCI6Im5fIn19fSAg");sA.jzb(JK.Oa(),wC);var KK=/*#__PURE__*/va(/*#__PURE__*/function(){function c(q){ue.call(this);this.CDa=new so;this.ub=null;this.ML=[];this.Nja=Number.MAX_VALUE;this.iA=1;this.Flb={};var r=q.data.reader;null==q.pipeline&&(q.pipeline={});null==q.pipeline.options&&(q.pipeline.options={});var t=r.pa();q.data=G(q.data,{limits:new U({x:t.la()+.5,y:t.ka(),width:r.Eg(),height:t.da()})});r=qA.MFa();if(!Number.isFinite(r)||0>=r)r=k;h=Math.min(r,l);q=G(q,{maxpixelsx:l,maxpixelsy:l,pixelrenderthreshold:null,verticalresolution:1,horizontalresolution:1,loadingcolor:"rgba(255, 255, 255, 0.5)",
oninvalidate:function(){},autodecimate:!0,numberofparalleltasks:n,materialoptions:{},clearpipeline:!0,disposesurface:!1,initialtexturesize:q.tilesize||h,overlay:null});this.MNb=q.oninvalidate;q.pipeline.options=G(q.pipeline.options,{normalization:{type:QH.qgb,scale:1},plot:{type:{Wiggle:!1,InterpolatedDensity:!0},decimationSpacing:5},colors:{colorMap:dJ.ag().$6a("WhiteBlack",320)}});this.GBa=q.loadingcolor;this.qz=q.overlay;this.m3a=function(){e||this.zC(null,null,!0)}.bind(this);null!=this.qz&&this.qz.Aw(this.m3a);
this.xmc=!1;this.KDa=q.initialtexturesize;this.XX=Math.round(Math.log2(this.KDa));this.NU=Math.round(Math.log2(m));this.HU=Math.round(Math.log2(qA.MFa()/2));this.EOb=this.Iza=!1;this.setOptions(q);this.type="SliceMaterial"}function a(q,r,t,u,w,y,A){w=wc(w,y,!0);w=new Bx(w);w.generateMipmaps=!0;w.minFilter=Ht;w.anisotropy=16;if(1<t||1<u)w.wrapS=mu,w.wrapT=mu,w.repeat.set(t,u),r=(r+u)%2?0:-1,q=q%2?-1:0,w.offset.set(q,r);return A=new au(G(A,{alphaTest:.01,side:Gr,map:w}))}function b(q,r){if(0===q)return 1;
var t=Math.max(1,Math.ceil(q/r));if(1!==t)return r;for(t=h/2;q<=t;)r=t,t/=2;t/=2;3===Math.ceil(q/t)&&(r=t);return r}function d(q,r,t,u){if(q&&q.ta().decimation&&1<=r){var w=p;r=Math.abs(Math.ceil(w-w*(r-t)/(u-t)));var y=V.clamp(r,1,w);return new Eg(function(A,x){q.update({decimation:{level:y}},function(C){if(C)x();else{C=q.Q9();var z=new U(0,C.jK(),C.Eg()-1,C.jK()+(C.BD()-1)*C.zj());C=new U({x:z.la()+.5,y:z.ka(),width:C.Eg(),height:z.da()});A(C)}})})}return Eg.resolve(null)}var e=!1,f=new ii(Number.POSITIVE_INFINITY),
g=new li,h=null,k=2048,l=4096,m=512,n=24,p=10;D(c,ue);L(c,"geotoolkit3d.scene.seismic.SliceMaterial");c.prototype.Ucd=function(q,r,t){r=this.OR;var u=this.Vda,w=this.XO,y=this.n3,A=t&&this.KDa?Math.min(this.KDa,t):this.KDa,x=this.RKb,C=this.Ce.ca(),z=this.mRb;q=this.Ce.da()/q.zj()+1;x=Math.min(C*x,this.wMb);t&&(x=Math.min(x,t));z=Math.min(q*z,this.xMb);t&&(z=Math.min(z,t));A?(this.n3=this.XO=A,2*x<A&&(this.XO=2*x),2*z<A&&(this.n3=2*z),t=Math.max(1,Math.ceil(x/A)),A=Math.max(1,Math.ceil(z/A))):(this.XO=
b(x,h),this.n3=b(z,h),t=Math.ceil(x/this.XO),A=Math.ceil(z/this.n3));this.OR=t;this.Vda=A;if(0>=this.OR||0>=this.Vda)throw Error("Tile count has to be > 0");if(isNaN(this.OR)||isNaN(this.Vda))throw Error("Tile count cant be NaN");return this.XO===w&&this.n3===y&&this.OR===r&&this.Vda===u};c.prototype.iuc=function(q){var r=this;return function(t,u,w){if(!0===w.mk()||null==q.material.map||null==q.material.map.image)t();else{var y=q.material.map,A=q.Ub.ca()/q.kXc;u=q.Ub.da()/q.mXc;var x=q.Wvb*A+q.Ub.getX(),
C=q.o1b*u+q.Ub.getY(),z=Math.min((q.Wvb+1)*A+q.Ub.getX(),q.Ub.na()),v=Math.min((q.o1b+1)*u+q.Ub.getY(),q.Ub.ma()),B=new U(x,C,z,v);u=new U(0,0,q.Kdb,q.NUc);if(null!=q.eUc){x=q.Kdb/y.image.width;var E=q.eUc*x,H=q.Gid*x;z=A/q.Kdb;x=q.Wvb*A+q.Ub.getX()+z*E;z=Math.min(x+z*(H-E),q.Ub.na());u.cb(E,0,H,q.Kdb)}var F=q.kbb.pa().getY(),I=q.kbb.getReader().zj();A=new U(x,C,z,v);C=function(){if(!0!==w.mk()&&null!=q.material.map&&null!=q.material.map.image){var J=y.image.getContext("2d"),K=new U(0,0,y.image.width/
ac(),y.image.height/ac());J.clearRect(0,0,y.image.width,y.image.height);J=Gh.zla({context:J,viewport:K});var N=q.material.userData.iX.wk();J.drawImage(N,0,0,N.width,N.height,0,0,y.image.width/ac(),y.image.height/ac());null!=q.Xab&&(B.setX(Math.floor(B.getX())),B.setY((B.getY()-F)/I),B.Ya(B.da()/I),e=!0,q.Xab.Ha(B),q.Xab.sa(K),e=!1,q.Xab.render(J));q.material.userData.Ewb--;0===q.material.userData.Ewb&&(q.material.opacity=null!=q.material.userData.opacity?q.material.userData.opacity:1,q.material.transparent=
null!=q.material.userData.transparent?q.material.userData.transparent:!1,q.material.userData.Ajd=!0,y.needsUpdate=null!=y.image);r.CDa.isEmpty()&&q.Gsc&&q.kbb.clear();q.YIc()}t()};q.material.userData.pWc&&null!=q.material.userData.iX?C():(null==q.material.userData.iX&&(q.material.userData.iX=f.Kl(g,y.image.width,y.image.height,!0)),q.material.userData.iX.clear(),q.kbb.Wla(A,q.material.userData.iX.wk(),u,0,0,C))}}};c.prototype.setOptions=function(q){var r=xb(q,{loadingcolor:this.GBa,pipeline:null!=
q.pipeline?G({},q.pipeline):{},autodecimate:this.Tza,pixelrenderthreshold:this.EOa,clearpipeline:this.$hb,disposesurface:this.mhc,horizontalresolution:this.RKb,verticalresolution:this.mRb,numberofparalleltasks:this.Nja,maxpixelsx:this.wMb,maxpixelsy:this.xMb,materialoptions:this.Flb,readertracedecimation:this.EOb,tilesize:this.KDa,data:{limits:this.Ce,reader:this.Fi},lod:this.Iza}),t=!1;this.EOb=r.readertracedecimation;this.GBa=r.loadingcolor;this.wMb=r.maxpixelsx;this.xMb=r.maxpixelsy;this.mhc=r.disposesurface;
this.Tza=r.autodecimate;this.$hb=r.clearpipeline;this.Flb=r.materialoptions;this.Ce=r.data.limits;this.EOa=r.pixelrenderthreshold;this.Nja=r.numberofparalleltasks;this.mRb=r.verticalresolution;this.RKb=r.horizontalresolution;this.CDa.o7b(this.Nja);this.KDa=r.tilesize;this.Iza=this.Tza&&r.lod;var u=!1;null!=r.data.reader&&this.Fi!==r.data.reader&&(this.Fi=r.data.reader,u=!0);this.jWc(r.data.reader,q)&&(t=!0);r.autodecimate!==this.Tza&&this.ub&&(this.Tza=r.autodecimate,q=this.Ce.ca()/(this.OR*Math.pow(2,
this.XX)),1>q&&(q=1),this.ub.ldb(q));r.pixelrenderthreshold!==this.EOa&&(this.EOa=r.pixelrenderthreshold);null!=r.data&&!this.xmc&&u?(t=this.Fi.pa(),t=G(r.data,{limits:new U({x:t.la()+.5,y:t.ka(),width:this.Fi.Eg(),height:t.da()})}),this.Ce=t.limits,r.pipeline.options=null!=r.pipeline.options?r.pipeline.options:this.ub.ta(),this.Ztc(r.pipeline.options,this.Fi,this.Ce,this.MNb),t=!1):null!=r.pipeline.options&&(this.Iza&&null!=this.Gia&&this.XX>this.Gia&&(this.XX=this.Gia),this.Ii().setOptions(r.pipeline.options),
t=!1);t&&this.zC();return this};c.prototype.ta=function(){return{loadingcolor:this.GBa,pipeline:this.ub.ta(),autodecimate:this.Tza,pixelrenderthreshold:this.EOa,clearpipeline:this.$hb,disposesurface:this.mhc,horizontalresolution:this.RKb,verticalresolution:this.mRb,numberofparalleltasks:this.Nja,maxpixelsx:this.wMb,maxpixelsy:this.xMb,tilesize:this.KDa,data:{limits:this.Ce,reader:this.Fi},lod:this.Iza}};c.prototype.vaa=function(q){if(null==q||0>q||1<q)throw Error("The opacity should be in [0, 1].");
this.iA=q;this.ML.forEach(function(r){r.userData.transparent=!0;r.userData.opacity=q});this.zC()};c.prototype.fK=function(){return this.iA};c.prototype.Mpd=function(){return this.GBa};c.prototype.dLd=function(q){this.GBa=q;return this};c.prototype.pud=function(){return this.XO};c.prototype.qud=function(){return this.n3};c.prototype.al=function(){return this.Ce};c.prototype.Ztc=function(q,r,t,u){null!=this.ub&&(this.ub.za(eJ.gb,this.$ja),this.ub.za(eJ.Ieb,this.gOb),this.ub.za(eJ.Cgb,this.fOb));var w=
r.Wp();this.ub=new gJ({name:"3D_tmp",reader:r,statistics:w});q.normalization=G(q.normalization,{limits:new Jd(w.min,w.max)});this.ub.setOptions(q);this.Tza&&(q=this.Ce.ca()/(this.OR*Math.pow(2,this.XX)),1>q&&(q=1),this.ub.ldb(q));this.zC(t,u);null==this.$ja&&(this.$ja=function(y,A,x){this.kgc||this.zC(t,u)}.bind(this));null==this.gOb&&(this.gOb=function(y,A,x){this.kgc=!0;this.Vi=this.ub.gf()}.bind(this));null==this.fOb&&(this.fOb=function(y,A,x){this.kgc=!1;this.Iza&&null!=this.Gia&&this.XX>this.Gia&&
(this.XX=this.Gia);this.Vi!==this.ub.gf()&&this.zC(t,u)}.bind(this));this.ub.on(eJ.gb,this.$ja);this.ub.on(eJ.Ieb,this.gOb);this.ub.on(eJ.Cgb,this.fOb)};c.prototype.Jz=function(){return this.qz};c.prototype.Ii=function(){return this.ub};c.prototype.FHd=function(){var q=this;this.ML.forEach(function(r){q.zwc(r,q.GBa)});this.MNb()};c.prototype.jWc=function(q,r){var t=Math.pow(2,this.XX);if(!this.Ucd(q,r,this.Iza?t:null)){q=this.ML;this.ML=[];var u=this;for(r=0;r<this.OR;r++)for(t=0;t<this.Vda;t++)this.ML[r+
t*this.OR]=a(r,t,this.OR,this.Vda,this.XO,this.n3,this.Flb);this.ML.Oa=function(){return"geotoolkit3d.scene.seismic.SliceMaterial"};this.ML.getClassName=function(){return"geotoolkit3d.scene.seismic.SliceMaterial"};this.ML.getParent=function(){return u};null!=q&&q.forEach(function(w){w.map.dispose();w.map.version=0;w.map.image=null;w.map=null;null!=w.userData.iX&&(f.release(w.userData.iX),w.userData.iX=null)});return!0}if(null!=r&&r.hasOwnProperty("materialoptions")&&(!this.Flb.hasOwnProperty("opacity")||
r.materialoptions.hasOwnProperty("opacity")&&r.materialoptions.opacity!==this.iA))return this.vaa(r.materialoptions.opacity),!0;null!=r&&null!=r.overlay&&r.overlay!==this.qz&&(null!=this.qz&&this.qz.Ty(this.m3a),this.qz=r.overlay,null!=this.qz&&this.qz.Aw(this.m3a),this.m3a());return!1};c.prototype.zC=function(q,r,t){null==q&&(q=this.Ce);null==r&&(r=this.MNb);null==t&&(t=!1);this.CDa.abort();var u=Math.pow(2,this.XX);if(this.Tza){var w=q.ca()/(this.OR*this.XO);1>w&&(w=1);this.ub.ldb(w)}for(w=this.OR-
1;0<=w;w--)for(var y=this.Vda-1;0<=y;y--){var A=this.ML[w+y*this.OR];if(null!=A&&null!=A.map){t||null==A.userData.iX||(f.release(A.userData.iX),A.userData.iX=null);A.map.image=A.map.image||wc(this.XO,this.n3,!0);var x=this.XO;null!=this.EOa&&(x=Math.ceil(this.EOa/this.n3));A.map.image.width=this.XO;A.map.image.height=this.n3;var C=0<A.userData.Ewb&&!A.userData.pWc;(null==A.userData.Ajd||C)&&this.zwc(A,this.GBa);A.userData.pWc=t&&!C;if(x>=this.XO)A.userData.Ewb=1,C={material:A,kbb:this.ub,Xab:this.Jz(),
Ub:q,Wvb:w,o1b:y,kXc:this.OR,mXc:this.Vda,YIc:r,Gsc:this.$hb,Kdb:this.XO,NUc:this.n3,mhd:u},this.CDa.iEa(this.iuc(C));else{A.userData.Ewb=Math.ceil(this.XO/x);for(var z=0;z<this.XO;z+=x)C={eUc:z,Gid:z+x,material:A,kbb:this.ub,Xab:this.Jz(),Ub:q,Wvb:w,o1b:y,kXc:this.OR,mXc:this.Vda,YIc:r,Gsc:this.$hb,Kdb:this.XO,NUc:this.n3,mhd:u},this.CDa.iEa(this.iuc(C))}}}};c.prototype.zwc=function(q,r){var t=q.map;r=Pd.Sg(r);null==q.userData.opacity&&(q.userData.opacity=q.opacity);null==q.userData.transparent&&
(q.userData.transparent=q.transparent);q.opacity=r.Ek()/255;q.transparent=1!==q.opacity;q.needsUpdate=!0;null!=t.image&&(q=t.image.getContext("2d"),q.clearRect(0,0,t.image.width,t.image.height),q.fillStyle=(new td(r.lk(),r.kk(),r.ik(),r.Ek())).Nl(),q.fillRect(0,0,t.image.width,t.image.height),t.needsUpdate=!0)};c.prototype.b$a=function(){return this.OR};c.prototype.c$a=function(){return this.Vda};c.prototype.dispose=function(){this.ge()||(this.CDa.abort(),this.ML.forEach(function(q){q.map&&(q.map.dispose(),
q.map.version=0,q.map.image=null,q.map=null,null!=q.userData.iX&&(f.release(q.userData.iX),q.userData.iX=null))}),this.ML.length=0,null!=this.ub&&(this.ub.dispose(),this.ub=null),null!=this.qz&&this.qz.Ty(this.m3a),ue.prototype.dispose.call(this))};c.prototype.LFa=function(){return this.ML};c.prototype.K6b=function(q,r,t){this.Gia=q=Math.max(q,0);if(!this.Iza||this.Gia===this.XX)return Eg.resolve(null);r&&(this.NU=r);t&&(this.HU=t);if(this.Gia<this.XX)return Eg.resolve(null);this.CDa.abort();this.XX=
this.Gia;var u=this;return d(this.ub&&this.EOb?this.ub.getReader():null,u.XX,this.NU,this.HU).then(function(w){w&&(u.Ce=w);u.jWc(u.ub.getReader(),null);u.zC();return u.LFa()}).catch(function(w){rb(w);return Eg.resolve(null)})};c.prototype.zre=function(){return this.XX};c.prototype.u_=function(){var q=this.Ce.clone();q.Ya(q.da()/this.Fi.zj());return q};return c}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoidGEiLCJzZXRPcGFjaXR5IjoidmFhIiwiZ2V0T3BhY2l0eSI6ImZLIiwiZ2V0TG9hZGluZ0NvbG9yIjoiTXBkIiwic2V0TG9hZGluZ0NvbG9yIjoiZExkIiwiZ2V0VGlsZVNpemVYIjoicHVkIiwiZ2V0VGlsZVNpemVZIjoicXVkIiwiZ2V0RGF0YUxpbWl0cyI6ImFsIiwiY3JlYXRlUGlwZWxpbmUiOiJadGMiLCJnZXRPdmVybGF5IjoiSnoiLCJnZXRQaXBlbGluZSI6IklpIiwicmVzZXRUaWxlcyI6IkZIZCIsInNldExPRCI6Iks2YiJ9fX0g");vz.sv(KK.Oa(),oA);var LK=/*#__PURE__*/function(){function c(a){var b=a.data.reader,d=a.data.fenceindex,e=b.om().WE();b=b.pa();for(var f=b.la(),g=0;g<d;g++)f+=e[g];a.data.limits=new U({x:f,y:b.ka(),width:e[d],height:b.da()});KK.call(this,a)}D(c,KK);L(c,"geotoolkit3d.scene.seismic.FenceMaterial");c.prototype.setOptions=function(a){null!==this.Ii()&&(this.xmc=!0);KK.prototype.setOptions.call(this,a);return this};return c}();
vz.sv(LK.Oa(),oA);var MK=/*#__PURE__*/va(/*#__PURE__*/function(){function c(a){mz.call(this);a=G(a,{oninvalidate:function(){}});var b=a.data;if(null!=b){for(var d=0;d<b.path.i.length-1;d++)this.add(new JK({data:{path:{i:[b.path.i[d],b.path.i[d+1]],j:[b.path.j[d],b.path.j[d+1]]},index:b.index},material:new LK(G({data:G({fenceindex:d},a.data),overlay:a.overlay},a))}));this.re=b.index}}D(c,mz);L(c,"geotoolkit3d.scene.seismic.Fence");c.prototype.setOptions=function(a){if(null==a)return this;mz.prototype.setOptions.call(this,a);var b=G(a,{});this.children.forEach(function(d){d.setOptions(b)});
this.Xf();return this};c.prototype.ta=function(){return xb(0<this.children.length?this.children[0].ta():{},mz.prototype.ta.call(this))};c.prototype.Jz=function(){return 0<this.children.length?this.children[0].Jz():null};c.prototype.Jnd=function(){return this.children};c.prototype.XV=function(){return this.re};return c}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoidGEiLCJnZXRPdmVybGF5IjoiSnoiLCJnZXRGZW5jZVBhbmVsIjoiSm5kIiwiZ2V0SW5kZXhDb29yZGluYXRlcyI6IlhWIn19fSAg");AA.ig().Bbb(MK.Oa(),function(c){return c.children});var NK=/*#__PURE__*/va(/*#__PURE__*/function(){function c(a){mz.call(this);this.type=this.name="Horizon";this.hR=a.geometrymode;this.aPb=a.seismicvolume;this.pz=a.nullvalue||Number.NaN;this.bWb(a);this.BV=null;this.gJ=new mz;this.setOptions(a);this.ew(this.aPb.ta().displaymode)}D(c,mz);L(c,"geotoolkit3d.scene.seismic.Horizon");c.prototype.setOptions=function(a){if(null==a)return this;mz.prototype.setOptions.call(this,a);a=a||{};if(null!=a.colorprovider)this.BV=a.colorprovider;else{var b=a.values?this.minValue:-this.Pwb,d=a.values?
this.maxValue:-this.Gab===-this.Pwb?-this.Gab+1:-this.Gab;this.BV=dJ.ag().$6a("GreyOrange");this.BV.Lk(b,d)}var e,f=a.elevation?a.elevation.length:0;if(0<f){this.gJ.children=[];d=[];var g=[];for(b=this.Tna;b<=this.CUa;++b)for(e=this.G$;e<=this.Owa;++e)d.push(this.pz),g.push(Number.NaN);for(b=0;b<f;++b)d[(this.Owa-this.G$+1)*(a.xline[b]-this.Tna)+(a.inline[b]-this.G$)]=-a.elevation[b],g[(this.Owa-this.G$+1)*(a.xline[b]-this.Tna)+(a.inline[b]-this.G$)]=null!=a.values?a.values[b]:-a.elevation[b];if("lines"===
this.hR){a=[];var h=[];for(b=this.Tna;b<=this.CUa;++b)for(e=this.G$;e<=this.Owa;++e)a.push(e),h.push(b);e=new mz;f=this.Owa-this.G$+1;for(b=0;b<=this.CUa-this.Tna;b++){for(var k=[],l=a[b*f],m=h[b*f],n=b*f;n<d.length&&"number"===typeof d[n]&&isNaN(d[n]);)n+=1;var p=d[n];k.push(new Lp(l,m,p));m=a[b*f+f-1];p=h[b*f+f-1];for(l=b*f+f-1;0<=l&&"number"===typeof d[l]&&isNaN(d[l]);)--l;var q=d[l];k.push(new Lp(m,p,q));k=(new Aq).setFromPoints(k);this.BV instanceof Pq?l=n=this.BV:"string"===typeof this.BV?(n=
new Pq(this.BV),l=new Pq(this.BV)):(n=new Pq(this.BV.rb(g[n]).fB()),l=new Pq(this.BV.rb(g[l]).fB()));n=n.toArray();l=l.toArray();n=new Float32Array([n[0],n[1],n[2],l[0],l[1],l[2]]);k.attributes.color=new zq(n,3);e.add(new rt(k,new tt({vertexColors:!0})))}h=e}else if("pointcloud"===this.hR){d=[];g=[];for(b=0;b<f;++b)d.push(-a.elevation[b]),null!=a.values?g.push(a.values[b]):g.push(-a.elevation[b]);h=new Pz({data:{x:a.inline,y:a.xline,z:d,sizes:1,values:g},yM:this.BV,owe:1,nwe:5})}else"triangles"===
this.hR&&(b=new bA({data:{elevation:d,width:this.Owa-this.G$+1,height:this.CUa-this.Tna+1,xmin:this.G$,ymin:this.Tna,nullvalue:this.pz,values:g}}),h=new UB({data:{surface:b,nullvalue:this.pz},colorprovider:this.BV}),h.hasOwnProperty("children")&&0<h.children.length&&(h.children[0].material.transparent=!0));if(null==h)throw Error("The geometrymode attribute is invalid");this.gJ.add(h)}return this};c.prototype.ta=function(){return xb({colorprovider:this.BV,geometrymode:this.hR,seismicvolume:this.aPb,
horizoncontainer:this.gJ},mz.prototype.ta.call(this))};c.prototype.bWb=function(a){var b=a.inline,d=a.xline,e=a.elevation;a=a.values;this.G$=b[0];this.Owa=b[0];this.Tna=d[0];this.CUa=d[0];this.Gab=e[0];this.Pwb=e[0];null!=a&&(this.minValue=a[0],this.maxValue=a[0]);for(var f=1;f<b.length;f++)b[f]<this.G$?this.G$=b[f]:b[f]>this.Owa&&(this.Owa=b[f]),d[f]<this.Tna?this.Tna=d[f]:d[f]>this.CUa&&(this.CUa=d[f]),e[f]<this.Gab?this.Gab=e[f]:e[f]>this.Pwb&&(this.Pwb=e[f]),null!=a&&(a[f]<this.minValue?this.minValue=
a[f]:a[f]>this.maxValue&&(this.maxValue=a[f]))};c.prototype.Mod=function(){return this.gJ};c.prototype.ew=function(a){var b=this.gJ.children[0],d=this.aPb,e=d.XV(),f=e.sea().getSize(new Lp).divideScalar(2);f=bz.v9(e.sea(),new uq(f.clone().negate(),f));b.scale.set(1,1,1);b.rotation.set(0,0,0);b.position.set(0,0,0);b.updateMatrix();b.applyMatrix4(f);this.gJ.position.copy(e.sea().getCenter(new Lp));this.gJ.scale.set(1,1,1);this.gJ.rotation.set(0,0,0);a===Cy.vg?(new qC(d.XV(),d.K_b())).FQa(this.gJ):(a=
a===Cy.g0b?1:-1,b.scale.x=b.scale.x*a*V.sign(d.matrix.elements[5]),b.scale.y*=V.sign(d.matrix.elements[0]),b.position.x*=V.sign(b.scale.x),b.position.y*=V.sign(b.scale.y));this.gJ.updateMatrixWorld(!0);this.gJ.Xf()};return c}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoidGEiLCJnZXRIb3Jpem9uT2JqZWN0IjoiTW9kIiwic2V0RGlzcGxheU1vZGUiOiJldyJ9fX0g");var OK=/*#__PURE__*/function(){function c(b){var d=b.index.fua();null==b.grid&&(b.grid={});null==b.grid.linestyles&&(b.grid.linestyles={});b.grid.linestyles=G(b.grid.linestyles,a.clone());b=G(b,{start:new Lp(d.min.x,d.min.y,d.max.z),end:new Lp(d.max.x,d.max.y,d.min.z),modelstart:new Lp(d.min.x,d.min.y,d.max.z),modelend:new Lp(d.max.x,d.max.y,d.min.z),mode:MA.box});NA.call(this,b);this.name="INDEXGRID"}var a={x:new X("transparent"),y:new X("transparent"),z:new X("transparent"),clone:function(){return{x:a.x,y:a.y,
z:a.z}}};D(c,NA);L(c,"geotoolkit3d.scene.seismic.IndexGrid");return c}();var PK=/*#__PURE__*/va(/*#__PURE__*/function(){function c(u){mz.call(this);this.Ljc=ac();this.OO=u.material;this.re=u.index;this.NO=null;this.IDa=this.OO.b$a();this.JDa=this.OO.c$a();this.ym=new $t(this.krb(),this.OO.LFa());this.rz=new Lp;this.jA=new Lp;this.dka=new Lp;this.Bx=null;this.Q$c=this.FQd.bind(this);this.$Lb=Math.round(Math.log2(d));var w=this;this.OO.K6b(this.$Lb).then(function(y){if(y){w.ym.material=y;y=w.OO.b$a();var A=w.OO.c$a();if(w.IDa!==y||w.JDa!==A)w.IDa=y,w.JDa=A,w.ym.geometry.dispose(),w.ym.geometry=w.krb()}}).catch(function(y){rb(y)});
this.NU=h;this.HU=Math.round(Math.log2(qA.MFa()/2));this.OIb=null;this.add(this.ym);this.setOptions(u)}var a=new Lp(0,0,1),b=1E3,d=512,e=512,f=new Lp,g=new Lp,h=Math.round(Math.log2(e));D(c,mz);L(c,"geotoolkit3d.scene.seismic.Slice");c.prototype.setOptions=function(u){if(null==u)return this;mz.prototype.setOptions.call(this,u);this.OO.setOptions(u);u.hasOwnProperty("slicelocation")&&(this.NO=u.slicelocation);u.hasOwnProperty("minlod")&&(this.NU=u.minlod);u.hasOwnProperty("maxlod")&&(this.HU=u.maxlod);
var w=this.OO.b$a(),y=this.OO.c$a(),A=!1;if(this.IDa!==w||this.JDa!==y)this.IDa=w,this.JDa=y,this.ym.geometry.dispose(),this.ym.geometry=this.krb();if(this.NO){w=this.re.fua();y=w.min.x;var x=w.min.y,C=w.min.z,z=w.max.x-y,v=w.max.y-x,B=w.max.z-C;if(null!=this.NO.j)u.hasOwnProperty("xstart")&&(y=u.xstart),u.hasOwnProperty("ystart")&&(C=u.ystart),u.hasOwnProperty("width")&&(z=u.width),u.hasOwnProperty("height")&&(B=u.height),this.$c=z,this.kd=B,this.ERb=y,this.KRb=C,this.rz.set(y,this.NO.j+this.re.Ytb()/
2,C),this.jA.set(y+z,this.NO.j+this.re.Ytb()/2,C),this.dka.set(y,this.NO.j+this.re.Ytb()/2,C+B);else if(null!=this.NO.i)u.hasOwnProperty("xstart")&&(x=u.xstart),u.hasOwnProperty("ystart")&&(C=u.ystart),u.hasOwnProperty("width")&&(v=u.width),u.hasOwnProperty("height")&&(B=u.height),this.$c=v,this.kd=B,this.ERb=x,this.KRb=C,this.rz.set(this.NO.i+this.re.Rtb()/2,x,C),this.jA.set(this.NO.i+this.re.Rtb()/2,x+v,C),this.dka.set(this.NO.i+this.re.Rtb()/2,x,C+B),A=!0;else if(null!=this.NO.z)u.hasOwnProperty("xstart")&&
(y=u.xstart),u.hasOwnProperty("ystart")&&(x=u.ystart),u.hasOwnProperty("width")&&(z=u.width),u.hasOwnProperty("height")&&(v=u.height),this.$c=z,this.kd=v,this.ERb=y,this.KRb=x,this.rz.set(y,x,this.NO.z*this.re.zj()+w.min.z),this.jA.set(y+z,x,this.NO.z*this.re.zj()+w.min.z),this.dka.set(y,x+v,this.NO.z*this.re.zj()+w.min.z);else throw Error("Slice location is not set");}else u.hasOwnProperty("points")&&2<u.points.length&&(this.rz.copy(u.points[0]),this.jA.copy(u.points[1]),this.dka.copy(u.points[2]));
this.XQd(A);this.Xf();this.updateMatrixWorld(!0);return this};c.prototype.ta=function(){var u=this.HP().ta();u.slicelocation=this.NO;u.xstart=this.ERb;u.ystart=this.KRb;u.width=this.$c;u.height=this.kd;u.points=[this.rz,this.jA,this.dka];return xb(u,mz.prototype.ta.call(this))};c.prototype.HP=function(){return this.OO};c.prototype.iTa=function(){return this.NO};c.prototype.Jz=function(){return this.OO.Jz()};c.prototype.sAb=function(u){this.setOptions({overlay:u})};c.prototype.FQd=function(){if(null!=
this.ym&&null!=this.ym.geometry){if(null!=this.OIb){var u=Math.ceil(Math.log2(this.OIb));this.$Lb=V.clamp(u,this.NU,this.HU);var w=this;this.HP().K6b(this.$Lb,this.NU,this.HU).then(function(y){y&&(w.ym.material=y);y=w.OO.b$a();var A=w.OO.c$a();if(w.IDa!==y||w.JDa!==A)w.IDa=y,w.JDa=A,w.ym.geometry.dispose(),w.ym.geometry=w.krb(),w.ym.geometry.yRd=!0,w.ym.geometry.bqe=!0,w.Xf()}).catch(function(y){rb(y)})}this.Bx=null}};var k=new gy,l=new gy,m=new gy,n=new gy,p=new Lp(-.5,-.5,0),q=new Lp(-.5,.5,0),
r=new Lp(.5,.5,0),t=new Lp(.5,.5,0);c.prototype.ai=function(u,w,y,A){u=this.HP();null!=this.Bx&&clearTimeout(this.Bx);A=new Vd;y.getSize(A);var x=1,C=1,z=y=0;p.set(y,z,0);q.set(y,C,0);r.set(x,C,0);t.set(x,z,0);p=this.localToWorld(p);q=this.localToWorld(q);r=this.localToWorld(r);t=this.localToWorld(t);oz.Bpa(p,w,A,k);oz.Bpa(q,w,A,l);oz.Bpa(r,w,A,m);oz.Bpa(t,w,A,n);w=l.distanceTo(m);A=k.distanceTo(n);y=k.distanceTo(m);z=k.distanceTo(l);C=m.distanceTo(n);x=l.distanceTo(n);this.OIb=Math.max(w,A,z,C,y,
x);this.Bx=setTimeout(this.Q$c,b);w=u.ta();w.disposesurface&&u.LFa().forEach(function(v){v.userData.Z$&&(v.userData.Qbb=!1)});ac()!==this.Ljc&&(u.zC(),this.Ljc=ac())};c.prototype.K3=function(){var u=this.HP(),w=u.ta();w.disposesurface&&u.LFa().forEach(function(y){null!=y.userData.Qbb&&(y.map.image=null,delete y.userData.Z$,delete y.userData.Qbb)})};c.prototype.XV=function(){return this.re};c.prototype.dispose=function(){oz.dispose(this.ym);this.OO&&this.OO.dispose();this.re=this.dka=this.jA=this.rz=
this.OO=this.ym=null;mz.prototype.dispose.call(this)};c.prototype.krb=function(){for(var u=new dv(1,1,this.IDa,this.JDa),w=0;w<u.index.count;w+=3)u.addGroup(w,3,Math.floor(w/6));return u};c.prototype.XQd=function(u){this.position.addVectors(this.jA,this.dka).multiplyScalar(.5);var w=this.re.fua();this.position.setZ(w.max.z-this.position.z+w.min.z);this.scale.setX(this.jA.distanceTo(this.rz));this.scale.setY(this.dka.distanceTo(this.rz));f.subVectors(this.jA,this.rz);g.subVectors(this.dka,this.rz);
f.cross(g);f.normalize();g.crossVectors(f,a);g.normalize();bz.Dqc(g,Math.acos(f.dot(a)),this.rotation);u?(this.rotation.y+=Math.PI,this.rotation.z+=Math.PI/2):this.rotation.x+=Math.PI;return this};return c}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoidGEiLCJnZXRTbGljZU1hdGVyaWFsIjoiSFAiLCJnZXRTbGljZUxvY2F0aW9uIjoiaVRhIiwiZ2V0T3ZlcmxheSI6Ikp6IiwiYmVmb3JlUmVuZGVyIjoiYWkiLCJhZnRlclJlbmRlciI6IkszIiwiZ2V0SW5kZXhDb29yZGluYXRlcyI6IlhWIn19fSAg");sA.jzb(PK.Oa(),xC);var QK=/*#__PURE__*/va(/*#__PURE__*/function(){function c(d){mz.call(this);d=G(d,{displaymode:Cy.vg});this.G3=d.xy;this.re=d.index;this.rH=new mz;mz.prototype.add.call(this,this.rH);this.name="SEISMICVOLUME";this.setOptions(d)}var a=new Lp,b=new uq;D(c,mz);L(c,"geotoolkit3d.scene.seismic.Volume");c.prototype.setOptions=function(d){if(null==d)return this;mz.prototype.setOptions.call(this,d);d=G(d,{displaymode:null!=this.te?this.te:Cy.vg});var e=new Lp;this.re.fua().getSize(e);e=e.divideScalar(2);e=bz.v9(this.re.fua(),new uq(e.clone().negate(),
e));this.rH.scale.set(1,1,1);this.rH.rotation.set(0,0,0);this.rH.position.set(0,0,0);this.rH.updateMatrix();this.rH.applyMatrix4(e);d.displaymode===Cy.vg?(this.re.sea().getCenter(this.position),this.scale.set(1,1,1),this.rotation.set(0,0,0),(new qC(this.re,this.G3)).FQa(this)):(this.re.sea().getCenter(this.position),this.scale.set(1,1,1),this.rotation.set(0,0,0),e=d.displaymode===Cy.g0b?1:-1,this.rH.scale.x=this.rH.scale.x*e*V.sign(this.re.sfa().x-this.re.rfa().x),this.rH.scale.y*=V.sign(this.re.sfa().y-
this.re.rfa().y),this.rH.position.x*=V.sign(this.rH.scale.x),this.rH.position.y*=V.sign(this.rH.scale.y));this.updateMatrixWorld(!0);this.te=d.displaymode;this.Xf();return this};c.prototype.ta=function(){return xb({displaymode:this.te},mz.prototype.ta.call(this))};c.prototype.XV=function(){return this.re};c.prototype.K_b=function(){return this.G3};c.prototype.twb=function(d){return this.G3.twb(d)};c.prototype.add=function(d){return this.rH.add(d)};c.prototype.remove=function(d){this.rH.remove(d)};
c.prototype.ADc=function(){return this.rH.children.filter(function(d){return d instanceof PK})};c.prototype.xbd=function(d){var e=this.XV(),f=this.K_b(),g=e.sea().getSize(a).divideScalar(2);b.set(g.clone().negate(),g);var h=bz.v9(e.sea(),b);d.children.forEach(function(k){k.scale.set(1,1,1);k.rotation.set(0,0,0);k.position.set(0,0,0);k.updateMatrix();k.applyMatrix4(h)});d.position.copy(e.sea().getCenter(a));d.scale.set(1,1,1);d.rotation.set(0,0,0);(new qC(e,f)).FQa(d);d.updateMatrixWorld(!0);nc(d,
mz)&&d.Xf()};return c}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRPcHRpb25zIjoidGEiLCJnZXRJbmRleENvb3JkaW5hdGVzIjoiWFYiLCJnZXRYWUNvb3JkaW5hdGVzIjoiS19iIiwiaXNQb2ludEluc2lkZSI6InR3YiIsImdldFNsaWNlcyI6IkFEYyIsImFwcGx5TWF0cml4VG8iOiJ4YmQifX19");var RK=/*#__PURE__*/function(){function c(b){b=G(b,{name:"SeismicSliderTool",snap:function(g,h){h=h.XV();null!=g.i?g.i=a(g.i-h.PH,h.FRb)+h.PH:null!=g.j?g.j=a(g.j-h.HJ,h.LRb)+h.HJ:null!=g.z&&(g.z=a(g.z,h.zj()))},callback:function(g,h,k){g.setOptions({slicelocation:k})}});mC.call(this,b);var d=b.callback;this.z5a=b.volume;var e=b.snap,f=this;this.bRc(function(g,h,k){var l=g.parent;if(l instanceof PK&&null!=l.parent&&l.parent.parent===f.z5a){g=this.lc.JBc();null!=g&&g.length&&g.forEach(function(x){"OutlinePass"===
x.type&&x.enabled&&(x.B6a(),x.V5a(l),f.lc.Xf())});if(2>h.length())return!1;var m=h.x,n=h.y;h=l.iTa();var p=l.XV(),q=new Lp(this.lc.getSize().ca(),this.lc.getSize().da());g=p.sea();var r=0;k={};l.parent.updateMatrixWorld();var t=l.parent.matrixWorld,u=this.lc.project((new Lp).set(g.min.x,g.min.y,-g.min.z).applyMatrix4(t)),w=this.lc.project((new Lp).set(g.max.x,g.min.y,-g.min.z).applyMatrix4(t)),y=this.lc.project((new Lp).set(g.min.x,g.max.y,-g.min.z).applyMatrix4(t)),A=this.lc.project((new Lp).set(g.min.x,
g.min.y,-g.max.z).applyMatrix4(t));t=(new gy((u.x+1)/2,(-u.y+1)/2)).multiply(q);u=new Lp;g.getSize(u);null!=h.i?(w=(new gy(w.x+1,-w.y+1)).multiply(q).divideScalar(2),k.i=h.i,q=Math.abs(w.x-t.x),r=Math.abs(w.y-t.y),p=q>r?1-r/q:q/r,Math.abs(m)>Math.abs(n)?(n=t.x<w.x?1:-1,h.i+=u.x/q*m*n*p):(m=t.y<w.y?1:-1,h.i+=u.x/r*n*m*(1-p)),e(h,l),r=h.i-k.i,h.i=Math.min(Math.max(h.i,g.min.x),g.max.x)):null!=h.j?(w=(new gy(y.x+1,-y.y+1)).multiply(q).divideScalar(2),k.j=h.j,q=Math.abs(w.x-t.x),r=Math.abs(w.y-t.y),p=
q>r?1-r/q:q/r,Math.abs(m)>Math.abs(n)?(n=t.x<w.x?1:-1,h.j+=u.y/q*m*n*p):(m=t.y<w.y?1:-1,h.j+=u.y/r*n*m*(1-p)),e(h,l),r=h.j-k.j,h.j=Math.min(Math.max(h.j,g.min.y),g.max.y)):null!=h.z&&(m=(new gy(A.x+1,-A.y+1)).multiply(q).divideScalar(2),k.z=h.z,h.z+=n*(u.z/p.zj())/Math.abs(m.y-t.y),e(h,l),r=h.z-k.z,h.z=Math.min(Math.max(h.z,0),(-g.min.z+g.max.z)/p.zj()));if(0!==r)return d(l,k,h),!0}return!1})}function a(b,d){return 0<b?Math.ceil(b/d)*d:0}D(c,mC);L(c,"geotoolkit3d.tool.seismic.SeismicSliderTool");
c.prototype.setVolume=function(b){this.z5a=b};return c}();var SK=/*#__PURE__*/va(/*#__PURE__*/function(){function c(g){this.qz=new Map;this.lhc=this.z5a=null;null!=g&&this.setVolume(g)}var a="#000000",b=new Lp,d=new Yt,e=new uq,f=new st;L(c,"geotoolkit3d.util.Seismic");c.prototype.setVolume=function(g){this.z5a=g;this.lhc=g.ta().displaymode};c.prototype.hFa=function(g,h,k){if(h instanceof mz){k=xb(k,{preservecolor:!0,linewidth:6,fillstyle:new rf("red")});h&&h.ta&&(k.preservecolor=null!=h.ta().colorprovider);var l=!1,m=!1;h.traverse(function(n){if(n.Oa)if("geotoolkit3d.scene.reservoir.hexahedral.ReservoirGrid"===
n.Oa())l=!0;else if(n instanceof sB||n instanceof NK)m=!0});l?this.Jea(g,h,k):m?this.Kea(g,h,k):hb("geotoolkit3d.util.seismic: does not support this type of object.")}else hb("geotoolkit3d.util.seismic: does not support this type of object.")};c.prototype.Jea=function(g,h,k){var l=k.preservecolor,m=g.iTa(),n=m.hasOwnProperty("z"),p=g.children[0];null==p.geometry.boundingBox&&p.geometry.computeBoundingBox();var q=p.geometry.boundingBox.clone(),r=p.localToWorld(q.min.clone()),t=p.localToWorld(q.max.clone());
h.worldToLocal(r);h.worldToLocal(t);var u=g.ta().data.limits;m=[];var w=[];var y=this.dma(p,h);y=this.lsd(y,h,l,n);var A=y.coordinates;y=y.colors;var x=u.ca();u=u.da();if(n)for(d.copy(p.matrixWorld).invert(),n=0;n<A.length;++n){var C=[];var z=[];for(p=0;p<A[n].length;p+=3){var v=A[n];b.set(v[p],v[p+1],v[p+2]);b.applyMatrix4(h.matrixWorld);b.applyMatrix4(d);r=b.x/(q.max.x-q.min.x)-q.min.x;t=b.y/(q.max.y-q.min.y)-q.min.y;C.push(r*x);z.push((1-t)*u)}m.push(C);w.push(z)}else for(x=(q=Math.abs(t.x-r.x)>
Math.abs(t.y-r.y))?x/(t.x-r.x):x/(t.y-r.y),u=u/(t.z-r.z)/g.XV().zj(),n=0;n<A.length;++n){C=[];z=[];for(p=0;p<A[n].length;p+=3)v=A[n],C.push((q?v[p+0]-r.x:v[p+1]-r.y)*x),z.push((t.z-v[p+2])*u);m.push(C);w.push(z)}w={coordinates:{x:m,y:w},fillstyle:k.fillstyle};if(l&&Array.isArray(y)&&0<y.length){k=h.ta().colorprovider;l=[];for(A=0;A<m.length;++A)r=new rf(k.rb(y[A])),l.push(r);w.fillstyle=l}else w.fillstyle=Array(m.length).fill(k.fillstyle);this.Sj(w,g,h)};c.prototype.lsd=function(g,h,k,l){function m(w,
y){for(var A=w.x,x=w.y,C=w.z,z=[],v=0;v<t.length;++v)f.start.set(A[t[v][0]],x[t[v][0]],C[t[v][0]]),f.end.set(A[t[v][1]],x[t[v][1]],C[t[v][1]]),y.intersectsLine(f)&&(y.intersectLine(f,b),z.push(b.x,b.y,b.z));q.push(z);k&&r.push(w.value)}var n=h.ta().data,p=n.eZb();p=p.W4b(g);var q=[],r=[],t=l?[[0,4],[0,2],[4,6],[2,6],[2,3],[6,7],[3,7],[1,3],[5,7],[1,5],[0,1],[4,5]]:[[0,2],[0,1],[2,3],[1,3],[1,5],[3,7],[5,7],[6,7],[4,5],[4,6],[2,6],[0,4]];for(l=0;l<p.length;++l){var u=p[l];u=n.sva(u[0],u[1],u[2]);h.aGc(u)||
(u=n.byc(u,e),e.intersectsPlane(g)&&m(u,g))}return{coordinates:q,colors:r}};c.prototype.Kea=function(g,h,k){var l=k.preservecolor,m=g.iTa(),n=m.hasOwnProperty("z"),p=g.children[0];null==p.geometry.boundingBox&&p.geometry.computeBoundingBox();var q=p.geometry.boundingBox.clone(),r=p.localToWorld(q.min.clone()),t=p.localToWorld(q.max.clone());h.worldToLocal(r);h.worldToLocal(t);var u=g.ta().data.limits,w=[],y=[];if(n){var A=new Lp,x=new Lp;var C=p.geometry;var z=C.getAttribute("position");C=C.getIndex().getX(0);
p.localToWorld(A.set(z.getX(C),z.getY(C),z.getZ(C)));C=h.ta();if(Number.isFinite(C.zmin)&&Number.isFinite(C.zmax)&&(z=h.localToWorld(new Lp(0,0,C.zmin)).z,C=h.localToWorld(new Lp(0,0,C.zmax)).z,A.z<z||A.z>C)){this.iT(g,h);return}C=this.YVb(A.z,h,l);var v=C.coordinates;z=C.colors;for(m=0;m<v.length;m++)x.set(v[m].x,v[m].y,A.z),p.worldToLocal(x),r=x.x/(q.max.x-q.min.x)-q.min.x,t=x.y/(q.max.y-q.min.y)-q.min.y,w.push(r*u.width),y.push((1-t)*u.height)}else{z=this.dma(p,h);C=this.Ltd(z,h,l);v=C.coordinates;
z=C.colors;p=u.ca();q=u.da();p=(u=Math.abs(t.x-r.x)>Math.abs(t.y-r.y))?p/(t.x-r.x):p/(t.y-r.y);q=q/(t.z-r.z)/g.XV().zj();for(var B=0;B<v.length;B++){var E=v[B];w.push((u?E[0]-r.x:E[1]-r.y)*p);y.push((t.z-E[2])*q)}m.hasOwnProperty("j")&&this.lhc===Cy.f0b&&w.reverse();u=[];for(v=0;v<w.length;v++)p=[w[v],y[v]],l&&p.push(z[v]),u.push(p);u.sort(function(H,F){return H[0]-F[0]});w=[];y=[];z=[];for(v=0;v<u.length;v++)A!==u[v][0]&&x!==u[v][1]&&(w.push(u[v][0]),y.push(u[v][1]),l&&z.push(u[v][2]),A=u[v][0],
x=u[v][1])}k={coordinates:{x:w,y:y},fillstyle:k.fillstyle,linewidth:k.linewidth};if(l&&void 0!==C.colors){l=[];for(y=0;y<w.length;y++)l.push([(w[y]-w[0])/(w[w.length-1]-w[0]),z[y]]);k.fillstyle=this.S7a(l)}this.nm(k,g,h,n)};c.prototype.YVb=function(g,h,k){var l=[],m=h.ta().colorprovider,n,p=h.ta().data;null!=p&&null!=p.values?n=p.values:k=!1;var q=h.children[0].geometry,r=q.attributes.position,t=r.array;p=[];if(r instanceof Xs){var u=r.data.stride,w=r.offset;r=r.itemSize;for(var y=0;y<t.length;y++)y%
u<w||y%u>=w+r||p.push(t[y])}else p=t;t=[];u=q.index.array;q=q.getIndex();for(w=0;w<u.length;w+=3){y=3*u[w];var A=3*u[w+1];r=3*u[w+2];y=new Lp(p[y],p[y+1],p[y+2]);A=new Lp(p[A],p[A+1],p[A+2]);r=new Lp(p[r],p[r+1],p[r+2]);h.localToWorld(y);h.localToWorld(A);h.localToWorld(r);r=new LB([y.x,y.y,y.z],[A.x,A.y,A.z],[r.x,r.y,r.z],g);r.R0b()&&r.qwb()&&(t.push(r.qYb(),r.IZb()),k&&(r=q.getX(w),r=m.rb(n[r]),r=r.Nl(),l.push(r,r)))}return g={coordinates:t,colors:l}};c.prototype.Ltd=function(g,h,k){function l(v,
B,E,H,F){for(var I=0;I<t.length;I++){var J=t[I];v[J[0]]!==v[J[1]]&&(f.start.set(v[J[0]],B[J[0]],E[J[0]]),f.end.set(v[J[1]],B[J[1]],E[J[1]]),F.intersectsLine(f)&&(F.intersectLine(f,b),q.push([b.x,b.y,b.z]),k&&(J=(m[H[J[1]]]*(b.x-v[J[0]])+m[H[J[0]]]*(v[J[1]]-b.x))/(v[J[1]]-v[J[0]]),r.push(p.rb(J).Nl()))))}}var m,n=h.ta().data,p=h.ta().colorprovider;null!=n&&null!=n.values?m=n.values:k=!1;var q=[],r=[];n=h.children[0];h=n.geometry.getIndex();n=n.geometry.getAttribute("position");for(var t=[[0,1],[1,
2],[2,0]],u=0;u<h.count;u+=3){var w=h.getX(u),y=h.getY(u),A=h.getZ(u),x=[n.getX(w),n.getX(y),n.getX(A)],C=[n.getY(w),n.getY(y),n.getY(A)],z=[n.getZ(w),n.getZ(y),n.getZ(A)];w=[w,y,A];l(x,C,z,w,g)}return g={coordinates:q,colors:r}};c.prototype.S7a=function(g){if(0===g.length)return null;for(var h=new ng({startColor:g[0][1]||a,endColor:g[g.length-1][1]||a,startPoint:new M(0,0),endPoint:new M(1,0)}),k=1;k<g.length-1;k++)h.$n(g[k][0],g[k][1]||a);return h};c.prototype.Sj=function(g,h,k){var l=h.HP().Jz();
null==l&&(l=new oi,h.setOptions({overlay:l}));var m=h.uuid+k.uuid;this.qz.has(m)&&this.iT(h,k);this.qz.set(m,[]);k=g.coordinates.x;var n=g.coordinates.y,p=g.fillstyle;for(g=0;g<k.length;g++)if(!(3>k[g].length)){3<k[g].length&&V.a9b(k[g],n[g]);var q=new Vm({x:k[g],y:n[g],fillstyle:p[g]});l.OJ(q);this.qz.get(m).push(q)}h.HP().zC(null,null,!0)};c.prototype.nm=function(g,h,k,l){var m=h.HP().Jz();null==m&&(m=new oi,h.setOptions({overlay:m}));var n=h.uuid+k.uuid;this.qz.has(n)&&this.iT(h,k);this.qz.set(n,
[]);k=g.coordinates.x;var p=g.coordinates.y;if(l){var q=new go;for(l=0;l<k.length/2;l++){var r=2*l,t=2*l+1;q.add([k[r],k[t]],[p[r],p[t]])}q.ra(new X({width:g.linewidth,fill:g.fillstyle}))}else q=new $n({x:k,y:p,visible:!0,linestyle:new X({width:g.linewidth,fill:g.fillstyle})});m.OJ(q);this.qz.get(n).push(q);h.HP().zC(null,null,!0)};c.prototype.iT=function(g,h){h=g.uuid+h.uuid;this.qz.has(h)&&(h=this.qz.get(h),g=g.HP().Jz(),null!=g&&g.iT(h))};c.prototype.hGd=function(){function g(l,m){var n=l.HP().Jz();
null!=n&&m.forEach(function(p){n.iT(p)})}var h=this.z5a.ADc();if(null!=h){for(var k=0;k<h.length;k++)g(h[k],this.qz),h[k].HP().zC(null,null,!0);this.qz=new Map}};c.prototype.Mqe=function(g){var h=new Lp,k=new Lp,l=new Lp,m=new bv,n=g.geometry,p=n.getAttribute("position"),q=n.getIndex();n=q.getX(0);var r=q.getY(0);q=q.getZ(0);g.localToWorld(h.set(p.getX(n),p.getY(n),p.getZ(n)));g.localToWorld(k.set(p.getX(r),p.getY(r),p.getZ(r)));g.localToWorld(l.set(p.getX(q),p.getY(q),p.getZ(q)));m.setFromCoplanarPoints(h,
k,l);return m};c.prototype.dma=function(g,h){var k=new Lp,l=new Lp,m=new Lp,n=new bv,p=g.geometry,q=p.getAttribute("position"),r=p.getIndex();p=r.getX(0);var t=r.getY(0);r=r.getZ(0);g.localToWorld(k.set(q.getX(p),q.getY(p),q.getZ(p)));g.localToWorld(l.set(q.getX(t),q.getY(t),q.getZ(t)));g.localToWorld(m.set(q.getX(r),q.getY(r),q.getZ(r)));h.worldToLocal(k);h.worldToLocal(l);h.worldToLocal(m);n.setFromCoplanarPoints(k,l,m);return n};return c}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZW5lcmF0ZUludGVyc2VjdGlvbiI6ImhGYSIsInJlbW92ZU92ZXJsYXkiOiJpVCIsInJlbW92ZU92ZXJsYXlGcm9tU2xpY2VzIjoiaEdkIn19fSAg");var BY=/*#__PURE__*/va(/*#__PURE__*/function(){function c(){this.hq=[]}L(c,"geotoolkit3d.schematics.layout.AbstractAnnotationLayout");c.prototype.hla=function(a){this.hq.push(a);this.oc()};c.prototype.wga=function(a){a=this.hq.indexOf(a);-1!==a&&this.hq.splice(a,1);this.oc()};c.prototype.dispose=function(){this.hq.length=0};c.prototype.hKb=function(){return this.hq};c.prototype.oc=Fb;c.prototype.b8a=function(){return Hg.gi(this.hq)};c.prototype.wkd=function(){return this.hq.length};c.prototype.bb=function(a){return this.hq[a]};
return c}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJsYXlvdXQiOiJvYyIsImdldEFubm90YXRpb25zIjoiYjhhIiwiZ2V0QW5ub3RhdGlvbnNDb3VudCI6IndrZCIsImdldEFubm90YXRpb24iOiJiYiJ9fX0g");var CY=/*#__PURE__*/va(/*#__PURE__*/function(){function c(){BY.call(this)}D(c,BY);L(c,"geotoolkit3d.schematics.layout.DefaultAnnotationLayout");c.prototype.oc=function(){this.hKb().forEach(function(a){a.dcb(null)})};return c}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJsYXlvdXQiOiJvYyJ9fX0g");var DY=/*#__PURE__*/va(/*#__PURE__*/function(){function c(){sC.call(this);this.Vy("path",l);this.Vy("casing",k);this.Vy("tubing",h);this.Vy("cement",g);this.Vy("nipple",f);this.Vy("packer",e);this.Vy("valve",d);this.Vy("perforation",b);this.Vy("plug cement",a)}function a(K,N){K=r(K,N);K.colorprovider=N.data.colorprovider||H;K.annotation=N.data.annotation;q(N,K);return p(K,N)}function b(K,N){K=r(K,N);K.colorprovider=N.data.colorprovider||E;K.annotation=N.data.annotation;K.closed=!0;q(N,K);return p(K,N)}function d(K,N){K=r(K,N);
K.colorprovider=null!=N.data.colorprovider?N.data.colorprovider:B;K.annotation=N.data.annotation;q(N,K);return p(K,N)}function e(K,N){var P=N.data.geometry.diameter.outer,Q=N.data.geometry.depth.from,R=N.data.geometry.depth.to,Y=[];Y.push({radius:3*P/4,depth:Q});Y.push({radius:3*P/4,depth:Q+(R-Q)/9});Y.push({radius:5*P/8,depth:Q+(R-Q)/9+V.Qb});Y.push({radius:5*P/8,depth:Q+2*(R-Q)/9});Y.push({radius:P,depth:Q+(R-Q)/3});Y.push({radius:P,depth:Q+2*(R-Q)/3});Y.push({radius:5*P/8,depth:Q+7*(R-Q)/9});Y.push({radius:5*
P/8,depth:Q+8*(R-Q)/9});Y.push({radius:3*P/4,depth:Q+8*(R-Q)/9+V.Qb});Y.push({radius:3*P/4,depth:R});K=r(K,N,Y);K.colorprovider=null!=N.data.colorprovider?N.data.colorprovider:v;K.annotation=N.data.annotation;K.radiusmin=0;K.radiusmax=P/2;K.size=1;return p(K,N)}function f(K,N){K=r(K,N);K.colorprovider=null!=N.data.colorprovider?N.data.colorprovider:z;K.annotation=N.data.annotation;q(N,K);return p(K,N)}function g(K,N){K=r(K,N);K.colorprovider=null!=N.data.colorprovider?N.data.colorprovider:C;K.annotation=
N.data.annotation;q(N,K);return p(K,N)}function h(K,N){K=r(K,N);K.colorprovider=null!=N.data.colorprovider?N.data.colorprovider:x;K.annotation=N.data.annotation;q(N,K);return p(K,N)}function k(K,N){var P=r(K,N);P.colorprovider=null!=N.data.colorprovider?N.data.colorprovider:A;q(N,P);K=new mz;!1===N.data.casing&&(P.tubevisible=!1);var Q=p(P,N);K.add(Q);null!=N.data.annotation&&(!1!==N.data.casingshoe&&1<P.data.x.length?(K.add(m(P,N)),P=Q.ta().data.z,Q.jX(new eB(N.data.annotation),P[P.length-1])):Q.jX(new eB(N.data.annotation)));
return K}function l(K,N){K=r(K,N);var P={};null!=N.data.colorprovider?(K.colorprovider=N.data.colorprovider,K.colorprovider instanceof Oo?P.vertexColors=!0:P.color=K.colorprovider):P.color=x;N=new rt(new rD(K),new tt(P));N.position.set(K.data.origin.x,K.data.origin.y,K.data.origin.z);return N}function m(K,N){var P=N.data.casingshoesize||y,Q=N.data.casingshoesize||y,R=K.size/Q;K.radius=Q;K.offset=R;Q=[];var Y=K.data.x,ca=K.data.y,ea=K.data.z;I.set(Y[Y.length-1],ca[ca.length-1],ea[ea.length-1]);for(var ua=
!1,Ga=0;Ga<ea.length;Ga++){F.set(Y[Ga],ca[Ga],ea[Ga]);var Aa=F.distanceTo(I);Aa<P?(ua||(J.set(Y[Ga-1],ca[Ga-1],ea[Ga-1]),J.subVectors(J,F).normalize().multiplyScalar(P-Aa).add(F),Number.isNaN(J.x)||Number.isNaN(J.y)||Number.isNaN(J.z)||(Y.splice(Ga,0,J.x),ca.splice(Ga,0,J.y),ea.splice(Ga,0,J.z),Q.push(0),Ga++),ua=!0),Q.push(1-Aa/P)):Q.push(0)}K.data.curvevalues1=Q;P=new mz;P.add(n(K,N));K.offset=-R;P.add(n(K,N));return P}function n(K,N){var P=new zD(K);P.position.set(K.data.origin.x,K.data.origin.y,
K.data.origin.z);null==N.data.side&&(N.data.side=Gr);null==N.data.opacity&&(N.data.opacity=.5);P.children[0].material.opacity=N.data.opacity;P.children[0].material.side=N.data.side;return P}function p(K,N){var P=new ED(K);P.position.set(K.data.origin.x,K.data.origin.y,K.data.origin.z);null==N.data.side&&(N.data.side=Gr);K.tubevisible&&(P.children[0].material.opacity=null!=N.data.opacity?N.data.opacity:.5,1>P.children[0].material.opacity&&N.data.side===Gr?(N=new ED(K),N.children[0].material.opacity=
P.children[0].material.opacity,P.children[0].material.side=ms,N.children[0].material.side=mq,P.children[0].material.transparent=N.children[0].material.transparent=!0,N.children[0].renderOrder=-K.size,P.children[0].renderOrder=K.size,P.add(N)):P.children[0].material.side=N.data.side);K.annotation&&P.jX(new eB(K.annotation));!1===K.tubevisible&&P.remove(P.children[0]);return P}function q(K,N){N.size=w*K.radiusscaling;null!=K.data.geometry.diameter.outer?N.size=K.data.geometry.diameter.outer*K.radiusscaling:
null!=K.data.geometry.diameter.inner&&(N.size=K.data.geometry.diameter.inner*K.radiusscaling);N.size*=u}function r(K,N,P){var Q={},R=K.yf(),Y=K.ng();null!=N.data.geometry&&null!=N.data.geometry.depth&&(null!=N.data.geometry.depth.from&&(R=N.data.geometry.depth.from),null!=N.data.geometry.depth.to&&(Y=N.data.geometry.depth.to));Q.data=K.Eyc(R,Y,P);null!=N.data.value&&(Q.data.values=K.FEc(N.data.value,R,Y,P));return Q}var t=null,u=.5,w=50,y=50,A="red",x="lightblue",C="lightgray",z="pink",v="yellow",
B="black",E="blue",H="gray",F=new Lp,I=new Lp,J=new Lp;D(c,sC);L(c,"geotoolkit3d.schematics.factory.Trajectory");c.web=function(K,N,P){var Q=K.yf();K=K.ng();null!=N.data.geometry&&null!=N.data.geometry.depth&&(null!=N.data.geometry.depth.from&&(N.data.geometry.depth.from<Q&&(N.data.geometry.depth.from=Q),N.data.geometry.depth.from>K&&(N.data.geometry.depth.from=K)),null!=N.data.geometry.depth.to&&(N.data.geometry.depth.to>K&&(N.data.geometry.depth.to=K),N.data.geometry.depth.to<Q&&(N.data.geometry.depth.to=
Q)));N.radiusscaling=P};c.ya=function(){t||(t=new c);return t};return c}(),2,"eyJnZXRJbnN0YW5jZSI6InlhIn0g");var EY=/*#__PURE__*/va(/*#__PURE__*/function(){function c(d){mz.call(this);d=G(d,{data:null,radiusscaling:1});this.ft=d.data;this.xOb=d.radiusscaling;this.dca=d.components;null!=this.ft&&null!=this.ft.getX(0)&&null!=this.ft.getY(0)&&null!=this.ft.getZ(0)&&this.position.set(this.ft.getX(0),this.ft.getY(0),this.ft.getZ(0));this.b_a=[];this.$T=[];this.Nba=[];this.pLa=[];this.d_a=d.annotationlayout||new CY;this.hq=[];this.sU=[];var e=this;this.f$b=function(f){e.web(f);if(null==f["static"]||!0!==f["static"]){var g=e.getObjectById(f.id);
null==g?e.ZTb(f):g.parameters!==JSON.stringify(f)&&e.rQd(f,g)}};this.dca.Mr().forEach(function(f){e.ZTb(f)});this.tlc=function(f,g,h){e.ZTb(h)};this.$lc=function(f,g,h){null!=h&&e.f$b(h)};this.Llc=function(f,g,h){e.w4b(h)};this.dca.on(Ho.CN,this.tlc);this.dca.on(Ho.lw,this.$lc);this.dca.on(Ho.uF,this.Llc)}var a=new Lp,b=new Lp;D(c,mz);L(c,"geotoolkit3d.scene.schematics.SchematicsNode");c.prototype.dispose=function(){this.dca.za(Ho.CN,this.tlc);this.dca.za(Ho.lw,this.$lc);this.dca.za(Ho.uF,this.Llc);
mz.prototype.dispose.call(this)};c.prototype.w4b=function(d){var e=d;null==d.length&&(e=[d]);var f=[],g=this;e.forEach(function(h){if(null!==h.id){if(g.sU&&g.sU[h.id]){if(0<g.$T.length)for(var k=g.sU[h.id],l=0;l<g.$T.length;l++)f.includes(l)||k===g.$T.x&&f.push(l);delete g.sU[h.id]}k=g.getObjectById(h.id);g.u4b(k);g.remove(k);oz.dispose(k);h.id=null}});f.forEach(function(h){g.X9b(h)})};c.prototype.ZTb=function(d){this.web(d);if(null==d.id){var e=DY.ya().createElement(this.ft,d);null!=e&&(this.PRb(e),
this.add(e))}else{var f=this.getObjectById(d.id);f.parameters!==JSON.stringify(d)&&(e=DY.ya().createElement(this.ft,d),null!=e&&(this.PRb(e),this.add(e)),this.u4b(f),this.remove(f),oz.dispose(f))}this.lsc(d)};c.prototype.rQd=function(d,e){this.web(d);var f=DY.ya().BQd(this.ft,d,e);null!==f&&(null!=f&&(this.PRb(f),this.add(f)),this.u4b(e),this.remove(e),oz.dispose(e));this.lsc(d)};c.prototype.web=function(d){DY.web(this.ft,d,this.xOb);return null};c.prototype.ai=function(){this.dca.Mr().forEach(this.f$b)};
c.prototype.bb=function(){hb("SchematicsNode.getAnnotation was deprecated since 3.3, use SchematicsNode.getAnnotations instead");return this.hq[0]};c.prototype.b8a=function(){return this.hq};c.prototype.jX=function(d,e){hb("SchematicsNode.setAnnotation was deprecated since 3.3, use SchematicsNode.setAnnotations instead");return this.ANc([d],[e])};c.prototype.ANc=function(d,e){var f=this;this.hq.forEach(function(k){f.remove(k)});this.hq.length=0;this.b_a.length=0;this.$T.length=0;this.Nba.length=0;
this.pLa.length=0;this.sU={};for(var g=0;g<d.length;g++){this.hq.push(d[g]);var h=e&&e[g];this.nT(null!=h?h:.5*(this.ft.getZ(0)+this.ft.getZ(this.ft.count()-1)),g);this.add(d[g])}return this};c.prototype.X9b=function(d){var e=0,f;for(f in this.sU)e=Math.max(e,this.sU[f]);this.$T[d]=this.$T[d]||new Lp(0,0,1);this.$T[d].setX(e).setY(e);this.Nba[d]=this.Nba[d]||new Vr;this.hq[d].mcb(this.$T[d],this.Nba[d])};c.prototype.nT=function(d,e){d=V.findIndex(d,this.ft.Evd(),null,null,function(h,k){return k-h})||
1;0>d&&(d=~d);this.b_a[e]=this.b_a[e]||new Lp;this.b_a[e].set((this.ft.getX(d-1)+this.ft.getX(d))/2+this.ft.p_().x,(this.ft.getY(d-1)+this.ft.getY(d))/2+this.ft.p_().y,(this.ft.getZ(d-1)+this.ft.getZ(d))/2+this.ft.p_().z);this.pLa[e]=(this.ft.Sb(d-1)+this.ft.Sb(d))/2;var f=this,g=this.dca.Mr();g.forEach(function(h){h.data.geometry&&h.data.geometry.depth.from<=f.pLa[e]&&h.data.geometry.depth.to>=f.pLa[e]&&(f.sU[h.id]=h.data.geometry.diameter.outer||h.data.geometry.diameter.inner)});this.X9b(e);a.set(this.ft.getX(d-
1),this.ft.getY(d-1),this.ft.getZ(d-1));a.set(this.ft.getX(d),this.ft.getY(d),this.ft.getZ(d));b.sub(a).normalize();a.set(-1,0,0);a.crossVectors(b,a).normalize();this.Nba[e]=this.Nba[e]||new Vr;this.Nba[e]=bz.p7a(a,b,this.Nba[e]);this.hq[e].OVa(this.b_a[e]);this.hq[e].mcb(this.$T[e],this.Nba[e]);return this};c.prototype.lsc=function(d){for(var e=this,f=[],g=0;g<this.hq.length;g++)if(d.data.geometry&&d.data.geometry.depth&&d.data.diameter&&d.data.geometry.depth.from<=this.pLa[g]&&d.data.geometry.depth.to>=
this.pLa[g]){var h=d.data.geometry.diameter.outer||d.data.geometry.diameter.inner,k=!1;this.sU[d.id]!==h&&this.sU[d.id]===this.$T[g].x&&(k=!0);h>this.$T[g].x&&(this.$T[g].setX(h).setY(h),this.hq[g].mcb(this.$T[g],this.Nba[g]),k=!1);this.sU[d.id]=h;k&&f.push(g)}else this.sU[d.id]&&(this.sU[d.id]===this.$T[g].x&&f.push(g),delete this.sU[d.id]);f.forEach(function(l){e.X9b(l)})};c.prototype.setOptions=function(d){if(null==d)return this;mz.prototype.setOptions.call(this,d);if(d.hasOwnProperty("radiusscaling")){this.xOb=
d.radiusscaling;var e=this;this.dca.Mr().forEach(function(f){e.f$b(f)})}return this};c.prototype.ta=function(){return xb({radiusscaling:this.xOb},mz.prototype.ta.call(this))};c.prototype.u_b=function(){return this.ft};c.prototype.PRb=function(d){var e=this;d.traverse(function(f){f instanceof eB&&e.d_a.hla(f)})};c.prototype.u4b=function(d){var e=this;d.traverse(function(f){f instanceof eB&&e.d_a.wga(f)})};c.prototype.PVa=function(d){var e=this.d_a.hKb();e.forEach(function(f){d.hla(f)});this.d_a.dispose();
this.d_a=d;this.Xf();return this};return c}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJnZXRBbm5vdGF0aW9uIjoiYmIiLCJnZXRBbm5vdGF0aW9ucyI6ImI4YSIsInNldEFubm90YXRpb24iOiJqWCIsInNldEFubm90YXRpb25zIjoiQU5jIiwiZ2V0T3B0aW9ucyI6InRhIiwiZ2V0VHJhamVjdG9yeURhdGEiOiJ1X2IiLCJzZXRBbm5vdGF0aW9uTGF5b3V0IjoiUFZhIn19fSAg");var FY=/*#__PURE__*/va(/*#__PURE__*/function(){function c(){BY.call(this)}var a=new uq,b=new Lp,d=new Lp;D(c,BY);L(c,"geotoolkit3d.schematics.layout.ExpandedAnnotationLayout");c.prototype.oc=function(){var e=this.hKb();if(0!==e.length){e.sort(function(k,l){var m=k.Hx(),n=l.Hx();null==m&&(a.makeEmpty(),a.expandByObject(k.parent),m=b,a.getCenter(m));null==n&&(a.makeEmpty(),a.expandByObject(l.parent),n=d,a.getCenter(n));return m.z-n.z});var f=Number.POSITIVE_INFINITY,g=Number.NEGATIVE_INFINITY;e.forEach(function(k){f=Math.min(f,
k.Hx().z);g=Math.max(g,k.Hx().z)});if(1===e.length)e[0].dcb(new Lp(0,0,f));else{e[0].dcb(new Lp(0,0,f));for(var h=1;h<e.length-1;h++)e[h].dcb(new Lp(0,0,f+(g-f)*h/(e.length-1)));e[e.length-1].dcb(new Lp(0,0,g))}}};return c}(),2,"eyJwcm90b3R5cGUiOnsicyI6MCwiYyI6eyJsYXlvdXQiOiJvYyJ9fX0g");export {By,Jp,Kp,Lp,Mp,Np,Op,Pp,Qp,Rp,Sp,Tp,Up,Vp,Wp,Xp,Yp,Zp,$p,aq,bq,cq,dq,eq,fq,gq,hq,iq,jq,kq,lq,mq,nq,oq,pq,qq,rq,sq,tq,uq,vq,wq,xq,yq,zq,Aq,Bq,Cq,Dq,Eq,Fq,Gq,Hq,Iq,Jq,Kq,Lq,Mq,Nq,Oq,Pq,Qq,Rq,Sq,Tq,Uq,Vq,Wq,Xq,Yq,Zq,$q,br,cr,dr,er,fr,gr,hr,ir,kr,lr,mr,nr,or,pr,qr,rr,sr,tr,ur,vr,wr,xr,yr,zr,Ar,Br,Cr,Dr,Er,Fr,Gr,Hr,Ir,Jr,Kr,Lr,Mr,Nr,Or,Pr,Qr,Sr,Tr,Ur,Vr,Wr,Xr,Yr,Zr,$r,as,bs,cs,ds,es,fs,gs,hs,is,js,ks,ls,ms,ns,os,ps,qs,rs,ss,ts,us,vs,ws,xs,ys,zs,As,Bs,Cs,Ds,Es,Fs,Gs,Hs,Is,Js,Ks,Ls,Ms,Ns,Os,Ps,Qs,Rs,Ss,Ts,Us,Vs,Ws,Xs,Ys,Zs,$s,at,bt,ct,dt,et,ft,gt,ht,it,jt,kt,lt,mt,nt,ot,pt,qt,rt,st,tt,ut,vt,wt,xt,yt,zt,At,Bt,Ct,Dt,Et,Ft,Ht,It,Jt,Kt,Lt,Mt,Nt,Ot,Pt,Qt,Rt,St,Tt,Ut,Vt,Wt,Xt,Yt,Zt,$t,au,bu,cu,du,eu,fu,gu,hu,iu,ju,ku,lu,mu,nu,ou,pu,qu,ru,su,tu,uu,vu,wu,xu,yu,zu,Au,Bu,Cu,Du,Eu,Fu,Hu,Iu,Ju,Ku,Lu,Mu,Nu,Ou,Pu,Qu,Ru,Su,Tu,Uu,Vu,Wu,Xu,Yu,Zu,$u,av,bv,cv,dv,ev,fv,gv,hv,iv,jv,kv,lv,mv,nv,ov,pv,qv,rv,sv,tv,uv,vv,wv,xv,yv,zv,Av,Bv,Cv,Dv,Ev,Fv,Gv,Hv,Iv,Jv,Kv,Lv,Mv,Nv,Ov,Pv,Qv,Rv,Sv,Tv,Uv,Vv,Wv,Xv,Yv,Zv,$v,aw,bw,cw,dw,ew,fw,gw,hw,iw,jw,kw,lw,mw,nw,ow,pw,qw,rw,sw,tw,uw,vw,ww,xw,yw,zw,Aw,Bw,Cw,Dw,Ew,Fw,Gw,Hw,Iw,Jw,Kw,Lw,Mw,Nw,Ow,Pw,Qw,Rw,Sw,Tw,Uw,Vw,Ww,Xw,Yw,Zw,$w,ax,bx,cx,dx,ex,fx,gx,hx,ix,jx,kx,lx,mx,nx,ox,px,qx,rx,sx,tx,ux,vx,wx,xx,yx,zx,Ax,Bx,Cx,Dx,Ex,Fx,Gx,Hx,Ix,Jx,Kx,Lx,Mx,Nx,Ox,Px,Qx,Rx,Sx,Tx,Ux,Vx,Wx,Xx,Yx,Zx,$x,ay,by,cy,dy,ey,fy,gy,hy,iy,jy,ky,ly,my,ny,oy,py,qy,ry,sy,ty,uy,vy,wy,xy,yy,zy,Ay,Cy,Dy,Ey,Fy,Gy,Hy,Iy,Jy,Ly,My,Oy,Py,Qy,Ry,Sy,Ty,Vy,Wy,Xy,Yy,Zy,$y,bz,cz,dz,ez,fz,gz,iz,jz,kz,lz,mz,nz,oz,pz,qz,rz,sz,tz,vz,wz,xz,yz,zz,Az,Bz,Dz,Ez,Fz,Gz,Hz,Iz,Jz,Kz,Lz,Mz,Nz,Oz,Pz,Rz,Sz,Tz,Uz,Vz,Wz,Xz,Yz,Zz,$z,aA,bA,cA,dA,eA,fA,gA,hA,iA,jA,kA,lA,mA,nA,oA,pA,qA,rA,sA,tA,uA,vA,wA,xA,yA,zA,AA,BA,CA,DA,EA,FA,GA,HA,IA,JA,KA,LA,MA,NA,PA,QA,RA,TA,UA,VA,WA,XA,YA,ZA,$A,bB,cB,dB,eB,gB,hB,iB,jB,kB,lB,mB,nB,oB,pB,qB,rB,sB,tB,uB,vB,wB,FB,GB,HB,JB,KB,LB,MB,NB,OB,PB,QB,RB,SB,TB,UB,VB,WB,XB,YB,$B,aC,bC,cC,dC,eC,fC,gC,hC,iC,kC,lC,mC,nC,pC,qC,rC,sC,tC,uC,vC,wC,xC,yC,zC,AC,BC,CC,DC,EC,FC,HC,IC,JC,KC,LC,MC,NC,OC,PC,QC,RC,SC,TC,UC,VC,WC,XC,YC,ZC,$C,aD,bD,cD,dD,eD,fD,gD,hD,iD,jD,kD,lD,mD,oD,pD,qD,rD,sD,tD,uD,vD,wD,xD,yD,zD,AD,BD,CD,DD,ED,FD,GD,HD,ID,JD,KD,LD,MD,ND,OD,PD,QD,RD,SD,TD,VD,WD,ZD,$D,bE,cE,HH,IH,JH,KH,LH,MH,NH,OH,JK,KK,LK,MK,NK,OK,PK,QK,RK,SK,BY,CY,DY,EY,FY};